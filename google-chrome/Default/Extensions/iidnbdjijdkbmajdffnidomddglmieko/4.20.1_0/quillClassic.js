try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9d1e0ad9-0b41-43e5-8b71-3559d23c661b",e._sentryDebugIdIdentifier="sentry-dbid-9d1e0ad9-0b41-43e5-8b71-3559d23c661b")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.20.1"};(()=>{"use strict";var e,t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function o(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i="chrome-active/user/closed_classic_quillbot",s="chrome-active/system/cloudflare_bot_detected",a="EXTENSION",c="GC",l="GENERATIVE_AI",u="PPHR",d=(o(o(o(o(o(o(o(o(o(o(e={},"lapr/system/dictionary_add_failure",c),"lapr/system/dictionary_add_success",c),"lapr/user/clicked_dictionary_add",c),"chrome-active/system/clicked_verify_bot_prompt",a),"chrome-active/system/clicked_privacy_prompt",a),"lapr/user/clicked_suggestions_edit",c),"chrome-active/user/discarded_text",l),"chrome-active/user/drafted_email",l),"chrome-active/user/edited_prompt_header",l),"chrome-active/user/inserted_text",l),o(o(o(o(o(o(o(o(o(o(e,"chrome-active/user/modified_output",l),"chrome-active/user/regenrated_output",l),"chrome-active/user/regenrated_subject_line",l),"chrome-active/system/extension_rendered",a),"chrome-active/system/shown_verify_bot_prompt",a),"chrome-active/system/shown_onboarding_helper",a),"pphr/system/shown_premium_modal",a),"chrome-active/system/shown_privacy_prompt",a),"chrome-active/system/unsupported_editor",a),"lapr/system/grammar_toggle_failure",c),o(o(o(o(o(o(o(o(o(o(e,"lapr/system/suggestions_edit_fail",c),"lapr/system/grammar_toggle_success",c),"lapr/system/suggestions_edit_success",c),"chrome-active/user/campaign_auth_premium_activated",a),"chrome-active/user/changed_ext_setting",a),"grmr/user/clicked_correct_all_button",c),"grmr/user/clicked_correct_error",c),"lapr/user/clicked_correct_suggested_word",c),"grmr/user/clicked_ignore_error",c),"chrome-active/user/clicked_like_button",a),o(o(o(o(o(o(o(o(o(o(e,"chrome-active/user/clicked_popup",a),i,a),"chrome-active/user/dismissed_onboarding_helper",a),"chrome-active/user/installed_extension",a),"chrome-active/user/loginSuccess",a),"chrome-active/user/logoutSuccess",a),"pphr/user/navigated_to_paraphraser",u),"comn/user/navigated_to_quillbot",u),"chrome-active/user/opened_classic_quillbot",a),"grmr/user/opened_correction_card",c),o(o(e,"pphr/user/selected_sentence_from_beams",u),"chrome-active/user/updated_extension",a),"TRACKING"),h="BUG_REPORTER",f="GET_SELECTION_ALL_FRAMES_IN_TAB";let p,_,b;var m,E,g,y,v,w,O,T,S,R,A,I,C,k,N,D,x,P,U,L,M,G;function j(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){j(i,r,o,s,a,"next",e)}function a(e){j(i,r,o,s,a,"throw",e)}s(void 0)}))}}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function X(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var Z=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(){var e,t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=arguments,t=z(t=r),H(e=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,K()?Reflect.construct(t,n||[],z(this).constructor):t.apply(this,n)),"socket",null),H(e,"oldSocket",null),H(e,"url",""),H(e,"onMessageCallback",(function(){})),H(e,"onCloseHandler",(function(){})),H(e,"onErrorHandler",(function(){})),H(e,"isOpen",(function(){var t;return(null==(t=e.socket)?void 0:t.readyState)===WebSocket.OPEN})),e}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&q(r,e),t=[{key:"setInitialConfig",value:function(e){var t=e.url,n=e.onMessageCallback;this.url=t,this.onMessageCallback=function(e){n(e)}}},{key:"setOnCloseHandler",value:function(e){this.onCloseHandler=e}},{key:"setOnErrorHandler",value:function(e){this.onErrorHandler=e}},{key:"connect",value:function(e){return F((function(){var t;return X(this,(function(n){return t=this,[2,new Promise((function(n,r){var o;if(!(null==(o=t.socket)?void 0:o.CONNECTING))try{var i=e.connectionSessionId,s=e.userToken,a=void 0===s?"":s,c=e.anonId,l=e.abIdV2,u=e.retry,d=e.platformType,h=t.url,f={connSessionId:void 0===i?void 0:i,anonId:c,abIdV2:l,platformType:d,retry:null==u?void 0:u.toString()},p=Object.keys(f).filter((function(e){return void 0!==f[e]&&""!==f[e]})).map((function(e){return"".concat(e,"=").concat(f[e])})).join("&");p&&(h+=(t.url.includes("?")?"&":"?")+p),t.oldSocket=t.socket,t.socket=a?new WebSocket(h,["Bearer",a]):new WebSocket(h),t.socket.onopen=function(){n(),t.oldSocket&&t.oldSocket.readyState!==WebSocket.CLOSED&&(t.oldSocket.onclose=function(){},t.oldSocket.onerror=function(){},t.oldSocket.close())},t.socket.onmessage=function(e){return t.onMessageCallback(e)},t.socket.onerror=function(e){t.onErrorHandler(e)},t.socket.onclose=function(e){t.onCloseHandler(e)}}catch(e){r(e)}}))]}))})).call(this)}},{key:"send",value:function(e){return F((function(){var t;return X(this,(function(n){return this.socket&&this.socket.readyState===WebSocket.OPEN?[2,null==(t=this.socket)?void 0:t.send(JSON.stringify(e))]:[2]}))})).call(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}}],n=[{key:"getInstance",value:function(){return r.instance||(r.instance=new r),r.instance}}],t&&B(r.prototype,t),n&&B(r,n),r}((function e(){var t;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");if(((null!=(t=e)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](this):this instanceof t)?this.constructor:void 0)===e)throw TypeError("Cannot construct ISocketClient instances directly")}));H(Z,"instance",void 0);var V=((m={}).UNAUTHORIZED="UNAUTHORIZED",m.INVALID_TOKEN="INVALID_TOKEN",m.TOKEN_EXPIRED="TOKEN_EXPIRED",m.FORCE_PASSWORD_CHANGE="FORCE_PASSWORD_CHANGE",m.TOKEN_REVOKED="TOKEN_REVOKED",m),W=((E={}).EDITOR_NOT_FOUND="EDITOR_NOT_FOUND",E.EDITOR_ALREADY_EXISTS="EDITOR_ALREADY_EXISTS",E.LANGUAGE_NOT_SUPPORTED="LANGUAGE_NOT_SUPPORTED",E),Y=((g={}).IDLE_TIMEOUT="IDLE_TIMEOUT",g.WS_CONNECTION_REJECTED="WS_CONNECTION_REJECTED",g.WS_CONNECTION_EXHAUSTED="WS_CONNECTION_EXHAUSTED",g.SERVER_SHUTDOWN="SERVER_SHUTDOWN",g.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",g),Q=((y={}).UNKNOWN="UNKNOWN",y.TIMEOUT="TIMEOUT",y.GENERIC="GENERIC",y.ANON_ID_NOT_PRESENT="ANON_ID_NOT_PRESENT",y.INVALID_OR_EXPIRED_SESSION="INVALID_OR_EXPIRED_SESSION",y.PING_FAILED="PING_FAILED",y),J=((v={}).PROCESSING_ERROR="PROCESSING_ERROR",v.TRANSPORT_NOT_INITIALIZED="TRANSPORT_NOT_INITIALIZED",v),$=((w={})[w.Continue=100]="Continue",w[w.SwitchingProtocols=101]="SwitchingProtocols",w[w.Processing=102]="Processing",w[w.EarlyHints=103]="EarlyHints",w[w.Ok=200]="Ok",w[w.Created=201]="Created",w[w.Accepted=202]="Accepted",w[w.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",w[w.NoContent=204]="NoContent",w[w.ResetContent=205]="ResetContent",w[w.PartialContent=206]="PartialContent",w[w.MultiStatus=207]="MultiStatus",w[w.AlreadyReported=208]="AlreadyReported",w[w.ImUsed=226]="ImUsed",w[w.MultipleChoices=300]="MultipleChoices",w[w.MovedPermanently=301]="MovedPermanently",w[w.Found=302]="Found",w[w.SeeOther=303]="SeeOther",w[w.NotModified=304]="NotModified",w[w.UseProxy=305]="UseProxy",w[w.Unused=306]="Unused",w[w.TemporaryRedirect=307]="TemporaryRedirect",w[w.PermanentRedirect=308]="PermanentRedirect",w[w.BadRequest=400]="BadRequest",w[w.Unauthorized=401]="Unauthorized",w[w.PaymentRequired=402]="PaymentRequired",w[w.Forbidden=403]="Forbidden",w[w.NotFound=404]="NotFound",w[w.MethodNotAllowed=405]="MethodNotAllowed",w[w.NotAcceptable=406]="NotAcceptable",w[w.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",w[w.RequestTimeout=408]="RequestTimeout",w[w.Conflict=409]="Conflict",w[w.Gone=410]="Gone",w[w.LengthRequired=411]="LengthRequired",w[w.PreconditionFailed=412]="PreconditionFailed",w[w.PayloadTooLarge=413]="PayloadTooLarge",w[w.UriTooLong=414]="UriTooLong",w[w.UnsupportedMediaType=415]="UnsupportedMediaType",w[w.RangeNotSatisfiable=416]="RangeNotSatisfiable",w[w.ExpectationFailed=417]="ExpectationFailed",w[w.ImATeapot=418]="ImATeapot",w[w.MisdirectedRequest=421]="MisdirectedRequest",w[w.UnprocessableEntity=422]="UnprocessableEntity",w[w.Locked=423]="Locked",w[w.FailedDependency=424]="FailedDependency",w[w.TooEarly=425]="TooEarly",w[w.UpgradeRequired=426]="UpgradeRequired",w[w.PreconditionRequired=428]="PreconditionRequired",w[w.TooManyRequests=429]="TooManyRequests",w[w.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",w[w.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",w[w.InternalServerError=500]="InternalServerError",w[w.NotImplemented=501]="NotImplemented",w[w.BadGateway=502]="BadGateway",w[w.ServiceUnavailable=503]="ServiceUnavailable",w[w.GatewayTimeout=504]="GatewayTimeout",w[w.HttpVersionNotSupported=505]="HttpVersionNotSupported",w[w.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",w[w.InsufficientStorage=507]="InsufficientStorage",w[w.LoopDetected=508]="LoopDetected",w[w.NotExtended=510]="NotExtended",w[w.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",w),ee=((O={}).INIT_EDITOR="init_editor",O.ON_CHANGE="on_change",O.ACK="ack",O.UPDATE_CONNECTION="update_connection",O.TERMINATE_EDITOR_GROUP="terminate_editor_group",O.SET_ACTIVE_EDITOR_GROUP="set_active_editor_group",O.PONG="pong",O),te=((T={}).ACCEPT_CHANGES="ACCEPT_CHANGES",T.USER_CHANGE="USER_CHANGE",T.SYSTEM_CHANGE="SYSTEM_CHANGED",T),ne=((S={}).GC="GC",S.GC_WITH_RECOMMENDATION="GC_WITH_RECOMMENDATION",S.NONE="NONE",S.RECOMMENDATION="RECOMMENDATION",S),re=((R={}).NOT_SENT="NOT_SENT",R.PENDING="PENDING",R.RESOLVED="RESOLVED",R),oe=((A={}).GC="GC",A.GC_RECOMMENDATION="GC_RECOMMENDATION",A.PPHR="PPHR",(I={}).GRAMMAR_CHECKER="GRAMMAR_CHECKER",(C={}).AUTH_SUCCESS="auth_success",C.GC_SUCCESS="gc_success",C.PROCESSING_SUCCESS="processing_success",C.ACK="ack",C.PING="ping",C),ie=((k={}).SENTENCE_SUGGESTION_GC_COMPLETED="sentence_suggestion_gc_completed",k.SENTENCE_SUGGESTION_GC="sentence_suggestion_gc",k.SENTENCE_SUGGESTIONS_RECOMMENDATION="sentence-suggestions-recommendation",(N={}).AUTH_FAILED="auth_failed",N.GC_FAILED="gc_failed",N.ACK_FAILED="ack_failed",N.PROCESSING_FAILED="processing_failed",N),se=((D={}).EDGE_EXT="edge-active",D.CHROME_EXT="chrome-active",D.DESKTOP="desktop-active",D.MOBILE="android-app",D.WEBAPP="webapp",(x={}).RESOLVE="resolve",x.REJECT="reject",x),ae=((P={}).SentenceSuggestionsGC="sentence-suggestions-gc",P.SentenceSplitter="sentence-splitter",P.Unknown="unknown",P.SentenceSuggestionsRecommendation="sentence-suggestions-recommendation",P.SentenceSuggestionsGCCompleted="sentence-suggestions-gc-completed",P.SkipProcessing="skip-processing",P),ce=((U={}).SENTRY="SENTRY",U.LT_QB_GC_ADAPTER="LT_QB_GC_ADAPTER",(L={}).NOT_INITIALIZED="NOT_INITIALIZED",L.CONNECTING="CONNECTING",L.CONNECTED="CONNECTED",L.READY="READY",L.ERRORED="ERRORED",L.RETRY_EXHAUSTED="RETRY_EXHAUSTED",L.AUTH_SUCCESS="AUTH_SUCCESS",L),le=((M={}).GC_MODEL_STATS="gc_model_stats",M.GC_RECOM_RES="gc_recom_res",M.UPDATE_CONN_ID="update_conn_id",M);function ue(e){return"".concat(e,"-").concat(Math.random().toString(36).substring(2,11))}var de="initialize",he=function(e){var t=e.requestEventId,n=e.pendingAcks,r=e.eventData,o=e.ackType;if(Ee({transport:e.transport,errorCode:null==r||null==(l=r.data)?void 0:l.errorCode}),n.has(t)){var i=n.get(t),s=i.resolve,a=i.reject,c=i.timeout;if(o===se.REJECT){var l,u,d=null==r||null==(u=r.data)?void 0:u.errorCode,h=!Object.values(V).includes(d)&&!Object.values(W).includes(d);a(h?{shouldRetry:h,errorData:r}:{errorData:r})}else s(r);c&&clearTimeout(c),n.delete(t)}},fe=function(e){return null==e?void 0:e.shouldRetry};function pe(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){pe(i,r,o,s,a,"next",e)}function a(e){pe(i,r,o,s,a,"throw",e)}s(void 0)}))}}function be(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function me(e){return _e((function(e){var t,n,r,o,i,s;return be(this,(function(a){switch(a.label){case 0:var c,l,u;return t=e.transport,n=e.error,Ee({transport:t,errorCode:null==n||null==(r=n.data)?void 0:r.errorCode}),i=function(){if(t.pendingAcks.has(de)){var e=t.pendingAcks.get(de),r=e.reject,o=e.timeout;o&&clearTimeout(o),r(n),t.pendingAcks.delete(de)}},"AUTHENTICATION"!==(null==n||null==(o=n.data)?void 0:o.errorNamespace)?[3,2]:[4,(c=t,l=null==n||null==(s=n.data)?void 0:s.errorCode,u=i,_e((function(){var e,t;return be(this,(function(n){switch(n.label){case 0:switch(c.setErroredState(l),l){case V.INVALID_TOKEN:return[3,1];case V.TOKEN_EXPIRED:return[3,2];case V.FORCE_PASSWORD_CHANGE:return[3,4];case V.TOKEN_REVOKED:return[3,5]}return[3,6];case 1:return u(),c.closeConnection(),[3,8];case 2:case 6:return[4,c.authHandlers.getIdToken(!0)];case 3:case 7:return n.sent(),c.reconnect(),[3,8];case 4:return u(),null==c||null==(e=c.authHandlers)||e.logout("EXTERNAL_MESSAGE"),[3,8];case 5:return u(),null==c||null==(t=c.authHandlers)||t.logout("EXTERNAL_MESSAGE"),[3,8];case 8:return[2]}}))}))())];case 1:return a.sent(),[2];case 2:return Object.values(V).includes(n.reason)||Object.values(Y).includes(n.reason)?(i(),[2]):(t.reconnect(),[2])}}))})).apply(this,arguments)}function Ee(e){var t=e.transport,n=e.errorCode;n===Q.INVALID_OR_EXPIRED_SESSION&&t.resetConnectionSession(n)}let ge=new WeakMap,ye=new WeakMap,ve=new WeakMap,we=new WeakMap,Oe=new WeakMap,Te={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ye.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ve.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Se(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Se(e){if(e instanceof IDBRequest){let t=new Promise(((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(Se(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&ge.set(t,e)})).catch((()=>{})),Oe.set(t,e),t}if(we.has(e))return we.get(e);let t=function(e){return"function"==typeof e?e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_||(_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Re(this),t),Se(ge.get(this))}:function(...t){return Se(e.apply(Re(this),t))}:function(t,...n){let r=e.call(Re(this),t,...n);return ve.set(r,t.sort?t.sort():[t]),Se(r)}:(e instanceof IDBTransaction&&function(e){if(ye.has(e))return;let t=new Promise(((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));ye.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Te):e)}(e);return t!==e&&(we.set(e,t),Oe.set(t,e)),t}let Re=e=>Oe.get(e),Ae=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ce=new Map;function ke(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ce.get(t))return Ce.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=Ie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Ae.includes(n))return;let i=async function(e,...t){let i=this.transaction(e,o?"readwrite":"readonly"),s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return Ce.set(t,i),i}function Ne(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function De(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Ne(i,r,o,s,a,"next",e)}function a(e){Ne(i,r,o,s,a,"throw",e)}s(void 0)}))}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}Te={...b=Te,get:(e,t,n)=>ke(e,t)||b.get(e,t,n),has:(e,t)=>!!ke(e,t)||b.has(e,t)};var Ue=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");xe(this,"dbPromise",void 0),xe(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let s=indexedDB.open(e,1),a=Se(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Se(s.result),e.oldVersion,e.newVersion,Se(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}("keyval-store",0,{upgrade:function(e){e.createObjectStore("keyval")}}):this.dbPromise=Promise.resolve(null)}return e=[{key:"get",value:function(e){return De((function(){var t;return Pe(this,(function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[2,null==(t=n.sent())?void 0:t.get("keyval",e)]}}))})).call(this)}},{key:"set",value:function(e,t){return De((function(){var n;return Pe(this,(function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(n=r.sent())?void 0:n.put("keyval",t,e)];case 2:return r.sent(),[2]}}))})).call(this)}},{key:"delete",value:function(e){return De((function(){var t;return Pe(this,(function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(t=n.sent())?void 0:t.delete("keyval",e)];case 2:return n.sent(),[2]}}))})).call(this)}},{key:"clear",value:function(){return De((function(){var e;return Pe(this,(function(t){switch(t.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(e=t.sent())?void 0:e.clear("keyval")];case 2:return t.sent(),[2]}}))})).call(this)}},{key:"deleteOldData",value:function(){return De((function(){var e,t,n,r,o,i,s,a;return Pe(this,(function(c){switch(c.label){case 0:return c.trys.push([0,7,,8]),t=+(new Date).setDate((new Date).getDate()-10),[4,this.dbPromise];case 1:return o=null==(r=null==(n=null==(e=c.sent())?void 0:e.transaction("cache"))?void 0:n.store)?void 0:r.index("date"),i=IDBKeyRange.upperBound(t),[4,null==o?void 0:o.openKeyCursor(i)];case 2:s=c.sent(),c.label=3;case 3:return s?[4,this.dbPromise]:[3,6];case 4:return null==(a=c.sent())||a.delete("cache",s.primaryKey),[4,s.continue()];case 5:return s=c.sent(),[3,3];case 6:return[3,8];case 7:return c.sent(),[3,8];case 8:return[2]}}))})).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Le(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Me(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Le(i,r,o,s,a,"next",e)}function a(e){Le(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Ge(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var je=new Map,Fe=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");(e="isAvailable")in this?Object.defineProperty(this,e,{value:!0,enumerable:!0,configurable:!0,writable:!0}):this[e]=!0}return e=[{key:"get",value:function(e){return Me((function(){return Ge(this,(function(t){return[2,je.get(e)]}))}))()}},{key:"set",value:function(e,t){return Me((function(){return Ge(this,(function(n){switch(n.label){case 0:return[4,je.set(e,t)];case 1:return n.sent(),[2]}}))}))()}},{key:"delete",value:function(e){return Me((function(){return Ge(this,(function(t){switch(t.label){case 0:return[4,je.delete(e)];case 1:return t.sent(),[2]}}))}))()}},{key:"clear",value:function(){return Me((function(){return Ge(this,(function(e){switch(e.label){case 0:return[4,je.clear()];case 1:return e.sent(),[2]}}))}))()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),Be=function(e,t,n){if("number"!=typeof n||n<=0)throw Error("timedPromise: Encountered invalid timeout value. Got ".concat(n));return new Promise((function(r,o){var i=setTimeout((function(){r({timedOut:!0,value:t})}),n);e.then((function(e){clearTimeout(i),r({timedOut:!1,value:e})})).catch((function(e){clearTimeout(i),o(e)}))}))};function He(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){He(i,r,o,s,a,"next",e)}function a(e){He(i,r,o,s,a,"throw",e)}s(void 0)}))}}function qe(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var Ke=ze((function(){var e,t;return qe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Be((e=new Ue).dbPromise,null,3e3)];case 1:return t=n.sent(),e.isAvailable&&t.value?(e.deleteOldData(),[2,e]):[3,3];case 2:return n.sent(),[3,3];case 3:return[2,new Fe]}}))}))(),Xe={get:function(e){return ze((function(){var t,n,r,o;return qe(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,Ke.then((function(t){return t.get(e)}))];case 1:return(t=i.sent())?(r=(n=JSON.parse(t)).value,(o=n.expireAt)?(new Date).getTime()>new Date(o).getTime()?[4,Ke.then((function(t){return t.delete(e)}))]:[3,3]:[2,r]):[2,void 0];case 2:case 4:return i.sent(),[2,void 0];case 3:return[2,r];case 5:return[2]}}))}))()},set:function(e,t,n){return ze((function(){var r;return qe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,Ke.then((function(n){return n.set(e,JSON.stringify({expireAt:r,value:t}))}))];case 1:return o.sent(),[3,3];case 2:return o.sent(),[2,void 0];case 3:return[2,void 0]}}))}))()},delete:function(e){return ze((function(){return qe(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Ke.then((function(t){return t.delete(e)}))];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2,void 0];case 3:return[2,void 0]}}))}))()}};function Ze(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}var Ve=function(e){var t;return(t=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Xe.get(e)];case 1:return[2,t.sent()||null];case 2:return[3,3];case 3:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(e){Ze(i,r,o,s,a,"next",e)}function a(e){Ze(i,r,o,s,a,"throw",e)}s(void 0)}))})()};function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");We(this,"observers",void 0),We(this,"isCompleted",void 0),We(this,"eventQueue",void 0),We(this,"errorQueue",void 0),We(this,"isSubscribed",void 0),this.observers=[],this.isCompleted=!1,this.eventQueue=[],this.errorQueue=null,this.isSubscribed=!1}return e=[{key:"isObsCompleted",value:function(){return this.isCompleted}},{key:"subscribe",value:function(e,t,n){var r=this,o={onNext:e,onComplete:t,onError:n};return this.observers.push(o),this.isSubscribed=!0,this.eventQueue.forEach((function(e){return o.onNext(e)})),this.errorQueue?(o.onError(this.errorQueue),this.clearObservers(),{unsubscribe:function(){}}):this.isCompleted?(o.onComplete(),this.clearObservers(),{unsubscribe:function(){}}):{unsubscribe:function(){r.observers=r.observers.filter((function(e){return e!==o}))}}}},{key:"next",value:function(e){this.isCompleted||(this.isSubscribed?this.observers.forEach((function(t){t.onNext&&t.onNext(e)})):this.eventQueue.push(e))}},{key:"complete",value:function(){this.isCompleted||(this.isSubscribed&&(this.observers.forEach((function(e){e.onComplete&&e.onComplete()})),this.clearObservers()),this.isCompleted=!0)}},{key:"error",value:function(e){this.isCompleted||(this.isSubscribed?(this.observers.forEach((function(t){t.onError&&t.onError(e)})),this.clearObservers()):this.errorQueue=e,this.isCompleted=!0)}},{key:"clearObservers",value:function(){this.observers=[]}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),Qe=function(e){try{var t=new Ye,n=0,r=!1;return Object.keys(e).forEach((function(o){e[o].subscribe((function(e){return t.next({data:e,source:o})}),(function(){++n!==Object.keys(e).length||r||t.complete()}),(function(e){r||(r=!0,t.error(e))}))})),t}catch(e){return new Ye}},Je=function(e){return JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}))}return e}({message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,name:null==e?void 0:e.name},(null==e?void 0:e.cause)&&{cause:null==e?void 0:e.cause}))};function $e(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nt=((G={}).INIT="INIT",G.GENERIC="GENERIC",G),rt=function(){var e,t;function n(){var e;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");tt(this,"_queues",(tt(e={},"INIT",{queue:[],isProcessing:!1}),tt(e,"GENERIC",{queue:[],isProcessing:!1}),e))}return e=[{key:"enqueue",value:function(e,t,n,r){var o=this._queues[e].queue,i=setTimeout((function(){var e=o.findIndex((function(e){return e.message.eventId===t.eventId}));-1!==e&&o.splice(e,1)}),r);o.push({message:t,waitForAck:n,timeoutId:i})}},{key:"processQueue",value:function(e,t){var n;return(n=function(){var n,r;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,(function(o){switch(o.label){case 0:if(!(n=this._queues[e])||n.isProcessing||0===n.queue.length)return[2];n.isProcessing=!0,o.label=1;case 1:if(!(n.queue.length>0))return[3,6];if(!(r=n.queue.shift()))return[3,5];clearTimeout(r.timeoutId),o.label=2;case 2:var i,s;return o.trys.push([2,4,,5]),[4,t((i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tt(e,t,n[t])}))}return e}({},r.message),s=s={eventTimeStamp:Date.now()},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(s)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})),i),r.waitForAck)];case 3:return o.sent(),[3,5];case 4:return o.sent(),[3,5];case 5:return[3,1];case 6:return n.isProcessing=!1,[2]}}))},function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function s(e){$e(i,r,o,s,a,"next",e)}function a(e){$e(i,r,o,s,a,"throw",e)}s(void 0)}))}).call(this)}}],t=[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}],e&&et(n.prototype,e),t&&et(n,t),n}();function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ot(e,t,n[t])}))}return e}function st(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}tt(rt,"_instance",void 0);var at=function(){var e;function t(e,n,r,o,i,s,a,c){var l,u=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");ot(this,"onComplete",(function(e,t,n){})),ot(this,"paraKey",void 0),ot(this,"timeout",void 0),ot(this,"gcObservable",void 0),ot(this,"recommendationObservable",void 0),ot(this,"isCompleted",!1),ot(this,"events",[]),ot(this,"error",void 0),ot(this,"timer",void 0),ot(this,"isTimedOut",!1),ot(this,"paraMeta",void 0),ot(this,"processingType",void 0),ot(this,"isSentenceReceived",!1),ot(this,"isGCCompleted",!1),ot(this,"sentenceReceivedTime",0),ot(this,"sentencesCount",0),ot(this,"receivedCount",0),this.paraMeta=i,this.paraKey=n,this.gcObservable=r,this.recommendationObservable=c,this.processingType=a,this.onComplete=function(t,n,r){u.isCompleted=!0,clearTimeout(u.timer),e(u.paraKey,u.events,r)},this.timeout=o,(null==s?void 0:s.aborted)&&(this.error=Error("Aborted"),this.gcObservable.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),null==(l=this.recommendationObservable)||l.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),this.onComplete(this.paraKey,this.events,Error("Aborted"))),null==s||s.addEventListener("abort",(function(){var e;u.isCompleted||(u.error=Error("Aborted"),u.gcObservable.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),null==(e=u.recommendationObservable)||e.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),u.onComplete(u.paraKey,u.events,Error("Aborted")))})),this.timer=setTimeout((function(){if(!u.isCompleted){if(u.isTimedOut=!0,u.isSentenceReceived){for(var e,t=u.gcObservable.isObsCompleted(),n=u.sentencesCount-u.receivedCount,r=t?u.recommendationObservable:u.gcObservable,o=t?u.getRecommendationFallbackResponse():u.getGCFallbackResponse(),i=0;i<n;i++)u.events.push(o),null==r||r.next(o);null==r||r.complete(),t||null==(e=u.recommendationObservable)||e.complete()}else u.fallback();u.onComplete(u.paraKey,u.events,Error("Timeout"))}}),this.timeout)}return e=[{key:"getSentenceSplitterFallbackResponse",value:function(){var e,t,n,r,o;return{type:ae.SentenceSplitter,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,sentenceRanges:[[0,(null==(o=this.paraMeta)||null==(r=o.text)?void 0:r.length)-1]],language:{name:"English (US)",code:"en-us",detectedLanguage:{name:"English (US)",code:"en-us",confidence:1,source:""}},errorCode:"TIMEOUT"}}},{key:"getGCFallbackResponse",value:function(){var e,t,n;return{type:ae.SentenceSuggestionsGC,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"getRecommendationFallbackResponse",value:function(){var e,t,n;return{type:ae.SentenceSuggestionsRecommendation,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"fallback",value:function(){var e;this.gcObservable.next(this.getSentenceSplitterFallbackResponse()),this.events.push(this.getSentenceSplitterFallbackResponse()),this.gcObservable.next(this.getGCFallbackResponse()),this.events.push(this.getGCFallbackResponse()),this.gcObservable.complete(),null==(e=this.recommendationObservable)||e.complete()}},{key:"next",value:function(e){if(!this.isTimedOut&&!this.isCompleted){var t,n,r,o,i,s=(null==e?void 0:e.isError)?null==e||null==(t=e.data)?void 0:t.errorCode:void 0;s&&(this.error=Error(s)),this.events.push(e);var a=st(it({},null==e?void 0:e.data),{isCached:null==e?void 0:e.isCached});if((null==a?void 0:a.type)===ae.SentenceSplitter){if(this.isSentenceReceived=!0,!(null==a||null==(r=a.sentenceRanges)?void 0:r.length))return void this.fallback();this.sentencesCount=null==a||null==(o=a.sentenceRanges)?void 0:o.length,this.gcObservable.next(a),this.processingType===ne.RECOMMENDATION&&(this.gcObservable.next({type:ae.SentenceSuggestionsGCCompleted}),this.gcObservable.complete())}(null==a?void 0:a.type)===ae.SentenceSuggestionsGC&&(this.receivedCount=(this.receivedCount||0)+1,this.gcObservable.next(a)),(null==a?void 0:a.type)===ae.SentenceSuggestionsGCCompleted&&(this.gcObservable.next(a),this.gcObservable.complete()),(null==a?void 0:a.type)===ae.SkipProcessing&&(this.gcObservable.complete(),null==(i=this.recommendationObservable)||i.complete()),(null==a?void 0:a.type)===ae.SentenceSuggestionsRecommendation&&this.recommendationObservable&&(this.receivedCount=(this.receivedCount||0)+1,this.recommendationObservable.next(a)),this.sentencesCount&&this.receivedCount&&this.sentencesCount===this.receivedCount&&this.recommendationObservable&&this.recommendationObservable.complete(),(null==e||null==(n=e.data)?void 0:n.errorCode)===W.LANGUAGE_NOT_SUPPORTED&&(this.error=Error("Language not supported"),this.gcObservable.error(e),this.recommendationObservable&&this.recommendationObservable.error(e)),this.gcObservable.isObsCompleted()&&(!this.recommendationObservable||this.recommendationObservable.isObsCompleted())&&this.onComplete(this.paraKey,this.events,this.error)}}},{key:"sendBulk",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;n<e.length;n++)if(e){var r=t?st(it({},e[n]),{isCached:t}):e[n];this.next(r)}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function ct(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function lt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){ct(i,r,o,s,a,"next",e)}function a(e){ct(i,r,o,s,a,"throw",e)}s(void 0)}))}}function ut(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var dt=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"executeWithExponentialBackoff",value:function(e,n,r,o,i,s){return lt((function(){var a,c,l,u,d,h,f,p,_,b;return ut(this,(function(m){switch(m.label){case 0:a=e,c=n,l=500,u=-1,m.label=1;case 1:if(!(u<a))return[3,8];m.label=2;case 2:return m.trys.push([2,4,,7]),[4,r({retryCount:u<=0?0:u})];case 3:return[2,m.sent()];case 4:if(o(d=m.sent()),s&&!s(d))throw d;return p=null==d||null==(f=d.errorData)||null==(h=f.data)?void 0:h.retryConfig,-1===u&&p&&(c=null!=(_=null==p?void 0:p.retryDelay)?_:n,a=null!=(b=null==p?void 0:p.maxRetry)?b:e),[4,null==i?void 0:i(d)];case 5:if(m.sent(),++u>=a)throw d;return[4,t.delay(l)];case 6:return m.sent(),l=Math.min(c*Math.pow(2,u+1),3e4),[3,7];case 7:return[3,1];case 8:return[2]}}))}))()}},{key:"delay",value:function(e){return lt((function(){return ut(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function ht(e,t,n){return(ht=bt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&pt(o,n.prototype),o}).apply(null,arguments)}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){var t="function"==typeof Map?new Map:void 0;return(_t=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ht(e,arguments,ft(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pt(n,e)})(e)}function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}var mt=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(e){var t,r,o,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return r=[e],t=ft(t=n),s=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,bt()?Reflect.construct(t,r||[],ft(this).constructor):t.apply(this,r)),i=void 0,(o="details")in s?Object.defineProperty(s,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[o]=i,s.name=s.constructor.name,s.details=a,Error.captureStackTrace&&Error.captureStackTrace(s,s.constructor),s}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&pt(n,e),t=[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," ").concat(Object.keys(this.details).length?"| Details: ".concat(JSON.stringify(this.details)):"")}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(_t(Error));function Et(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function gt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Et(i,r,o,s,a,"next",e)}function a(e){Et(i,r,o,s,a,"throw",e)}s(void 0)}))}}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vt(e,t,n[t])}))}return e}function Ot(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Tt(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var St=function(){var e,t;function n(){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");vt(this,"baseURL",""),vt(this,"defaultHeaders",{"Content-Type":"application/json"}),vt(this,"retryConfig",{maxRetries:0,retryDelay:1e3})}return e=[{key:"executeRequest",value:function(e,t){return gt((function(e,t){var n,r,o,i,s,a,c,l,u,d,h=arguments;return Tt(this,(function(f){switch(f.label){case 0:if(n=this,r=h.length>2&&void 0!==h[2]?h[2]:{},o=h.length>3&&void 0!==h[3]?h[3]:0,!this.baseURL)throw Error("Base URL not set. Please call setBaseURL before making requests.");f.label=1;case 1:return f.trys.push([1,7,,10]),i="".concat(this.baseURL).concat(t.startsWith("/")?t:"/".concat(t)),s={method:e,headers:wt({},this.defaultHeaders,r.headers)},r.body&&(s.body=JSON.stringify(r.body)),r.signal&&(s.signal=r.signal),[4,fetch(i,s)];case 2:a=f.sent(),f.label=3;case 3:return f.trys.push([3,5,,6]),[4,a.json()];case 4:return c=f.sent(),[3,6];case 5:return[3,6];case 6:if(!a.ok)throw null==(l=r.responseCallback)||l.call(r,a,c),new mt(c.message||"Request failed",c);return[2,c];case 7:return u=f.sent(),d=r.retries||this.retryConfig.maxRetries,o<d?[4,new Promise((function(e){return setTimeout(e,n.retryConfig.retryDelay)}))]:[3,9];case 8:return f.sent(),[2,this.executeRequest(e,t,r,o+1)];case 9:throw u;case 10:return[2]}}))})).apply(this,arguments)}},{key:"setBaseURL",value:function(e){return this.baseURL=e.endsWith("/")?e.slice(0,-1):e,this}},{key:"getBaseURL",value:function(){return this.baseURL}},{key:"setDefaultHeaders",value:function(e){return this.defaultHeaders=wt({"Content-Type":"application/json"},e),this}},{key:"setDefaultHeader",value:function(e,t){return this.defaultHeaders[e]=t,this}},{key:"removeDefaultHeader",value:function(e){return delete this.defaultHeaders[e],this}},{key:"getDefaultHeaders",value:function(){return wt({},this.defaultHeaders)}},{key:"setRetryConfig",value:function(e){return this.retryConfig=wt({},e),this}},{key:"getRetryConfig",value:function(){return wt({},this.retryConfig)}},{key:"get",value:function(e,t){return gt((function(){return Tt(this,(function(n){return[2,this.executeRequest("get",e,t)]}))})).call(this)}},{key:"post",value:function(e,t,n){return gt((function(){return Tt(this,(function(r){return[2,this.executeRequest("post",e,Ot(wt({},n),{body:t}))]}))})).call(this)}},{key:"put",value:function(e,t,n){return gt((function(){return Tt(this,(function(r){return[2,this.executeRequest("put",e,Ot(wt({},n),{body:t}))]}))})).call(this)}},{key:"delete",value:function(e,t){return gt((function(){return Tt(this,(function(n){return[2,this.executeRequest("delete",e,t)]}))})).call(this)}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}},{key:"resetInstance",value:function(){n.instance=null}}],e&&yt(n.prototype,e),t&&yt(n,t),n}();vt(St,"instance",null);var Rt="http_error",At="processing_error",It="transport_error",Ct="transport_not_initialized",kt="ack_timeout",Nt="socket_closed",Dt="transport-send",xt="transport-validate",Pt="transport-ready",Ut={socket:{enableQueue:!1,maxRetryAttempts:5,retryTimeAfterExhaust:3e5,connTimeout:4e4,reconnectDelay:500},fallback:{maxRetryAttempts:1,connectionRetryDelay:500,sendRetryDelay:500},message:{retryDelay:500,ackTimeout:3e3,queueTimeout:1e4,maxRetries:1,cacheTtl:1728e5,batchSize:10},observableTimeout:3e4,maxRetryEditorNotFound:3},Lt={socketUrl:"wss://edit-stream.quillbot.com",fallbackUrl:"https://edit-stream.quillbot.com"};function Mt(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Gt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Mt(i,r,o,s,a,"next",e)}function a(e){Mt(i,r,o,s,a,"throw",e)}s(void 0)}))}}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ft(e,t,n[t])}))}return e}function Ht(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function zt(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var qt=function(){var e,t;function n(){var e=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Ft(this,"connectionReattempts",0),Ft(this,"sendReattempts",0),Ft(this,"maxReconnectAttempts",Ut.fallback.maxRetryAttempts),Ft(this,"sendRetryDelay",Ut.fallback.sendRetryDelay),Ft(this,"trackEvent",(function(){})),Ft(this,"resetConnectionSession",(function(){})),Ft(this,"setConnectionSessionId",(function(){})),Ft(this,"httpClient",St.getInstance()),Ft(this,"authHandlers",{logout:function(){},getIdToken:function(){return Promise.resolve("")}}),Ft(this,"deviceMeta",{}),Ft(this,"userMeta",{anonId:"",abIdV2:""}),Ft(this,"headers",{"Content-Type":"application/json"}),Ft(this,"_responseCallback",(function(t,n){var r,o={eventName:Rt,eventData:{statusCode:t.status,requestUrl:t.url,errorCode:(null==n?void 0:n.errorCode)||"UNKNOWN"}};403===t.status&&(o.eventData.rayID=t.headers.get("cf-ray")||"",o.eventData.cfStatus=t.headers.get("cf-mitigated")),null==(r=e.trackEvent)||r.call(e,{tracking:o})}))}return e=[{key:"setHttpClient",value:function(e){this.httpClient=e}},{key:"setConfig",value:function(e){this.authHandlers=e.authHandlers,this.trackEvent=e.trackEvent,this.resetConnectionSession=e.resetConnectionSession,this.setConnectionSessionId=e.setConnectionSessionId,this.deviceMeta=e.deviceMeta,this.userMeta=e.userMeta,this.httpClient&&this.httpClient.setBaseURL&&this.httpClient.setBaseURL(e.baseUrl),this.maxReconnectAttempts=e.maxReconnectAttempts}},{key:"setHeaders",value:function(e){this.headers=Bt({},this.headers,e)}},{key:"handleAuthError",value:function(e){return Gt((function(){var t,n,r;return zt(this,(function(o){switch(o.label){case 0:return[V.TOKEN_EXPIRED].includes(null==(t=e.details)?void 0:t.errorCode)?[4,this.authHandlers.getIdToken(!0)]:[3,2];case 1:return o.sent(),[2];case 2:[V.FORCE_PASSWORD_CHANGE,V.TOKEN_REVOKED].includes(null==(n=e.details)?void 0:n.errorCode)&&(null==(r=this.authHandlers)||r.logout("EXTERNAL_MESSAGE")),o.label=3;case 3:throw e}}))})).call(this)}},{key:"establishConnection",value:function(e){return Gt((function(e){var t,n,r,o,i,s,a,c,l,u,d,h,f;return zt(this,(function(p){switch(p.label){case 0:if(t=e.connSessionId,n=e.connectionData,r=e.signal,!this.httpClient)throw Error("HTTP client not set");p.label=1;case 1:return p.trys.push([1,4,,10]),a=(s=this.httpClient).post,c=["/api/ws/fallback/connection-session",Bt({},n,t&&{connSessionId:t})],l={},u=[Bt({},this.headers)],d={},[4,this.authHandlers.getIdToken(!1)];case 2:return[4,a.apply(s,c.concat([(l.headers=Ht.apply(void 0,u.concat([(d.useridtoken=p.sent()||"",d)])),l)]))];case 3:return i=p.sent(),this.connectionReattempts=0,this.setConnectionSessionId(null==(o=i.data)?void 0:o.connSessionId),[2,i.data];case 4:return h=p.sent(),Object.values(V).includes(null==(f=h.details)?void 0:f.errorCode)?[4,this.handleAuthError(h)]:[3,6];case 5:p.sent(),p.label=6;case 6:return this.connectionReattempts<this.maxReconnectAttempts?(this.connectionReattempts++,[4,new Promise((function(e){return setTimeout(e,Ut.fallback.connectionRetryDelay)}))]):[3,8];case 7:return p.sent(),[2,this.establishConnection({connectionData:n,signal:r})];case 8:this.connectionReattempts=0,p.label=9;case 9:throw Error("Failed to establish connection after ".concat(this.maxReconnectAttempts," attempts"));case 10:return[2]}}))})).apply(this,arguments)}},{key:"sendEvent",value:function(e){return Gt((function(e){var t,n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,E,g,y,v,w,O;return zt(this,(function(T){switch(T.label){case 0:if(t=this,n=e.eventData,r=e.activeObservables,o=e.signal,!this.httpClient)throw Error("HTTP client not set");T.label=1;case 1:return T.trys.push([1,4,,12]),a=(s=this.httpClient).post,c=["/api/ws/fallback/event",n],l={},u=[Bt({},this.headers)],d={},[4,this.authHandlers.getIdToken(!1)];case 2:return[4,a.apply(s,c.concat([(l.headers=Ht.apply(void 0,u.concat([(d.useridtoken=T.sent()||"",d)])),l.signal=o,l.responseCallback=this._responseCallback,l)]))];case 3:return i=T.sent(),n.eventName===ee.ON_CHANGE&&(null==(h=i.data)||h.forEach((function(e){var t,n=r["".concat(e.requestEventId,"_").concat(null==(t=e.data)?void 0:t.changeIndex)];n&&n.next(e)}))),this.sendReattempts=0,[2,i.data];case 4:return g=null==(f=T.sent())||null==(_=f.errorData)||null==(p=_.data)?void 0:p.retryConfig,Object.values(V).includes(null==(b=f.details)?void 0:b.errorCode)?[4,this.handleAuthError(f)]:[3,6];case 5:T.sent(),T.label=6;case 6:if([W.EDITOR_NOT_FOUND,W.EDITOR_ALREADY_EXISTS].includes(null==(m=f.details)?void 0:m.errorCode)&&f.details.statusCode===$.InternalServerError)throw f;return[Q.INVALID_OR_EXPIRED_SESSION].includes(null==(E=f.details)?void 0:E.errorCode)?(this.resetConnectionSession(null==(y=f.details)?void 0:y.errorCode),[4,this.establishConnection({connectionData:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2,deviceMeta:this.deviceMeta},signal:o})]):[3,8];case 7:v=T.sent(),n.connSessionId=v.connSessionId,T.label=8;case 8:return g&&(this.maxReconnectAttempts=null!=(w=g.maxRetry)?w:this.maxReconnectAttempts,this.sendRetryDelay=null!=(O=g.retryDelay)?O:this.sendRetryDelay),this.sendReattempts<this.maxReconnectAttempts?(this.sendReattempts++,[4,new Promise((function(e){return setTimeout(e,t.sendRetryDelay)}))]):[3,10];case 9:return T.sent(),[2,this.sendEvent({eventData:n,activeObservables:r,signal:o})];case 10:this.sendReattempts=0,T.label=11;case 11:var S,R;return[2,{success:!1,message:(S=f,(null!=(R=Error)&&"undefined"!=typeof Symbol&&R[Symbol.hasInstance]?R[Symbol.hasInstance](S):S instanceof R)?f.message:"Unknown error occurred")}];case 12:return[2]}}))})).apply(this,arguments)}},{key:"disconnect",value:function(){this.connectionReattempts=0,this.sendReattempts=0}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}],e&&jt(n.prototype,e),t&&jt(n,t),n}();function Kt(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Xt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Kt(i,r,o,s,a,"next",e)}function a(e){Kt(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Vt(e,t,n[t])}))}return e}function Yt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Qt(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function Jt(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function $t(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function en(){return function(e,t,n){if(n&&n.value){var r=n.value;return n.value=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.socketState===ce.NOT_INITIALIZED){var o,i=Error();throw i.name=J.TRANSPORT_NOT_INITIALIZED,i.message="Transport layer not initialized",null==(o=this.trackEvent)||o.call(this,{tracking:{eventName:It,eventData:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}))}return e}({category:Ct,errorOrigin:xt},this.userMeta)}}),i}return r.apply(this,t)},n}}}Ft(qt,"instance",null);var tn=function(){var e,t;function n(){var e=this,t=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Vt(this,"_wsClient",void 0),Vt(this,"_queueManager",void 0),Vt(this,"_lastConnAttemptTime",0),Vt(this,"_activeObservables",{}),Vt(this,"_activeEditors",{}),Vt(this,"_onMessageCallback",void 0),Vt(this,"socketState",ce.NOT_INITIALIZED),Vt(this,"retryAttempts",0),Vt(this,"errorCode",void 0),Vt(this,"socketStateTimeout",void 0),Vt(this,"connectionSessionId",void 0),Vt(this,"pendingAcks",new Map),Vt(this,"deviceMeta",{}),Vt(this,"userMeta",{anonId:"",abIdV2:""}),Vt(this,"authHandlers",{logout:function(e){},getIdToken:function(){return Promise.resolve("")}}),Vt(this,"recoveryConfig",Ut),Vt(this,"connectionConfig",Lt),Vt(this,"_connectedInitially",!1),Vt(this,"_devMode",{debug:!1,fallback:!1}),Vt(this,"trackEvent",void 0),Vt(this,"_eventCallback",void 0),Vt(this,"notifyClient",(function(t){var n=t.eventName,r=t.data;e._eventCallback&&e._eventCallback({eventName:n,data:r})})),Vt(this,"_setConnectionSessionId",(function(t){e.connectionSessionId=t,e.notifyClient({eventName:le.UPDATE_CONN_ID,data:{connSessionId:t,ttl:e.recoveryConfig.message.cacheTtl}})})),Vt(this,"_messageHandler",(function(t){try{var n=JSON.parse(t.data);sn(n,e.pendingAcks,e._activeObservables),e._onMessageCallback&&e._onMessageCallback(n)}catch(e){}})),Vt(this,"_socketStateTimer",(function(){e.socketStateTimeout&&clearTimeout(e.socketStateTimeout),e.socketStateTimeout=setTimeout((function(){(e.socketState===ce.CONNECTING||e.socketState===ce.CONNECTED||e.socketState===ce.AUTH_SUCCESS)&&e.setErroredState(void 0)}),e.recoveryConfig.socket.connTimeout)})),Vt(this,"_getConnectionData",(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).retry;return Xt((function(){var t;return Jt(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[2,Wt(Yt(Wt({},this.userMeta),{userToken:t,platformType:this.deviceMeta.platformType}),this.connectionSessionId?{connectionSessionId:this.connectionSessionId}:{connectionSessionId:this.connectionConfig.connSessionId||""},void 0!==e&&{retry:e})]}}))})).call(t)})),Vt(this,"_initTransport",(function(){return Xt((function(){var e,t;return Jt(this,(function(n){switch(n.label){case 0:return e=this,[4,this._getConnectionData()];case 1:return t=n.sent(),[2,new Promise((function(n,r){try{if(e.socketState===ce.CONNECTING||e.socketState===ce.CONNECTED||e.socketState===ce.AUTH_SUCCESS)return;e.socketState=ce.CONNECTING,e._lastConnAttemptTime=Date.now(),e._socketStateTimer();var o=setTimeout((function(){e.socketState!==ce.READY&&e.pendingAcks.has(de)&&(r(Error("Connection timeout")),e.pendingAcks.delete(de))}),e.recoveryConfig.socket.connTimeout);e.pendingAcks.set(de,{resolve:n,reject:r,timeout:o}),e._wsClient.connect(t).then((function(){e.socketState=ce.CONNECTED}))}catch(e){r(e)}}))]}}))})).call(e)})),Vt(this,"initialize",(function(t){return Xt((function(){return Jt(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.userMeta=Wt({},this.userMeta,t.userMeta),this._setConfig(t),qt.getInstance().setConfig({authHandlers:this.authHandlers,trackEvent:this.trackEvent,resetConnectionSession:this.resetConnectionSession,setConnectionSessionId:this._setConnectionSessionId,deviceMeta:this.deviceMeta,userMeta:this.userMeta,maxReconnectAttempts:this.recoveryConfig.fallback.maxRetryAttempts,baseUrl:this.connectionConfig.fallbackUrl}),[4,this._initTransport()];case 1:return e.sent(),[3,3];case 2:return[3,3];case 3:return[2]}}))})).call(e)})),Vt(this,"reconnect",(function(){return Xt((function(){var e,t,n,r,o,i;return Jt(this,(function(s){switch(s.label){case 0:if(e=this,[ce.CONNECTING,ce.CONNECTED,ce.AUTH_SUCCESS,ce.READY].includes(this.socketState))return[2];if(!(this.retryAttempts>=this.recoveryConfig.socket.maxRetryAttempts))return[3,9];if(this.socketState=ce.RETRY_EXHAUSTED,this.connectionSessionId)return[3,8];if(!this.pendingAcks.has(de))return[3,7];n=(t=this.pendingAcks.get(de)).resolve,r=t.reject,o=t.timeout,s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,qt.getInstance().establishConnection({connectionData:{deviceMeta:this.deviceMeta,anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2}})];case 2:return i=s.sent(),n(i),[4,this.processPendingMessages()];case 3:return s.sent(),[3,6];case 4:return r(undefined),[3,6];case 5:return this.pendingAcks.delete(de),o&&clearTimeout(o),[7];case 6:return[3,8];case 7:s.label=8;case 8:return[2];case 9:return this.socketState=ce.CONNECTING,this._socketStateTimer(),setTimeout((function(){return Xt((function(){var e,t;return Jt(this,(function(n){switch(n.label){case 0:return e=this,this._lastConnAttemptTime=Date.now(),this.retryAttempts++,[4,this._getConnectionData({retry:this.retryAttempts})];case 1:return t=n.sent(),this._wsClient.connect(t).then((function(){return e.socketState=ce.CONNECTED})),[2]}}))})).call(e)}),Math.min(this.recoveryConfig.socket.reconnectDelay*Math.pow(2,this.retryAttempts),3e4)),[2]}}))})).call(e)})),Vt(this,"setReadyState",(function(t){return Xt((function(){var e,n,r,o,i,s,a,c;return Jt(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this._sendViaSocket({event:ee.UPDATE_CONNECTION,data:{deviceMeta:this.deviceMeta,userMeta:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2}}})];case 1:return l.sent(),this._setConnectionSessionId(t.data.connSessionId),this.socketState=ce.READY,this.socketStateTimeout&&clearTimeout(this.socketStateTimeout),this.retryAttempts=0,this.errorCode=void 0,this._connectedInitially=!0,this.pendingAcks.has(de)&&(n=(e=this.pendingAcks.get(de)).resolve,(r=e.timeout)&&clearTimeout(r),n(t),this.pendingAcks.delete(de)),[3,3];case 2:return(null==(o=l.sent())||null==(s=o.errorData)||null==(i=s.data)?void 0:i.errorCode)!==Q.TIMEOUT&&(null==(a=(c=this).trackEvent)||a.call(c,{tracking:{eventName:It,eventData:Yt(Wt({category:Ct,errorOrigin:Pt},this.userMeta),{error:Je(o)})}})),[3,3];case 3:return[2]}}))})).call(e)})),Vt(this,"sendAck",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.eventId,r=e.eventTimestamp,o={event:ee.ACK,data:null==e?void 0:e.data,eventId:n,eventTimestamp:r};t.send(o,!1)})),Vt(this,"setErroredState",(function(t){e.socketState=ce.ERRORED,t&&(e.errorCode=t),e.socketStateTimeout&&clearTimeout(e.socketStateTimeout)})),Vt(this,"resetConnectionSession",(function(t){e.connectionSessionId=void 0,e.notifyClient({eventName:le.UPDATE_CONN_ID,data:{connSessionId:""}}),t?e.setErroredState(t):(e.socketState=ce.NOT_INITIALIZED,e.retryAttempts=0,e.errorCode=void 0)})),Vt(this,"sendPong",(function(){e._sendViaSocket({event:ee.PONG,data:{}},!1)})),this._queueManager=rt.getInstance(),this._wsClient=Z.getInstance(),this._wsClient.setOnCloseHandler(this._onClose.bind(this)),this._wsClient.setOnErrorHandler(this._onError.bind(this))}return e=[{key:"setHttpClient",value:function(e){qt.getInstance().setHttpClient(e)}},{key:"setEventCallback",value:function(e){this._eventCallback=e}},{key:"setUserMeta",value:function(e){this.userMeta=Wt({},this.userMeta,e)}},{key:"enableDevMode",value:function(e){this._devMode=Wt({},this._devMode,e)}},{key:"getAuthToken",value:function(){return Xt((function(){return Jt(this,(function(e){switch(e.label){case 0:return[4,this.authHandlers.getIdToken(!1)];case 1:return[2,e.sent()||""]}}))})).call(this)}},{key:"_setConfig",value:function(e){var t=e.onMessageCallback,n=e.socketClient,r=e.storageClient,o=e.deviceMeta,i=e.authHandlers,s=e.recoveryConfig,a=e.connectionConfig;this._wsClient=n||this._wsClient,r&&ze((function(){return qe(this,(function(e){return Ke=Promise.resolve(r),[2]}))}))(),this.deviceMeta=o||this.deviceMeta,this.authHandlers=i||this.authHandlers,this.recoveryConfig=s||this.recoveryConfig,this.connectionConfig=a||this.connectionConfig,this.trackEvent=e.trackEvents,this._onMessageCallback=t,this._wsClient.setInitialConfig({onMessageCallback:this._messageHandler,url:this.connectionConfig.socketUrl})}},{key:"_sendViaSocket",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return Xt((function(){var n;return Jt(this,(function(r){return n=this,[2,new Promise((function(r,o){var i=e.eventTimestamp||Date.now(),s=e.eventId||ue(i),a=e.retryCount;if(t){var c=setTimeout((function(){var e;n.pendingAcks.has(s)&&(null==(e=n.pendingAcks.get(s))||e.reject({shouldRetry:!0,errorData:{data:{errorCode:Q.TIMEOUT}}}),n.pendingAcks.delete(s))}),n.recoveryConfig.message.ackTimeout);n.pendingAcks.set(s,{resolve:r,reject:o,timeout:c})}n._wsClient.send({event:e.event,data:Yt(Wt({},e.data),{eventId:s,eventTimestamp:i,retryCount:a})}),t||r(e)}))]}))})).call(this)}},{key:"_setActiveObservables",value:function(e,t){this._activeObservables[e]=t}},{key:"send",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0;return Xt((function(){var r,o,i,s,a,c,l,u;return Jt(this,(function(d){switch(d.label){case 0:if(r=this,this.connectionSessionId)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,5]),[4,this._initTransport()];case 2:case 4:return d.sent(),[3,5];case 3:return o=d.sent(),null==(i=(s=this).trackEvent)||i.call(s,{tracking:{eventName:It,eventData:Wt({category:Ct,errorOrigin:Dt,error:Je(o)},this.userMeta)}}),[4,qt.getInstance().establishConnection({connectionData:{deviceMeta:this.deviceMeta,anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2}})];case 5:return a=e.eventTimestamp||Date.now(),c=e.eventId||ue(a),e=Yt(Wt({},e),{eventId:c,eventTimestamp:a}),this.recoveryConfig.socket.enableQueue&&[ce.CONNECTING,ce.CONNECTED,ce.ERRORED,ce.AUTH_SUCCESS].includes(this.socketState)?(this.socketState===ce.ERRORED&&Object.values(Y).includes(this.errorCode)&&this.reconnect(),l=e.event===ee.INIT_EDITOR?nt.INIT:nt.GENERIC,this._queueManager.enqueue(l,e,t,this.recoveryConfig.message.queueTimeout),[2]):this.socketState!==ce.READY||!this._wsClient.isOpen()||this._devMode.fallback?[3,7]:[4,dt.executeWithExponentialBackoff(this.recoveryConfig.message.maxRetries,this.recoveryConfig.message.retryDelay,(function(n){return r._sendViaSocket(Yt(Wt({},e),{retryCount:n.retryCount}),t)}),(function(t){var n,o,i,s;(null==t||null==(o=t.errorData)||null==(n=o.data)?void 0:n.errorCode)===Q.TIMEOUT&&(null==(i=(s=r).trackEvent)||i.call(s,{tracking:{eventName:At,eventData:{category:kt,event:e.event,eventId:c}}}))}),(function(e){return Xt((function(){var t,n,r,o;return Jt(this,(function(i){switch(i.label){case 0:return(null==e||null==(n=e.errorData)||null==(t=n.data)?void 0:t.errorCode)!==Q.INVALID_OR_EXPIRED_SESSION?[3,2]:(this.resetConnectionSession(null==e||null==(o=e.errorData)||null==(r=o.data)?void 0:r.errorCode),[4,this._initTransport().catch((function(e){}))]);case 1:i.sent(),i.label=2;case 2:return[2]}}))})).call(r)}),fe)];case 6:return d.sent(),[3,11];case 7:u=this.errorCode,d.label=8;case 8:return d.trys.push([8,,10,11]),[4,qt.getInstance().sendEvent(Wt({eventData:{eventName:e.event,eventData:Yt(Wt({},e.data),{eventId:c,eventTimestamp:a}),connSessionId:this.connectionSessionId},activeObservables:this._activeObservables},n&&{signal:n}))];case 9:return d.sent(),[3,11];case 10:return setTimeout((function(){r.socketState===ce.ERRORED&&Object.values(Y).includes(u)&&r.reconnect(),(r.socketState===ce.RETRY_EXHAUSTED||r.socketState===ce.ERRORED)&&Date.now()>=r._lastConnAttemptTime+r.recoveryConfig.socket.retryTimeAfterExhaust&&(r.socketState=ce.RETRY_EXHAUSTED,r.retryAttempts=0,r.reconnect())}),0),[7];case 11:return[2]}}))})).call(this)}},{key:"updateEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Xt((function(){var n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,E,g,y,v,w,O,T,S,R,A,I,C,k,N,D,x;return Jt(this,(function(P){switch(P.label){case 0:return n=this,this._activeEditors[e.editorId]||(this._activeEditors[e.editorId]={editorContentVersion:"",lastSentHash:"",ackStatus:re.NOT_SENT}),(null==(r=this._activeEditors[e.editorId])?void 0:r.ackStatus)!==re.NOT_SENT?[3,2]:(this._activeEditors[e.editorId].ackStatus=re.PENDING,[4,this._initEditor({editorGroupId:e.editorGroupId,editorId:e.editorId,editorVersion:e.editorContentVersion,hostUrl:e.hostUrl||"",hostCategory:e.hostCategory||"",product:e.product}).catch((function(t){throw n._activeEditors[e.editorId].ackStatus=re.NOT_SENT,t}))]);case 1:P.sent(),this._activeEditors[e.editorId].ackStatus=re.RESOLVED,P.label=2;case 2:if(this._activeEditors[e.editorId].editorContentVersion=e.editorContentVersion,i=e.editorCompleteText,e.hostUrl,e.product,e.hostCategory,s=e.meta,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["editorCompleteText","hostUrl","product","hostCategory","meta"]),l=function(e){for(var t=2166136261,n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(c=i.slice(0,1e3)),u=this.recoveryConfig.message.batchSize,d=[],e.changes.length<=10)d.push(e.changes);else for(h=0;h<e.changes.length;h+=u)f=e.changes.slice(h,h+u),d.push(f);p=-1,_=Date.now(),b={},m={},E=(null==(o=this._activeEditors[e.editorId])?void 0:o.lastSentHash)!==l,g=!0,y=!1,v=void 0,P.label=3;case 3:P.trys.push([3,19,20,21]),w=d[Symbol.iterator](),P.label=4;case 4:if(g=(O=w.next()).done)return[3,18];T=O.value,p+=1,S={event:ee.ON_CHANGE,data:Yt(Wt({},a),{changes:T.filter((function(e){return""!==e.text})).map((function(t){return Wt({text:t.text,processingType:t.processingType},(null==e?void 0:e.acceptChangeType)&&{changeSentenceLength:t.changeSentenceLength,replacementText:t.replacementText})})),meta:Wt({},s,E&&{editorStartText:c})}),eventTimestamp:_,eventId:ue(_)},E&&(this._activeEditors[e.editorId].lastSentHash=l),R=0,A=!1,P.label=5;case 5:P.trys.push([5,12,,17]),C=function(t){var r,o,i,s,a,c,l,d;return Jt(this,(function(h){switch(h.label){case 0:return r=new Ye,b[o=p*u+t]=r,i=void 0,[ne.GC_WITH_RECOMMENDATION,ne.RECOMMENDATION].includes(T[t].processingType)&&(i=new Ye,m[o]=i),""!==T[t].text?[3,1]:(r.next({type:ae.SentenceSplitter,sentenceRanges:[[0,0]]}),r.complete(),i&&i.complete(),[3,3]);case 1:return s="".concat(S.eventId,"_").concat(R),[4,Ve(a="".concat(ee.ON_CHANGE,"-").concat(T[t].text,"-").concat(T[t].processingType,"-").concat(S.data.meta.userPreferredDialect,"-").concat(S.data.meta.language).concat(I.userMeta.premium?"-".concat(I.userMeta.premium):""))];case 2:l=(c=h.sent())&&Object.keys(c).length,d=new at((function(e,t,r){var o,i;delete n._activeObservables[e],l||r||(o=a,i=n.recoveryConfig.message.cacheTtl,Xe&&o&&(null==Xe||Xe.set(o,t,i)))}),s,r,I.recoveryConfig.observableTimeout,{text:T[t].text,editorId:e.editorId,editorGroupId:e.editorGroupId,changeIndex:R},e.signal,T[t].processingType,i),I._setActiveObservables(s,d),l?(d.sendBulk(c,!0),S.data.changes[R].processingType=ne.NONE):A=!0,R+=1,h.label=3;case 3:return[2]}}))},k=0,P.label=6;case 6:return k<T.length?(I=this,[5,function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(C(k))]):[3,9];case 7:P.sent(),P.label=8;case 8:return k+=1,[3,6];case 9:return S.data.changes.length>0?[4,this.send(S,A,e.signal)]:[3,11];case 10:P.sent(),P.label=11;case 11:case 16:return[3,17];case 12:return(void 0===W.EDITOR_NOT_FOUND||void 0===W.EDITOR_NOT_FOUND)&&t<Ut.maxRetryEditorNotFound?(delete this._activeEditors[null==e?void 0:e.editorId],D=i.split("\n\n").map((function(e){return{text:e,processingType:ne.NONE}})),[4,this.updateEditorContent(Yt(Wt({},e),{changes:D,changeType:te.USER_CHANGE}),t+1)]):[3,15];case 13:return P.sent(),[4,this.send(S,!0,e.signal)];case 14:return P.sent(),[3,16];case 15:throw N;case 17:return g=!0,[3,4];case 18:return[3,21];case 19:return x=P.sent(),y=!0,v=x,[3,21];case 20:try{g||null==w.return||w.return()}finally{if(y)throw v}return[7];case 21:return[2,{gcMergedObservable:Qe(b),recommendationMergedObservable:Qe(m)}]}}))})).call(this)}},{key:"updateConnectionSession",value:function(e){return Xt((function(){var t;return Jt(this,(function(n){switch(n.label){case 0:return t={event:ee.UPDATE_CONNECTION,data:{deviceMeta:Wt({},this.deviceMeta,null==e?void 0:e.deviceMeta),userMeta:Wt({},e.userMeta)}},[4,this.send(t,!0)];case 1:return n.sent(),[2]}}))})).call(this)}},{key:"_initEditor",value:function(e){return Xt((function(){var t;return Jt(this,(function(n){switch(n.label){case 0:return t={event:ee.INIT_EDITOR,data:e},[4,this.send(t).catch((function(e){if(e.errorData.data.errorCode!==W.EDITOR_ALREADY_EXISTS)throw e}))];case 1:return n.sent(),[2]}}))})).call(this)}},{key:"terminateEditorGroup",value:function(e){return Xt((function(){var t;return Jt(this,(function(n){switch(n.label){case 0:return t={event:ee.TERMINATE_EDITOR_GROUP,data:e},[4,this.send(t)];case 1:return n.sent(),[2]}}))})).call(this)}},{key:"setActiveEditorGroup",value:function(e){return Xt((function(){var t;return Jt(this,(function(n){switch(n.label){case 0:return t={event:ee.SET_ACTIVE_EDITOR_GROUP,data:{editorGroupId:e.editorGroupId}},[4,this.send(t)];case 1:return n.sent(),[2]}}))})).call(this)}},{key:"processPendingMessages",value:function(){return Xt((function(){var e;return Jt(this,(function(t){switch(t.label){case 0:return e=this,[4,this._queueManager.processQueue(nt.INIT,(function(t,n){return e.send(t,n)}))];case 1:return t.sent(),[4,this._queueManager.processQueue(nt.GENERIC,(function(t,n){return e.send(t,n)}))];case 2:return t.sent(),[2]}}))})).call(this)}},{key:"_onClose",value:function(e){var t,r;this.setErroredState((null==e?void 0:e.reason)||(null==e||null==(t=e.code)?void 0:t.toString())),me({error:e,transport:n.getInstance()}),null==(r=this.trackEvent)||r.call(this,{tracking:{eventName:It,eventData:{category:Nt,code:null==e?void 0:e.code,reason:null==e?void 0:e.reason,retryAttempt:this.retryAttempts,connectedInitially:this._connectedInitially}}})}},{key:"_onError",value:function(e){this.setErroredState(void 0)}},{key:"closeConnection",value:function(){this._wsClient.close()}}],t=[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}],e&&Zt(n.prototype,e),t&&Zt(n,t),n}();function nn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function rn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){nn(i,r,o,s,a,"next",e)}function a(e){nn(i,r,o,s,a,"throw",e)}s(void 0)}))}}function on(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}Vt(tn,"_instance",null),Qt([en(),$t("design:type",Function),$t("design:paramtypes",["undefined"==typeof OnChangeData?Object:OnChangeData,void 0]),$t("design:returntype",Promise)],tn.prototype,"updateEditorContent",null),Qt([en(),$t("design:type",Function),$t("design:paramtypes",["undefined"==typeof UpdateConnectionSessionData?Object:UpdateConnectionSessionData]),$t("design:returntype",Promise)],tn.prototype,"updateConnectionSession",null),Qt([en(),$t("design:type",Function),$t("design:paramtypes",["undefined"==typeof TabInfo?Object:TabInfo]),$t("design:returntype",Promise)],tn.prototype,"setActiveEditorGroup",null);var sn=function(e,t,n){return rn((function(){var r,o,i,s,a,c;return on(this,(function(l){switch(l.label){case 0:switch(r=e.requestEventId,o=e.event,i=tn.getInstance(),s=function(e){return rn((function(){var t,n;return on(this,(function(r){switch(r.label){case 0:i.socketState=ce.AUTH_SUCCESS,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.setReadyState(e)];case 2:return r.sent(),i.processPendingMessages(),[3,4];case 3:return t=r.sent(),i.setErroredState(null==t||null==(n=t.data)?void 0:n.errorCode),i.reconnect(),[3,4];case 4:return[2]}}))}))()},a=function(e){i.send({event:ee.ACK,data:{responseEventId:e.eventId}},!1)},c=function(e){try{var t=n["".concat(e.requestEventId,"_").concat(e.data.changeIndex)];if(!t)return;t.next(e)}catch(e){}},o){case oe.AUTH_SUCCESS:return[3,1];case oe.PROCESSING_SUCCESS:return[3,3];case oe.ACK:return[3,4];case ie.AUTH_FAILED:return[3,5];case ie.PROCESSING_FAILED:return[3,7];case ie.ACK_FAILED:return[3,8];case oe.PING:return[3,9]}return[3,10];case 1:return[4,s(e)];case 2:case 6:return l.sent(),[3,11];case 3:return c(e),a(e),[3,11];case 4:return he({requestEventId:r,pendingAcks:t,eventData:e,ackType:se.RESOLVE,transport:i}),[3,11];case 5:return[4,me({transport:i,error:e})];case 7:return c(e),[3,11];case 8:return he({requestEventId:r,pendingAcks:t,eventData:e,ackType:se.REJECT,transport:i}),[3,11];case 9:return i.sendPong(),[3,11];case 10:return[3,11];case 11:return[2]}}))}))()};!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="effa5b04-682f-5b71-bc57-e6cfd836df2e")}catch(e){}}();var an={key:"DE"},cn={key:"EN"},ln={key:"ES"},un={key:"FR"},dn=(cn.key,an.key,un.key,ln.key,cn.key,"https://quillbot.com"),hn="quillbot.com",fn="chrome-active",pn=!1,_n="https://collector.quillbot.com",bn=(Object.freeze({custom:"custom"}),Object.freeze({AB_TEST_EXPERIMENTS_API:"worker/abtest-experiments-info",CAMPAIGN_AUTH_API:"auth/campaign",DETECT_LANGUAGE:"utils/detect-language",DETECT_TONE_API:"utils/tone-detection",DICTIONARY_API:"config/lang/dictionary",EDITOR_CONFIGS:"chrome-extension/editor-settings",EXTENSION_CAMPAIGN_CHECK:"campaign/check",EXTENSION_HASH:"chrome-extension/extension-hash",EXTRACT_KEYWORDS:"utils/extract-keyword",GA_TRACKER:"collect",GA_TRACKER_DEBUGGER:"debug/collect",GC_ERROR_CATEGORY:"config/lang/gc-preferences",GENERATIVE_AI_API:"utils/generative-ai",GET_ACCOUNT_DETAILS:"auth/get-account-details",GET_USER_DETAILS:"auth/get-user-details",GRAMMAR_CHECKER_API:"utils/grammar-check",HEALTH_CHECK:"chrome-extension/health-check",ISSUE_TOKEN_API:"auth/issue-token",MODES_DETAILS:"chrome-extension/modes-details",PARAPHRASE:"paraphraser/single-paraphrase",PARAPHRASE_PHRASE:"utils/paraphrase-phrase",PASSIVE_TO_ACTIVE:"utils/active-voice",SENTENCE_SPLITTER:"utils/sentence-spiltter",SNEAK_PEEK_QUOTA_URL:"sneak-peek/recommendation/remaining-quota",SPAM_CHECK:"auth/spam-check",SUGGESTED_WORDS_API:"config/lang/suggested-words",SUMMARIZE_PARA:"summarizer/summarize-para",TESTING_API:"system/info",UPDATE_USER_DETAILS:"auth/update-demographic-information",UPDATE_USER_METRICS_API:"auth/update-user-metric",UPDATE_USER_PROFILE:"auth/update-user-profile",USER_LANGUAGE_CONFIG_API:"config/lang"})),mn=(bn.GRAMMAR_CHECKER_API,bn.PARAPHRASE,bn.SENTENCE_SPLITTER,bn.DETECT_TONE_API,bn.SUMMARIZE_PARA,bn.EXTRACT_KEYWORDS,bn.PASSIVE_TO_ACTIVE,bn.PARAPHRASE_PHRASE,bn.DETECT_LANGUAGE,function(e){return e.advanced_gc="advanced_gc",e.cf_cookie="cf_cookie",e.ext_bts_aug_24="ext_bts_aug_24",e.ext_changelog_campaign="ext_changelog_campaign",e.ext_gc_calls_batching_mar24="ext_gc_calls_batching_mar24",e.ext_gpt_v2_premium_users_gmail="ext_gpt_v2_premium_users_gmail",e.ext_integration_test="ext_integration_test",e.ext_lollipop="ext_lollipop",e.ext_on_device_lang_detect="ext_on_device_lang_detect",e["ext-bts-24"]="ext-bts-24",e["ext-gpt-v2-premium-users-gmail"]="ext-gpt-v2-premium-users-gmail",e["ext-premium-gpt-quota"]="ext-premium-gpt-quota",e["ext-tones-gmail-conversion"]="ext-tones-gmail-conversion",e.extBFCM2024="extBFCM2024",e.extension_reviews_campaign_q2_23="extension_reviews_campaign_q2_23",e.extension_test="extension_test",e["extension-follow-widget-mode"]="extension-follow-widget-mode",e["extension-follow-widget-with-quick-mode"]="extension-follow-widget-with-quick-mode",e["pphr-usage-chrome-ext"]="pphr-usage-chrome-ext",e}({})),En=(Object.freeze({CHROME_STORAGE_KEY:"detectedLanguagesData",DETECTED_LANGUAGES_FROM_BROWSER:"detectedLanguagesFromBrowser",DETECTED_LANGUAGES_FROM_CHROME_I18:"detectedLanguagesFromChromei18",DETECTED_LANGUAGES_FROM_COUNTRY:"detectedLanguagesFromCountry",DETECTED_LANGUAGES_FROM_WEBSITE:"detectedLanguagesFromWebsite",TIMEOUT:1e3,USER_PREFERRED_LANGUAGES:"userPreferredLanguages"}),Object.freeze({CONCURRENT_SESSION:"CONCURRENT_SESSION",COOKIE_NOT_FOUND:"COOKIE_NOT_FOUND",EXTERNAL_MESSAGE:"EXTERNAL_MESSAGE",EXTERNAL_MESSAGE_UID_MISMATCH:"EXTERNAL_MESSAGE_UID_MISMATCH",USER_MISMATCH:"USER_MISMATCH"}),Object.freeze({language:"default",product:"default"}),Object.freeze({collectUserTextualData:"collectUserTextualData",eventTime:"eventTime",isNewUser:"isNewUser",key:"data-opt-in",timeout:3e3,userShownConsentPrompt:"userShownConsentPrompt"}),Object.freeze({campaignID:"extension_campaign_gc_survey_2023_mar",eventTime:"eventTime",hostOriginUsed:"hostOriginUsed",key:"gc-survey",timeout:3e3,userShownSurveyModal:"userShownSurveyModal"}),Object.freeze({charLimit:250,charLimitWithThreshold:1e3}),Object.freeze({completePageClass:".kix-page",docClass:".kix-paginateddocumentplugin",editorClass:".kix-appview-editor",hostname:"docs.google.com",pageClass:".kix-page-column",pageEle:"docs-page kix-page-paginated kix-page-paginated-box-shadow docs-page-portrait",pageID:"data-quillbot-pageId",pageIDAttribute:"data-quillbot-pageid",paragraphClass:".kix-paragraphrenderer",paraID:"data-quillbot-paraid",selectionAttribute:".kix-selection-overlay",sidebarMenuBtnClass:"app-switcher-button"})),gn=Object.freeze({hostname:"mail.google.com"}),yn=(Object.freeze({editorID:"editorID",eventTime:"eventTime",isActive:"isActive",key:mn["pphr-usage-chrome-ext"],lastActionTimeStamp:Date.now(),lastEditorDetected:"lastEditorDetected",shownPromptOn:"shownPromptOn",userActionCount:"userActionCount",variants:{completes_5th_sentence:{allowedHostnames:[En.hostname,gn.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"completes_5th_sentence"},extension_rendered_on_doc:{allowedHostnames:[En.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"extension_rendered_on_doc"},hovers_over_paraphraser_button:{allowedHostnames:[En.hostname,gn.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"hovers_over_paraphraser_button"},pastes_text:{allowedHostnames:[En.hostname,gn.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"pastes_text"},selects_text:{allowedHostnames:[En.hostname,gn.hostname],checkPromptOn:[1,5,10],enableDayCheck:!1,key:"selects_text"},shares_doc:{allowedHostnames:[En.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"shares_doc"}}}),Object.freeze({captcha:"quillbot-recaptcha",card:"quillbot-card",followWidget:"quillbot-extension-follow-widget",genai_toolbar:"quillbot-extension-generative-toolbar-btn",genAIButton:"quillbot-extension-generative-btn",genAIDraftView:"quillbot-extension-generative-draft-view",genAIQuickActions:"quillbot-extension-generative-quick-actions",genAIToolbarButton:"quillbot-extension-generative-toolbar-btn",highlights:"quillbot-extension-highlights",loader:"quillbot-loader",portal:"quillbot-extension-portal",privacy:"quillbot-privacy",reloader:"quillbot-extension-reloader",root:"quillbot-extension-root",sidebar:"quillbot-gdocs-sidebar",support:"quillbot-support",widget:"quillbot-extension"}),o(o(o({},$.Forbidden,s),$.ServiceUnavailable,s),$.TooManyRequests,"chrome-active/system/too_many_requests"),"https://".concat(hn,"/learn-more"),function(){var e="https://chromewebstore.google.com/detail/quillbot-ai-writing-and-g/iidnbdjijdkbmajdffnidomddglmieko/reviews?utm_source=chrome-active&utm_medium=referral&utm_campaign=feedback_review_cta_link";return"edge-active"===fn&&(e="https://microsoftedge.microsoft.com/addons/detail/cphpplikchcioccedpjacdanfibnimmh"),e});function vn(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function wn(e,t){return function(){return e.apply(t,arguments)}}"function"==typeof SuppressedError&&SuppressedError;const{toString:On}=Object.prototype,{getPrototypeOf:Tn}=Object,Sn=(Rn=Object.create(null),e=>{const t=On.call(e);return Rn[t]||(Rn[t]=t.slice(8,-1).toLowerCase())});var Rn;const An=e=>(e=e.toLowerCase(),t=>Sn(t)===e),In=e=>t=>typeof t===e,{isArray:Cn}=Array,kn=In("undefined");const Nn=An("ArrayBuffer");const Dn=In("string"),xn=In("function"),Pn=In("number"),Un=e=>null!==e&&"object"==typeof e,Ln=e=>{if("object"!==Sn(e))return!1;const t=Tn(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Mn=An("Date"),Gn=An("File"),jn=An("Blob"),Fn=An("FileList"),Bn=An("URLSearchParams"),[Hn,zn,qn,Kn]=["ReadableStream","Request","Response","Headers"].map(An);function Xn(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),Cn(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(r=0;r<i;r++)s=o[r],t.call(null,e[s],s,e)}}function Zn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const Vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t.g,Wn=e=>!kn(e)&&e!==Vn;const Yn=(Qn="undefined"!=typeof Uint8Array&&Tn(Uint8Array),e=>Qn&&e instanceof Qn);var Qn;const Jn=An("HTMLFormElement"),$n=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),er=An("RegExp"),tr=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Xn(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)};const nr=An("AsyncFunction"),rr=(or="function"==typeof setImmediate,ir=xn(Vn.postMessage),or?setImmediate:ir?(sr=`axios@${Math.random()}`,ar=[],Vn.addEventListener("message",(({source:e,data:t})=>{e===Vn&&t===sr&&ar.length&&ar.shift()()}),!1),e=>{ar.push(e),Vn.postMessage(sr,"*")}):e=>setTimeout(e));var or,ir,sr,ar;const cr="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Vn):"undefined"!=typeof process&&process.nextTick||rr;var lr={isArray:Cn,isArrayBuffer:Nn,isBuffer:function(e){return null!==e&&!kn(e)&&null!==e.constructor&&!kn(e.constructor)&&xn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||xn(e.append)&&("formdata"===(t=Sn(e))||"object"===t&&xn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Nn(e.buffer),t},isString:Dn,isNumber:Pn,isBoolean:e=>!0===e||!1===e,isObject:Un,isPlainObject:Ln,isReadableStream:Hn,isRequest:zn,isResponse:qn,isHeaders:Kn,isUndefined:kn,isDate:Mn,isFile:Gn,isBlob:jn,isRegExp:er,isFunction:xn,isStream:e=>Un(e)&&xn(e.pipe),isURLSearchParams:Bn,isTypedArray:Yn,isFileList:Fn,forEach:Xn,merge:function e(){const{caseless:t}=Wn(this)&&this||{},n={},r=(r,o)=>{const i=t&&Zn(n,o)||o;Ln(n[i])&&Ln(r)?n[i]=e(n[i],r):Ln(r)?n[i]=e({},r):Cn(r)?n[i]=r.slice():n[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Xn(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(Xn(t,((t,r)=>{n&&xn(t)?e[r]=wn(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Tn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Sn,kindOfTest:An,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Cn(e))return e;let t=e.length;if(!Pn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Jn,hasOwnProperty:$n,hasOwnProp:$n,reduceDescriptors:tr,freezeMethods:e=>{tr(e,((t,n)=>{if(xn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];xn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Cn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Zn,global:Vn,isContextDefined:Wn,isSpecCompliantForm:function(e){return!!(e&&xn(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Un(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Cn(e)?[]:{};return Xn(e,((e,t)=>{const i=n(e,r+1);!kn(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:nr,isThenable:e=>e&&(Un(e)||xn(e))&&xn(e.then)&&xn(e.catch),setImmediate:rr,asap:cr};function ur(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}lr.inherits(ur,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lr.toJSONObject(this.config),code:this.code,status:this.status}}});const dr=ur.prototype,hr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{hr[e]={value:e}})),Object.defineProperties(ur,hr),Object.defineProperty(dr,"isAxiosError",{value:!0}),ur.from=(e,t,n,r,o,i)=>{const s=Object.create(dr);return lr.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ur.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};function fr(e){return lr.isPlainObject(e)||lr.isArray(e)}function pr(e){return lr.endsWith(e,"[]")?e.slice(0,-2):e}function _r(e,t,n){return e?e.concat(t).map((function(e,t){return e=pr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const br=lr.toFlatObject(lr,{},null,(function(e){return/^is[A-Z]/.test(e)}));function mr(e,t,n){if(!lr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=lr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!lr.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&lr.isSpecCompliantForm(t);if(!lr.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(lr.isDate(e))return e.toISOString();if(!a&&lr.isBlob(e))throw new ur("Blob is not supported. Use a Buffer instead.");return lr.isArrayBuffer(e)||lr.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let a=e;if(e&&!o&&"object"==typeof e)if(lr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(lr.isArray(e)&&function(e){return lr.isArray(e)&&!e.some(fr)}(e)||(lr.isFileList(e)||lr.endsWith(n,"[]"))&&(a=lr.toArray(e)))return n=pr(n),a.forEach((function(e,r){!lr.isUndefined(e)&&null!==e&&t.append(!0===s?_r([n],r,i):null===s?n:n+"[]",c(e))})),!1;return!!fr(e)||(t.append(_r(o,n,i),c(e)),!1)}const u=[],d=Object.assign(br,{defaultVisitor:l,convertValue:c,isVisitable:fr});if(!lr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!lr.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),lr.forEach(n,(function(n,i){!0===(!(lr.isUndefined(n)||null===n)&&o.call(t,n,lr.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function Er(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function gr(e,t){this._pairs=[],e&&mr(e,this,t)}const yr=gr.prototype;function vr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wr(e,t,n){if(!t)return e;const r=n&&n.encode||vr;lr.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):lr.isURLSearchParams(t)?t.toString():new gr(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}yr.append=function(e,t){this._pairs.push([e,t])},yr.toString=function(e){const t=e?function(t){return e.call(this,t,Er)}:Er;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class Or{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){lr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var Tr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sr={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:gr,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Rr="undefined"!=typeof window&&"undefined"!=typeof document,Ar="object"==typeof navigator&&navigator||void 0,Ir=Rr&&(!Ar||["ReactNative","NativeScript","NS"].indexOf(Ar.product)<0),Cr="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,kr=Rr&&window.location.href||"http://localhost";var Nr={...Object.freeze({__proto__:null,hasBrowserEnv:Rr,hasStandardBrowserWebWorkerEnv:Cr,hasStandardBrowserEnv:Ir,navigator:Ar,origin:kr}),...Sr};function Dr(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&lr.isArray(r)?r.length:i,a)return lr.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&lr.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&lr.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(lr.isFormData(e)&&lr.isFunction(e.entries)){const n={};return lr.forEachEntry(e,((e,r)=>{t(function(e){return lr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const xr={transitional:Tr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=lr.isObject(e);o&&lr.isHTMLForm(e)&&(e=new FormData(e));if(lr.isFormData(e))return r?JSON.stringify(Dr(e)):e;if(lr.isArrayBuffer(e)||lr.isBuffer(e)||lr.isStream(e)||lr.isFile(e)||lr.isBlob(e)||lr.isReadableStream(e))return e;if(lr.isArrayBufferView(e))return e.buffer;if(lr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return mr(e,new Nr.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Nr.isNode&&lr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=lr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return mr(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(lr.isString(e))try{return(t||JSON.parse)(e),lr.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(lr.isResponse(e)||lr.isReadableStream(e))return e;if(e&&lr.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw ur.from(e,ur.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nr.classes.FormData,Blob:Nr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lr.forEach(["delete","get","head","post","put","patch"],(e=>{xr.headers[e]={}}));const Pr=lr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Ur=Symbol("internals");function Lr(e){return e&&String(e).trim().toLowerCase()}function Mr(e){return!1===e||null==e?e:lr.isArray(e)?e.map(Mr):String(e)}function Gr(e,t,n,r,o){return lr.isFunction(r)?r.call(this,t,n):(o&&(t=n),lr.isString(t)?lr.isString(r)?-1!==t.indexOf(r):lr.isRegExp(r)?r.test(t):void 0:void 0)}class jr{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Lr(t);if(!o)throw new Error("header name must be a non-empty string");const i=lr.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Mr(e))}const i=(e,t)=>lr.forEach(e,((e,n)=>o(e,n,t)));if(lr.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(lr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Pr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(lr.isHeaders(e))for(const[t,r]of e.entries())o(r,t,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=Lr(e)){const n=lr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(lr.isFunction(t))return t.call(this,e,n);if(lr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Lr(e)){const n=lr.findKey(this,e);return!(!n||void 0===this[n]||t&&!Gr(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Lr(e)){const o=lr.findKey(n,e);!o||t&&!Gr(0,n[o],o,t)||(delete n[o],r=!0)}}return lr.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Gr(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return lr.forEach(this,((r,o)=>{const i=lr.findKey(n,o);if(i)return t[i]=Mr(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete t[o],t[s]=Mr(r),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return lr.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&lr.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Ur]=this[Ur]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Lr(e);t[r]||(!function(e,t){const n=lr.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return lr.isArray(e)?e.forEach(r):r(e),this}}function Fr(e,t){const n=this||xr,r=t||n,o=jr.from(r.headers);let i=r.data;return lr.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function Br(e){return!(!e||!e.__CANCEL__)}function Hr(e,t,n){ur.call(this,null==e?"canceled":e,ur.ERR_CANCELED,t,n),this.name="CanceledError"}function zr(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ur("Request failed with status code "+n.status,[ur.ERR_BAD_REQUEST,ur.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),lr.reduceDescriptors(jr.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),lr.freezeMethods(jr),lr.inherits(Hr,ur,{__CANCEL__:!0});const qr=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];o||(o=c),n[i]=a,r[i]=c;let u=s,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const s=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?s(e,t):(n=e,r||(r=setTimeout((()=>{r=null,s(n)}),i-a)))},()=>n&&s(n)]}((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,c=o(a);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},Kr=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Xr=e=>(...t)=>lr.asap((()=>e(...t)));var Zr=Nr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Nr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Nr.origin),Nr.navigator&&/(msie|trident)/i.test(Nr.navigator.userAgent)):()=>!0,Vr=Nr.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];lr.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),lr.isString(r)&&s.push("path="+r),lr.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Wr(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Yr=e=>e instanceof jr?{...e}:e;function Qr(e,t){t=t||{};const n={};function r(e,t,n,r){return lr.isPlainObject(e)&&lr.isPlainObject(t)?lr.merge.call({caseless:r},e,t):lr.isPlainObject(t)?lr.merge({},t):lr.isArray(t)?t.slice():t}function o(e,t,n,o){return lr.isUndefined(t)?lr.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!lr.isUndefined(t))return r(void 0,t)}function s(e,t){return lr.isUndefined(t)?lr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>o(Yr(e),Yr(t),0,!0)};return lr.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,s=i(e[r],t[r],r);lr.isUndefined(s)&&i!==a||(n[r]=s)})),n}var Jr=e=>{const t=Qr({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=jr.from(a),t.url=wr(Wr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),lr.isFormData(r))if(Nr.hasStandardBrowserEnv||Nr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Nr.hasStandardBrowserEnv&&(o&&lr.isFunction(o)&&(o=o(t)),o||!1!==o&&Zr(t.url))){const e=i&&s&&Vr.read(s);e&&a.set(i,e)}return t};var $r="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Jr(e);let o=r.data;const i=jr.from(r.headers).normalize();let s,a,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let _=new XMLHttpRequest;function b(){if(!_)return;const r=jr.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders());zr((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:r,config:e,request:_}),_=null}_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout,"onloadend"in _?_.onloadend=b:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(b)},_.onabort=function(){_&&(n(new ur("Request aborted",ur.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new ur("Network Error",ur.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||Tr;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new ur(t,o.clarifyTimeoutError?ur.ETIMEDOUT:ur.ECONNABORTED,e,_)),_=null},void 0===o&&i.setContentType(null),"setRequestHeader"in _&&lr.forEach(i.toJSON(),(function(e,t){_.setRequestHeader(t,e)})),lr.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),d&&"json"!==d&&(_.responseType=r.responseType),f&&([c,u]=qr(f,!0),_.addEventListener("progress",c)),h&&_.upload&&([a,l]=qr(h),_.upload.addEventListener("progress",a),_.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{_&&(n(!t||t.type?new Hr(null,e,_):t),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);m&&-1===Nr.protocols.indexOf(m)?n(new ur("Unsupported protocol "+m+":",ur.ERR_BAD_REQUEST,e)):_.send(o||null)}))};const eo=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof ur?t:new Hr(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new ur(`timeout ${t} of ms exceeded`,ur.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=r;return a.unsubscribe=()=>lr.asap(s),a}},to=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},no=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},ro=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of no(e))yield*to(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},oo="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,io=oo&&"function"==typeof ReadableStream,so=oo&&("function"==typeof TextEncoder?(ao=new TextEncoder,e=>ao.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ao;const co=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},lo=io&&co((()=>{let e=!1;const t=new Request(Nr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),uo=io&&co((()=>lr.isReadableStream(new Response("").body))),ho={stream:uo&&(e=>e.body)};var fo;oo&&(fo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ho[e]&&(ho[e]=lr.isFunction(fo[e])?t=>t[e]():(t,n)=>{throw new ur(`Response type '${e}' is not supported`,ur.ERR_NOT_SUPPORT,n)})})));const po=async(e,t)=>{const n=lr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(lr.isBlob(e))return e.size;if(lr.isSpecCompliantForm(e)){const t=new Request(Nr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return lr.isArrayBufferView(e)||lr.isArrayBuffer(e)?e.byteLength:(lr.isURLSearchParams(e)&&(e+=""),lr.isString(e)?(await so(e)).byteLength:void 0)})(t):n};var _o=oo&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Jr(e);l=l?(l+"").toLowerCase():"text";let f,p=eo([o,i&&i.toAbortSignal()],s);const _=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&lo&&"get"!==n&&"head"!==n&&0!==(b=await po(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(lr.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Kr(b,qr(Xr(c)));r=ro(n.body,65536,e,t)}}lr.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(f);const s=uo&&("stream"===l||"response"===l);if(uo&&(a||s&&_)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=lr.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&Kr(t,qr(Xr(a),!0))||[];i=new Response(ro(i.body,65536,n,(()=>{r&&r(),_&&_()})),e)}l=l||"text";let m=await ho[lr.findKey(ho,l)||"text"](i,e);return!s&&_&&_(),await new Promise(((t,n)=>{zr(t,n,{data:m,headers:jr.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})}))}catch(t){if(_&&_(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new ur("Network Error",ur.ERR_NETWORK,e,f),{cause:t.cause||t});throw ur.from(t,t&&t.code,e,f)}});const bo={http:null,xhr:$r,fetch:_o};lr.forEach(bo,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const mo=e=>`- ${e}`,Eo=e=>lr.isFunction(e)||null===e||!1===e;var go=e=>{e=lr.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Eo(n)&&(r=bo[(t=String(n)).toLowerCase()],void 0===r))throw new ur(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new ur("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(mo).join("\n"):" "+mo(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function yo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hr(null,e)}function vo(e){yo(e),e.headers=jr.from(e.headers),e.data=Fr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return go(e.adapter||xr.adapter)(e).then((function(t){return yo(e),t.data=Fr.call(e,e.transformResponse,t),t.headers=jr.from(t.headers),t}),(function(t){return Br(t)||(yo(e),t&&t.response&&(t.response.data=Fr.call(e,e.transformResponse,t.response),t.response.headers=jr.from(t.response.headers))),Promise.reject(t)}))}const wo="1.8.3",Oo={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Oo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const To={};Oo.transitional=function(e,t,n){return(r,o,i)=>{if(!1===e)throw new ur(function(e,t){return"[Axios v1.8.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}(o," has been removed"+(t?" in "+t:"")),ur.ERR_DEPRECATED);return t&&!To[o]&&(To[o]=!0),!e||e(r,o,i)}},Oo.spelling=function(e){return(e,t)=>!0};var So={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ur("options must be an object",ur.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new ur("option "+i+" must be "+n,ur.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ur("Unknown option "+i,ur.ERR_BAD_OPTION)}},validators:Oo};const Ro=So.validators;class Ao{constructor(e){this.defaults=e,this.interceptors={request:new Or,response:new Or}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Qr(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&So.assertOptions(n,{silentJSONParsing:Ro.transitional(Ro.boolean),forcedJSONParsing:Ro.transitional(Ro.boolean),clarifyTimeoutError:Ro.transitional(Ro.boolean)},!1),null!=r&&(lr.isFunction(r)?t.paramsSerializer={serialize:r}:So.assertOptions(r,{encode:Ro.function,serialize:Ro.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),So.assertOptions(t,{baseUrl:Ro.spelling("baseURL"),withXsrfToken:Ro.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&lr.merge(o.common,o[t.method]);o&&lr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=jr.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[vo.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{l=vo.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return wr(Wr((e=Qr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}lr.forEach(["delete","get","head","options"],(function(e){Ao.prototype[e]=function(t,n){return this.request(Qr(n||{},{method:e,url:t,data:(n||{}).data}))}})),lr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(Qr(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ao.prototype[e]=t(),Ao.prototype[e+"Form"]=t(!0)}));class Io{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new Hr(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Io((function(t){e=t}));return{token:t,cancel:e}}}const Co={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Co).forEach((([e,t])=>{Co[t]=e}));const ko=function e(t){const n=new Ao(t),r=wn(Ao.prototype.request,n);return lr.extend(r,Ao.prototype,n,{allOwnKeys:!0}),lr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Qr(t,n))},r}(xr);ko.Axios=Ao,ko.CanceledError=Hr,ko.CancelToken=Io,ko.isCancel=Br,ko.VERSION=wo,ko.toFormData=mr,ko.AxiosError=ur,ko.Cancel=ko.CanceledError,ko.all=function(e){return Promise.all(e)},ko.spread=function(e){return function(t){return e.apply(null,t)}},ko.isAxiosError=function(e){return lr.isObject(e)&&!0===e.isAxiosError},ko.mergeConfig=Qr,ko.AxiosHeaders=jr,ko.formToJSON=e=>Dr(lr.isHTMLForm(e)?new FormData(e):e),ko.getAdapter=go,ko.HttpStatusCode=Co,ko.default=ko;function No(e){let t=e.length;for(;--t>=0;)e[t]=0}const Do=256,xo=286,Po=30,Uo=15,Lo=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Mo=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Go=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),jo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fo=new Array(576);No(Fo);const Bo=new Array(60);No(Bo);const Ho=new Array(512);No(Ho);const zo=new Array(256);No(zo);const qo=new Array(29);No(qo);const Ko=new Array(Po);function Xo(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}let Zo,Vo,Wo;function Yo(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}No(Ko);const Qo=e=>e<256?Ho[e]:Ho[256+(e>>>7)],Jo=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},$o=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Jo(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ei=(e,t,n)=>{$o(e,n[2*t],n[2*t+1])},ti=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ni=(e,t,n)=>{const r=new Array(16);let o,i,s=0;for(o=1;o<=Uo;o++)s=s+n[o-1]<<1,r[o]=s;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=ti(r[t]++,t))}},ri=e=>{let t;for(t=0;t<xo;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Po;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},oi=e=>{e.bi_valid>8?Jo(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ii=(e,t,n,r)=>{const o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]},si=(e,t,n)=>{const r=e.heap[n];let o=n<<1;for(;o<=e.heap_len&&(o<e.heap_len&&ii(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!ii(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},ai=(e,t,n)=>{let r,o,i,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,o=e.pending_buf[e.sym_buf+a++],0===r?ei(e,o,t):(i=zo[o],ei(e,i+Do+1,t),s=Lo[i],0!==s&&(o-=qo[i],$o(e,o,s)),r--,i=Qo(r),ei(e,i,n),s=Mo[i],0!==s&&(r-=Ko[i],$o(e,r,s)))}while(a<e.sym_next);ei(e,256,t)},ci=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<i;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=r[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)si(e,n,s);c=i;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],si(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,si(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,h,f,p,_=0;for(h=0;h<=Uo;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],h=n[2*n[2*u+1]+1]+1,h>c&&(h=c,_++),n[2*u+1]=h,u>r||(e.bl_count[h]++,f=0,u>=a&&(f=s[u-a]),p=n[2*u],e.opt_len+=p*(h+f),i&&(e.static_len+=p*(o[2*u+1]+f)));if(0!==_){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,_-=2}while(_>0);for(h=c;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--l],d>r||(n[2*d+1]!==h&&(e.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}})(e,t),ni(n,l,e.bl_count)},li=(e,t,n)=>{let r,o,i=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],++a<c&&o===s||(a<l?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=o,0===s?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},ui=(e,t,n)=>{let r,o,i=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<c&&o===s)){if(a<l)do{ei(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(ei(e,o,e.bl_tree),a--),ei(e,16,e.bl_tree),$o(e,a-3,2)):a<=10?(ei(e,17,e.bl_tree),$o(e,a-3,3)):(ei(e,18,e.bl_tree),$o(e,a-11,7));a=0,i=o,0===s?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}};let di=!1;const hi=(e,t,n,r)=>{$o(e,0+(r?1:0),3),oi(e),Jo(e,n),Jo(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var fi=e=>{di||((()=>{let e,t,n,r,o;const i=new Array(16);for(n=0,r=0;r<28;r++)for(qo[r]=n,e=0;e<1<<Lo[r];e++)zo[n++]=r;for(zo[n-1]=r,o=0,r=0;r<16;r++)for(Ko[r]=o,e=0;e<1<<Mo[r];e++)Ho[o++]=r;for(o>>=7;r<Po;r++)for(Ko[r]=o<<7,e=0;e<1<<Mo[r]-7;e++)Ho[256+o++]=r;for(t=0;t<=Uo;t++)i[t]=0;for(e=0;e<=143;)Fo[2*e+1]=8,e++,i[8]++;for(;e<=255;)Fo[2*e+1]=9,e++,i[9]++;for(;e<=279;)Fo[2*e+1]=7,e++,i[7]++;for(;e<=287;)Fo[2*e+1]=8,e++,i[8]++;for(ni(Fo,287,i),e=0;e<Po;e++)Bo[2*e+1]=5,Bo[2*e]=ti(e,5);Zo=new Xo(Fo,Lo,257,xo,Uo),Vo=new Xo(Bo,Mo,0,Po,Uo),Wo=new Xo(new Array(0),Go,0,19,7)})(),di=!0),e.l_desc=new Yo(e.dyn_ltree,Zo),e.d_desc=new Yo(e.dyn_dtree,Vo),e.bl_desc=new Yo(e.bl_tree,Wo),e.bi_buf=0,e.bi_valid=0,ri(e)},pi=(e,t,n,r)=>{let o,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Do;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ci(e,e.l_desc),ci(e,e.d_desc),s=(e=>{let t;for(li(e,e.dyn_ltree,e.l_desc.max_code),li(e,e.dyn_dtree,e.d_desc.max_code),ci(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*jo[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?hi(e,t,n,r):4===e.strategy||i===o?($o(e,2+(r?1:0),3),ai(e,Fo,Bo)):($o(e,4+(r?1:0),3),((e,t,n,r)=>{let o;for($o(e,t-257,5),$o(e,n-1,5),$o(e,r-4,4),o=0;o<r;o++)$o(e,e.bl_tree[2*jo[o]+1],3);ui(e,e.dyn_ltree,t-1),ui(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),ai(e,e.dyn_ltree,e.dyn_dtree)),ri(e),r&&oi(e)},_i=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(zo[n]+Do+1)]++,e.dyn_dtree[2*Qo(t)]++),e.sym_next===e.sym_end),bi=e=>{$o(e,2,3),ei(e,256,Fo),(e=>{16===e.bi_valid?(Jo(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},mi={_tr_init:fi,_tr_stored_block:hi,_tr_flush_block:pi,_tr_tally:_i,_tr_align:bi};var Ei=(e,t,n,r)=>{let o=65535&e,i=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{o=o+t[r++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16};const gi=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var yi=(e,t,n,r)=>{const o=gi,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^o[255&(e^t[n])];return~e},vi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Oi,_tr_stored_block:Ti,_tr_flush_block:Si,_tr_tally:Ri,_tr_align:Ai}=mi,{Z_NO_FLUSH:Ii,Z_PARTIAL_FLUSH:Ci,Z_FULL_FLUSH:ki,Z_FINISH:Ni,Z_BLOCK:Di,Z_OK:xi,Z_STREAM_END:Pi,Z_STREAM_ERROR:Ui,Z_DATA_ERROR:Li,Z_BUF_ERROR:Mi,Z_DEFAULT_COMPRESSION:Gi,Z_FILTERED:ji,Z_HUFFMAN_ONLY:Fi,Z_RLE:Bi,Z_FIXED:Hi,Z_DEFAULT_STRATEGY:zi,Z_UNKNOWN:qi,Z_DEFLATED:Ki}=wi,Xi=258,Zi=262,Vi=42,Wi=113,Yi=666,Qi=(e,t)=>(e.msg=vi[t],t),Ji=e=>2*e-(e>4?9:0),$i=e=>{let t=e.length;for(;--t>=0;)e[t]=0},es=e=>{let t,n,r,o=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=o?n-o:0}while(--t);t=o,r=t;do{n=e.prev[--r],e.prev[r]=n>=o?n-o:0}while(--t)};let ts=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const ns=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},rs=(e,t)=>{Si(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ns(e.strm)},os=(e,t)=>{e.pending_buf[e.pending++]=t},is=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ss=(e,t,n,r)=>{let o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=Ei(e.adler,t,o,n):2===e.state.wrap&&(e.adler=yi(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},as=(e,t)=>{let n,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Zi?e.strstart-(e.w_size-Zi):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+Xi;let f=l[i+s-1],p=l[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+s]===p&&l[n+s-1]===f&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<h);if(r=Xi-(h-i),i=h-Xi,r>s){if(e.match_start=t,s=r,r>=a)break;f=l[i+s-1],p=l[i+s]}}}while((t=d[t&u])>c&&0!=--o);return s<=e.lookahead?s:e.lookahead},cs=e=>{const t=e.w_size;let n,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Zi)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),es(e),r+=t),0===e.strm.avail_in)break;if(n=ss(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=ts(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=ts(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Zi&&0!==e.strm.avail_in)},ls=(e,t)=>{let n,r,o,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>o&&(n=o),n<i&&(0===n&&t!==Ni||t===Ii||n!==r+e.strm.avail_in))break;s=t===Ni&&n===r+e.strm.avail_in?1:0,Ti(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ns(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(ss(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==Ii&&t!==Ni&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(ss(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,i=o>e.w_size?e.w_size:o,r=e.strstart-e.block_start,(r>=i||(r||t===Ni)&&t!==Ii&&0===e.strm.avail_in&&r<=o)&&(n=r>o?o:r,s=t===Ni&&0===e.strm.avail_in&&n===r?1:0,Ti(e,e.block_start,n,s),e.block_start+=n,ns(e.strm)),s?3:1)},us=(e,t)=>{let n,r;for(;;){if(e.lookahead<Zi){if(cs(e),e.lookahead<Zi&&t===Ii)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ts(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Zi&&(e.match_length=as(e,n)),e.match_length>=3)if(r=Ri(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ts(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ts(e,e.ins_h,e.window[e.strstart+1]);else r=Ri(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(rs(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ni?(rs(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rs(e,!1),0===e.strm.avail_out)?1:2},ds=(e,t)=>{let n,r,o;for(;;){if(e.lookahead<Zi){if(cs(e),e.lookahead<Zi&&t===Ii)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ts(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Zi&&(e.match_length=as(e,n),e.match_length<=5&&(e.strategy===ji||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,r=Ri(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=ts(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(rs(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Ri(e,0,e.window[e.strstart-1]),r&&rs(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ri(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ni?(rs(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rs(e,!1),0===e.strm.avail_out)?1:2};function hs(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}const fs=[new hs(0,0,0,0,ls),new hs(4,4,8,4,us),new hs(4,5,16,8,us),new hs(4,6,32,32,us),new hs(4,4,16,16,ds),new hs(8,16,32,32,ds),new hs(8,16,128,128,ds),new hs(8,32,128,256,ds),new hs(32,128,258,1024,ds),new hs(32,258,258,4096,ds)];function ps(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ki,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),$i(this.dyn_ltree),$i(this.dyn_dtree),$i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),$i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),$i(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const _s=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Vi&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Wi&&t.status!==Yi?1:0},bs=e=>{if(_s(e))return Qi(e,Ui);e.total_in=e.total_out=0,e.data_type=qi;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Vi:Wi,e.adler=2===t.wrap?0:1,t.last_flush=-2,Oi(t),xi},ms=e=>{const t=bs(e);return t===xi&&(e=>{e.window_size=2*e.w_size,$i(e.head),e.max_lazy_match=fs[e.level].max_lazy,e.good_match=fs[e.level].good_length,e.nice_match=fs[e.level].nice_length,e.max_chain_length=fs[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Es=(e,t,n,r,o,i)=>{if(!e)return Ui;let s=1;if(t===Gi&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||n!==Ki||r<8||r>15||t<0||t>9||i<0||i>Hi||8===r&&1!==s)return Qi(e,Ui);8===r&&(r=9);const a=new ps;return e.state=a,a.strm=e,a.status=Vi,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=i,a.method=n,ms(e)};var gs=(e,t)=>{if(_s(e)||t>Di||t<0)return e?Qi(e,Ui):Ui;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Yi&&t!==Ni)return Qi(e,0===e.avail_out?Mi:Ui);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ns(e),0===e.avail_out)return n.last_flush=-1,xi}else if(0===e.avail_in&&Ji(t)<=Ji(r)&&t!==Ni)return Qi(e,Mi);if(n.status===Yi&&0!==e.avail_in)return Qi(e,Mi);if(n.status===Vi&&0===n.wrap&&(n.status=Wi),n.status===Vi){let t=Ki+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Fi||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,is(n,t),0!==n.strstart&&(is(n,e.adler>>>16),is(n,65535&e.adler)),e.adler=1,n.status=Wi,ns(e),0!==n.pending)return n.last_flush=-1,xi}if(57===n.status)if(e.adler=0,os(n,31),os(n,139),os(n,8),n.gzhead)os(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),os(n,255&n.gzhead.time),os(n,n.gzhead.time>>8&255),os(n,n.gzhead.time>>16&255),os(n,n.gzhead.time>>24&255),os(n,9===n.level?2:n.strategy>=Fi||n.level<2?4:0),os(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(os(n,255&n.gzhead.extra.length),os(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=yi(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(os(n,0),os(n,0),os(n,0),os(n,0),os(n,0),os(n,9===n.level?2:n.strategy>=Fi||n.level<2?4:0),os(n,3),n.status=Wi,ns(e),0!==n.pending)return n.last_flush=-1,xi;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=yi(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=o,ns(e),0!==n.pending)return n.last_flush=-1,xi;t=0,r-=o}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=yi(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=yi(e.adler,n.pending_buf,n.pending-r,r)),ns(e),0!==n.pending)return n.last_flush=-1,xi;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,os(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=yi(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=yi(e.adler,n.pending_buf,n.pending-r,r)),ns(e),0!==n.pending)return n.last_flush=-1,xi;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,os(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=yi(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ns(e),0!==n.pending))return n.last_flush=-1,xi;os(n,255&e.adler),os(n,e.adler>>8&255),e.adler=0}if(n.status=Wi,ns(e),0!==n.pending)return n.last_flush=-1,xi}if(0!==e.avail_in||0!==n.lookahead||t!==Ii&&n.status!==Yi){let r=0===n.level?ls(n,t):n.strategy===Fi?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(cs(e),0===e.lookahead)){if(t===Ii)return 1;break}if(e.match_length=0,n=Ri(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(rs(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ni?(rs(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rs(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Bi?((e,t)=>{let n,r,o,i;const s=e.window;for(;;){if(e.lookahead<=Xi){if(cs(e),e.lookahead<=Xi&&t===Ii)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,r=s[o],r===s[++o]&&r===s[++o]&&r===s[++o])){i=e.strstart+Xi;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i);e.match_length=Xi-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ri(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ri(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(rs(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ni?(rs(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rs(e,!1),0===e.strm.avail_out)?1:2})(n,t):fs[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Yi),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),xi;if(2===r&&(t===Ci?Ai(n):t!==Di&&(Ti(n,0,0,!1),t===ki&&($i(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ns(e),0===e.avail_out))return n.last_flush=-1,xi}return t!==Ni?xi:n.wrap<=0?Pi:(2===n.wrap?(os(n,255&e.adler),os(n,e.adler>>8&255),os(n,e.adler>>16&255),os(n,e.adler>>24&255),os(n,255&e.total_in),os(n,e.total_in>>8&255),os(n,e.total_in>>16&255),os(n,e.total_in>>24&255)):(is(n,e.adler>>>16),is(n,65535&e.adler)),ns(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?xi:Pi)},ys=(e,t)=>{let n=t.length;if(_s(e))return Ui;const r=e.state,o=r.wrap;if(2===o||1===o&&r.status!==Vi||r.lookahead)return Ui;if(1===o&&(e.adler=Ei(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===o&&($i(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,cs(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=ts(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,cs(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,r.wrap=o,xi},vs={deflateInit:(e,t)=>Es(e,t,Ki,15,8,zi),deflateInit2:Es,deflateReset:ms,deflateResetKeep:bs,deflateSetHeader:(e,t)=>_s(e)||2!==e.state.wrap?Ui:(e.state.gzhead=t,xi),deflate:gs,deflateEnd:e=>{if(_s(e))return Ui;const t=e.state.status;return e.state=null,t===Wi?Qi(e,Li):xi},deflateSetDictionary:ys,deflateInfo:"pako deflate (from Nodeca project)"};const ws=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Os=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)ws(n,t)&&(e[t]=n[t])}}return e},Ts=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,o=e.length;t<o;t++){let o=e[t];n.set(o,r),r+=o.length}return n};let Ss=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ss=!1}const Rs=new Uint8Array(256);for(let e=0;e<256;e++)Rs[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Rs[254]=Rs[254]=1;var As=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,o,i,s=e.length,a=0;for(o=0;o<s;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),i=0,o=0;i<a;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},Is=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,o;const i=new Array(2*n);for(o=0,r=0;r<n;){let t=e[r++];if(t<128){i[o++]=t;continue}let s=Rs[t];if(s>4)i[o++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?i[o++]=65533:t<65536?i[o++]=t:(t-=65536,i[o++]=55296|t>>10&1023,i[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ss)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,o)},Cs=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Rs[e[n]]>t?n:t};var ks=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ns=Object.prototype.toString,{Z_NO_FLUSH:Ds,Z_SYNC_FLUSH:xs,Z_FULL_FLUSH:Ps,Z_FINISH:Us,Z_OK:Ls,Z_STREAM_END:Ms,Z_DEFAULT_COMPRESSION:Gs,Z_DEFAULT_STRATEGY:js,Z_DEFLATED:Fs}=wi;function Bs(e){this.options=Os({level:Gs,method:Fs,chunkSize:16384,windowBits:15,memLevel:8,strategy:js},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ks,this.strm.avail_out=0;let n=vs.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ls)throw new Error(vi[n]);if(t.header&&vs.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?As(t.dictionary):"[object ArrayBuffer]"===Ns.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=vs.deflateSetDictionary(this.strm,e),n!==Ls)throw new Error(vi[n]);this._dict_set=!0}}function Hs(e,t){const n=new Bs(t);if(n.push(e,!0),n.err)throw n.msg||vi[n.err];return n.result}Bs.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let o,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Us:Ds,"string"==typeof e?n.input=As(e):"[object ArrayBuffer]"===Ns.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===xs||i===Ps)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=vs.deflate(n,i),o===Ms)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=vs.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Ls;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Bs.prototype.onData=function(e){this.chunks.push(e)},Bs.prototype.onEnd=function(e){e===Ls&&(this.result=Ts(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var zs={Deflate:Bs,deflate:Hs,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Hs(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Hs(e,t)},constants:wi};const qs=16209;var Ks=function(e,t){let n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,E,g,y,v,w,O,T,S;const R=e.state;n=e.next_in,T=e.input,r=n+(e.avail_in-5),o=e.next_out,S=e.output,i=o-(t-e.avail_out),s=o+(e.avail_out-257),a=R.dmax,c=R.wsize,l=R.whave,u=R.wnext,d=R.window,h=R.hold,f=R.bits,p=R.lencode,_=R.distcode,b=(1<<R.lenbits)-1,m=(1<<R.distbits)-1;e:do{f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),E=p[h&b];t:for(;;){if(g=E>>>24,h>>>=g,f-=g,g=E>>>16&255,0===g)S[o++]=65535&E;else{if(!(16&g)){if(64&g){if(32&g){R.mode=16191;break e}e.msg="invalid literal/length code",R.mode=qs;break e}E=p[(65535&E)+(h&(1<<g)-1)];continue t}for(y=65535&E,g&=15,g&&(f<g&&(h+=T[n++]<<f,f+=8),y+=h&(1<<g)-1,h>>>=g,f-=g),f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),E=_[h&m];;){if(g=E>>>24,h>>>=g,f-=g,g=E>>>16&255,16&g){if(v=65535&E,g&=15,f<g&&(h+=T[n++]<<f,f+=8,f<g&&(h+=T[n++]<<f,f+=8)),v+=h&(1<<g)-1,v>a){e.msg="invalid distance too far back",R.mode=qs;break e}if(h>>>=g,f-=g,g=o-i,v>g){if(g=v-g,g>l&&R.sane){e.msg="invalid distance too far back",R.mode=qs;break e}if(w=0,O=d,0===u){if(w+=c-g,g<y){y-=g;do{S[o++]=d[w++]}while(--g);w=o-v,O=S}}else if(u<g){if(w+=c+u-g,g-=u,g<y){y-=g;do{S[o++]=d[w++]}while(--g);if(w=0,u<y){g=u,y-=g;do{S[o++]=d[w++]}while(--g);w=o-v,O=S}}}else if(w+=u-g,g<y){y-=g;do{S[o++]=d[w++]}while(--g);w=o-v,O=S}for(;y>2;)S[o++]=O[w++],S[o++]=O[w++],S[o++]=O[w++],y-=3;y&&(S[o++]=O[w++],y>1&&(S[o++]=O[w++]))}else{w=o-v;do{S[o++]=S[w++],S[o++]=S[w++],S[o++]=S[w++],y-=3}while(y>2);y&&(S[o++]=S[w++],y>1&&(S[o++]=S[w++]))}break}if(64&g){e.msg="invalid distance code",R.mode=qs;break e}E=_[(65535&E)+(h&(1<<g)-1)]}}break}}while(n<r&&o<s);y=f>>3,n-=y,f-=y<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=o<s?s-o+257:257-(o-s),R.hold=h,R.bits=f};const Xs=15,Zs=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Vs=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ws=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ys=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Qs=(e,t,n,r,o,i,s,a)=>{const c=a.bits;let l,u,d,h,f,p,_=0,b=0,m=0,E=0,g=0,y=0,v=0,w=0,O=0,T=0,S=null;const R=new Uint16Array(16),A=new Uint16Array(16);let I,C,k,N=null;for(_=0;_<=Xs;_++)R[_]=0;for(b=0;b<r;b++)R[t[n+b]]++;for(g=c,E=Xs;E>=1&&0===R[E];E--);if(g>E&&(g=E),0===E)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(m=1;m<E&&0===R[m];m++);for(g<m&&(g=m),w=1,_=1;_<=Xs;_++)if(w<<=1,w-=R[_],w<0)return-1;if(w>0&&(0===e||1!==E))return-1;for(A[1]=0,_=1;_<Xs;_++)A[_+1]=A[_]+R[_];for(b=0;b<r;b++)0!==t[n+b]&&(s[A[t[n+b]]++]=b);if(0===e?(S=N=s,p=20):1===e?(S=Zs,N=Vs,p=257):(S=Ws,N=Ys,p=0),T=0,b=0,_=m,f=i,y=g,v=0,d=-1,O=1<<g,h=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){I=_-v,s[b]+1<p?(C=0,k=s[b]):s[b]>=p?(C=N[s[b]-p],k=S[s[b]-p]):(C=96,k=0),l=1<<_-v,u=1<<y,m=u;do{u-=l,o[f+(T>>v)+u]=I<<24|C<<16|k}while(0!==u);for(l=1<<_-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,b++,0==--R[_]){if(_===E)break;_=t[n+s[b]]}if(_>g&&(T&h)!==d){for(0===v&&(v=g),f+=m,y=_-v,w=1<<y;y+v<E&&(w-=R[y+v],!(w<=0));)y++,w<<=1;if(O+=1<<y,1===e&&O>852||2===e&&O>592)return 1;d=T&h,o[d]=g<<24|y<<16|f-i}}return 0!==T&&(o[f+T]=_-v<<24|64<<16),a.bits=g,0};const{Z_FINISH:Js,Z_BLOCK:$s,Z_TREES:ea,Z_OK:ta,Z_STREAM_END:na,Z_NEED_DICT:ra,Z_STREAM_ERROR:oa,Z_DATA_ERROR:ia,Z_MEM_ERROR:sa,Z_BUF_ERROR:aa,Z_DEFLATED:ca}=wi,la=16180,ua=16190,da=16191,ha=16192,fa=16194,pa=16199,_a=16200,ba=16206,ma=16209,Ea=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function ga(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ya=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<la||t.mode>16211?1:0},va=e=>{if(ya(e))return oa;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=la,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ta},wa=e=>{if(ya(e))return oa;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,va(e)},Oa=(e,t)=>{let n;if(ya(e))return oa;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?oa:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,wa(e))},Ta=(e,t)=>{if(!e)return oa;const n=new ga;e.state=n,n.strm=e,n.window=null,n.mode=la;const r=Oa(e,t);return r!==ta&&(e.state=null),r};let Sa,Ra,Aa=!0;const Ia=e=>{if(Aa){Sa=new Int32Array(512),Ra=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Qs(1,e.lens,0,288,Sa,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Qs(2,e.lens,0,32,Ra,0,e.work,{bits:5}),Aa=!1}e.lencode=Sa,e.lenbits=9,e.distcode=Ra,e.distbits=5},Ca=(e,t,n,r)=>{let o;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),i.window.set(t.subarray(n-r,n-r+o),i.wnext),(r-=o)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};var ka=(e,t)=>{let n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,E,g,y,v,w,O,T=0;const S=new Uint8Array(4);let R,A;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ya(e)||!e.output||!e.input&&0!==e.avail_in)return oa;n=e.state,n.mode===da&&(n.mode=ha),s=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,d=a,h=c,O=ta;e:for(;;)switch(n.mode){case la:if(0===n.wrap){n.mode=ha;break}for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&l,S[1]=l>>>8&255,n.check=yi(n.check,S,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=ma;break}if((15&l)!==ca){e.msg="unknown compression method",n.mode=ma;break}if(l>>>=4,u-=4,w=8+(15&l),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=ma;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:da,l=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(n.flags=l,(255&n.flags)!==ca){e.msg="unknown compression method",n.mode=ma;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=ma;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,n.check=yi(n.check,S,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,n.check=yi(n.check,S,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,n.check=yi(n.check,S,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,n.check=yi(n.check,S,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+f),w)),512&n.flags&&4&n.wrap&&(n.check=yi(n.check,r,f,i)),a-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;f=0;do{w=r[i+f++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=yi(n.check,r,f,i)),a-=f,i+=f,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;f=0;do{w=r[i+f++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=yi(n.check,r,f,i)),a-=f,i+=f,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=ma;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=da;break;case 16189:for(;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}e.adler=n.check=Ea(l),l=0,u=0,n.mode=ua;case ua:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=l,n.bits=u,ra;e.adler=n.check=1,n.mode=da;case da:if(t===$s||t===ea)break e;case ha:if(n.last){l>>>=7&u,u-=7&u,n.mode=ba;break}for(;u<3;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(Ia(n),n.mode=pa,t===ea){l>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=ma}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ma;break}if(n.length=65535&l,l=0,u=0,n.mode=fa,t===ea)break e;case fa:n.mode=16195;case 16195:if(f=n.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break e;o.set(r.subarray(i,i+f),s),a-=f,i+=f,c-=f,s+=f,n.length-=f;break}n.mode=da;break;case 16196:for(;u<14;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ma;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.lens[I[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},O=Qs(0,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,O){e.msg="invalid code lengths set",n.mode=ma;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[l&(1<<n.lenbits)-1],b=T>>>24,m=T>>>16&255,E=65535&T,!(b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(E<16)l>>>=b,u-=b,n.lens[n.have++]=E;else{if(16===E){for(A=b+2;u<A;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(l>>>=b,u-=b,0===n.have){e.msg="invalid bit length repeat",n.mode=ma;break}w=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===E){for(A=b+3;u<A;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=b,u-=b,w=0,f=3+(7&l),l>>>=3,u-=3}else{for(A=b+7;u<A;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=b,u-=b,w=0,f=11+(127&l),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ma;break}for(;f--;)n.lens[n.have++]=w}}if(n.mode===ma)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=ma;break}if(n.lenbits=9,R={bits:n.lenbits},O=Qs(1,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,O){e.msg="invalid literal/lengths set",n.mode=ma;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},O=Qs(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,O){e.msg="invalid distances set",n.mode=ma;break}if(n.mode=pa,t===ea)break e;case pa:n.mode=_a;case _a:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=l,n.bits=u,Ks(e,h),s=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,n.mode===da&&(n.back=-1);break}for(n.back=0;T=n.lencode[l&(1<<n.lenbits)-1],b=T>>>24,m=T>>>16&255,E=65535&T,!(b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(m&&!(240&m)){for(g=b,y=m,v=E;T=n.lencode[v+((l&(1<<g+y)-1)>>g)],b=T>>>24,m=T>>>16&255,E=65535&T,!(g+b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=b,u-=b,n.back+=b,n.length=E,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=da;break}if(64&m){e.msg="invalid literal/length code",n.mode=ma;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;u<A;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[l&(1<<n.distbits)-1],b=T>>>24,m=T>>>16&255,E=65535&T,!(b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(!(240&m)){for(g=b,y=m,v=E;T=n.distcode[v+((l&(1<<g+y)-1)>>g)],b=T>>>24,m=T>>>16&255,E=65535&T,!(g+b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=b,u-=b,n.back+=b,64&m){e.msg="invalid distance code",n.mode=ma;break}n.offset=E,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;u<A;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ma;break}n.mode=16204;case 16204:if(0===c)break e;if(f=h-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ma;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=o,p=s-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{o[s++]=_[p++]}while(--f);0===n.length&&(n.mode=_a);break;case 16205:if(0===c)break e;o[s++]=n.length,c--,n.mode=_a;break;case ba:if(n.wrap){for(;u<32;){if(0===a)break e;a--,l|=r[i++]<<u,u+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?yi(n.check,o,h,s-h):Ei(n.check,o,h,s-h)),h=c,4&n.wrap&&(n.flags?l:Ea(l))!==n.check){e.msg="incorrect data check",n.mode=ma;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=ma;break}l=0,u=0}n.mode=16208;case 16208:O=na;break e;case ma:O=ia;break e;case 16210:return sa;default:return oa}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=l,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<ma&&(n.mode<ba||t!==Js))&&Ca(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?yi(n.check,o,h,e.next_out-h):Ei(n.check,o,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===da?128:0)+(n.mode===pa||n.mode===fa?256:0),(0===d&&0===h||t===Js)&&O===ta&&(O=aa),O},Na={inflateReset:wa,inflateReset2:Oa,inflateResetKeep:va,inflateInit:e=>Ta(e,15),inflateInit2:Ta,inflate:ka,inflateEnd:e=>{if(ya(e))return oa;let t=e.state;return t.window&&(t.window=null),e.state=null,ta},inflateGetHeader:(e,t)=>{if(ya(e))return oa;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,ta):oa},inflateSetDictionary:(e,t)=>{const n=t.length;let r,o,i;return ya(e)?oa:(r=e.state,0!==r.wrap&&r.mode!==ua?oa:r.mode===ua&&(o=1,o=Ei(o,t,n,0),o!==r.check)?ia:(i=Ca(e,t,n,n),i?(r.mode=16210,sa):(r.havedict=1,ta)))},inflateInfo:"pako inflate (from Nodeca project)"};var Da=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const xa=Object.prototype.toString,{Z_NO_FLUSH:Pa,Z_FINISH:Ua,Z_OK:La,Z_STREAM_END:Ma,Z_NEED_DICT:Ga,Z_STREAM_ERROR:ja,Z_DATA_ERROR:Fa,Z_MEM_ERROR:Ba}=wi;function Ha(e){this.options=Os({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ks,this.strm.avail_out=0;let n=Na.inflateInit2(this.strm,t.windowBits);if(n!==La)throw new Error(vi[n]);if(this.header=new Da,Na.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=As(t.dictionary):"[object ArrayBuffer]"===xa.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Na.inflateSetDictionary(this.strm,t.dictionary),n!==La)))throw new Error(vi[n])}function za(e,t){const n=new Ha(t);if(n.push(e),n.err)throw n.msg||vi[n.err];return n.result}Ha.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let i,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Ua:Pa,"[object ArrayBuffer]"===xa.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Na.inflate(n,s),i===Ga&&o&&(i=Na.inflateSetDictionary(n,o),i===La?i=Na.inflate(n,s):i===Fa&&(i=Ga));n.avail_in>0&&i===Ma&&n.state.wrap>0&&0!==e[n.next_in];)Na.inflateReset(n),i=Na.inflate(n,s);switch(i){case ja:case Fa:case Ga:case Ba:return this.onEnd(i),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||i===Ma))if("string"===this.options.to){let e=Cs(n.output,n.next_out),t=n.next_out-e,o=Is(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==La||0!==a){if(i===Ma)return i=Na.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Ha.prototype.onData=function(e){this.chunks.push(e)},Ha.prototype.onEnd=function(e){e===La&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ts(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var qa={Inflate:Ha,inflate:za,inflateRaw:function(e,t){return(t=t||{}).raw=!0,za(e,t)},ungzip:za,constants:wi};const{Deflate:Ka,deflate:Xa,deflateRaw:Za,gzip:Va}=zs,{Inflate:Wa,inflate:Ya,inflateRaw:Qa,ungzip:Ja}=qa;var $a,ec,tc={Deflate:Ka,deflate:Xa,deflateRaw:Za,gzip:Va,Inflate:Wa,inflate:Ya,inflateRaw:Qa,ungzip:Ja,constants:wi};class nc{static init(e,t,n){this.axiosClient.defaults.baseURL=e,this.axiosClient.defaults.headers.post["Content-Type"]="application/json",this.axiosClient.defaults.headers.post["Content-Encoding"]="gzip",this.headers=n,this.namespace=t}static send(e){return vn(this,void 0,void 0,(function*(){try{const t=JSON.stringify(e),n=tc.gzip(t);yield this.axiosClient.post(cc.config.namespace,n,this.headers)}catch(e){}}))}}nc.axiosClient=ko,nc.headers={},nc.namespace="";class rc{constructor(){this.flushInterval=5e3,this.flushTimer=null,this.maxBufferBytes=0,this.currentBufferSize=0}scheduleFlushTimer(){this.flushTimer=window.setTimeout((()=>vn(this,void 0,void 0,(function*(){yield this.flush(),this.scheduleFlushTimer()}))),this.flushInterval)}resetFlushTimer(){this.flushTimer&&clearTimeout(this.flushTimer),this.scheduleFlushTimer()}}class oc extends rc{constructor(e=5e3,t=1e4){super(),this.store=[],this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return vn(this,void 0,void 0,(function*(){const t=new Blob([JSON.stringify(e)]).size;this.store.push(e),this.currentBufferSize+=t,this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())}))}flush(){return vn(this,void 0,void 0,(function*(){0!==this.store.length?nc.send(this.store).then((()=>{this.store=[],this.currentBufferSize=0,this.resetFlushTimer()})):this.resetFlushTimer()}))}}class ic extends rc{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return vn(this,void 0,void 0,(function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,this.appendLogs(e),this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())}))}flush(){return vn(this,void 0,void 0,(function*(){const e=this.fetchLogs();0!==e.length?nc.send(e).then((()=>{localStorage.removeItem(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()})).catch((e=>{})):this.resetFlushTimer()}))}appendLogs(e){const t=this.fetchLogs();t.push(e),localStorage.setItem(this.storageKey,JSON.stringify(t))}fetchLogs(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}}!function(e){e.MEMORY="memory",e.LOCAL="local",e.CHROME="chrome"}($a||($a={}));class sc extends rc{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return vn(this,void 0,void 0,(function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,yield this.appendLogs(e),this.currentBufferSize>this.maxBufferBytes&&(yield this.flush())}))}flush(){return vn(this,void 0,void 0,(function*(){this.fetchLogs().then((e=>vn(this,void 0,void 0,(function*(){0!==e.length?nc.send(e).then((()=>vn(this,void 0,void 0,(function*(){yield chrome.storage.local.remove(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()})))):this.resetFlushTimer()}))))}))}appendLogs(e){return vn(this,void 0,void 0,(function*(){const t=yield this.fetchLogs();t.push(e),yield chrome.storage.local.set({[this.storageKey]:t})}))}fetchLogs(){return vn(this,void 0,void 0,(function*(){return chrome.storage.local.get(this.storageKey).then((e=>e[this.storageKey]||[]))}))}scheduleFlushTimer(){this.flushTimer=setTimeout((()=>vn(this,void 0,void 0,(function*(){yield this.flush(),this.scheduleFlushTimer()}))),this.flushInterval)}}class ac{static createStorage(e,t,n){switch(e){case $a.LOCAL:return new ic(t,n);case $a.CHROME:return new sc(t,n);default:return new oc(t,n)}}}class cc{static init(e="com.quillbot.dev",t="dev",n=$a.CHROME,r=1e4,o=5e3,i={}){let s="https://ol-collector.quillbot.dev";"prod"===t&&(s="https://ol-collector.quillbot.com"),e="/"+e,nc.init(s,e,i),this.storage=ac.createStorage(n,o,r),this.config={host:s,version:"v1",namespace:e,env:t,storageType:n,postBytes:r,postInterval:o,headers:i}}static log(e){this.storage.buffer(e).then((e=>{}))}static flush(){this.storage.flush().then((e=>{}))}}cc.config={host:"",version:"",namespace:"",env:"",storageType:"",postBytes:2e3,postInterval:-1,headers:{}};var lc={AB_TEST_DATA_API_ERROR:"AB_TEST_DATA_API_ERROR",ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15:"ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15",ACTIVE_CAMPAIGNS_CHROME_STORAGE_KEY:"qb-active-campaigns",ADD_WORD_TO_DICTIONARY_ERROR:"ADD_WORD_TO_DICTIONARY_ERROR",AMPLITUDE_EXPERIMENTS:"ampExperiments",API_PREFIX_URL:"".concat(dn,"/api"),AUTHENTICATE_CAMPAIGN_API_ERROR:"AUTHENTICATE_CAMPAIGN_API_ERROR",BFCM_CAMPAIGN:"bfcm-2024",BOT_DETECTED:"botDetected",BTS_CAMPAIGN_2024:{abExperimentKey:"ext_bts_2024",campaign_type:"Back to School",campaign_url:"https://quillbot.com/upgrade?referrer=".concat(fn,"&p=12&coupon=SCHOOL30&product=marketing"),cta_title:"Save 30% on Premium",cta_title_2:"get Premium 30% off",end_date:"2024-01-26",key:"ext_bts_cm_campaign_2024",start_date:"2024-01-18"},CACHE_API:"cacheApi",CACHE_PREFIX:"cache~",CHANGELOG_CAMPAIGN:{android_url:"https://play.google.com/store/apps/details?id=com.quillbot.mobile",campaign_type:"Cyber Monday Sale",changelog_login:"CHANGELOG_LOGIN",desktop_url:"https://quillbot.com/app/mac",edge_url:"https://microsoftedge.microsoft.com/addons/detail/quillbot-ai-writing-and-/cphpplikchcioccedpjacdanfibnimmh",end_date:"2023-11-27",ios_url:"https://apps.apple.com/us/app/quillbot-ai-writing-keyboard/id6463116243",key:"ext_bf_cm_campaign_2023",page_name:"Changelog Page",PAGE_OPEN:"CHANGELOG_PAGE_OPEN",platforms:{android:"Android",edge:"Edge",ios:"iOS",macos:"macOS"},SEEN_BFS_2024_TIMESTAMP:"seenBfs2024Timestamp",SEEN_PAGE_CHROME_STORAGE_KEY:"SEEN_CHANGELOG_PAGE",SEEN_PAGE_TIMESTAMP_CHROME_STORAGE_KEY:"SEEN_CHANGELOG_PAGE_TIMESTAMP",start_date:"2023-11-20"},CHROME_PROTOCOL_BASED_URL:"chrome://**",CHROME_STORAGE_LANGUAGE_CONFIG_KEY:"languageConfig",CLASSIC_EXT_URL:"https://".concat(hn,"/extension"),CUSTOM_TOKEN_SCOPE:"CHROME_EXT",DATA_SHARING:"DATA_SHARING",DETECT_LANGUAGE_API_ERROR:"UTILS_DETECT_LANGUAGE_ERROR",DETECT_LANGUAGE_API_SUCCESS:"UTILS_DETECT_LANGUAGE_API_SUCCESS",DEVICE_ID_HEADER_NAME:"device-id",DISABLE:"DISABLE_EXTENSION",DOCS_EXT_URL:"https://workspace.google.com/marketplace/app/quillbot_paraphrasing_and_summarizing_to/305988918037",ELEMENT_OBSERVABLE_SUBS:{ELEMENT_POSITION_UPDATES:"ELEMENT_POSITION_UPDATES",GRAMMAR_HIGHLIGHTS:"GRAMMAR_HIGHLIGHTS",INPUT_TEXT_DESELECTION:"INPUT_TEXT_DESELECTION",INPUT_TEXT_SELECTION:"INPUT_TEXT_SELECTION",RESIZE_ELEMENT:"RESIZE_ELEMENT",RESIZE_PARENT:"RESIZE_PARENT",TRACK_TOKENS:"TRACK_TOKENS"},EMAIL_FEEDBACK_URL:"https://mail.google.com/mail/",ENABLE_LOLLIPOP:"hasLollipopEnabled",EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP:"EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP",EXT_INSTALLATION_TIMESTAMP:"EXT_INSTALLATION_TIMESTAMP",EXT_INSTALLATION_TYPE:"EXT_INSTALLATION_TYPE",EXTENSION_HASH:"extensionHash",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED:"OnBoardingDismissed",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED_TIMESTAMP:"onboardingDismissedTimestamp",EXTENSION_INITIAL_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"onboardingFirstTimeRendered",EXTENSION_PLAYGROUND:"qb-extension-playground",EXTERNAL_MSG_DETECT:"detect-extension",EXTERNAL_MSG_FOR_DATA_OPT_IN:"data-opt-in",EXTERNAL_MSG_FOR_DISABLE:"EXTERNAL_MSG_FOR_DISABLE",EXTERNAL_MSG_FOR_ENABLE:"EXTERNAL_MSG_FOR_ENABLE",EXTERNAL_MSG_FOR_PRIVACY:"privacy-policy-verified",EXTERNAL_MSG_FOR_RECAPTCHA:"captcha-verified",EXTERNAL_MSG_FOR_USER_GC_LANGUAGE_CONFIG:"user-gc-language-config",EXTERNAL_MSG_FOR_USER_ID_TOKEN:"EXTERNAL_MSG_FOR_USER_ID_TOKEN",EXTERNAL_MSG_FOR_USER_PREFERENCE:"EXTERNAL_MSG_FOR_USER_PREFERENCE",EXTERNAL_MSG_HANDLE_OCTOBER24_TOS:"HANDLE_OCTOBER24_TOS",EXTERNAL_MSG_INPUT_TEXT:"paraphrase-input-text",EXTERNAL_MSG_TO_CHECK_PIN_STATUS:"check-is-pinned",EXTRACT_KEYWORDS_API_ERROR:"EXTRACT_KEYWORDS_API_ERROR",FEATURE_CONFIG:"featureConfig",GA_API_URL:"https://www.google-analytics.com",GA_COOKIE_KEY:"CUSTOM_GA_CLIENT_ID",GC_SURVEY_URL:"https://docs.google.com/forms/d/1iQeB8Kc-VtJ4hqgusrgTM2gqoTEfcnJRyfsLxhyezS0/viewform?edit_requested=true",GDOCS_FEEDBACK_FORM_URL:"https://forms.gle/9B3npkDkZ9Xqj81L6",GDOCS_MODE_CHECKER:"GDOCS_MODE_CHECKER",GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED",GENERIC_DOMAIN_CONFIG:"generic-config",GET_USER_LANGUAGE_CONFIG_ERROR:"GET_USER_LANGUAGE_CONFIG_ERROR",GMCR:"GRAMMAR_CHECKER",GRAMMAR_CHECKER_API_ERROR:"UTILS_GRAMMAR_CHECKER_ERROR",HARDWARE_INFO_TRACKED:"hardwareInfoTracked",INSTALL_SUCCESS_URL:"https://".concat(hn,"/extension-success"),IS_BEAM_COMPONENT_FOOTER_OPEN:"IS_BEAM_COMPONENT_FOOTER_OPEN",IS_DEV:!1,IS_PROD:!0,LANGUAGE_PREF_HEADER_NAME:"language_pref_updated_at",LANGUAGE_PREF_UPDATED_AT_STRING:"language_pref_updated_at",LOG_IN_URL:"https://".concat(hn,"/login?referrer=").concat(fn),LOGGER_EXTENSION_ID:"hhgjgghchegningnonjkmcbkmhfgelkp",LOGIN_URL:"https://".concat(hn,"/login"),LOLLIPOP:"LOLLIPOP",LOLLIPOP_LANDING_PAGE_URL:"https://".concat(hn,"/app/text-cursor"),MAX_PERMISSIBLE_ZINDEX:2147483647,MODEL_STATS_PREFIX:"quillbotModelStats_",NETWORK_API:"networkApi",NEW_TAB:"newTab",onboardingWalkthroughCampaigns:"onboardingWalkthroughCampaigns",OVERHANG_SUGGESTION_ID_SUFFIX:"OVERHANG_SUGGESTION_ID_SUFFIX",PASSIVE_VOICE_EMPTY_OUTPUTS:["",null,"none"],PAUSE:"PAUSE_EXTENSION",PLAN_PAGE_URL:"https://".concat(hn,"/settings?tab=1&referrer=").concat(fn),PLATFORM_TYPE:fn,PLATFORM_TYPE_HEADER_NAME:"platform-type",PLATFORM_VERSION_HEADER_NAME:"platform-version",PPHR:"PARAPHRASER",PREFERENCES_PAGE_URL:"https://".concat(hn,"/settings?menu=preferences&referrer=").concat(fn),PREMIUM_HEADER_NAME:"premium",PREMIUM_URL:"https://".concat(hn,"/premium?product=").concat(fn),PRIVACY_POLICY_URL:"https://".concat(hn,"/privacy?referrer=").concat(fn),PROFILE_PAGE_URL:"https://".concat(hn,"/settings?referrer=").concat(fn),QB_COOKIE_ABIDV2:"abIDV2",QB_COOKIE_AUTH_STRING:"authenticated",QB_COOKIE_DEVICE_ID:"qbDeviceId",QB_COOKIE_GET_URL:hn,QB_COOKIE_INCLUDE_URL:hn,QB_COOKIE_INSTALLATION_SOURCE:"qbExtInstSrc",QB_COOKIE_PREMIUM_STRING:"premium",QB_COOKIE_PREMIUM_TIMESTAMP:"premiumUpdateTimestamp",QB_COOKIE_URL:hn,QB_ID_TOKEN_STRING:"useridtoken",QB_SIGN_OUT:"sign-out",QB_STORAGE_AREA:"local",QB_URL:"https://".concat(hn),QB_USER_PROFILE_FETCH_TIMESTAMP:"QB_USER_PROFILE_FETCH_TIMESTAMP",QB_WRITER_BLOCK_BLOG_URL:"https://quillbot.com/blog/how-to-overcome-common-writing-roadblocks-part-1/",QUILLBOT_SHADOW_ROOT:"qb-ext-sr",RATE_ON_CHROMESTORE_URL_BTN:yn(),RATE_ON_CHROMESTORE_URL_LINK:yn(),REFERRER:"CHROME-EXT",REMOVE_WORD_FROM_DICTIONARY_ERROR:"REMOVE_WORD_FROM_DICTIONARY_ERROR",RENDERED_SECOND_TIME:"RENDERED_SECOND_TIME",RERUN_PIPELINE_FOR_EDITORS:"rerun-pipeline-for-editors",RUNNING_E2E:"true"===pn,SENTENCE_SPLITTER_API_ERROR:"UTILS_SENTENCE_SPLITTER_ERROR",SHOW_HIGHLIGHTS:"SHOW_HIGHLIGHTS",SHOWN_MULTILINGUAL_ONBOARING:"SHOWN_MULTILINGUAL_ONBOARING",SIGN_UP_URL:"https://".concat(hn,"/signup?referrer=").concat(fn),SPELLING_ERROR_EXPLAINER_ID:"000051",SUMMARIZER_API_ERROR:"SUMMARIZER_API_ERROR",TOGGLE_SENTENCE_SUGGESTIONS:"TOGGLE_SENTENCE_SUGGESTIONS",TOOLBOX_GET_REQUEST_ERROR:"TOOLBOX_GET_REQUEST_ERROR",TOTAL_FIXALL_PERFORMED_COUNT:"totalFixallPerformedCount",TOTAL_GC_SUGGESTIONS_ACCEPTED:"TOTAL_GC_SUGGESTIONS_ACCEPTED",TRACKING_API:"".concat(_n),UNDERLINES_TOGGLE:"UNDERLINES_TOGGLE",UNINSTALL_SURVEY_URL:"https://".concat(hn,"/exit-survey"),UPDATE_SUGGESTED_WORD_ERROR:"UPDATE_SUGGESTED_WORD_ERROR",UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR:"UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR",UPDATE_USER_PROFILE_API_ERROR:"UPDATE_USER_PROFILE_API_ERROR",UPGRADE_URL:"https://".concat(hn,"/upgrade?product=").concat(fn),UPGRADE_URL_WITH_COUPON:"https://".concat(hn,"/upgrade?referrer=extension_campaign_2022_oct&p=12&coupon="),UPSELL_CAMPAIGN_OCT_2022:{metricsName:"extension_campaign_2022_oct",name:"extension_campaign_2022_oct",promoCode:"GET30",showedPromoModalChromeStorageKey:"extension_campaign_2022_oct__showedPromoModalChromeStorageKey",showPromoModalChromeStorageKey:"extension_campaign_2022_oct__showPromoModalChromeStorageKey"},USER_ID_TOKEN_FORCE_REFRESH_TIMESTAMP:"userIdTokenForceRefreshTimestamp",WEBSITE_ORIGIN_HEADER_NAME:"x-website-origin",WEBSITE_URL_HEADER_NAME:"x-website-url",WORD_EXT_URL:"https://".concat(hn,"/word")};Object.freeze({GRAY:"#b8b8b8",GREEN:"#398547",GREEN_BUBBLES:"#E8F3EB",GREEN_SALEM:"#178733",RED:"#FB3F4B",WHITE:"#ffffff"}),null===(ec=lc.QB_COOKIE_URL)||void 0===ec||null===(ec=ec.split("."))||void 0===ec||null===(ec=ec.slice(-2))||void 0===ec||ec.join("."),$a.CHROME;function uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hc=lc.CLASSIC_EXT_URL,fc=!1,pc=null;if(!window.addedQuillbotExtension){var _c=function(e,t){var n=null;new Promise((function(e,t){var n=window.getSelection().toString();n&&n.length>0?e(n):chrome.runtime.sendMessage({action:f},(function(t){chrome.runtime.lastError?chrome.runtime.sendMessage({action:h,payload:{error:chrome.runtime.lastError,errorType:"GET_HOST_TURN_OFF_SESSION_STATE_ERROR"}}):t&&t.selection?e(t.selection):e(n)}))})).then((function(r){if(Ec)n=document.querySelector("#quillbot-extension-sidebar"),pc=null;else{Ec=!0,(n=document.createElement("div")).id="quillbot-extension-sidebar",n.style.position="absolute",n.style.boxShadow="2px 1px 12px #000000b3",n.style.display="flex",n.style.flexDirection="column",document.body.appendChild(n);var s=document.createElement("div");s.style.padding="0px 6px 2px",s.style.lineHeight="1em",s.style.cursor="pointer",s.style.position="absolute",s.style.background="#e0d9d9",s.style.fontFamily="monospace",s.style.fontSize="20px",s.style.color="#555",s.innerHTML="x",s.addEventListener("mouseover",(function(){s.style.background="rgb(224, 151, 151)"})),s.addEventListener("mouseout",(function(){s.style.background="#e0d9d9"})),s.addEventListener("click",(function(){chrome.runtime.sendMessage({action:d,payload:{amplitude:{eventName:i},tracking:{eventName:i}}}),chrome.storage.local.get(["tabState"],(function(e){var n=null;e.tabState&&(n=e.tabState),chrome.storage.local.set({tabState:dc(dc({},n),{},o({},t,{showClassicExt:!1}))})})),_c(!0,t)})),n.appendChild(s),(pc=document.createElement("iframe")).src=hc,pc.scorlling="no",pc.width=gc-2,n.style.position="relative",pc.style.height="100vh",pc.style.border="none",pc.style.marginLeft="2px",pc.style.paddingTop="5px",pc.id="quillbot-extension-iframe",n.appendChild(pc),n.style.cssText="\n\t\t\t\tposition:fixed;\n\t\t\t\ttop:0px;\n\t\t\t\tright:0px;\n\t\t\t\twidth:0px;\n\t\t\t\theight:100%;\n\t\t\t\tbackground: #eee;\n\t\t\t\tz-index:999999999999;\n\t\t\t\ttransition: all .35s;\n\t\t\t\tbox-shadow: 2px 1px 12px #000000b3;\n\t\t\t"}r.length>0&&r!==yc&&!e&&bc(r),mc=!e||!mc,n.style.width=mc?"".concat(gc,"px"):"0px"}))};window.addEventListener("message",(function(e){if(hc.includes(e.origin)){var t=e.data;if("loadExtension"===t.method)document.querySelector("#quillbot-extension-iframe").contentWindow.postMessage({method:"setChromeHostUrl"},"*"),fc=!0;else if("finSetText"===t.method){document.querySelector("#quillbot-extension-iframe").contentWindow.postMessage({method:"quillInput"},"*")}}}));var bc=function(e){if(!fc)return setTimeout(bc.bind(undefined,e),500);document.querySelector("#quillbot-extension-iframe").contentWindow.postMessage({method:"setInputText",text:e},"*")};chrome.runtime.onMessage.addListener((function(e,t,n){"toggleSidebar"===e.callFunction&&(_c(e.toggle,e.tabID),n({farewell:"goodbye"}))}));var mc=!1,Ec=!1,gc=450,yc="";window.addedQuillbotExtension=!0}})();
//# sourceMappingURL=sourceMap/quillClassic.js.map