/*! For license information please see content-gdocs-pre.js.LICENSE.txt */
try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9310198f-5a9b-44ba-adf0-6992d65c8335",e._sentryDebugIdIdentifier="sentry-dbid-9310198f-5a9b-44ba-adf0-6992d65c8335")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.20.1"};(()=>{var e,t,r,n,s={67761:(e,t,r)=>{"use strict";class n{static _contructor(){if(this._isInitialized)return;n._isChromium=navigator.userAgent.includes("Chrome/")||navigator.userAgent.includes("Chromium/"),n._isFirefox=navigator.userAgent.includes("Firefox/"),n._isThunderbird=navigator.userAgent.includes("Thunderbird/"),n._isOpera=navigator.userAgent.includes("OPR/"),n._isEdge=navigator.userAgent.includes("Edg/"),n._isOldEdge=navigator.userAgent.includes("Edge/"),n._isSafari=(navigator.userAgent.includes("Safari/")||navigator.userAgent.includes("AppleWebKit"))&&!n._isChromium&&!n._isEdge&&!n._isOpera,n._isYaBrowser=navigator.userAgent.includes("YaBrowser/"),n._isChrome=n._isChromium&&!n._isOpera&&!n._isEdge&&!n._isOldEdge&&!n._isYaBrowser;const e=navigator.userAgent.match(/Chrome\/(\d+)/);e&&(n._isUnsupportedChrome=parseInt(e[1])<67&&!navigator.userAgent.includes("Edge/"));const t=navigator.userAgent.match(/Firefox\/(\d+)/);t&&(n._isUnsupportedFirefox=parseInt(t[1])<60),this._isInitialized=!0}static getOS(){return navigator.userAgent.includes("Macintosh")?"Mac":navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("CrOS")?"CrOS":navigator.userAgent.includes("Linux")?"Linux":"Other"}static isChromium(){return n._isChromium}static isChrome(){return n._isChrome}static isThunderbird(){return n._isThunderbird}static isFirefox(){return n._isFirefox}static isOpera(){return n._isOpera}static isEdge(){return n._isEdge}static isSafari(){return n._isSafari}static isYaBrowser(){return n._isYaBrowser}static isUnsupportedChrome(){return n._isUnsupportedChrome}static isUnsupportedFirefox(){return n._isUnsupportedFirefox}static isUnsupportedBrowser(){return n.isUnsupportedChrome()||n.isUnsupportedFirefox()}static getBrowserName(){return n.isChrome()?"Chrome":n.isFirefox()?"Firefox":n.isOpera()?"Opera":n.isEdge()?"Edge":n.isSafari()?"Safari":n.isYaBrowser()?"Yandex":"Unknown Browser"}static getUserAgentIdentifier(){let e="webextension";return this.isChrome()?e+="-chrome":this.isFirefox()?e+="-firefox":this.isOpera()?e+="-opera":this.isEdge()?e+="-edge":this.isYaBrowser()?e+="-chrome":this.isSafari()?e+="-safari":e+="-unknown",e+"-ng"}static isTouchDevice(){if(!("ontouchstart"in self))return!1;const e=navigator.userAgent.includes("Android");return this.isIOS()||e}static isIOS(){const e=navigator.userAgent.includes("iPhone OS"),t=navigator.userAgent.includes("Macintosh")&&Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2);return e||t}static isIOSTouchDevice(){return"ontouchstart"in self&&this.isIOS()}static isMacApp(){return navigator.userAgent.includes("AppleWebKit/")&&navigator.userAgent.includes("LanguageTool/")&&!navigator.userAgent.includes("Chrome/")&&!navigator.userAgent.includes("Chromium/")}static isWindowsApp(){return navigator.userAgent.includes("LanguageToolWindows/")}}n._isChromium=!1,n._isChrome=!1,n._isFirefox=!1,n._isThunderbird=!1,n._isOpera=!1,n._isOldEdge=!1,n._isEdge=!1,n._isSafari=!1,n._isYaBrowser=!1,n._isUnsupportedChrome=!1,n._isUnsupportedFirefox=!1,n._isInitialized=!1,n._contructor()},49579:(e,t,r)=>{"use strict";r(33668)},19172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ACCOUNT_STATUS_RECHECK_INTERVAL:()=>o,AUTO_LOGIN_URL:()=>R,BASE_REPHRASING_SERVER_URL:()=>O,BASE_SERVER_URL:()=>b,CHANGELOG_CHECK_INTERVAL:()=>h,CHECK_DELAY:()=>Y,CHECK_MAX_DELAY:()=>Z,CHECK_RECOMMENDATION_DELAY:()=>$,CHECK_REQUEST_TIMEOUT:()=>f,CHECK_THROTTLING_LIMIT:()=>p,CLIENT_LOGIN_URL:()=>P,COLORS:()=>ae,COLORS_ON_DARK:()=>oe,COUNTRY_COUPON_MAPPING:()=>pe,COUPON_INTERVAL:()=>ge,CURRENT_TERMS_OF_SERVICE_VERSION:()=>Ue,DEFAULT_MAX_FIX_ALL_ERRORS_COUNT:()=>q,DICTIONARY_SYNC_INTERVAL:()=>d,EDITOR_GROUP_ATTRIBUTE:()=>Fe,EMPLOYEE_EMAIL_REGEXP:()=>se,ERRORS_THAT_CAN_BE_CORRECTED_ALL_AT_ONCE:()=>be,EXTENSION_HEALTH_RECHECK_INTERVAL:()=>s,EXTERNAL_CONFIG_RELOAD_INTERVAL:()=>i,EXTERNAL_CONFIG_URL:()=>w,FEEDBACK_SERVER_URL:()=>C,FIX_SENTENCE_MIN_ERROR_AMOUNT:()=>Ee,HOVER_DELAY:()=>Q,HOVER_MAX_DELAY:()=>ee,HTTP_ERROR_ABORT:()=>Pe,HTTP_ERROR_GENERIC:()=>xe,HTTP_ERROR_PAYLOAD_TOO_LARGE:()=>Le,HTTP_ERROR_TIMEOUT:()=>De,IFRAME_INITILIZATION_RECHECK_INTERVAL:()=>u,INSTALL_URL:()=>m,INVISIBLE_SEPARATOR:()=>He,LOCAL_SERVER_URL:()=>N,MAIN_FALLBACK_SERVER_URL:()=>I,MAIN_SERVER_RECHECK_INTERVAL:()=>G,MAIN_SERVER_URL:()=>S,MASCOT_NAME:()=>Te,MAX_EXCEPTION_COUNT:()=>le,MAX_FIXES_COUNT:()=>ie,MAX_FREEMIUM_REPHRASINGS_PER_DAY:()=>ve,MAX_PHRASE_LENGTH_IN_WORDS:()=>_e,MAX_TEXT_LENGTH:()=>B,MAX_TEXT_LENGTH_CUSTOM_SERVER:()=>V,MAX_TEXT_LENGTH_PERFORMANCE_DEGRADATION:()=>X,MAX_TEXT_LENGTH_PREMIUM:()=>K,MAX_USAGE_COUNT_ONBOARDING:()=>ce,MIN_TEXT_LENGTH:()=>H,NARROW_WHITESPACE_REGEXP:()=>Ne,NEW_SYNONYMS_URL:()=>k,PACKAGE:()=>me,PARAGRAPH_LEVEL_CHUNK_LENGTH:()=>z,PICKY_RULES_THAT_ARE_CONSIDERED_ANNOYING:()=>Ae,PING_INTERVAL:()=>l,PING_URL:()=>L,PREMIUM_FALLBACK_SERVER_URL:()=>y,PREMIUM_SERVER_URL:()=>v,PRIVACY_POLICY_URL:()=>Ge,QUOTE_AT_BEGINNING_REGEXP:()=>we,QUOTE_AT_END_REGEXP:()=>Ce,RELIABLE_MOTHER_TONGUES:()=>Ie,RENDER_INTERVAL:()=>_,REPHRASE_MODE_ACADEMIC:()=>Ke,REPHRASE_MODE_CREATIVE:()=>Ve,REPHRASE_MODE_EXPAND:()=>qe,REPHRASE_MODE_FLUENCY:()=>Xe,REPHRASE_MODE_FORMALITY:()=>We,REPHRASE_MODE_SHORTEN:()=>ze,REPHRASE_MODE_SIMPLICITY:()=>je,REPHRASE_MODE_STANDARD:()=>Be,RTL_LANGUAGES:()=>Se,RULES_ALLOWED_TO_BE_SENT_TO_API:()=>Re,SEND_AND_DESTROY_COMPLETED_USER_ACTIVITIES_INTERVAL:()=>ne,SERVER_MAX_TEXT_LENGTH_BASIC:()=>j,SHORT_TEXT_MAX_LENGTH:()=>F,SPLIT_SENTENCE_LIMIT:()=>g,STATISTICS_URL:()=>x,STOPPED_TYPING_TIMEOUT:()=>J,SUPPORTED_FIX_COMPLETE_SENTENCE_LANGUAGES:()=>he,SUPPORTED_REPHRASE_LANGUAGES:()=>ue,SUPPORTED_SENTENCE_SPLITTING_LANGUAGES:()=>de,SUPPORTED_SYNONYM_LANGUAGES:()=>fe,SWITCH_TO_FALLBACK_SERVER_ERRORS:()=>M,SYNC_USER_DATA_INTERVAL:()=>c,TERMS_OF_SERVICE_API_URL:()=>U,TERMS_OF_SERVICE_URL:()=>Me,TEXT_LEVEL_MAX_LENGTH_PER_REQUEST:()=>W,TOOLBAR_DECREASE_SIZE_INTERVAL:()=>E,TOOLBOX_THEME:()=>ke,TRACK_RULE_EVENT_LANGUAGES:()=>Oe,TRAILING_WHITESPACE_REGEXP:()=>ye,UI_MODE_RECHECK_INTERVAL:()=>a,UNINSTALL_URL:()=>A,USER_ACTIVITY_DESTRUCTION_DELAY:()=>re,USER_ACTIVITY_PING_INTERVAL_LENGTH:()=>te,USER_DATA_URL:()=>T,WEBAPI_URL:()=>D});var n=r(34152);const s=3e3,a=6e4,o=36e5,i=144e5,l=864e5,c=864e5,u=1500,d=72e5,h=144e5,_=300,E=900,f=5e4,p=30,g=500,m="https://languagetool.org/webextension/welcome",A="https://languagetool.org/webextension/uninstall",R="https://languagetool.org/webextension/login",T="https://languagetool.org/webextension/user",b="https://api.languagetool.org",O="https://rewriting.languagetoolplus.com",S=`${b}/v2`,I="https://api-fallback.languagetool.org/v2",v="https://api.languagetoolplus.com/v2",y="https://languagetoolplus.com/api/v2",N="http://localhost:8081/v2",C="https://languagetool.org/send-feedback/",w="https://languagetool.org/webextension_config.json",P="https://languagetool.org/client-login",L="https://languagetool.org/ping",D="https://languagetool.org/webapi",x="https://api.languagetoolplus.com/statistics/api/store",k="https://qb-grammar-en.languagetool.org/phrasal-paraphraser/subscribe",U="https://languagetool.org/users/privacy-policy/",M=[502,503,504],G=18e4,H=4,F=50,B=n.Ay.get(n.OJ.MAX_TEXT_LENGTH_ALLOWED),j=19500,W=j,X=4e4,K=15e4,V=Number.MAX_SAFE_INTEGER,q=50,z=5e3,Y=1500,Z=4e3,$=3e3,J=2e3,Q=50,ee=200,te=2e4,re=3e5,ne=6e5,se=/@(languagetool(er)?|quillbot|scribbr|learneo|coursehero|symbolab|litcharts|spellboy)\.(com|org|de|nl)$/i,ae={get GRAMMAR(){return n.Ay.get(n.OJ.COLORS_GRAMMAR)},get STYLE(){return n.Ay.get(n.OJ.COLORS_STYLE)},get PARAPHRASE(){return n.Ay.get(n.OJ.COLORS_PARAPHRASE)},get LONG_SENTENCE(){return{UNDERLINE:"#D2CBFF",BACKGROUND:"rgba(210,203,255,0.2)",EMPHASIZE:"rgba(210,203,255,0.1)"}},get IGNORED_RANGE(){return{UNDERLINE:"#00bbe6",BACKGROUND:"rgb(92, 222, 251, 0.2)",EMPHASIZE:"rgb(154, 232, 250, 0.1)"}},get RECOMMENDATION(){return n.Ay.get(n.OJ.COLORS_RECOMMENDATION)},get RECOMMENDATION_TEASE(){return n.Ay.get(n.OJ.COLORS_RECOMMENDATION_TEASE)},get SPELLING(){return n.Ay.get(n.OJ.COLORS_SPELLING)},get SYNONYMS(){return{UNDERLINE:"#0042d7"}},get NEW_SENTENCE(){return{BACKGROUND:"rgba(30, 225, 151, 0.2)"}},get DISABLED(){return{UNDERLINE:"rgba(0, 0, 0, 0.2)",BACKGROUND:"rgba(0, 0, 0, 0.2)",EMPHASIZE:"rgba(0, 0, 0, 0.2)",TITLE:"rgba(0, 0, 0, 0.2)"}}},oe={...ae,DISABLED:{UNDERLINE:"rgba(255, 255, 255, 0.3)",BACKGROUND:"rgba(255, 255, 255, 0.3)",EMPHASIZE:"rgba(255, 255, 255, 0.3)",TITLE:"rgba(255, 255, 255, 0.3)"}},ie=5,le=6,ce=5,ue=["en","de","fr","nl","es","pt-BR","pt-PT"],de=["en"],he=["en"],_e=10,Ee=3,fe=["de","de-CH","ru","sv","pt","pt-BR","el","en","eo","it","fr","es","uk","sk","sl","pl","da","ro","nl","ca"],pe={UKRAINE:{countries:["UA","BY"],percent:50},"ITALY-DISCOUNT":{countries:["IT"],percent:20},"SPAIN-DISCOUNT":{countries:["ES"],percent:20},SOUTH_EUROPE:{countries:["RO","AL","GR","ME","EE","LT","LV","BG","CY","MT","SK","SI","RS","HR","XK","HU","MD","TR","PT"],percent:20},AFRICA:{countries:["NG","ET","EG","CD","CG","TZ","KE","UG","DZ","SD","MA","AO","MZ","TN","CI","DJ","SZ","MU","GQ","GA","BW","SO","CD","ER","MG"],percent:50},ASIA:{countries:["ID","PK","BD","VN","MM","PH","UZ","MY","NP","KZ","KH","UZ","TH","YE","SY","JO"],percent:50},LATIN_AMERICA:{countries:["PE","VE","EC","SV","DO","BO","SR","AR","HN","BZ","CR","PA","GT","NI","GY","UY","HT","JM","TT","CU"],percent:50},BRAZIL:{countries:["BR"],percent:50}},ge=7776e6,me={BASIC:"Basic",PREMIUM:"Premium"},Ae=["EN_QUOTES","PASSIVE_VOICE","DASH_RULE","SENTENCE_FRAGMENT","PONCTUATION_DOUBLE","TOO_LONG_SENTENCE","COMETES_TIPOGRAFIQUES","APOSTROF_TIPOGRAFIC","FALSCHE_VERWENDUNG_DES_BINDESTRICHS","HALBGEVIERTSTRICH","PARAGRAF_LEERZEICHEN","TYPOGRAFISCHE_APOSTROPHE","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2","PUNCTUATION_PARAGRAPH_END","FINAL_STOPS","FINAL_PUNCTUATION","SMART_QUOTES","PT_SMART_QUOTES","DASH_SPACE_RULES","HIPHEN_SPACE_RULES","BRAK_KROPKI","DYWIZ","CUDZYSLOW_DRUKARSKI","TYPOGRAFISCHE_AANHALINGSTEKENS","TYPOGRAFISCHE_AANHALINGSTEKENS_2","EINDE_ZIN_ONVERWACHT","BACKTICK","GEDACHTESTREEPJE","OPTIONAL_HYPHEN","COMILLAS_TIPOGRAFICAS","COMETES_TIPOGRAFIQUES","GL_SMART_QUOTES"],Re=["OXFORD_SPELLING_Z_NOT_S"],Te="jeremy",be=[{ruleId:"FALSCHES_ANFUEHRUNGSZEICHEN",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"},{match:/(^\xbb)|(\xab$)/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\xbb</lt-em>\u2026<lt-em>\xab</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"},{match:/(^\xab)|(\xbb$)/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\xab</lt-em>\u2026<lt-em>\xbb</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2",suggestions:[{match:/[\u201a\u2018]/,message:"Alle <lt-em>'</lt-em>\u2026<lt-em>'</lt-em> zu <lt-em>\u201a</lt-em>\u2026<lt-em>\u2018</lt-em> \xe4ndern"},{match:/[\u201e\u201c]/,message:"Alle <lt-em>'</lt-em>\u2026<lt-em>'</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_APOSTROPHE",suggestions:[{match:/\u2019/,message:"Alle Apostrophe zu <lt-em>\u2019</lt-em> \xe4ndern"}]},{ruleId:"EN_QUOTES",suggestions:[{match:/[\u201c\u201d]/,message:"Change all <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> to <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em>"}]},{ruleId:"WRONG_APOSTROPHE",suggestions:[{match:/'/,message:"Use <lt-em>'</lt-em> for all bad apostrophes"},{match:/\u2019/,message:"Use <lt-em>\u2019</lt-em> for all bad apostrophes"}]},{ruleId:"PARAGRAF_LEERZEICHEN",suggestions:[{match:/\xa7\u00A0/,message:"Alle Leerzeichen nach <lt-em>\xa7</lt-em> \xe4ndern"}]},{ruleId:"CONSISTENCYRULE_JE_F",suggestions:[{match:/[^e]$/,message:"Remplacer tous les <lt-em>je</lt-em> vers le masculin"}]},{ruleId:"CONSISTENCYRULE_JE_M",suggestions:[{match:/e$/,message:"Remplacer tous les <lt-em>je</lt-em> vers le f\xe9minin"}]},{ruleId:"COMILLAS_TIPOGRAFICAS",suggestions:[{match:/[\u201c\u201d]/,message:"Cambiar todas las <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> por <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em>"},{match:/(^\xab)|(\xbb$)/,message:"Cambiar todas las <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> por <lt-em>\xab</lt-em>\u2026<lt-em>\xbb</lt-em>"}]},{ruleId:"COMETES_TIPOGRAFIQUES",suggestions:[{match:/[\u201c\u201d]/,message:"Canvia totes les <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> per <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em>"},{match:/(^\xab)|(\xbb$)/,message:"Canvia totes les <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> per <lt-em>\xab</lt-em>\u2026<lt-em>\xbb</lt-em>"}]},{ruleId:"TYPOGRAFISCHE_AANHALINGSTEKENS",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> veranderen in <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em>"}]},{ruleId:"PT_SMART_QUOTES",suggestions:[{match:/[\u201c\u201d]/,message:"Corrigir todas as aspas."}]},{ruleId:"GL_SMART_QUOTES",suggestions:[{match:/[\u201c\u201d]/,message:"Corrixir todas as comi\xf1as."}]}],Oe=["en","de","es","ca","fr","nl","pt"],Se=["ar","he","fa","ur","ku","az"],Ie=["de","fr"],ve=3,ye=/^[ \u00A0]|[ \u00A0]$/g,Ne=/\u202F/g,Ce=/[\"\u201c\u201d\u201e]$/,we=/^[\"\u201c\u201d\u201e]/,Pe="E_ABORT",Le="E_PAYLOAD_TOO_LARGE",De="E_TIMEOUT",xe="E_GENERIC",ke={borderRadiusSmall:4,borderRadiusMedium:8,borderRadiusLarge:12,light:{accentColorDark:"#1976F0",accentColorMedium:"#239AFF",accentColorLight:"#ECF6FF",textColorDark:"#2f3237",textColorMedium:"#5E636E",textColorLight:"#8F96A3",backgroundColorDark:"#DEE3ED",backgroundColorMedium:"#F1F3F9",backgroundColorLight:"#fff",borderColor:"#F1F3F9"},dark:{accentColorDark:"#ECF6FF",accentColorMedium:"#5EB5FF",accentColorLight:"#1976F0",textColorDark:"#f1f3f9",textColorMedium:"#DEE3ED",textColorLight:"#C2C9D6",backgroundColorDark:"#5E636E",backgroundColorMedium:"#2f3237",backgroundColorLight:"#111213",borderColor:"#1D1E20"},fontFamily:{macos:"LanguageTool-mac",win:"LanguageTool-win"},fontSizes:{xSmall:10,small:12,medium:14,large:16,xLarge:18}},Ue="2024-11-19",Me="https://languagetool.org/legal/terms",Ge="https://languagetool.org/legal/privacy",He="\u2063",Fe=`data-${n.Ay.get(n.OJ.EXTN_PREFIX)}-editor-group`,Be="standard",je="simple",We="formal",Xe="fluency",Ke="academic",Ve="creative",qe="expand",ze="shorten"},96422:(e,t,r)=>{"use strict";var n=r(19172),s=r(34152),a=r(33668);class o{static getServerBaseUrl(e,t=!1,r=!0){const s=r&&(t?this._useFallbackServerForParagraphLevelRequests:this._useFallbackServerForTextLevelRequests)&&!e.apiServerUrl;return e.apiServerUrl&&!this._isLanguageToolServer(e.apiServerUrl)?e.apiServerUrl:e.isPremium||e.user||e.apiServerUrl===n.PREMIUM_SERVER_URL?s?n.PREMIUM_FALLBACK_SERVER_URL:n.PREMIUM_SERVER_URL:s?n.MAIN_FALLBACK_SERVER_URL:n.MAIN_SERVER_URL}static _getServerFullUrl(e,t=!1,r=!1){const n=this.getServerBaseUrl(e,t),s=n.endsWith("/")?"":"/",a=new URL(n+s+"check");return a.searchParams.set("c","1"),t&&!1===e.useParagraphLevelCaching||a.searchParams.set("instanceId",e.instanceId),r&&a.searchParams.set("languageChanged","true"),e.version&&a.searchParams.set("v",e.version),a.toString()}static _abortTextLevelCheckRequest(e){this._textLevelAbortControllers.has(e)&&(this._textLevelAbortControllers.get(e).abort(),this._textLevelAbortControllers.delete(e))}static _abortParagraphLevelCheckRequest(e){this._paragraphLevelAbortControllers.has(e)&&(this._paragraphLevelAbortControllers.get(e).abort(),this._paragraphLevelAbortControllers.delete(e))}static _abortLanguageDetectionRequest(e){this._languageDetectionAbortControllers.has(e)&&(this._languageDetectionAbortControllers.get(e).abort(),this._languageDetectionAbortControllers.delete(e))}static _abortRecommendationRequest(e){const t=this._recommendationAbortControllers.get(e);t&&(t.abort(),this._recommendationAbortControllers.delete(e))}static _prepareText(e){return e.replace(this.ZWNJ_REGEXP,this.ZWS)}static _joinInChunks(e,t=n.PARAGRAPH_LEVEL_CHUNK_LENGTH){const r=[];let s=0,a=[];return e.forEach((e=>{s>t&&(s=0,a=[]),a.push(e),s+=e.text.length,r.includes(a)||r.push(a)})),r}static _getRequestData(e,t,r){const s=new URLSearchParams,a={text:e};r.recipientInfo&&(r.recipientInfo.address||r.recipientInfo.fullName)&&(a.metaData={EmailToAddress:r.recipientInfo.address,FullName:r.recipientInfo.fullName}),s.append("data",JSON.stringify(a));const o=Boolean(r.isPremium||!r.apiServerUrl||r.apiServerUrl&&r.apiServerUrl.startsWith(n.PREMIUM_SERVER_URL)||r.apiServerUrl&&!this._isLanguageToolServer(r.apiServerUrl));if(o&&r.user&&"password"in r.user?(s.append("username",r.user.email),s.append("password",r.user.password)):o&&r.user&&"token"in r.user&&(s.append("username",r.user.email),s.append("tokenV2",r.user.token)),s.append("textSessionId",r.instanceId),r.isPremium||s.append("enableHiddenRules","true"),r.motherTongue&&n.RELIABLE_MOTHER_TONGUES.includes(r.motherTongue)&&s.append("motherTongue",r.motherTongue),"normal"!==r.checkLevel&&s.append("level",r.checkLevel.replace("hidden-","")),t)s.append("language",t.code);else{s.append("language","auto"),s.append("noopLanguages",r.preferredLanguages.join(","));const e=this._getPreferredVariants(r.languageVariants);e.length>0&&s.append("preferredVariants",e.toString())}if(r.testGroups){const e=[];for(const[t,n]of Object.entries(r.testGroups))n&&e.push(t);e.length&&s.append("abtest",e.join(","))}if(s.append("preferredLanguages",r.preferredLanguages.join(",")),r.forcePreferredLanguages&&s.append("forcePreferredLanguages","true"),r.writingGoalId){const e=this.HIGH_LEVEL_GOALS.find((e=>e.id===r.writingGoalId));e&&s.append("toneTags",e.tags.join(","))}const i=["WHITESPACE_RULE"].concat(r.disabledRules.filter((e=>n.RULES_ALLOWED_TO_BE_SENT_TO_API.includes(e))));return s.append("disabledRules",i.join(",")),r.userAgent&&s.append("useragent",r.userAgent),s}static _getPreferredVariants(e){return Object.values(e)}static _getTextLevelRequestData(e,t,r){const n=this._getRequestData(e,t,r);return n.append("mode","textLevelOnly"),n}static _getParagraphLevelCheckRequestData(e,t,r,n){const s=this._getRequestData(e,t,r);return s.append("mode","allButTextLevelOnly"),s.append("allowIncompleteResults",String(n)),s}static async _sendRequest(e,t,r=n.CHECK_REQUEST_TIMEOUT){const s=fetch(e,t).catch((t=>{throw"AbortError"===t.name?{reason:"AbortError",status:0,response:t.message||""}:{reason:"ConnectionError",status:0,url:e.replace(/\?.*/,""),response:t.message||""}})).then(this._checkForException).then((e=>e.json())),a=new Promise(((t,n)=>{setTimeout((()=>{n({reason:"TimeoutError",status:0,url:e.replace(/\?.*/,""),response:""})}),r)}));return Promise.race([s,a])}static _isConnectionOrServerIssue(e){return n.SWITCH_TO_FALLBACK_SERVER_ERRORS.includes(e.status)||["ConnectionError","TimeoutError"].includes(e.reason)}static _getGraphemesCount(e,t,r=0){for(let n=r;n<e.length;n++){if(t<=0)return n-r;t-=e[n].length}return e.length-r}static _getCodepointsCount(e,t,r=0){let n=0;for(let s=r;s<Math.min(e.length,r+t);s++)n+=e[s].length;return n}static _correctMatches(e,t,r){if(t!==r){const n=(0,a.p$)(t),s=(0,a.p$)(r);for(const t of e){const e=o._getGraphemesCount(n,t.offset),r=o._getGraphemesCount(n,t.length,e);t.offset=o._getCodepointsCount(s,e),t.length=o._getCodepointsCount(s,r,e)}}return e}static _getLeftText(e,t,r,n=15){let s=Math.max(t-n,0);if(r){const r=e.lastIndexOf("\n",t);r>=s&&(s=r+1)}let a=e.substring(s,t).replace(this.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP,"");return 0===s||r&&"\n"===e[s-1]||(a="..."+a),a}static _getRightText(e,t,r,n=15){let s=Math.min(t+n,e.length);if(r){const r=e.indexOf("\n",t);-1!==r&&r<=s&&(s=r)}let a=e.substring(t,s).replace(this.NON_ALPHANUMERIC_AT_END_REGEXP,"");return s===e.length||r&&"\n"===e[s]||(a+="..."),a}static _transformMatches(e,t,r,n=!1){return e.map((e=>{const s=e.rule.id.startsWith("DB_"),i=this.SPELLING_RULES_ID.some((t=>e.rule.id.includes(t))),l=this.STYLE_ISSUE_TYPES.some((t=>e.rule.issueType===t)),c="typographical"===e.rule.issueType&&"CASING"!==e.rule.category.id||"PUNCTUATION"===e.rule.category.id||"TYPOGRAPHY"===e.rule.category.id||e.rule.category.id.includes("KOMMA"),u=Boolean(e.rule.tags&&e.rule.tags.includes("picky")),d="RECOMMENDATION"===e.rule.issueType||"PHRASAL_RECOMMENDATION"===e.rule.issueType,h=t.substr(e.offset,e.length),_=`${o._getLeftText(t,e.offset,n)}|${h}|${o._getRightText(t,e.offset+e.length,n)}`,E=o._getLeftText(t,e.offset,!0,60),f=o._getRightText(t,e.offset+e.length,!0,60),p=`${(0,a.Zn)(E)}<lt-em>${(0,a.Zn)(h)}</lt-em>${(0,a.Zn)(f)}`;let g="";e.shortMessage&&e.shortMessage.length<60&&e.shortMessage!==e.message&&(g=e.shortMessage.replace(this.PUNCTUATION_AT_END,""));const m=e.replacements.map((e=>({value:e.value,prefix:e.prefix,suffix:e.suffix,type:e.type,shortDescription:e.shortDescription})));return{isParagraphLevelCheck:n,rule:e.rule,isCustomError:s,isSpellingError:i,isStyleError:l,isPunctuationError:c,isPicky:u,isRecommendation:d,contextForSureMatch:e.contextForSureMatch,language:{code:r.code,name:r.name},description:e.message,shortDescription:g,goodExample:e.goodExample,badExample:e.badExample,start:e.offset,end:e.offset+e.length,length:e.length,originalPhrase:h,contextPhrase:_,longContextPhrase:p,fixes:m,isLocked:e.isLocked}}))}static _adjustErrors(e,t,r){const s=r.recipientInfo?r.recipientInfo.fullName.split(" ").filter((e=>e)):[];return e.filter((e=>{e.fixes=e.fixes.filter((t=>t.value!=="("+e.originalPhrase+")"&&t.value!==e.originalPhrase&&"(suggestion limit reached)"!==t.value&&"(se ha alcanzado el l\xedmite de sugerencias)"!==t.value&&"(Vorschlagslimit erreicht)"!==t.value)),e.language.code.startsWith("en")&&(0,a.mq)(e.originalPhrase)&&!/[a-z]/i.test(e.contextPhrase)&&e.fixes.forEach((t=>{t.value.toLowerCase()!==e.originalPhrase.toLowerCase()&&(t.value=t.value.toUpperCase())})),"PT_CLICHE_REPLACE"!==e.rule.id&&"PT_WORDINESS_REPLACE"!==e.rule.id||e.fixes.forEach((t=>{(t.value.startsWith("REFORMULAR")||t.value.startsWith("APAGAR")||t.value.startsWith("ESPECIFICAR"))&&(e.description=e.description.replace(/\s\xc9 prefer\xedvel dizer.+(REFORMULAR|APAGAR|ESPECIFICAR).+$/,""),t.value="")}));if(this.EMAIL_SIGNATURE_SEPARATOR_REGEXP.test(e.originalPhrase))return!1;if(this.INVISIBLE_PHRASE_REGEXP.test(e.originalPhrase))return!1;if(e.rule.id.endsWith("WORD_REPEAT_BEGINNING_RULE")&&this.ONLY_NUMBERS_REGEXP.test(e.originalPhrase))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.COLON_WHITESPACE_REGEXP.test(e.originalPhrase))return!1;const o=t.substring(e.start-25,e.start),i=t.substr(e.end,25);if(r.ignoreCapitalizationErrorsAtLineStart&&"UPPERCASE_SENTENCE_START"===e.rule.id&&this.PREVENT_MID_SENTENCE_CAPITALIZATION.test(o))return!1;if(r.ignoreCapitalizationErrorsAtLineStart&&"PUNCTUATION_PARAGRAPH_END"===e.rule.id&&this.PREVENT_MID_SENTENCE_PUNCTUATION.test(i))return!1;if("DE_CASE"===e.rule.id&&this.BULLET_POINT_REGEXP.test(o))return!1;if("DE_CASE"===e.rule.id&&this.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP.test(o))return!1;if("DE_CASE"===e.rule.id&&this.PIPE_AT_END_REGEXP.test(o))return!1;if("DE_CASE"===e.rule.id&&this.MARKDOWN_HEADLINE_REGEXP.test(o))return!1;if("DE_CASE"===e.rule.id&&this.EMOJI_SENTENCE_START_REGEXP.test(o))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP.test(i))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&this.WIKI_MARKUP_AT_END_REGEXP.test(o))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&this.ONE_LETTER_AT_END_REGEXP.test(o))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&this.NUMBER_WITH_DOT_AT_END_REGEXP.test(o))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&o.endsWith("{!"))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&this.SINGLE_UPPERCASE_LETTER_REGEXP.test(e.originalPhrase)&&this.ABBREVIATION_AT_END_REGEXP.test(o))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&"net"===e.originalPhrase.toLowerCase())return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&this.NET_AT_BEGINNING_REGEXP.test(i))return!1;if(e.rule.id.startsWith("AI_")&&1===e.fixes.length&&e.originalPhrase.replace(this.INVISIBLE_CHARS_REGEXP,"")===e.fixes[0].value)return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(")")&&o.endsWith(this.ZWS))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(".")&&this.FILE_TYPE_AT_BEGINNING_REGEXP.test(i))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&o.endsWith("(")&&(",)"===e.originalPhrase||".)"===e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&o.endsWith("\n")&&[")","}","]","."].includes(e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&i.startsWith("/"))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.includes(this.ZWS))return!1;if("WORT1_BINDESTRICH_SPACE_WORT2"===e.rule.id&&e.originalPhrase.endsWith(this.ZWS))return!1;if("MULTIPLICATION_SIGN"===e.rule.id&&(this.AT_LEAST_TWO_LETTERS_AT_END_REGEXP.test(o)||!i||this.PUNCTUATION_AT_BEGINNING_REGEXP.test(i)))return!1;if("ZBEDNA_SPACJA_PRZED"===e.rule.id&&e.originalPhrase.includes(this.ZWS))return!1;if("UNLIKELY_OPENING_PUNCTUATION"===e.rule.id&&this.PUNCTUATION_SPACE_AT_END_REGEXP.test(o))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(!this.LOWERCASE_REGEXP.test(e.originalPhrase)||e.originalPhrase.includes("-")||e.originalPhrase.includes("__")||this.SLASH_AT_END_REGEXP.test(o)||this.SLASH_AT_BEGINNING_REGEXP.test(i)))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&o.endsWith("[")&&i.startsWith("]"))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&n.QUOTE_AT_END_REGEXP.test(o)&&n.QUOTE_AT_BEGINNING_REGEXP.test(i))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(o.endsWith("=")||o.endsWith("&")||o.endsWith("?")))return!1;if(["APOS_INCORRECT","LOOSE_ACCENTS"].includes(e.rule.id)&&"`"===e.originalPhrase)return!1;if(["_2_AANH_B","FALSCHES_ANFUEHRUNGSZEICHEN_2"].includes(e.rule.id)&&"``"===e.originalPhrase)return!1;if("DASH_RULE"===e.rule.id&&i.startsWith(" [")&&(!o||o.endsWith("\n")))return!1;if(e.isSpellingError&&e.originalPhrase.length>6&&e.fixes.length>4&&e.language.code.startsWith("de")&&(e.fixes.length=4),e.isSpellingError||"WORD_CONTAINS_UNDERSCORE"===e.rule.id){const t=e.originalPhrase.charAt(0),n=e.originalPhrase.toLowerCase();if((0,a.S)(e,r.dictionary))return!1;if((i.startsWith("_")||o.endsWith("_"))&&!e.language.code.startsWith("de"))return!1;if(e.originalPhrase.startsWith("$")&&i.startsWith("}")&&o.endsWith("{"))return!1;if(e.originalPhrase.startsWith("$")&&e.originalPhrase.endsWith("$"))return!1;if(this.HTML_ENTITIES.includes(e.originalPhrase)&&o.endsWith("&")||this.HTML_ENTITIES_WITH_AND.includes(e.originalPhrase)||this.HTML_ENTITIES_WITH_AND.includes("&"+e.originalPhrase))return!1;if(this.COMMON_TLDS.some(((e,t)=>n.endsWith("."+e)||this.COMMON_TLD_WITH_DOT_REGEXPS[t].test(i))))return!1;if(this.DOT_WITH_PREFIX_REGEXP.test(o)&&this.COMMON_TLDS.includes(n))return!1;if(this.COMMON_FILE_TYPES.some(((e,t)=>n.endsWith("."+e)||this.COMMON_FILE_TYPE_WITH_DOT_REGEXPS[t].test(i))))return!1;if(this.DOT_WITH_PREFIX_REGEXP.test(o)&&this.COMMON_FILE_TYPES.includes(n))return!1;const l="@"===t||this.MENTION_SYMBOL_AT_BEGINNING_REGEXP.test(o),c="#"===t||this.HASH_SYMBOL_AT_BEGINNING_REGEXP.test(o);if(l||c)return!1;if(s.some((t=>t===e.originalPhrase)))return!1;if(this.WAVY_DASH_REGEXP.test(e.originalPhrase))return!1;for(const t of s)if(t.toLowerCase()===e.originalPhrase.toLowerCase()&&!e.fixes.some((e=>e.value===t))){e.fixes.unshift({value:t});break}}return!0}))}static _processResponse(e,t,r,n,a,o=!1,i=!1,l=!1){e.matches=this._correctMatches(e.matches,r,n);let c=this._transformMatches(e.matches,n,e.language,o);c=this._adjustErrors(c,n,a);let u=[];const d=[],h=[],_=!a.apiServerUrl||this._isLanguageToolServer(a.apiServerUrl);if(t=this._correctMatches(t.filter((({start:e,end:t})=>t-e>-1)).map((({start:e,end:t,detectedLanguages:r,checkStatus:n})=>({offset:e,length:t-e,detectedLanguages:r,checkStatus:n}))),r,n).map((({offset:e,length:t,detectedLanguages:r,checkStatus:n})=>({start:e,end:e+t,length:t,detectedLanguages:r,checkStatus:n}))),i)return{errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:t};if(l){const e=s.Ay.get(s.OJ.FIX_ALL_CONFIG);return{errors:c.filter((t=>!(!t.isRecommendation||e.FIX_RECOMMENDATIONS)||(!(!t.isStyleError||e.FIX_STYLE_ERRORS)||!e.FIX_GC_ERRORS))),premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:t}}return!a.isPremium&&_&&e.language&&e.language.code.startsWith("nl")&&(c=c.filter((e=>!this.NL_PREMIUM_RULES.includes(e.rule.id)||(e.rule.id="HIDDEN_RULE",e.fixes=[],u.push(e),!1)))),!a.isPremium&&_&&e.language&&e.language.code.startsWith("pl")&&(c=c.filter((e=>!this.PL_PREMIUM_RULES.includes(e.rule.id)||(e.rule.id="HIDDEN_RULE",e.fixes=[],u.push(e),!1)))),a.isPremium&&c.forEach((e=>{this.NL_PREMIUM_RULES.includes(e.rule.id)&&(e.rule.isPremium=!0),this.PL_PREMIUM_RULES.includes(e.rule.id)&&(e.rule.isPremium=!0)})),a.debug&&c.forEach((e=>{e.description=(e.rule.isPremium?"prem:":"")+e.rule.id+"["+(e.rule.subId||"")+"] "+e.description})),e.hiddenMatches&&(u=u.concat(this._transformMatches(e.hiddenMatches,n,e.language,o))),"hidden-picky"===a.checkLevel&&(c=c.filter((e=>!e.isPicky||(h.push(e),!1))),e.hiddenMatches&&(u=u.filter((e=>!e.isPicky||(d.push(e),!1))))),{errors:c,premiumErrors:u,pickyErrors:h,premiumPickyErrors:d,sentenceRanges:t}}static _correctErrorOffsets(e,t){const r=[];let n=0;for(const o of e){const e=o.text.length;for(const i of t)if(i.start>=n&&i.end<=n+e){var s,a;const e=Object.assign({},i);e.start=e.start-n+o.offset,e.end=e.start+e.length,null===(a=e.rule)||void 0===a||null===(s=a.phraseDiff)||void 0===s||s.forEach((e=>{e.sourceStart=e.sourceStart-n+o.offset,e.sourceEnd=e.sourceEnd-n+o.offset,e.targetEnd=e.targetEnd-n+o.offset,e.targetStart=e.targetStart-n+o.offset})),r.push(e)}n+=e+2}return r}static async checkTextLevel(e,t,r,s=!1){e=this._prepareText(e);const a=Boolean(r.adapter);if(!e.trim()||a)return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]};this._abortTextLevelCheckRequest(r.instanceId),this._textLevelAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForTextLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=n.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForTextLevelRequests=!1);const o=e.normalize(),i=this._getServerFullUrl(r,!1,s),l={method:"post",mode:"cors",credentials:"omit",body:this._getTextLevelRequestData(o,t,r),signal:this._textLevelAbortControllers.get(r.instanceId).signal};return this._sendRequest(i,l).then((t=>{const{errors:n,premiumErrors:s,pickyErrors:a,premiumPickyErrors:i}=this._processResponse(t,[],o,e,r);return{language:{code:t.language.code,name:t.language.name,detectedLanguage:t.language.detectedLanguage},errors:n,premiumErrors:s,pickyErrors:a,premiumPickyErrors:i}})).catch((n=>{if(this._isConnectionOrServerIssue(n)){this._abortTextLevelCheckRequest(r.instanceId);if(!r.apiServerUrl&&!this._useFallbackServerForTextLevelRequests)return this._useFallbackServerForTextLevelRequests=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.checkTextLevel(e,t,r)}throw n}))}static _buildSentenceRanges(e,t){if(!t.extendedSentenceRanges&&!t.sentenceRanges)return[];let r=t.extendedSentenceRanges;r||(r=(t.sentenceRanges||[]).map((e=>({from:e[0],to:e[1],detectedLanguages:[{language:t.language.code.split("-")[0],rate:1}]}))));const n=r.map((e=>({start:e.from,end:e.to,length:e.to-e.from,detectedLanguages:e.detectedLanguages.map((e=>({language:e.language,confidence:e.rate}))),checkStatus:e.checkStatus})));return(0,a.oi)(n,e)}static cancelAllRequests(e){this._abortParagraphLevelCheckRequest(e),this._abortLanguageDetectionRequest(e),this._abortTextLevelCheckRequest(e),this._abortRecommendationRequest(e)}static async checkParagraphLevel(e,t,r,o=!1,i,l,c,u){e.forEach((e=>{e.text=this._prepareText(e.text)}));if(!e.some((e=>!!e.text.trim())))return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],isIncompleteResult:!1,areErrorsSuppressed:!1};this._abortParagraphLevelCheckRequest(r.instanceId),this._paragraphLevelAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForParagraphLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=n.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForParagraphLevelRequests=!1);let d=!1;if(c&&c.ruleId){const e=s.Ay.get(s.OJ.AI_RULE_ID_REGEX);d=e.test(c.ruleId)}const h=this._getServerFullUrl(r,!0),_=this._joinInChunks(e),E=[];for(const e of _){var f;const n=e.map((e=>e.text)).join("\n\n"),s=n.normalize(),_={method:"post",mode:"cors",credentials:"omit",body:this._getParagraphLevelCheckRequestData(s,t,r,o),signal:this._paragraphLevelAbortControllers.get(r.instanceId).signal},p=t=>{var a;const o=this._postProcessParagraphLevelCheckResult(t,e,s,n,r,d,l,u);null===(a=r.recommendationCallback)||void 0===a||a.call(r,o)};let g;g="REPHRASING"===(null==c?void 0:c.ruleId)?a.PN.REPHRASING:(null==c?void 0:c.isRecommendation)?a.PN.GC_RECOMMENDATION:a.PN.GC;const m={input:{acceptChangeType:g,language:null==t?void 0:t.code,paragraphs:e,editorCompleteText:i||"",preferredVariants:this._getPreferredVariants(r.languageVariants),disableRecommendations:r.disableRecommendations,replacementText:null==c?void 0:c.replacementText,hasUserAppliedFix:!!c&&d,changedParagraphsSentencesLength:l,appliedFixAll:u,writingGoal:r.writingGoalId},signal:this._paragraphLevelAbortControllers.get(r.instanceId).signal,recommendationResponseCallback:p,metaData:{instanceId:r.instanceId,tabId:r.tabId,hostUrl:r.hostUrl||"",hostCategory:r.hostCategory}},A=(r.adapter?null===(f=r.adapter)||void 0===f?void 0:f.grammarCheck(m):this._sendRequest(h,_)).then((t=>this._postProcessParagraphLevelCheckResult(t,e,s,n,r,d,l,u)));E.push(A)}return Promise.all(E).then((e=>{const t=e[0].language,r=e[0].areErrorsSuppressed,n=e[0].metaData;return{language:t,errors:Array.prototype.concat.apply([],e.map((e=>e.errors))),premiumErrors:Array.prototype.concat.apply([],e.map((e=>e.premiumErrors))),premiumPickyErrors:Array.prototype.concat.apply([],e.map((e=>e.premiumPickyErrors))),pickyErrors:Array.prototype.concat.apply([],e.map((e=>e.pickyErrors))),isIncompleteResult:e.some((e=>e.isIncompleteResult)),sentenceRanges:Array.prototype.concat.apply([],e.filter((e=>Boolean(e.sentenceRanges))).map((e=>e.sentenceRanges))),areErrorsSuppressed:r,metaData:n}})).catch((n=>{if(this._isConnectionOrServerIssue(n)){this._abortParagraphLevelCheckRequest(r.instanceId);if((!r.apiServerUrl||this._isLanguageToolServer(r.apiServerUrl))&&!this._useFallbackServerForParagraphLevelRequests)return this._useFallbackServerForParagraphLevelRequests=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.checkParagraphLevel(e,t,r,o,i)}throw n}))}static async checkParagraph(e,t,r,o,i=!1,l,c,u,d){t.text=this._prepareText(t.text);if(!!!t.text.trim())return{language:r,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],isIncompleteResult:!1,areErrorsSuppressed:!1};this._abortParagraphLevelCheckRequest(e),this._paragraphLevelAbortControllers.set(e,new AbortController),this._useFallbackServerForParagraphLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=n.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForParagraphLevelRequests=!1);let h=!1;if(u&&u.ruleId){const e=s.Ay.get(s.OJ.AI_RULE_ID_REGEX);h=e.test(u.ruleId)}const _=this._getServerFullUrl(o,!0),E=this._joinInChunks([t]),f=[];for(const t of E){var p;const n=t.map((e=>e.text)).join("\n\n"),s=n.normalize(),E={method:"post",mode:"cors",credentials:"omit",body:this._getParagraphLevelCheckRequestData(s,r,o,i),signal:this._paragraphLevelAbortControllers.get(e).signal},g=e=>{var r;const a=this._postProcessParagraphLevelCheckResult(e,t,s,n,o,h,c,d);null===(r=o.recommendationCallback)||void 0===r||r.call(o,a)};let m;m="REPHRASING"===(null==u?void 0:u.ruleId)?a.PN.REPHRASING:(null==u?void 0:u.isRecommendation)?a.PN.GC_RECOMMENDATION:a.PN.GC;const A={input:{acceptChangeType:m,language:null==r?void 0:r.code,paragraphs:t,editorCompleteText:l||"",preferredVariants:this._getPreferredVariants(o.languageVariants),disableRecommendations:o.disableRecommendations,replacementText:null==u?void 0:u.replacementText,hasUserAppliedFix:!!u&&h,changedParagraphsSentencesLength:c,appliedFixAll:d,writingGoal:o.writingGoalId},signal:this._paragraphLevelAbortControllers.get(e).signal,recommendationResponseCallback:g,metaData:{instanceId:e,tabId:o.tabId,hostUrl:o.hostUrl||"",hostCategory:o.hostCategory}},R=(o.adapter?null===(p=o.adapter)||void 0===p?void 0:p.grammarCheck(A):this._sendRequest(_,E)).then((e=>this._postProcessParagraphLevelCheckResult(e,t,s,n,o,h,c,d)));f.push(R)}return Promise.all(f).then((e=>{const t=e[0].language,r=e[0].areErrorsSuppressed,n=e[0].metaData;return{language:t,errors:Array.prototype.concat.apply([],e.map((e=>e.errors))),premiumErrors:Array.prototype.concat.apply([],e.map((e=>e.premiumErrors))),premiumPickyErrors:Array.prototype.concat.apply([],e.map((e=>e.premiumPickyErrors))),pickyErrors:Array.prototype.concat.apply([],e.map((e=>e.pickyErrors))),isIncompleteResult:e.some((e=>e.isIncompleteResult)),sentenceRanges:Array.prototype.concat.apply([],e.filter((e=>Boolean(e.sentenceRanges))).map((e=>e.sentenceRanges))),areErrorsSuppressed:r,metaData:n}})).catch((t=>{throw this._isConnectionOrServerIssue(t)&&this._abortParagraphLevelCheckRequest(e),t}))}static _postProcessParagraphLevelCheckResult(e,t,r,n,s,a,o,i){var l;const{language:c,warnings:u}=e,d=e.ignoreRanges||[];s.debug&&d.length&&(e.matches=this._filterErrorsInIgnoredRanges(e.matches,d),e.hiddenMatches&&(e.hiddenMatches=this._filterErrorsInIgnoredRanges(e.hiddenMatches,d)),this._addIgnoredRangeMatches(r,e.matches,d));let h=this._buildSentenceRanges(r,e);const _=(null===(l=s.adapter)||void 0===l?void 0:l.grammarCheck)?a:a&&1===t.length&&h.length===o,{errors:E,premiumErrors:f,pickyErrors:p,premiumPickyErrors:g,...m}=this._processResponse(e,h,r,n,s,!0,_,i);h=m.sentenceRanges;const A=this._correctErrorOffsets(t,E),R=this._correctErrorOffsets(t,f),T=this._correctErrorOffsets(t,p),b=this._correctErrorOffsets(t,g);return h=this._correctErrorOffsets(t,h),{language:{code:c.code,name:c.name},errors:A,premiumErrors:R,pickyErrors:T,premiumPickyErrors:b,isIncompleteResult:!!u&&u.incompleteResults,areErrorsSuppressed:_,sentenceRanges:h,metaData:null==e?void 0:e.metaData}}static async checkRecommendation(e,t){e.isForcedRecommendation||this._abortRecommendationRequest(e.instanceId);const r=new AbortController;this._recommendationAbortControllers.set(e.instanceId,r);const n={input:{language:e.language.code,texts:e.texts,priorities:e.priorities,writingGoal:e.writingGoal||""},metaData:{...null==t?void 0:t.metaData}};if(null==t?void 0:t.adapter){var s;const a=await t.adapter.recommendation(n,{...t.options,signal:(null===(s=t.options)||void 0===s?void 0:s.signal)||r.signal});return this._transformMatches(a.matches||[],e.originalText,e.language,!0)}return new Promise((e=>{e([])}))}static async unlockRecommendation(e,t){var r;return await(null===(r=t.adapter)||void 0===r?void 0:r.unlockRecommendation({lockId:e,metaData:t.metaData}))}static _filterErrorsInIgnoredRanges(e,t){return e.filter((e=>{const r=e.offset,n=e.offset+e.length;return!t.some((e=>r>=e.from&&r<=e.to||n>=e.from&&n<=e.to))}))}static _addIgnoredRangeMatches(e,t,r){r.forEach((r=>{let n=r.to-r.from;const s=e.substring(r.from,r.to).match(/\s+$/);s&&(n-=s[0].length);const a={offset:r.from,length:n,rule:{id:"IGNORED_RANGE",category:{id:"IGNORED_RANGE",name:"Ignored Range"},issueType:"ignoredRange",description:"",isPremium:!1},contextForSureMatch:0,message:"This text is in a different language than the rest of the text.",shortMessage:"Different language: "+r.language.code,replacements:[]};t.push(a)}))}static async detectLanguage(e,t,r){e=this._prepareText(e);const s=Boolean(r.adapter);if(!e.trim()||t||s)return{language:t,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]};this._abortLanguageDetectionRequest(r.instanceId),this._languageDetectionAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForLanguageDetection&&Date.now()-this._mainServerUnavailabilityTimeStamp>=n.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForLanguageDetection=!1);const a=e.substr(0,1e3).normalize(),o=this._getServerFullUrl(r,!1),i={method:"post",mode:"cors",credentials:"omit",body:this._getTextLevelRequestData(a,t,r),signal:this._languageDetectionAbortControllers.get(r.instanceId).signal};return this._sendRequest(o,i).then((e=>({language:{code:e.language.code,name:e.language.name},errors:[],premiumErrors:[],premiumPickyErrors:[],pickyErrors:[]}))).catch((n=>{if(this._isConnectionOrServerIssue(n)){this._abortLanguageDetectionRequest(r.instanceId);if((!r.apiServerUrl||this._isLanguageToolServer(r.apiServerUrl))&&!this._useFallbackServerForLanguageDetection)return this._useFallbackServerForLanguageDetection=!0,this._mainServerUnavailabilityTimeStamp=Date.now(),this.detectLanguage(e,t,r)}throw n}))}static _isLanguageToolServer(e){return!!e&&(e.includes("api.languagetool.org")||e.includes("languagetool.org/api")||e.includes("api.languagetoolplus.com"))}static checkForPaidSubscription(e,t,r,s=n.PREMIUM_SERVER_URL){return new Promise(((n,a)=>{s+=s.endsWith("/")?"check":"/check";const o=new URLSearchParams;o.append("language","en-us"),o.append("data",JSON.stringify({text:"The languagetool testrule 8634756."})),e&&t?(o.append("username",e),o.append("password",t)):e&&r&&(o.append("username",e),o.append("tokenV2",r));const i={method:"post",mode:"cors",credentials:"omit",body:o};this._sendRequest(s,i).then((e=>{const t=e.matches.some((e=>"PREMIUM_FAKE_RULE"===e.rule.id));n(t)})).catch(a)}))}static addWordToDictionary(e,t){if(Boolean(t.adapter))return;const r=this.getServerBaseUrl(t),n=r.endsWith("/")?"":"/",s=new URL(r+n+"words/add");if(t.user&&"token"in t.user)s.searchParams.set("username",t.user.email),s.searchParams.set("tokenV2",t.user.token);else{if(!t.user||!("password"in t.user))return Promise.reject(new Error("Not logged-in for adding words to dictionary"));s.searchParams.set("username",t.user.email),s.searchParams.set("password",t.user.password)}return s.searchParams.set("word",e.trim()),fetch(s.toString(),{method:"POST"}).then((e=>e.ok?Promise.resolve():Promise.reject(new Error(`Status: ${e.status}`))))}}o.NL_PREMIUM_RULES=["FAAG_VAAG","TOO_LONG_SENTENCE","_2_LEESTEKENS","WEEKEND","CASU_QUO","MOMENTEEL","SLECHTS","LEENWOORDEN","KOMMA_HOOR","RELEVANT","HINTS","CHECKEN","ALLEEN_BE","MACHTE","ECHTER","COMMUNICEREN","DESIGN","SANDAAL_ZANDAAL","N","MIDDELS","INTEGREREN","PRIMAIR","OVERIGENS","BETREFFENDE","AGENDA","ERGO","TEN_BEHOEVE","KOMMA_AANH","TM","IE","TER_ZAKE","SIGNIFICANT","GELIEVE","BEHOREN","NAAR_AANLEIDING_VAN","VAN_PLAN_ZIJN","HEDEN","TEN_DODE","VREEMD_VRZ_HIJ","DES","IMPACT","IMMER","BOVENSTAAND","XXXYJE","DUTCH_WRONG_WORD_IN_CONTEXT","LANCEREN","MET_BEHULP_VAN","PRIORITEIT","UWENTWEGE","CATEGORIE","CRITERIUM","GEMOTIVEERD"],o.PL_PREMIUM_RULES=["BOWIEM_ZAS","ZE_Z_SPOL","SPACJA_ZNAK_ROWNOSCI","BRAK_PRZECINKA_GDY","PYTANIE_CO","BRAK_PRZECINKA_JESLI","PRZECINEK_ANI","SKROTOWCE_BEZ_DYWIZU","NIEZGODNOSC_PRZYPADKU_PO_LICZEBNIKU","PODMIOT_ORZECZENIE","ROWNIE_JAK","JAK_I","PRZECINEK_POROWNANIE","WOLACZ_BEZ_PRZECINKA","ODNOSNIE_DO","GENERALNIE","BOWIEM_ZAS_PRZECINEK","WYDAWAC_SIE_BYC","POSIADAC_MIEC","PL_GUILLEMET","ITP_ITD","SPACJA_PROCENT","PO","W_TEMACIE","PL_DWA_WYRAZY","W_NAWIAZANIU_DO","WE_W","POKI_CO","VS","DZIEN_DZISIEJSZY","WIELOKROTNE_WYSTPIENIE_TEGO_SAMEGO_WYRAENIA_PRZYIMKOWEGO","I_LUB","PELNIC_ROLE","OKRES_CZASU","UZNAC_JAKO","EFEKT_KONCOWY","DLATEGO_PONIEWAZ","NA_DZIEN_DZISIEJSZY","DODATKOWO_CO_WIECEJ","OWY_W","DZIEN_JUTRZEJSZY","ADRES_ZAMIESZKANIA","W_CHWILI_OBECNEJ","BYC_ZNAJDOWAC_SIE_W_POSIADANIU","DO_TERAZ","PROTOKOL_Z_CZEGO","PO_NAJMNIEJSZEJ_LINII","POTRAFIACY","zarowno_jak_rowniez","GRAC_FAIR_PLAY","DRUGI_NAJWIEKSZY","COFAC_SIE_DO_TYLU","DZIEN_WCZORAJSZY","NA_PRZESTRZENI","IDENTYCZNY_JAK","ZA_WYJATKIEM","MAPA_DROGOWA","W_PRZECIGU_TYGODNIA_W_CIGU","NAPOTKAC_NA","PRZERWA_KAWOWA","WYSOKA_FREKWENCJA","UBRAC_ZALOZYC","PRZY_UDZIALE","W_SLAD_ZA","WYRAZIC_POPARCIE","W_TYM_WZGLEDZIE","PO_PIERWSZE_PRIMO","DOMYSLEC_SIE","WARTY","IDENTYCZNY_DO","W_DRODZE_WYJATKU","PRZEDKLADAC_WNIOSEK","POD_RZAD","PRZYJAZNY_DLA_UZYTKOWNIKA","NA_WSKUTEK","SWIECIC_SUKCESY","W_WEGRZECH","KONDYCJA_FINANSOWA","RULE_NIEMNIEJ","FORMULA_KREMU","PODDAWAC_W_WATPLIWOSC","OPATRZEC_SIE","ODGRYWAC_ZNACZENIE","INFORMACJE_WRAZLIWE","DO_DZIS_DZIEN","CO_I_RAZ","OKRAGLY_ROK","SZERSZE_INFORMACJE","WYSOKA_FORMA","CZEKAC_ZA","BYNAJMNIEJ","WYWIERAC_PIETNO","DOPATRZEC_SIE","ZLA_RENOMA","W_PELNYM_TEGO","W_KAZDYM_BADZ","KOSZTOWAC_TANIEJ","DYGITALNY"],o.SPELLING_RULES_ID=["SPELLER_RULE","MORFOLOGIK_RULE","HUNSPELL","SPELLING_RULE","ORTHOGRAPHY"],o.STYLE_ISSUE_TYPES=["style","locale-violation","register"],o.EMAIL_SIGNATURE_SEPARATOR_REGEXP=/^[\u2010|\-]{2,}|[\u2010|\-]{2,}$/,o.ONLY_NUMBERS_REGEXP=/^[0-9]+$/,o.COLON_WHITESPACE_REGEXP=/^[;:]\s/,o.ONE_LETTER_AT_END_REGEXP=/(\s|^|\()[a-z]\.?\s?$/i,o.NUMBER_WITH_DOT_AT_END_REGEXP=/\d\.?\s?$/,o.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP=/\d\.?\)\s$/,o.PUNCTUATION_AT_END=/(\.|\!)$/,o.BULLET_POINT_REGEXP=/(\u25b6\ufe0e|\u25BA|\*|-|\u2013|\u2606|\u2605|\u25cf|\u2022|\u25e6|\u27A4|\u2714)\s+$/,o.LOWERCASE_REGEXP=/[a-z]/,o.DOT_WITH_PREFIX_REGEXP=/\w\.$/,o.SLASH_AT_END_REGEXP=/(\/|\\)$/,o.AT_LEAST_TWO_LETTERS_AT_END_REGEXP=/[a-z]{2}$/i,o.SLASH_AT_BEGINNING_REGEXP=/^(\/|\\)/,o.PUNCTUATION_AT_BEGINNING_REGEXP=/^\s?[\.\!\?,:\u2026]/,o.PUNCTUATION_SPACE_AT_END_REGEXP=/[\.\u2026\?\!]\s+/,o.MARKDOWN_HEADLINE_REGEXP=/^#{1,6}\s/m,o.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP=/^[\*\~\_\^\+\%\@]/m,o.WIKI_MARKUP_AT_END_REGEXP=/\[\[[a-z]+$/,o.PIPE_AT_END_REGEXP=/\|\s+$/,o.MENTION_SYMBOL_AT_BEGINNING_REGEXP=/@[a-z\.\-]*$/i,o.HASH_SYMBOL_AT_BEGINNING_REGEXP=/#[a-z\.\-]*$/i,o.EMOJI_SENTENCE_START_REGEXP=/(\.|!|\?|^)\s?(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])\s+/,o.ABBREVIATION_AT_END_REGEXP=/(\s|\(|^)[A-Z]\.$/,o.NET_AT_BEGINNING_REGEXP=/^net\b/i,o.SINGLE_UPPERCASE_LETTER_REGEXP=/^[A-Z]$/,o.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP=/^[^a-z0-9\xe4\xf6\xfc\xdf\xe1\xe0\xe2\xe9\xe8\xea\xed\xec\xee\xf3\xf2\xf4\xfa\xf9\xfb\.\?\!,\:\;\xbf\xa1]+/i,o.NON_ALPHANUMERIC_AT_END_REGEXP=/[^a-z0-9\xe4\xf6\xfc\xdf\xe1\xe0\xe2\xe9\xe8\xea\xed\xec\xee\xf3\xf2\xf4\xfa\xf9\xfb\.\?\!,\:\;\xbf\xa1]+$/i,o.HTML_ENTITIES=["amp","nbsp","gt","lt","bull","euro","copy","laquo","raquo","hellip","middot"],o.HTML_ENTITIES_WITH_AND=o.HTML_ENTITIES.map((e=>`&${e}`)),o.WAVY_DASH_REGEXP=/^\u3030+$/,o.INVISIBLE_PHRASE_REGEXP=/^[\u2063\uFEFF]+$/,o.INVISIBLE_CHARS_REGEXP=/[\u2063\uFEFF]/g,o.ZWNJ_REGEXP=/\u200B|\u200C/g,o.ZWS="\ufeff",o.PREVENT_MID_SENTENCE_CAPITALIZATION=/[\w\xe1\xe0\xe2\xf3\xf2\xec\xed\xe9\xe8\xf9\xfa\xe2\xf4\xee\xea\xfb\xe4\xf6\xfc\xdf,\)][\u0020\u00A0\uFEFF]*\n\n\n?[\u0020\u00A0\uFEFF"\u201e\xbb\xab\u201c\u2018]*$/,o.PREVENT_MID_SENTENCE_PUNCTUATION=/^[\u0020\u00A0\uFEFF]*\n\n\n?[a-z\xe1\xe0\xe2\xf3\xf2\xec\xed\xe9\xe8\xf9\xfa\xe2\xf4\xee\xea\xfb\xe4\xf6\xfc\xdf,\)]/,o.INVISIBLE_SEPARATOR_REGEX=new RegExp(n.INVISIBLE_SEPARATOR,"g"),o.COMMON_TLDS=["com","co","org","net","de","info","biz","es","fr","be","in","gov","nl","ca","com.br","br","at","us","au","ru","pl","ly","it","cat","edu","jp","ko","cn","se","no","mil","ch","dk","com.mx","mx","eu","co.uk","uk","ir","cz","ua","kr","gr","tw","nz","co.nz","za","ro","vn","io","tr","me","fi","tv","xyz","pt","ie","app"],o.COMMON_TLD_WITH_DOT_REGEXPS=o.COMMON_TLDS.map((e=>new RegExp(`^\\.${e.replace(".","\\.")}\\b`,"i"))),o.COMMON_FILE_TYPES=["jpeg","jpg","gif","png","bmp","indd","stl","svg","ai","sketch","ico","ics","env","amf","ps","psd","tiff","tif","mp3","wav","midi","mid","aif","mpa","ogg","wma","wpl","cda","7z","arj","deb","pkg","plist","rar","rpm","tar.gz","tar","zip","bin","dmg","iso","toast","vcd","csv","dat","db","log","mdb","sav","sql","xml","apk","bat","bin","cgi","com","exe","gadget","jar","py","js","jsx","json","wsf","ts","tsx","fnt","fon","otf","ttf","woff","woff2","rb","java","php","html","asp","aspx","cer","cfm","cgi","pl","css","scss","htm","jsp","part","rss","xhtml","key","odp","pps","ppt","pptx","class","cpp","cs","h","sh","swift","vb","ods","odt","xlr","xls","xlsx","xlt","xltx","bak","cab","cfg","cpl","cur","dll","dmp","msi","ini","tmp","3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv","doc","docx","dot","dotx","pdf","rtf","srx","text","tex","wks","wps","wpd","txt","yaml","yml","csl","md","adm"],o.COMMON_FILE_TYPE_WITH_DOT_REGEXPS=o.COMMON_FILE_TYPES.map((e=>new RegExp(`^[\\w\xe1\xe0\xe2\xf3\xf2\xec\xed\xe9\xe8\xf9\xfa\xe2\xf4\xee\xea\xfb\xe4\xf6\xfc\xdf\\-\\.\\(\\)]*?\\.${e}\\b`,"i"))),o.FILE_TYPE_AT_BEGINNING_REGEXP=new RegExp(`(${o.COMMON_FILE_TYPES.join("|")})\b`,"i"),o.HIGH_LEVEL_GOALS=[{id:"professional",tags:["clarity","confident","formal","general","positive","professional"]},{id:"scientific",tags:["academic","clarity","formal","general","objective","povrem","scientific"]},{id:"persuasive",tags:["clarity","confident","general","persuasive","positive"]},{id:"personal",tags:["clarity","general","informal","positive","povadd"]},{id:"creative",tags:["clarity","general"]}],o._textLevelAbortControllers=new Map,o._paragraphLevelAbortControllers=new Map,o._languageDetectionAbortControllers=new Map,o._recommendationAbortControllers=new Map,o._useFallbackServerForTextLevelRequests=!1,o._useFallbackServerForParagraphLevelRequests=!1,o._useFallbackServerForLanguageDetection=!1,o._mainServerUnavailabilityTimeStamp=0,o._checkForException=e=>e.ok?e:e.text().catch((()=>"")).then((t=>{const r=t.toLowerCase();if(r.includes("too many error"))throw{reason:"TooManyErrors",status:e.status,response:t};if(413===e.status||r.includes("text exceeds the limit"))throw{reason:"TextTooLong",status:e.status,response:t};if(t.toLowerCase().includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};if(429===e.status)throw{reason:"TooManyRequests",status:e.status,response:t};if(403===e.status){if(r.includes("client request size limit")||r.includes("client request limit")||r.includes("ip request limit")||r.includes("ip request size limit"))throw{reason:"TooManyRequests",status:e.status,response:t};if(r.includes("authexception"))throw{reason:"InvalidCredentials",status:e.status,response:t};throw{reason:"AccessDenied",status:e.status,response:t}}if(r.includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};throw{reason:"UnknownError",status:e.status,response:t}}))},61183:(e,t,r)=>{"use strict";var n=r(19172),s=r(33668);class a{static merge(e,t=!1,r=!1,s=!1){let{errors:a,pickyErrors:o,premiumErrors:i,premiumPickyErrors:l,sentenceRanges:c=[],recommendationErrors:u=[]}=this.filterAndMigrateErrors(e.existing.errors,e.existing.pickyErrors,e.existing.premiumErrors,e.existing.premiumPickyErrors,e.existing.recommendationErrors,e.existing.sentenceRanges,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText,r,s);this.mergeParagraphLevelErrors(a,o,i,l,u,c,e.new.paragraphLevel.errors,e.new.paragraphLevel.pickyErrors,e.new.paragraphLevel.premiumErrors,e.new.paragraphLevel.premiumPickyErrors,e.new.paragraphLevel.recommendationErrors||[],e.new.paragraphLevel.sentenceRanges),this.mergeTextLevelErrors(a,o,i,l,e.new.textLevel.errors,e.new.textLevel.pickyErrors,e.new.textLevel.premiumErrors,e.new.textLevel.premiumPickyErrors);const d=this.getDuplicateErrors(e.existing,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText);return this.sortErrors(a,o,i,l,u),this.setIdsOnErrors(a,o,i,l,u,d),a=this.migrateOffsetsToOriginalText(a,e.newCheckedText.usedParts),o=this.migrateOffsetsToOriginalText(o,e.newCheckedText.usedParts),i=this.migrateOffsetsToOriginalText(i,e.newCheckedText.usedParts),l=this.migrateOffsetsToOriginalText(l,e.newCheckedText.usedParts),u=this.migrateOffsetsToOriginalText(u,e.newRecommendationCheckedText.usedParts),c=this.migrateOffsetsToOriginalText(c,e.newCheckedText.usedParts),t&&(o=o.filter((e=>!n.PICKY_RULES_THAT_ARE_CONSIDERED_ANNOYING.includes(e.rule.id))),o.forEach((e=>{e.rule.id="HIDDEN_RULE",e.fixes=[]})),i=[...i,...l,...o],l=[],o=[],this.sortErrorsByOffset(i)),{errors:a,pickyErrors:o,premiumErrors:i,premiumPickyErrors:l,recommendationErrors:u,sentenceRanges:c}}static getDuplicateErrors(e,t,r,n,a){let{errors:o,pickyErrors:i,premiumErrors:l,premiumPickyErrors:c,recommendationErrors:u=[]}=e;o=this.migrateOffsetsToValuableText(o,t.usedParts),i=this.migrateOffsetsToValuableText(i,t.usedParts),l=this.migrateOffsetsToValuableText(l,t.usedParts),c=this.migrateOffsetsToValuableText(c,t.usedParts),u=this.migrateOffsetsToValuableText(u,n.usedParts);const d=(0,s.hT)(t.text,r.text),h=(0,s.hT)(n.text,a.text),_=e=>{if(!e.isParagraphLevelCheck)return!0;const t=(0,s.El)(e.isRecommendation?h:d,(t=>{const r=t.oldOffset;if(null===t.oldText)return e.start>=r?1:-1;const n=t.oldOffset+t.oldText.length+1;return(0,s.f0)(e.start,r,n,!0)}));return!(!t||!t.textDiff)||void 0};return o=o.filter(_),i=i.filter(_),l=l.filter(_),c=c.filter(_),u=u.filter(_),o=this.migrateOffsetsBetweenTexts(o,d),i=this.migrateOffsetsBetweenTexts(i,d),l=this.migrateOffsetsBetweenTexts(l,d),c=this.migrateOffsetsBetweenTexts(c,d),u=this.migrateOffsetsBetweenTexts(u,h),{errors:o,pickyErrors:i,premiumErrors:l,premiumPickyErrors:c,recommendationErrors:u}}static migrateOffsetsToValuableText(e,t){const r=[];for(const n of e){const e=(0,s.El)(t,(e=>(0,s.f0)(n.start,e.originalStart,e.originalEnd,!0))),a=(0,s.El)(t,(e=>(0,s.f0)(n.end,e.originalStart,e.originalEnd)));if(!e||!a)continue;const o=(0,s.Go)(n);o.start-=e.posDiff,o.end-=a.posDiff,o.length=o.end-o.start,r.push(o)}return r}static migrateOffsetsBetweenTexts(e,t,r,n,a){let o,i=!1,l=!1;"string"==typeof t&&"string"==typeof r?(o=(0,s.hT)(t,r),i="boolean"==typeof n&&n,l="boolean"==typeof a&&a):(o=t,i="boolean"==typeof r&&r,l="boolean"==typeof n&&n);const c=[];for(const t of e){const e=(0,s.El)(o,(e=>{const r=e.oldOffset;if(null===e.oldText)return t.start>=r?1:-1;const n=e.oldOffset+e.oldText.length+1;return(0,s.f0)(t.start,r,n,!0)})),r=(0,s.Go)(t);if(e){var u,d;if(e.textDiff){if(i)continue;{const t=e.oldOffset+e.textDiff.from,n=t+e.textDiff.oldFragment.length,a=!l;if((0,s.mP)(t,n,r.start,r.end,a))continue;if(r.start>=n){var h,_;const t=e.textDiff.newFragment.length-e.textDiff.oldFragment.length;r.start+=t,r.end+=t,null==r||null===(_=r.rule)||void 0===_||null===(h=_.phraseDiff)||void 0===h||h.forEach((e=>{e.sourceStart+=t,e.sourceEnd+=t,e.targetEnd+=t,e.targetStart+=t}))}}}r.start+=e.newOffset-e.oldOffset,r.end=r.start+r.length,null==r||null===(d=r.rule)||void 0===d||null===(u=d.phraseDiff)||void 0===u||u.forEach((t=>{const r=t.sourceEnd-t.sourceStart,n=t.targetEnd-t.targetStart;t.sourceStart+=e.newOffset-e.oldOffset,t.sourceEnd=t.sourceStart+r,t.targetStart+=e.newOffset-e.oldOffset,t.targetEnd=t.targetStart+n}))}c.push(r)}return c}static migrateOffsetsToOriginalText(e,t){const r=[];for(const n of e){const e=(0,s.El)(t,(e=>(0,s.f0)(n.start,e.start,e.end,!0))),a=(0,s.El)(t,(e=>(0,s.f0)(n.end,e.start,e.end)));if(!e||!a)continue;const o=(0,s.Go)(n);o.start+=e.posDiff,o.end+=a.posDiff,o.length=o.end-o.start,r.push(o)}return r}static filterAndMigrateErrors(e,t,r,n,a,o,i,l,c,u,d=!1,h=!1){h?a=(a||[]).filter((e=>e.isParagraphLevelCheck)):(e=e.filter((e=>e.isParagraphLevelCheck)),t=t.filter((e=>e.isParagraphLevelCheck)),r=r.filter((e=>e.isParagraphLevelCheck)),n=n.filter((e=>e.isParagraphLevelCheck))),e=this.migrateOffsetsToValuableText(e,i.usedParts),t=this.migrateOffsetsToValuableText(t,i.usedParts),r=this.migrateOffsetsToValuableText(r,i.usedParts),n=this.migrateOffsetsToValuableText(n,i.usedParts),a=this.migrateOffsetsToValuableText(a||[],c.usedParts),o=this.migrateOffsetsToValuableText(o||[],i.usedParts);const _=(0,s.hT)(i.text,l.text),E=(0,s.hT)(c.text,u.text);return d?(e=this.migrateOffsetsBetweenTexts(e,i.text,l.text,!1,!0),t=this.migrateOffsetsBetweenTexts(t,i.text,l.text),r=this.migrateOffsetsBetweenTexts(r,i.text,l.text),n=this.migrateOffsetsBetweenTexts(n,i.text,l.text),a=this.migrateOffsetsBetweenTexts(a,c.text,u.text,!1,!0)):(e=this.migrateOffsetsBetweenTexts(e,_,!0),t=this.migrateOffsetsBetweenTexts(t,_,!0),r=this.migrateOffsetsBetweenTexts(r,_,!0),n=this.migrateOffsetsBetweenTexts(n,_,!0),a=this.migrateOffsetsBetweenTexts(a,E,!1,!0)),{errors:e,pickyErrors:t,premiumErrors:r,premiumPickyErrors:n,recommendationErrors:a,sentenceRanges:o=this.migrateOffsetsBetweenTexts(o,_,!0)}}static mergeParagraphLevelErrors(e,t,r,n,s,a,o,i,l,c,u,d=[]){e.push(...o),t.push(...i),r.push(...l),n.push(...c),s.push(...u),a.push(...d)}static mergeTextLevelErrors(e,t,r,n,s,a,o,i){for(const t of s)e.some((e=>e.start===t.start&&e.end===t.end))||e.push(t);for(const e of a)t.some((t=>t.start===e.start&&t.end===e.end))||t.push(e);for(const e of o)r.some((t=>t.start===e.start&&t.end===e.end))||r.push(e);for(const e of i)n.some((t=>t.start===e.start&&t.end===e.end))||n.push(e)}static sortErrors(e,t,r,n,s){this.sortErrorsByOffset(e),this.sortErrorsByOffset(t),this.sortErrorsByOffset(r),this.sortErrorsByOffset(n),this.sortErrorsByOffset(s)}static sortErrorsByOffset(e){e.sort(((e,t)=>e.start===t.start?e.isParagraphLevelCheck?1:-1:e.start>t.start?1:-1))}static migrateErrorsBetweenSameOriginalTexts(e,t,r){const n=[];for(const a of e){let e=a.start,o=a.end,i=(0,s.El)(t.usedParts,(t=>(0,s.f0)(e,t.originalStart,t.originalEnd,!0))),l=(0,s.El)(t.usedParts,(e=>(0,s.f0)(o,e.originalStart,e.originalEnd)));if(!i||!l)continue;if(e-=i.posDiff,o-=l.posDiff,i=(0,s.El)(r.usedParts,(t=>(0,s.f0)(e,t.start,t.end,!0))),l=(0,s.El)(r.usedParts,(e=>(0,s.f0)(o,e.start,e.end))),!i||!l)continue;e+=i.posDiff,o+=l.posDiff;const c=(0,s.Go)(a);c.start=e,c.end=o,c.length=o-e,n.push(c)}return n}static setIdsOnErrors(e,t,r,n,s,o){function i(e,t){if(e.id)return;const r=t.find((t=>{return n=e,(r=t).start===n.start&&r.end===n.end&&r.isParagraphLevelCheck===n.isParagraphLevelCheck;var r,n}));e.id=r?r.id:"error:"+ ++a.INCREMENTAL_ID}e.forEach((e=>i(e,o.errors))),t.forEach((e=>i(e,o.pickyErrors))),r.forEach((e=>i(e,o.premiumErrors))),n.forEach((e=>i(e,o.premiumPickyErrors))),s.forEach((e=>i(e,o.recommendationErrors||[])))}static sortSentenceRanges(e){e.sort((({start:e},{start:t})=>e-t))}}a.INCREMENTAL_ID=0},81245:(e,t,r)=>{"use strict";var n=r(33668),s=r(19172);const a={accept:"application/json","content-type":"application/json"};let o="claudia";function i(e){return(0,n.Gv)(e)&&!1===Object.values(e).some((e=>"number"!=typeof e))}function l(e){return!!(0,n.Gv)(e)&&[["text"],["score",i],["label"],["origin"],["uuid"]].reduce(((t,[r,s=n.Kg])=>!!(t&&(0,n.Tn)(s)&&String(r)in e)&&s(e[String(r)])),!0)}class c{static async load(e,t,r,n,s,a){const o=[a,t.trim()].join("@"),i=this._rewriteCache.get(o);var c;const u=null!==(c=this._history.get(t))&&void 0!==c?c:null;if(i)return Promise.resolve({rephrases:i,previousSentence:u});let d="/rewriting/rewrite";a&&(d+="/"+function(e){switch(e){case"simple":return"simplicity";case"formal":return"formality";default:return e}}(a));const h=(await this._request("rewrite",d,e,t,r,n,s)).filter((e=>l(e))).map((({text:e,score:t,label:r,origin:n,uuid:s})=>({text:e,score:t,label:r,origin:n,uuid:s}))).filter((({text:e},t,r)=>r.findIndex((({text:t})=>e===t))===t));return h.length>0&&this._rewriteCache.set(o,h),{rephrases:h,previousSentence:u}}static abort(e){const t=void 0===e?["rewrite"]:[e];for(const e of t){const t=this._abortControllers.get(e)||[];this._abortCurrentRequests(t),this._abortControllers.set(e,[])}}static async _request(e,t,r,i,l,c,u){this.abort(e);const d=JSON.stringify({text:i,offset:0,length:0,count:"rewrite"===e?5:1,userID:r,language:l.slice(0,2),inhouseOnly:c,email:null==u?void 0:u.email,token:null==u?void 0:u.token,p:null==u?void 0:u.isPremium}),h=new AbortController,_=this._abortControllers.get(e)||[];a["X-LT-checksum"]=await async function(){const e=function(){const e=(typeof s).indexOf("o")>-1;return o=e?s.MASCOT_NAME:o,("__"+o+"::"+~~(+new Date/1e3)).substring(2,64)}();return await(0,n.W7)(e)}(),(null==u?void 0:u.isPremium)&&(a["X-LT-p"]="1"),_.push(h),this._abortControllers.set(e,_);const E=await fetch(s.BASE_REPHRASING_SERVER_URL+t,{method:"post",signal:h.signal,mode:"cors",headers:a,body:d});if(!1===E.ok){const e=(()=>{switch(E.status){case 413:return"PayloadTooLarge";case 524:return"ServerTimeout";default:return`ServerFailure (${E.status})`}})();throw new Error(e)}const f=await E.json(),{rewrites:p=[]}=f||{};return p}static async requestSplitSentence(e,t,r,n,s){const a=this._splitSentenceCache.get(t.trim());if(a)return Promise.resolve(a);const[o]=await this._request("sentence-splitting","/rewriting/rewrite/sentence_splitting",e,t,r,n,s);return l(o)?(this._splitSentenceCache.set(t.trim(),o),o):null}static _abortCurrentRequests(e){for(const t of e)t.abort()}}c._rewriteCache=new Map,c._splitSentenceCache=new Map,c._history=new Map,c._abortControllers=new Map([["rewrite",[]],["sentence-splitting",[]]])},50384:(e,t,r)=>{"use strict";r(19172),r(96422),r(61183),r(81245),r(90156),r(33668)},90156:(e,t,r)=>{"use strict";var n=r(19172);n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR,n.INVISIBLE_SEPARATOR},42067:(e,t,r)=>{"use strict";r(19172),r(33668);(()=>{const e={}})()},33668:(e,t,r)=>{"use strict";r.d(t,{El:()=>v,Go:()=>y,Gv:()=>i,Kg:()=>c,PN:()=>w,S:()=>P,Tn:()=>l,W7:()=>x,Zn:()=>I,f0:()=>D,hT:()=>S,mP:()=>L,mq:()=>f,oi:()=>b,p$:()=>C});var n=r(19172);let s,a;try{s=new RegExp("\\p{L}","u")}catch(e){s=/[a-z\xe4\xf6\xfc\xdf]/i}function o(e){return s.test(e)}try{a=new RegExp("(?:\\p{Emoji}|\\u200d|\\ufe0e|\\ufe0f)","u")}catch(e){a=/_^/}const i=e=>!!e&&Object.getPrototypeOf(e)===Object.prototype,l=e=>"function"==typeof e,c=e=>"string"==typeof e;let u,d,h,_,E;!function(){const e="\b\t \u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200f\u3000",t=new RegExp("^["+e+"]$"),r=new RegExp("["+e+"]","g");u=function(e){return" "===e||"\xa0"===e||t.test(e)},d=function(e){return e.replace(r," ")}}(),function(){const e="\u200b\u200c\u200d\xad\u2060\u202a\u202b\u202c\u202d",t=new RegExp("^["+e+"]$"),r=new RegExp("["+e+"]"),n=new RegExp("["+e+"]","g");h=function(e){return t.test(e)},_=function(e){const t=e.match(r);return t?t.index:-1},E=function(e){return e.replace(n,"")}}();const f=function(){const e=/^[A-Z\xc8\xc9\xca\xc1\xc0\xc2\xd3\xd2\xd4\xda\xd9\xdb\xcd\xcc\xce\xc4\xdc\xd6]+[A-Z\xc8\xc9\xca\xc1\xc0\xc2\xd3\xd2\xd4\xda\xd9\xdb\xcd\xcc\xce\xc4\xdc\xd6\-!?#@=%().:;<>'\u2019\xb4`"\u201d\u201c*+,\s]+[A-Z\xc8\xc9\xca\xc1\xc0\xc2\xd3\xd2\xd4\xcd\xcc\xce\xc4\xdc\xd6]$/;return function(t){return e.test(t)}}();function p(e,t){const{start:r,end:n=r}=t||{start:-1};if(!e||-1===r)return;const s=e.map((e=>Array.isArray(e)?e:[e.start,e.end])).findIndex((([e,t])=>r>=e&&n<=t));return s<0?void 0:e[s]}let g,m,A,R;!function(){const e=/(?:\S+\s+){0,4}\S+$/,t=/^\S+(?:\s+\S+){0,4}/;g=(e,t,r=t,n=!0)=>{const[s,i]=(()=>{try{const e=n?"":["\\p{Emoji}","\\u200d","\\ufe0e","\\ufe0f"].join("");return[new RegExp("^\\s*(-?[\\p{L}"+e+"]+){0,3}-?\\s*$","u"),new RegExp("^\\s*[\\p{L}"+e+"]+(-[\\p{L}"+e+"]+){0,3}\\s*$","u")]}catch(e){return[/^\s*(-?[a-z\xe4\xf6\xfc\xdf]+){0,3}-?\s*$/i,/^\s*[a-z\xe4\xf6\xfc\xdf]+(-[a-z\xe4\xf6\xfc\xdf]+){0,3}\s*$/i]}})(),l=e=>{return!n&&(t=e,a.test(t));var t},c=e.substring(t,r),[{length:u=0}]=c.match(/^[^\S]*/),[{length:d=0}]=c.match(/[^\S]*$/);if(!s.test(c))return null;const h=(()=>{const r=t+u,n=e.substring(0,r).split(/[^\S]+/);return C(n[n.length-1]).reverse()})(),_=(()=>{const t=r-d,[n]=e.substring(t).split(/[^\S]+/);return C(n)})(),E=Math.max(h.length,_.length);let f=!1,p=!1,g=t,m=r;for(let e=0;e<E;e++){const t=h[e],r=t&&(o(t)||l(t)||"-"===t),n=_[e],s=n&&(o(n)||l(n)||"-"===n);if(r&&!f?g-=t.length:f=!0,s&&!p?m+=n.length:p=!0,f&&p)break}u>0&&(g+=u),d>0&&(m-=d);const A=e.substring(g,m);return i.test(A)?{start:g,end:m}:null},m=(r,n,s=n,a,o=!0)=>{const i=g(r,n,s,o);if(!i)return null;const l=p(a,{start:n,end:s});let c="",u="",d="";if(l)d=r.substring(l.start,l.end).trim(),c=r.slice(l.start,i.start).trim(),u=r.slice(i.end,l.end).trim();else{const n=e.exec(r.substring(0,i.start).trim());c=n?n[0]:"",c=c.replace(/^.+\n\n/,"");const s=t.exec(r.substring(i.end).trim());u=s?s[0]:"",u=u.replace(/\n\n.+/,"")}return{word:r.substring(i.start,i.end),position:i,sentence:d,beforeText:c,afterText:u}}}(),function(){let e;const t=[['"','"'],["'","'"],["\u201c","\u201d"],["\u201e","\u201c"],["\u2018","\u2019"],["\u201a","\u2018"],["\xab","\xbb"],["\xbb","\xab"],["`","`"],["\xb4","\xb4"],["{","}"],["[","]"],["(",")"],["<",">"]],r="[^\\S]",n="[.,:;\xa1!\xbf?]",s="[\\udc00-\\udfff\\ud800-\\udb7f\\u200d\\ufe0e\\ufe0f\\p{Emoji_Presentation}\\p{Emoji_Modifier}\\p{Emoji}]";let a,o,i;const l=/(?:\S+\s+){0,4}\S+$/,c=/^\S+(?:\s+\S+){0,4}/;try{const t=[r,n,s].join("|");a=new RegExp(`(?:${t})`,"u"),o=new RegExp(`^(?:${t})*`,"u"),i=new RegExp(`(?:${t})*$`,"u"),e=new RegExp("^\\s*\\p{L}+(-\\p{L}+)*\\s*$","u")}catch(t){const s=[r,n].join("|");a=new RegExp(`(?:${s})`),o=new RegExp(`^(?:${s})*`),i=new RegExp(`(?:${s})*$`),e=/^\s*[a-z\xe4\xf6\xfc\xdf]+(-[a-z\xe4\xf6\xfc\xdf]+)*\s*$/i}A=(n,s,l=s,c)=>{var u,d;const h=n.substring(s,l),[_=""]=h.match(o),[E=""]=h.match(i),f=_.length,p=E.length,g=[_.trim(),E.trim()];if(h.split(new RegExp(`${r}+`)).length>5)return null;const m=(null===(u=function(e,t){const{start:r}=t||{start:-1};if(!e||-1===r)return;const n=e.sort(((e,t)=>e.start-t.start)).find((e=>{if(r<=e.end&&r>=e.start)return!0}));return n||void 0}(c,{start:s,end:l}))||void 0===u?void 0:u.start)||0,A=(null===(d=function(e,t){const{end:r}=t||{end:-1};if(!e||void 0===r||-1===r)return;const n=e.sort(((e,t)=>e.start-t.start)).find((e=>{if(r<=e.end&&r>=e.start)return!0}));return n||void 0}(c,{start:s,end:l}))||void 0===d?void 0:d.end)||n.length-1;let R=s+f;for(;R>m;){const[e]=n[R-1].match(a)||[];if(e){0===f&&(g[0]+=e.trim());break}R--}let T=l-1-p;for(;T<A-1;){const[e]=n[T+1].match(a)||[];if(e){0===p&&(g[1]+=n[T+1].trim());break}T++}if(T+=1,R===m&&T===A)return null;const b=n.substring(R,T);if(b.split(e).length>=6)return null;let O=!1,S=!1;for(const[e,r]of t){O||!b.startsWith(e)||b.slice(1).includes(r)||(R+=1,O=!0,g[0]+=b[0]);const t=b.length-1;S||!b.endsWith(r)||b.slice(0,t).includes(e)||(T-=1,S=!0,g[1]+=b[t])}return{start:R,end:T,omittedCharacters:g}},R=(e,t,r=t,n)=>{var s;let a=A(e,t,r,n);if(!a)return null;const o=p(n,{start:t,end:r});a=(()=>{if(!o)return a;const t=e.slice(o.start,a.start),r=e.slice(a.end,o.end),n=!t||!!t.match(/^[\xa1\xbf]+$/),s=!r||!!r.match(/^[.!?]+$/);return n&&s&&(a={start:o.start,end:o.end,omittedCharacters:["",""]}),a})();let i="",u="",d="";if(o)d=e.substring(o.start,o.end).trim(),i=e.slice(o.start,a.start).trim(),u=e.slice(a.end,o.end).trim();else{const t=l.exec(e.substring(0,a.start).trim());i=t?t[0]:"",i=i.replace(/^.+\n\n/,"");const r=c.exec(e.substring(a.end).trim());u=r?r[0]:"",u=u.replace(/\n\n.+/,"")}return null===(s=R.trackOmittedCharacters)||void 0===s||s.call(R,a.omittedCharacters),{phrase:e.substring(a.start,a.end),position:{start:a.start,end:a.end},sentence:d,beforeText:i,afterText:u}}}();const T=e=>{const t=n.INVISIBLE_SEPARATOR.charCodeAt(0).toString(16),r=new RegExp(`^(?:[^\\S]|\u2022|\\u${t})+$`),s=new RegExp(`^(?:[^\\S]|\\u${t})+$`),a=e.split("").reverse().join(""),o=Math.floor(e.length/2);let i,l,c=0,u=0;for(let t=0;t<o;t++){const n=e.charAt(t),o=a.charAt(t);if(!0!==i&&n.match(r)?(c+=1,i=!1):i=!0,!0!==l&&o.match(s)?(u+=1,l=!1):l=!0,i&&l)break}return[c,u]},b=(e,t)=>{const r=new RegExp(n.INVISIBLE_SEPARATOR,"g"),s=[];for(const n of e){const{start:e,end:a}=n,o=t.substring(e,a);if(!o.replace(r,"").trim())continue;const[i,l]=T(o),c=e+i,u=c+o.length-i-l,d=u-c;s.push({start:c,end:u,length:d,detectedLanguages:n.detectedLanguages,checkStatus:n.checkStatus})}return s};function O(e,t){if(e===t)return null;let r=0;const n=Math.max(e.length,t.length);for(r=0;r<n&&e[r]===t[r];r++);let s=0;const a=Math.min(e.length,t.length);for(;r+s<a;){if(e[e.length-s-1]!==t[t.length-s-1])break;s++}return{from:r,oldFragment:e.substring(r,e.length-s),newFragment:t.substring(r,t.length-s)}}function S(e,t,r=!1){const n=[];r&&(e=k(e),t=k(t));const s=e.split("\n"),a=t.split("\n");let o=0;const i=Math.max(s.length,a.length);for(o=0;o<i&&s[o]===a[o];o++);let l=0;const c=Math.min(s.length,a.length);for(;o+l<c;){if(s[s.length-l-1]!==a[a.length-l-1])break;l++}let u=0;for(let e=0;e<o;e++)u+=s[e].length+1;let d=u;for(let e=o;e<i-l;e++){const t=e<s.length-l?s[e]:null,r=e<a.length-l?a[e]:null;t===r&&u===d||n.push({oldText:t,newText:r,oldOffset:u,newOffset:d,textDiff:O(t||"",r||"")}),null!==t&&(u+=t.length+1),null!==r&&(d+=r.length+1)}if(u!==d)for(let e=l-1;e>=0;e--){const t=s[s.length-e-1],r=a[a.length-e-1];n.push({oldText:t,newText:r,oldOffset:u,newOffset:d,textDiff:null}),u+=t.length+1,d+=r.length+1}return n}function I(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/\//g,"&#x2F;")}function v(e,t){let r=0,n=e.length-1;for(;r<=n;){const s=r+Math.ceil((n-r)/2),a=t(e[s]);if(a>0)r=s+1;else{if(!(a<0)){for(let r=s;r>0;r--)if(0!==t(e[r-1]))return e[r];return e[0]}n=s-1}}return null}function y(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);const t=Array.isArray(e)?[]:{};for(const r in e)t[r]=y(e[r]);return t}let N=null;function C(e){return Intl.Segmenter?(N||(N=new Intl.Segmenter(void 0,{granularity:"grapheme"})),Array.from(N.segment(e),(e=>e.segment))):[...e]}var w;!function(e){e.GC="GC",e.GC_RECOMMENDATION="GC_RECOMMENDATION",e.REPHRASING="PPHR"}(w||(w={}));const P=function(){const e=/^\w+\.$/;return(t,r)=>{if(!t.isSpellingError)return!1;let n=t.originalPhrase;if(e.test(n)&&(n=n.substring(0,n.length-1)),r.includes(n))return!0;if(function(e){const t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()}(n)){const e=(s=n).charAt(0).toLowerCase()+s.substr(1);if(r.includes(e))return!0}var s;return!1}}();!function(){const e=/[\u0300-\u036f]/g,t=/\u0142/g,r=/\u00F8/g}();function L(e,t,r,n,s=!1){return s?e<=n&&t>=r:e<n&&t>r}function D(e,t,r,n=!1){if(n){if(t<=e&&e<r)return 0}else if(t<=e&&e<=r)return 0;return e-t}async function x(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")}const k=e=>d(e).replace(/[\u00A0]/g," ").normalize()},34152:(e,t,r)=>{"use strict";var n;r.d(t,{Ay:()=>o,OJ:()=>n}),function(e){e.CHROME_EXTENSION_ID="CHROME_EXTENSION_ID",e.SHOW_PARTIAL_RECO_UNDERLINE="SHOW_PARTIAL_RECO_UNDERLINE",e.EXTN_PREFIX="EVENT_PREFIX",e.COLORS_GRAMMAR="COLORS_GRAMMAR",e.CARD_LAYOUT="CARD_LAYOUT",e.COLORS_SPELLING="COLORS_SPELLING",e.COLORS_STYLE="COLORS_LONG_SENTENCE",e.SUPPORTED_LANGUAGES="SUPPORTED_LANGUAGES",e.INSTALLED_ATTRIBUTE="INSTALLED_ATTRIBUTE",e.SITE_INIT_ATTRIBUTE="SITE_INIT_ATTRIBUTE",e.INPUT_AREA_INIT_ATTRIBUTE="INPUT_AREA_INIT_ATTRIBUTE",e.TMP_ID_ATTRIBUTE="TMP_ID_ATTRIBUTE",e.AI_RULE_ID_REGEX="AI_RULE_ID_REGEX",e.COLORS_PARAPHRASE="COLORS_PARAPHRASE",e.COLORS_RECOMMENDATION="COLORS_RECOMMENDATION",e.COLORS_RECOMMENDATION_TEASE="COLORS_RECOMMENDATION_TEASE",e.VALID_START_SENTENCE_REGEX="VALID_START_SENTENCE_REGEX",e.VALID_END_SENTENCE_REGEX="VALID_END_SENTENCE_REGEX",e.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED="MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED",e.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS="MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS",e.MAX_TEXT_LENGTH_ALLOWED="MAX_TEXT_LENGTH_ALLOWED",e.SELECTED_UNDERLINE_THICKNESS="SELECTED_UNDERLINE_THICKNESS",e.BULLET_POINT_PARSING_PREFIX="BULLET_POINT_PARSING_PREFIX",e.TOOLBAR_SIZE="TOOLBAR_SIZE",e.FIX_ALL_CONFIG="FIX_ALL_CONFIG",e.IGNORE_EDITOR_WITH_ATTRIBUTES="IGNORE_EDITOR_WITH_ATTRIBUTES",e.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA="SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA",e.MAIN_CONTENT_SCRIPT_FILENAME="MAIN_CONTENT_SCRIPT_FILENAME",e.SPECIAL_INTRODUCTORY_TEASER_ENABLED="SPECIAL_INTRODUCTORY_TEASER_ENABLED",e.TERMS_OF_SERVICE_MODAL_ENABLED="TERMS_OF_SERVICE_MODAL_ENABLED",e.LOLLIPOP_CONFIG="LOLLIPOP_CONFIG",e.NORMALIZE_SPACE="NORMALIZE_SPACE",e.USE_CSS_CUSTOM_HIGHLIGHTS="USE_CSS_CUSTOM_HIGHLIGHTS",e.STRIP_WRAPPING_QUOTES_FROM_SENTENCE="STRIP_WRAPPING_QUOTES_FROM_SENTENCE"}(n||(n={}));const s={[n.CHROME_EXTENSION_ID]:"oldceeleldhonbafppcapldpdifcinji",[n.NORMALIZE_SPACE]:!1,[n.SHOW_PARTIAL_RECO_UNDERLINE]:!1,[n.EXTN_PREFIX]:"lt",[n.COLORS_GRAMMAR]:{UNDERLINE:"#f2b24c",SELECTED_UNDERLINE:"#f2b24c",BACKGROUND:"rgba(242,179,77,0.3)",EMPHASIZE:"rgba(241,179,76,0.1)"},[n.COLORS_SPELLING]:{UNDERLINE:"#EB5757",SELECTED_UNDERLINE:"#EB5757",BACKGROUND:"rgba(235,88,88,0.2)",EMPHASIZE:"rgba(239,88,88,0.1)"},[n.COLORS_STYLE]:{UNDERLINE:"#8F7FFF",SELECTED_UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"},[n.COLORS_PARAPHRASE]:{UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"},[n.COLORS_RECOMMENDATION]:{UNDERLINE:"#80B3E2",SELECTED_UNDERLINE:"#0067C5",BACKGROUND:"rgba(0, 103, 199, 0.16)",EMPHASIZE:"rgba(0, 103, 199, 0.16)"},[n.COLORS_RECOMMENDATION_TEASE]:{UNDERLINE:"#CF9F0280",SELECTED_UNDERLINE:"#CF9F02",BACKGROUND:"rgba(242,181,24,0.16)",EMPHASIZE:"rgba(242,181,24,0.16)"},[n.SUPPORTED_LANGUAGES]:["ar","ast-es","be-by","br-fr","ca-es","ca-es-valencia","crh-ua","da-dk","de-at","de-ch","de-de","el-gr","en-au","en-ca","en-gb","en-nz","en-us","en-za","eo","es","fa","ga-ie","fr","gl-es","it","ja-jp","km-kh","nl","no","pl-pl","pt-ao","pt-br","pt-mz","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sv","ta-in","tl-ph","uk-ua","zh-cn"],[n.CARD_LAYOUT]:{TARGET_BOX_HORIZONTAL_MARGIN:0,TARGET_BOX_VERTICAL_MARGIN:5,HEADER_HEIGHT:36,FOOTER_HEIGHT:36,KEYBOARD_HINT_HEIGHT:60,MIN_HEIGHT_PARAPHRASE:200,MIN_HEIGHT_TOOLBOX:230,MAX_HEIGHT_TOOLBOX:368},[n.INSTALLED_ATTRIBUTE]:"data-lt-installed",[n.SITE_INIT_ATTRIBUTE]:"data-lt-site",[n.INPUT_AREA_INIT_ATTRIBUTE]:"data-lt-tweaks",[n.TMP_ID_ATTRIBUTE]:"data-lt-tmp-id",[n.AI_RULE_ID_REGEX]:/^(QB|AI)_/,[n.VALID_START_SENTENCE_REGEX]:"[^\u2022]",[n.VALID_END_SENTENCE_REGEX]:".",[n.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED]:!1,[n.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS]:15e3,[n.MAX_TEXT_LENGTH_ALLOWED]:1e4,[n.SELECTED_UNDERLINE_THICKNESS]:2,[n.BULLET_POINT_PARSING_PREFIX]:"\u2022 ",[n.TOOLBAR_SIZE]:{width:20,height:20},[n.FIX_ALL_CONFIG]:{FIX_GC_ERRORS:!0,FIX_RECOMMENDATIONS:!1,FIX_STYLE_ERRORS:!1},[n.IGNORE_EDITOR_WITH_ATTRIBUTES]:["spellcheck"],[n.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA]:!1,[n.MAIN_CONTENT_SCRIPT_FILENAME]:"/content.js",[n.SPECIAL_INTRODUCTORY_TEASER_ENABLED]:!0,[n.TERMS_OF_SERVICE_MODAL_ENABLED]:!0,[n.LOLLIPOP_CONFIG]:{LOLLIPOP_FREEZE_STATE_COLOR:"purple",LOLLIPOP_CSS_PATH:"/content/styles/lollipop.css",ONBOARDING_IMAGE_PATH:"/assets/images/toolbox/lollipop-onboarding-lt.webp",ONBOARDING_BORDER_RADIUS:"8px",LOLLIPOP_CIRCLE_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon.svg",LOLLIPOP_CIRCLE_GDOCS_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon-gdocs.svg",SUPPORTS_DARK_MODE:!0,ONBOARDING_LANDING_PAGE_URL:"https://languagetool.org/text-cursor",TOOLBOX_IFRAME_PATH:"/toolbox/toolbox.html"},[n.STRIP_WRAPPING_QUOTES_FROM_SENTENCE]:!0,[n.USE_CSS_CUSTOM_HIGHLIGHTS]:!1};class a{static getInstance(){return this.instance||self._qb_lt_config||(this.instance=new a,self._qb_lt_config=this.instance),this.instance||self._qb_lt_config}get(e){return this.extnConfig[e]}set(e,t){this.extnConfig[e]=t}setAll(e){this.extnConfig=e}getAll(){return this.extnConfig}constructor(){this.extnConfig=s}}var o=a.getInstance()},13031:(e,t,r)=>{"use strict";r.d(t,{OJ:()=>n.OJ,Qf:()=>n.Ay});var n=r(34152);r(96422),r(61183),r(81245),r(50384),r(90156),r(42067),r(33668),r(49579),r(67761)},24504:(e,t,r)=>{"use strict";function n(e,t,r,n){return new(r||(r=Promise))((function(s,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function i(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}l((n=n.apply(e,t||[])).next())}))}function s(e,t){return function(){return e.apply(t,arguments)}}r.d(t,{eL:()=>Cs}),"function"==typeof SuppressedError&&SuppressedError;const{toString:a}=Object.prototype,{getPrototypeOf:o}=Object,i=(l=Object.create(null),e=>{const t=a.call(e);return l[t]||(l[t]=t.slice(8,-1).toLowerCase())});var l;const c=e=>(e=e.toLowerCase(),t=>i(t)===e),u=e=>t=>typeof t===e,{isArray:d}=Array,h=u("undefined");const _=c("ArrayBuffer");const E=u("string"),f=u("function"),p=u("number"),g=e=>null!==e&&"object"==typeof e,m=e=>{if("object"!==i(e))return!1;const t=o(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},A=c("Date"),R=c("File"),T=c("Blob"),b=c("FileList"),O=c("URLSearchParams"),[S,I,v,y]=["ReadableStream","Request","Response","Headers"].map(c);function N(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,s;if("object"!=typeof e&&(e=[e]),d(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let o;for(n=0;n<a;n++)o=s[n],t.call(null,e[o],o,e)}}function C(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,P=e=>!h(e)&&e!==w;const L=(D="undefined"!=typeof Uint8Array&&o(Uint8Array),e=>D&&e instanceof D);var D;const x=c("HTMLFormElement"),k=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),U=c("RegExp"),M=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};N(r,((r,s)=>{let a;!1!==(a=t(r,s,e))&&(n[s]=a||r)})),Object.defineProperties(e,n)};const G=c("AsyncFunction"),H=(F="function"==typeof setImmediate,B=f(w.postMessage),F?setImmediate:B?(j=`axios@${Math.random()}`,W=[],w.addEventListener("message",(({source:e,data:t})=>{e===w&&t===j&&W.length&&W.shift()()}),!1),e=>{W.push(e),w.postMessage(j,"*")}):e=>setTimeout(e));var F,B,j,W;const X="undefined"!=typeof queueMicrotask?queueMicrotask.bind(w):"undefined"!=typeof process&&process.nextTick||H;var K={isArray:d,isArrayBuffer:_,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&f(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||f(e.append)&&("formdata"===(t=i(e))||"object"===t&&f(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_(e.buffer),t},isString:E,isNumber:p,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:m,isReadableStream:S,isRequest:I,isResponse:v,isHeaders:y,isUndefined:h,isDate:A,isFile:R,isBlob:T,isRegExp:U,isFunction:f,isStream:e=>g(e)&&f(e.pipe),isURLSearchParams:O,isTypedArray:L,isFileList:b,forEach:N,merge:function e(){const{caseless:t}=P(this)&&this||{},r={},n=(n,s)=>{const a=t&&C(r,s)||s;m(r[a])&&m(n)?r[a]=e(r[a],n):m(n)?r[a]=e({},n):d(n)?r[a]=n.slice():r[a]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&N(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(N(t,((t,n)=>{r&&f(t)?e[n]=s(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,a,i;const l={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],n&&!n(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==r&&o(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:c,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!p(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:x,hasOwnProperty:k,hasOwnProp:k,reduceDescriptors:M,freezeMethods:e=>{M(e,((t,r)=>{if(f(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];f(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return d(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:C,global:w,isContextDefined:P,isSpecCompliantForm:function(e){return!!(e&&f(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const s=d(e)?[]:{};return N(e,((e,t)=>{const a=r(e,n+1);!h(a)&&(s[t]=a)})),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:G,isThenable:e=>e&&(g(e)||f(e))&&f(e.then)&&f(e.catch),setImmediate:H,asap:X};function V(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}K.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});const q=V.prototype,z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{z[e]={value:e}})),Object.defineProperties(V,z),Object.defineProperty(q,"isAxiosError",{value:!0}),V.from=(e,t,r,n,s,a)=>{const o=Object.create(q);return K.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),V.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};function Y(e){return K.isPlainObject(e)||K.isArray(e)}function Z(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function $(e,t,r){return e?e.concat(t).map((function(e,t){return e=Z(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const J=K.toFlatObject(K,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Q(e,t,r){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=K.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!K.isUndefined(t[e])}))).metaTokens,s=r.visitor||c,a=r.dots,o=r.indexes,i=(r.Blob||"undefined"!=typeof Blob&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(K.isDate(e))return e.toISOString();if(!i&&K.isBlob(e))throw new V("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(e)||K.isTypedArray(e)?i&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let i=e;if(e&&!s&&"object"==typeof e)if(K.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(K.isArray(e)&&function(e){return K.isArray(e)&&!e.some(Y)}(e)||(K.isFileList(e)||K.endsWith(r,"[]"))&&(i=K.toArray(e)))return r=Z(r),i.forEach((function(e,n){!K.isUndefined(e)&&null!==e&&t.append(!0===o?$([r],n,a):null===o?r:r+"[]",l(e))})),!1;return!!Y(e)||(t.append($(s,r,a),l(e)),!1)}const u=[],d=Object.assign(J,{defaultVisitor:c,convertValue:l,isVisitable:Y});if(!K.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!K.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),K.forEach(r,(function(r,a){!0===(!(K.isUndefined(r)||null===r)&&s.call(t,r,K.isString(a)?a.trim():a,n,d))&&e(r,n?n.concat(a):[a])})),u.pop()}}(e),t}function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function te(e,t){this._pairs=[],e&&Q(e,this,t)}const re=te.prototype;function ne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function se(e,t,r){if(!t)return e;const n=r&&r.encode||ne;K.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(a=s?s(t,r):K.isURLSearchParams(t)?t.toString():new te(t,r).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}re.append=function(e,t){this._pairs.push([e,t])},re.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class ae{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ie={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:te,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const le="undefined"!=typeof window&&"undefined"!=typeof document,ce="object"==typeof navigator&&navigator||void 0,ue=le&&(!ce||["ReactNative","NativeScript","NS"].indexOf(ce.product)<0),de="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,he=le&&window.location.href||"http://localhost";var _e={...Object.freeze({__proto__:null,hasBrowserEnv:le,hasStandardBrowserWebWorkerEnv:de,hasStandardBrowserEnv:ue,navigator:ce,origin:he}),...ie};function Ee(e){function t(e,r,n,s){let a=e[s++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),i=s>=e.length;if(a=!a&&K.isArray(n)?n.length:a,i)return K.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!o;n[a]&&K.isObject(n[a])||(n[a]=[]);return t(e,r,n[a],s)&&K.isArray(n[a])&&(n[a]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],t[a]=e[a];return t}(n[a])),!o}if(K.isFormData(e)&&K.isFunction(e.entries)){const r={};return K.forEachEntry(e,((e,n)=>{t(function(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const fe={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=K.isObject(e);s&&K.isHTMLForm(e)&&(e=new FormData(e));if(K.isFormData(e))return n?JSON.stringify(Ee(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)||K.isReadableStream(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new _e.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return _e.isNode&&K.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=K.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(K.isString(e))try{return(t||JSON.parse)(e),K.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||fe.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(K.isResponse(e)||K.isReadableStream(e))return e;if(e&&K.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw V.from(e,V.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_e.classes.FormData,Blob:_e.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],(e=>{fe.headers[e]={}}));const pe=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ge=Symbol("internals");function me(e){return e&&String(e).trim().toLowerCase()}function Ae(e){return!1===e||null==e?e:K.isArray(e)?e.map(Ae):String(e)}function Re(e,t,r,n,s){return K.isFunction(n)?n.call(this,t,r):(s&&(t=r),K.isString(t)?K.isString(n)?-1!==t.indexOf(n):K.isRegExp(n)?n.test(t):void 0:void 0)}class Te{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=me(t);if(!s)throw new Error("header name must be a non-empty string");const a=K.findKey(n,s);(!a||void 0===n[a]||!0===r||void 0===r&&!1!==n[a])&&(n[a||t]=Ae(e))}const a=(e,t)=>K.forEach(e,((e,r)=>s(e,r,t)));if(K.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(K.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&pe[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(K.isHeaders(e))for(const[t,n]of e.entries())s(n,t,r);else null!=e&&s(t,e,r);return this}get(e,t){if(e=me(e)){const r=K.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(K.isFunction(t))return t.call(this,e,r);if(K.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=me(e)){const r=K.findKey(this,e);return!(!r||void 0===this[r]||t&&!Re(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=me(e)){const s=K.findKey(r,e);!s||t&&!Re(0,r[s],s,t)||(delete r[s],n=!0)}}return K.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!Re(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return K.forEach(this,((n,s)=>{const a=K.findKey(r,s);if(a)return t[a]=Ae(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(s):String(s).trim();o!==s&&delete t[s],t[o]=Ae(n),r[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return K.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&K.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[ge]=this[ge]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=me(e);t[n]||(!function(e,t){const r=K.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})}))}(r,e),t[n]=!0)}return K.isArray(e)?e.forEach(n):n(e),this}}function be(e,t){const r=this||fe,n=t||r,s=Te.from(n.headers);let a=n.data;return K.forEach(e,(function(e){a=e.call(r,a,s.normalize(),t?t.status:void 0)})),s.normalize(),a}function Oe(e){return!(!e||!e.__CANCEL__)}function Se(e,t,r){V.call(this,null==e?"canceled":e,V.ERR_CANCELED,t,r),this.name="CanceledError"}function Ie(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new V("Request failed with status code "+r.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}Te.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),K.reduceDescriptors(Te.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),K.freezeMethods(Te),K.inherits(Se,V,{__CANCEL__:!0});const ve=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,a=0,o=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=n[o];s||(s=l),r[a]=i,n[a]=l;let u=o,d=0;for(;u!==a;)d+=r[u++],u%=e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,s=0,a=1e3/t;const o=(t,a=Date.now())=>{s=a,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),i=t-s;i>=a?o(e,t):(r=e,n||(n=setTimeout((()=>{n=null,o(r)}),a-i)))},()=>r&&o(r)]}((r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,i=a-n,l=s(i);n=a;e({loaded:a,total:o,progress:o?a/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),r)},ye=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Ne=e=>(...t)=>K.asap((()=>e(...t)));var Ce=_e.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,_e.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(_e.origin),_e.navigator&&/(msie|trident)/i.test(_e.navigator.userAgent)):()=>!0,we=_e.hasStandardBrowserEnv?{write(e,t,r,n,s,a){const o=[e+"="+encodeURIComponent(t)];K.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),K.isString(n)&&o.push("path="+n),K.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Pe(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&n||0==r?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Le=e=>e instanceof Te?{...e}:e;function De(e,t){t=t||{};const r={};function n(e,t,r,n){return K.isPlainObject(e)&&K.isPlainObject(t)?K.merge.call({caseless:n},e,t):K.isPlainObject(t)?K.merge({},t):K.isArray(t)?t.slice():t}function s(e,t,r,s){return K.isUndefined(t)?K.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function a(e,t){if(!K.isUndefined(t))return n(void 0,t)}function o(e,t){return K.isUndefined(t)?K.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function i(r,s,a){return a in t?n(r,s):a in e?n(void 0,r):void 0}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(e,t,r)=>s(Le(e),Le(t),0,!0)};return K.forEach(Object.keys(Object.assign({},e,t)),(function(n){const a=l[n]||s,o=a(e[n],t[n],n);K.isUndefined(o)&&a!==i||(r[n]=o)})),r}var xe=e=>{const t=De({},e);let r,{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=Te.from(i),t.url=se(Pe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),K.isFormData(n))if(_e.hasStandardBrowserEnv||_e.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(r=i.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}if(_e.hasStandardBrowserEnv&&(s&&K.isFunction(s)&&(s=s(t)),s||!1!==s&&Ce(t.url))){const e=a&&o&&we.read(o);e&&i.set(a,e)}return t};var ke="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=xe(e);let s=n.data;const a=Te.from(n.headers).normalize();let o,i,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:_}=n;function E(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function p(){if(!f)return;const n=Te.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Ie((function(e){t(e),E()}),(function(e){r(e),E()}),{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(p)},f.onabort=function(){f&&(r(new V("Request aborted",V.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new V("Network Error",V.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||oe;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new V(t,s.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,f)),f=null},void 0===s&&a.setContentType(null),"setRequestHeader"in f&&K.forEach(a.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),K.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),d&&"json"!==d&&(f.responseType=n.responseType),_&&([l,u]=ve(_,!0),f.addEventListener("progress",l)),h&&f.upload&&([i,c]=ve(h),f.upload.addEventListener("progress",i),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{f&&(r(!t||t.type?new Se(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);g&&-1===_e.protocols.indexOf(g)?r(new V("Unsupported protocol "+g+":",V.ERR_BAD_REQUEST,e)):f.send(s||null)}))};const Ue=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof V?t:new Se(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,s(new V(`timeout ${t} of ms exceeded`,V.ETIMEDOUT))}),t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:i}=n;return i.unsubscribe=()=>K.asap(o),i}},Me=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Ge=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},He=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of Ge(e))yield*Me(r,t)}(e,t);let a,o=0,i=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return i(),void e.close();let a=n.byteLength;if(r){let e=o+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw i(e),e}},cancel:e=>(i(e),s.return())},{highWaterMark:2})},Fe="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Be=Fe&&"function"==typeof ReadableStream,je=Fe&&("function"==typeof TextEncoder?(We=new TextEncoder,e=>We.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var We;const Xe=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Ke=Be&&Xe((()=>{let e=!1;const t=new Request(_e.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Ve=Be&&Xe((()=>K.isReadableStream(new Response("").body))),qe={stream:Ve&&(e=>e.body)};var ze;Fe&&(ze=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!qe[e]&&(qe[e]=K.isFunction(ze[e])?t=>t[e]():(t,r)=>{throw new V(`Response type '${e}' is not supported`,V.ERR_NOT_SUPPORT,r)})})));const Ye=async(e,t)=>{const r=K.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(K.isBlob(e))return e.size;if(K.isSpecCompliantForm(e)){const t=new Request(_e.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return K.isArrayBufferView(e)||K.isArrayBuffer(e)?e.byteLength:(K.isURLSearchParams(e)&&(e+=""),K.isString(e)?(await je(e)).byteLength:void 0)})(t):r};var Ze=Fe&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:a,timeout:o,onDownloadProgress:i,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=xe(e);c=c?(c+"").toLowerCase():"text";let _,E=Ue([s,a&&a.toAbortSignal()],o);const f=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let p;try{if(l&&Ke&&"get"!==r&&"head"!==r&&0!==(p=await Ye(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(K.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){const[e,t]=ye(p,ve(Ne(l)));n=He(r.body,65536,e,t)}}K.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;_=new Request(t,{...h,signal:E,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:s?d:void 0});let a=await fetch(_);const o=Ve&&("stream"===c||"response"===c);if(Ve&&(i||o&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=K.toFiniteNumber(a.headers.get("content-length")),[r,n]=i&&ye(t,ve(Ne(i),!0))||[];a=new Response(He(a.body,65536,r,(()=>{n&&n(),f&&f()})),e)}c=c||"text";let g=await qe[K.findKey(qe,c)||"text"](a,e);return!o&&f&&f(),await new Promise(((t,r)=>{Ie(t,r,{data:g,headers:Te.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:_})}))}catch(t){if(f&&f(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new V("Network Error",V.ERR_NETWORK,e,_),{cause:t.cause||t});throw V.from(t,t&&t.code,e,_)}});const $e={http:null,xhr:ke,fetch:Ze};K.forEach($e,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Je=e=>`- ${e}`,Qe=e=>K.isFunction(e)||null===e||!1===e;var et=e=>{e=K.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let a=0;a<t;a++){let t;if(r=e[a],n=r,!Qe(r)&&(n=$e[(t=String(r)).toLowerCase()],void 0===n))throw new V(`Unknown adapter '${t}'`);if(n)break;s[t||"#"+a]=n}if(!n){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new V("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Je).join("\n"):" "+Je(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function tt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Se(null,e)}function rt(e){tt(e),e.headers=Te.from(e.headers),e.data=be.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return et(e.adapter||fe.adapter)(e).then((function(t){return tt(e),t.data=be.call(e,e.transformResponse,t),t.headers=Te.from(t.headers),t}),(function(t){return Oe(t)||(tt(e),t&&t.response&&(t.response.data=be.call(e,e.transformResponse,t.response),t.response.headers=Te.from(t.response.headers))),Promise.reject(t)}))}const nt="1.8.3",st={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{st[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const at={};st.transitional=function(e,t,r){return(n,s,a)=>{if(!1===e)throw new V(function(e,t){return"[Axios v1.8.3] Transitional option '"+e+"'"+t+(r?". "+r:"")}(s," has been removed"+(t?" in "+t:"")),V.ERR_DEPRECATED);return t&&!at[s]&&(at[s]=!0),!e||e(n,s,a)}},st.spelling=function(e){return(e,t)=>!0};var ot={assertOptions:function(e,t,r){if("object"!=typeof e)throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const a=n[s],o=t[a];if(o){const t=e[a],r=void 0===t||o(t,a,e);if(!0!==r)throw new V("option "+a+" must be "+r,V.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new V("Unknown option "+a,V.ERR_BAD_OPTION)}},validators:st};const it=ot.validators;class lt{constructor(e){this.defaults=e,this.interceptors={request:new ae,response:new ae}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=De(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&ot.assertOptions(r,{silentJSONParsing:it.transitional(it.boolean),forcedJSONParsing:it.transitional(it.boolean),clarifyTimeoutError:it.transitional(it.boolean)},!1),null!=n&&(K.isFunction(n)?t.paramsSerializer={serialize:n}:ot.assertOptions(n,{encode:it.function,serialize:it.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ot.assertOptions(t,{baseUrl:it.spelling("baseURL"),withXsrfToken:it.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&K.merge(s.common,s[t.method]);s&&K.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=Te.concat(a,s);const o=[];let i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!i){const e=[rt.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=rt.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return se(Pe((e=De(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}K.forEach(["delete","get","head","options"],(function(e){lt.prototype[e]=function(t,r){return this.request(De(r||{},{method:e,url:t,data:(r||{}).data}))}})),K.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,s){return this.request(De(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}lt.prototype[e]=t(),lt.prototype[e+"Form"]=t(!0)}));class ct{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,s){r.reason||(r.reason=new Se(e,n,s),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ct((function(t){e=t})),cancel:e}}}const ut={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ut).forEach((([e,t])=>{ut[t]=e}));const dt=function e(t){const r=new lt(t),n=s(lt.prototype.request,r);return K.extend(n,lt.prototype,r,{allOwnKeys:!0}),K.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(De(t,r))},n}(fe);dt.Axios=lt,dt.CanceledError=Se,dt.CancelToken=ct,dt.isCancel=Oe,dt.VERSION=nt,dt.toFormData=Q,dt.AxiosError=V,dt.Cancel=dt.CanceledError,dt.all=function(e){return Promise.all(e)},dt.spread=function(e){return function(t){return e.apply(null,t)}},dt.isAxiosError=function(e){return K.isObject(e)&&!0===e.isAxiosError},dt.mergeConfig=De,dt.AxiosHeaders=Te,dt.formToJSON=e=>Ee(K.isHTMLForm(e)?new FormData(e):e),dt.getAdapter=et,dt.HttpStatusCode=ut,dt.default=dt;function ht(e){let t=e.length;for(;--t>=0;)e[t]=0}const _t=256,Et=286,ft=30,pt=15,gt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),mt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),At=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tt=new Array(576);ht(Tt);const bt=new Array(60);ht(bt);const Ot=new Array(512);ht(Ot);const St=new Array(256);ht(St);const It=new Array(29);ht(It);const vt=new Array(ft);function yt(e,t,r,n,s){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}let Nt,Ct,wt;function Pt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ht(vt);const Lt=e=>e<256?Ot[e]:Ot[256+(e>>>7)],Dt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},xt=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Dt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},kt=(e,t,r)=>{xt(e,r[2*t],r[2*t+1])},Ut=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},Mt=(e,t,r)=>{const n=new Array(16);let s,a,o=0;for(s=1;s<=pt;s++)o=o+r[s-1]<<1,n[s]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=Ut(n[t]++,t))}},Gt=e=>{let t;for(t=0;t<Et;t++)e.dyn_ltree[2*t]=0;for(t=0;t<ft;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ht=e=>{e.bi_valid>8?Dt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ft=(e,t,r,n)=>{const s=2*t,a=2*r;return e[s]<e[a]||e[s]===e[a]&&n[t]<=n[r]},Bt=(e,t,r)=>{const n=e.heap[r];let s=r<<1;for(;s<=e.heap_len&&(s<e.heap_len&&Ft(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!Ft(t,n,e.heap[s],e.depth));)e.heap[r]=e.heap[s],r=s,s<<=1;e.heap[r]=n},jt=(e,t,r)=>{let n,s,a,o,i=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+i++],n+=(255&e.pending_buf[e.sym_buf+i++])<<8,s=e.pending_buf[e.sym_buf+i++],0===n?kt(e,s,t):(a=St[s],kt(e,a+_t+1,t),o=gt[a],0!==o&&(s-=It[a],xt(e,s,o)),n--,a=Lt(n),kt(e,a,r),o=mt[a],0!==o&&(n-=vt[a],xt(e,n,o)))}while(i<e.sym_next);kt(e,256,t)},Wt=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,i,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==r[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,r[2*l]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=n[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)Bt(e,r,o);l=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Bt(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=i,r[2*l]=r[2*o]+r[2*i],e.depth[l]=(e.depth[o]>=e.depth[i]?e.depth[o]:e.depth[i])+1,r[2*o+1]=r[2*i+1]=l,e.heap[1]=l++,Bt(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,i=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,h,_,E,f=0;for(h=0;h<=pt;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],h=r[2*r[2*u+1]+1]+1,h>l&&(h=l,f++),r[2*u+1]=h,u>n||(e.bl_count[h]++,_=0,u>=i&&(_=o[u-i]),E=r[2*u],e.opt_len+=E*(h+_),a&&(e.static_len+=E*(s[2*u+1]+_)));if(0!==f){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,f-=2}while(f>0);for(h=l;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--c],d>n||(r[2*d+1]!==h&&(e.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),u--)}})(e,t),Mt(r,c,e.bl_count)},Xt=(e,t,r)=>{let n,s,a=-1,o=t[1],i=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)s=o,o=t[2*(n+1)+1],++i<l&&s===o||(i<c?e.bl_tree[2*s]+=i:0!==s?(s!==a&&e.bl_tree[2*s]++,e.bl_tree[32]++):i<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=0,a=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},Kt=(e,t,r)=>{let n,s,a=-1,o=t[1],i=0,l=7,c=4;for(0===o&&(l=138,c=3),n=0;n<=r;n++)if(s=o,o=t[2*(n+1)+1],!(++i<l&&s===o)){if(i<c)do{kt(e,s,e.bl_tree)}while(0!=--i);else 0!==s?(s!==a&&(kt(e,s,e.bl_tree),i--),kt(e,16,e.bl_tree),xt(e,i-3,2)):i<=10?(kt(e,17,e.bl_tree),xt(e,i-3,3)):(kt(e,18,e.bl_tree),xt(e,i-11,7));i=0,a=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}};let Vt=!1;const qt=(e,t,r,n)=>{xt(e,0+(n?1:0),3),Ht(e),Dt(e,r),Dt(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var zt=(e,t,r,n)=>{let s,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<_t;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Wt(e,e.l_desc),Wt(e,e.d_desc),o=(e=>{let t;for(Xt(e,e.dyn_ltree,e.l_desc.max_code),Xt(e,e.dyn_dtree,e.d_desc.max_code),Wt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Rt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=r+5,r+4<=s&&-1!==t?qt(e,t,r,n):4===e.strategy||a===s?(xt(e,2+(n?1:0),3),jt(e,Tt,bt)):(xt(e,4+(n?1:0),3),((e,t,r,n)=>{let s;for(xt(e,t-257,5),xt(e,r-1,5),xt(e,n-4,4),s=0;s<n;s++)xt(e,e.bl_tree[2*Rt[s]+1],3);Kt(e,e.dyn_ltree,t-1),Kt(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),jt(e,e.dyn_ltree,e.dyn_dtree)),Gt(e),n&&Ht(e)},Yt={_tr_init:e=>{Vt||((()=>{let e,t,r,n,s;const a=new Array(16);for(r=0,n=0;n<28;n++)for(It[n]=r,e=0;e<1<<gt[n];e++)St[r++]=n;for(St[r-1]=n,s=0,n=0;n<16;n++)for(vt[n]=s,e=0;e<1<<mt[n];e++)Ot[s++]=n;for(s>>=7;n<ft;n++)for(vt[n]=s<<7,e=0;e<1<<mt[n]-7;e++)Ot[256+s++]=n;for(t=0;t<=pt;t++)a[t]=0;for(e=0;e<=143;)Tt[2*e+1]=8,e++,a[8]++;for(;e<=255;)Tt[2*e+1]=9,e++,a[9]++;for(;e<=279;)Tt[2*e+1]=7,e++,a[7]++;for(;e<=287;)Tt[2*e+1]=8,e++,a[8]++;for(Mt(Tt,287,a),e=0;e<ft;e++)bt[2*e+1]=5,bt[2*e]=Ut(e,5);Nt=new yt(Tt,gt,257,Et,pt),Ct=new yt(bt,mt,0,ft,pt),wt=new yt(new Array(0),At,0,19,7)})(),Vt=!0),e.l_desc=new Pt(e.dyn_ltree,Nt),e.d_desc=new Pt(e.dyn_dtree,Ct),e.bl_desc=new Pt(e.bl_tree,wt),e.bi_buf=0,e.bi_valid=0,Gt(e)},_tr_stored_block:qt,_tr_flush_block:zt,_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(St[r]+_t+1)]++,e.dyn_dtree[2*Lt(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{xt(e,2,3),kt(e,256,Tt),(e=>{16===e.bi_valid?(Dt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Zt=(e,t,r,n)=>{let s=65535&e,a=e>>>16&65535,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{s=s+t[n++]|0,a=a+s|0}while(--o);s%=65521,a%=65521}return s|a<<16};const $t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var Jt=(e,t,r,n)=>{const s=$t,a=n+r;e^=-1;for(let r=n;r<a;r++)e=e>>>8^s[255&(e^t[r])];return~e},Qt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},er={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:tr,_tr_stored_block:rr,_tr_flush_block:nr,_tr_tally:sr,_tr_align:ar}=Yt,{Z_NO_FLUSH:or,Z_PARTIAL_FLUSH:ir,Z_FULL_FLUSH:lr,Z_FINISH:cr,Z_BLOCK:ur,Z_OK:dr,Z_STREAM_END:hr,Z_STREAM_ERROR:_r,Z_DATA_ERROR:Er,Z_BUF_ERROR:fr,Z_DEFAULT_COMPRESSION:pr,Z_FILTERED:gr,Z_HUFFMAN_ONLY:mr,Z_RLE:Ar,Z_FIXED:Rr,Z_DEFAULT_STRATEGY:Tr,Z_UNKNOWN:br,Z_DEFLATED:Or}=er,Sr=258,Ir=262,vr=42,yr=113,Nr=666,Cr=(e,t)=>(e.msg=Qt[t],t),wr=e=>2*e-(e>4?9:0),Pr=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Lr=e=>{let t,r,n,s=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=s?r-s:0}while(--t);t=s,n=t;do{r=e.prev[--n],e.prev[n]=r>=s?r-s:0}while(--t)};let Dr=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const xr=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},kr=(e,t)=>{nr(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xr(e.strm)},Ur=(e,t)=>{e.pending_buf[e.pending++]=t},Mr=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Gr=(e,t,r,n)=>{let s=e.avail_in;return s>n&&(s=n),0===s?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),r),1===e.state.wrap?e.adler=Zt(e.adler,t,s,r):2===e.state.wrap&&(e.adler=Jt(e.adler,t,s,r)),e.next_in+=s,e.total_in+=s,s)},Hr=(e,t)=>{let r,n,s=e.max_chain_length,a=e.strstart,o=e.prev_length,i=e.nice_match;const l=e.strstart>e.w_size-Ir?e.strstart-(e.w_size-Ir):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+Sr;let _=c[a+o-1],E=c[a+o];e.prev_length>=e.good_match&&(s>>=2),i>e.lookahead&&(i=e.lookahead);do{if(r=t,c[r+o]===E&&c[r+o-1]===_&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<h);if(n=Sr-(h-a),a=h-Sr,n>o){if(e.match_start=t,o=n,n>=i)break;_=c[a+o-1],E=c[a+o]}}}while((t=d[t&u])>l&&0!=--s);return o<=e.lookahead?o:e.lookahead},Fr=e=>{const t=e.w_size;let r,n,s;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ir)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Lr(e),n+=t),0===e.strm.avail_in)break;if(r=Gr(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Dr(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Dr(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ir&&0!==e.strm.avail_in)},Br=(e,t)=>{let r,n,s,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,i=e.strm.avail_in;do{if(r=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s)break;if(s=e.strm.avail_out-s,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>s&&(r=s),r<a&&(0===r&&t!==cr||t===or||r!==n+e.strm.avail_in))break;o=t===cr&&r===n+e.strm.avail_in?1:0,rr(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,xr(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Gr(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return i-=e.strm.avail_in,i&&(i>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=i&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-i,e.strm.next_in),e.strstart),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==or&&t!==cr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(Gr(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,a=s>e.w_size?e.w_size:s,n=e.strstart-e.block_start,(n>=a||(n||t===cr)&&t!==or&&0===e.strm.avail_in&&n<=s)&&(r=n>s?s:n,o=t===cr&&0===e.strm.avail_in&&r===n?1:0,rr(e,e.block_start,r,o),e.block_start+=r,xr(e.strm)),o?3:1)},jr=(e,t)=>{let r,n;for(;;){if(e.lookahead<Ir){if(Fr(e),e.lookahead<Ir&&t===or)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Dr(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-Ir&&(e.match_length=Hr(e,r)),e.match_length>=3)if(n=sr(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Dr(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Dr(e,e.ins_h,e.window[e.strstart+1]);else n=sr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(kr(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===cr?(kr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(kr(e,!1),0===e.strm.avail_out)?1:2},Wr=(e,t)=>{let r,n,s;for(;;){if(e.lookahead<Ir){if(Fr(e),e.lookahead<Ir&&t===or)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Dr(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ir&&(e.match_length=Hr(e,r),e.match_length<=5&&(e.strategy===gr||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,n=sr(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=s&&(e.ins_h=Dr(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(kr(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=sr(e,0,e.window[e.strstart-1]),n&&kr(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=sr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===cr?(kr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(kr(e,!1),0===e.strm.avail_out)?1:2};function Xr(e,t,r,n,s){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=s}const Kr=[new Xr(0,0,0,0,Br),new Xr(4,4,8,4,jr),new Xr(4,5,16,8,jr),new Xr(4,6,32,32,jr),new Xr(4,4,16,16,Wr),new Xr(8,16,32,32,Wr),new Xr(8,16,128,128,Wr),new Xr(8,32,128,256,Wr),new Xr(32,128,258,1024,Wr),new Xr(32,258,258,4096,Wr)];function Vr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Or,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Pr(this.dyn_ltree),Pr(this.dyn_dtree),Pr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Pr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Pr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==vr&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==yr&&t.status!==Nr?1:0},zr=e=>{if(qr(e))return Cr(e,_r);e.total_in=e.total_out=0,e.data_type=br;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?vr:yr,e.adler=2===t.wrap?0:1,t.last_flush=-2,tr(t),dr},Yr=e=>{const t=zr(e);var r;return t===dr&&((r=e.state).window_size=2*r.w_size,Pr(r.head),r.max_lazy_match=Kr[r.level].max_lazy,r.good_match=Kr[r.level].good_length,r.nice_match=Kr[r.level].nice_length,r.max_chain_length=Kr[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},Zr=(e,t,r,n,s,a)=>{if(!e)return _r;let o=1;if(t===pr&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>9||r!==Or||n<8||n>15||t<0||t>9||a<0||a>Rr||8===n&&1!==o)return Cr(e,_r);8===n&&(n=9);const i=new Vr;return e.state=i,i.strm=e,i.status=vr,i.wrap=o,i.gzhead=null,i.w_bits=n,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=s+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+3-1)/3),i.window=new Uint8Array(2*i.w_size),i.head=new Uint16Array(i.hash_size),i.prev=new Uint16Array(i.w_size),i.lit_bufsize=1<<s+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new Uint8Array(i.pending_buf_size),i.sym_buf=i.lit_bufsize,i.sym_end=3*(i.lit_bufsize-1),i.level=t,i.strategy=a,i.method=r,Yr(e)};var $r={deflateInit:(e,t)=>Zr(e,t,Or,15,8,Tr),deflateInit2:Zr,deflateReset:Yr,deflateResetKeep:zr,deflateSetHeader:(e,t)=>qr(e)||2!==e.state.wrap?_r:(e.state.gzhead=t,dr),deflate:(e,t)=>{if(qr(e)||t>ur||t<0)return e?Cr(e,_r):_r;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===Nr&&t!==cr)return Cr(e,0===e.avail_out?fr:_r);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(xr(e),0===e.avail_out)return r.last_flush=-1,dr}else if(0===e.avail_in&&wr(t)<=wr(n)&&t!==cr)return Cr(e,fr);if(r.status===Nr&&0!==e.avail_in)return Cr(e,fr);if(r.status===vr&&0===r.wrap&&(r.status=yr),r.status===vr){let t=Or+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=mr||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,Mr(r,t),0!==r.strstart&&(Mr(r,e.adler>>>16),Mr(r,65535&e.adler)),e.adler=1,r.status=yr,xr(e),0!==r.pending)return r.last_flush=-1,dr}if(57===r.status)if(e.adler=0,Ur(r,31),Ur(r,139),Ur(r,8),r.gzhead)Ur(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ur(r,255&r.gzhead.time),Ur(r,r.gzhead.time>>8&255),Ur(r,r.gzhead.time>>16&255),Ur(r,r.gzhead.time>>24&255),Ur(r,9===r.level?2:r.strategy>=mr||r.level<2?4:0),Ur(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ur(r,255&r.gzhead.extra.length),Ur(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Jt(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Ur(r,0),Ur(r,0),Ur(r,0),Ur(r,0),Ur(r,0),Ur(r,9===r.level?2:r.strategy>=mr||r.level<2?4:0),Ur(r,3),r.status=yr,xr(e),0!==r.pending)return r.last_flush=-1,dr;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=Jt(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=s,xr(e),0!==r.pending)return r.last_flush=-1,dr;t=0,n-=s}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=Jt(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Jt(e.adler,r.pending_buf,r.pending-n,n)),xr(e),0!==r.pending)return r.last_flush=-1,dr;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ur(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Jt(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Jt(e.adler,r.pending_buf,r.pending-n,n)),xr(e),0!==r.pending)return r.last_flush=-1,dr;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ur(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Jt(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(xr(e),0!==r.pending))return r.last_flush=-1,dr;Ur(r,255&e.adler),Ur(r,e.adler>>8&255),e.adler=0}if(r.status=yr,xr(e),0!==r.pending)return r.last_flush=-1,dr}if(0!==e.avail_in||0!==r.lookahead||t!==or&&r.status!==Nr){let n=0===r.level?Br(r,t):r.strategy===mr?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(Fr(e),0===e.lookahead)){if(t===or)return 1;break}if(e.match_length=0,r=sr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(kr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===cr?(kr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(kr(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===Ar?((e,t)=>{let r,n,s,a;const o=e.window;for(;;){if(e.lookahead<=Sr){if(Fr(e),e.lookahead<=Sr&&t===or)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(s=e.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){a=e.strstart+Sr;do{}while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<a);e.match_length=Sr-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=sr(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=sr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(kr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===cr?(kr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(kr(e,!1),0===e.strm.avail_out)?1:2})(r,t):Kr[r.level].func(r,t);if(3!==n&&4!==n||(r.status=Nr),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),dr;if(2===n&&(t===ir?ar(r):t!==ur&&(rr(r,0,0,!1),t===lr&&(Pr(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),xr(e),0===e.avail_out))return r.last_flush=-1,dr}return t!==cr?dr:r.wrap<=0?hr:(2===r.wrap?(Ur(r,255&e.adler),Ur(r,e.adler>>8&255),Ur(r,e.adler>>16&255),Ur(r,e.adler>>24&255),Ur(r,255&e.total_in),Ur(r,e.total_in>>8&255),Ur(r,e.total_in>>16&255),Ur(r,e.total_in>>24&255)):(Mr(r,e.adler>>>16),Mr(r,65535&e.adler)),xr(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?dr:hr)},deflateEnd:e=>{if(qr(e))return _r;const t=e.state.status;return e.state=null,t===yr?Cr(e,Er):dr},deflateSetDictionary:(e,t)=>{let r=t.length;if(qr(e))return _r;const n=e.state,s=n.wrap;if(2===s||1===s&&n.status!==vr||n.lookahead)return _r;if(1===s&&(e.adler=Zt(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===s&&(Pr(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const a=e.avail_in,o=e.next_in,i=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Fr(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Dr(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,Fr(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=i,e.avail_in=a,n.wrap=s,dr},deflateInfo:"pako deflate (from Nodeca project)"};const Jr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Qr=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)Jr(r,t)&&(e[t]=r[t])}}return e},en=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,s=e.length;t<s;t++){let s=e[t];r.set(s,n),n+=s.length}return r};let tn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){tn=!1}const rn=new Uint8Array(256);for(let e=0;e<256;e++)rn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;rn[254]=rn[254]=1;var nn=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,s,a,o=e.length,i=0;for(s=0;s<o;s++)r=e.charCodeAt(s),55296==(64512&r)&&s+1<o&&(n=e.charCodeAt(s+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),s++)),i+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(i),a=0,s=0;a<i;s++)r=e.charCodeAt(s),55296==(64512&r)&&s+1<o&&(n=e.charCodeAt(s+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},sn=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,s;const a=new Array(2*r);for(s=0,n=0;n<r;){let t=e[n++];if(t<128){a[s++]=t;continue}let o=rn[t];if(o>4)a[s++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<r;)t=t<<6|63&e[n++],o--;o>1?a[s++]=65533:t<65536?a[s++]=t:(t-=65536,a[s++]=55296|t>>10&1023,a[s++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&tn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(a,s)},an=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+rn[e[r]]>t?r:t};var on=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ln=Object.prototype.toString,{Z_NO_FLUSH:cn,Z_SYNC_FLUSH:un,Z_FULL_FLUSH:dn,Z_FINISH:hn,Z_OK:_n,Z_STREAM_END:En,Z_DEFAULT_COMPRESSION:fn,Z_DEFAULT_STRATEGY:pn,Z_DEFLATED:gn}=er;function mn(e){this.options=Qr({level:fn,method:gn,chunkSize:16384,windowBits:15,memLevel:8,strategy:pn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new on,this.strm.avail_out=0;let r=$r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==_n)throw new Error(Qt[r]);if(t.header&&$r.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?nn(t.dictionary):"[object ArrayBuffer]"===ln.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=$r.deflateSetDictionary(this.strm,e),r!==_n)throw new Error(Qt[r]);this._dict_set=!0}}function An(e,t){const r=new mn(t);if(r.push(e,!0),r.err)throw r.msg||Qt[r.err];return r.result}mn.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?hn:cn,"string"==typeof e?r.input=nn(e):"[object ArrayBuffer]"===ln.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===un||a===dn)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=$r.deflate(r,a),s===En)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=$r.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===_n;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},mn.prototype.onData=function(e){this.chunks.push(e)},mn.prototype.onEnd=function(e){e===_n&&(this.result=en(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Rn={Deflate:mn,deflate:An,deflateRaw:function(e,t){return(t=t||{}).raw=!0,An(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,An(e,t)},constants:er};const Tn=16209;var bn=function(e,t){let r,n,s,a,o,i,l,c,u,d,h,_,E,f,p,g,m,A,R,T,b,O,S,I;const v=e.state;r=e.next_in,S=e.input,n=r+(e.avail_in-5),s=e.next_out,I=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),i=v.dmax,l=v.wsize,c=v.whave,u=v.wnext,d=v.window,h=v.hold,_=v.bits,E=v.lencode,f=v.distcode,p=(1<<v.lenbits)-1,g=(1<<v.distbits)-1;e:do{_<15&&(h+=S[r++]<<_,_+=8,h+=S[r++]<<_,_+=8),m=E[h&p];t:for(;;){if(A=m>>>24,h>>>=A,_-=A,A=m>>>16&255,0===A)I[s++]=65535&m;else{if(!(16&A)){if(64&A){if(32&A){v.mode=16191;break e}e.msg="invalid literal/length code",v.mode=Tn;break e}m=E[(65535&m)+(h&(1<<A)-1)];continue t}for(R=65535&m,A&=15,A&&(_<A&&(h+=S[r++]<<_,_+=8),R+=h&(1<<A)-1,h>>>=A,_-=A),_<15&&(h+=S[r++]<<_,_+=8,h+=S[r++]<<_,_+=8),m=f[h&g];;){if(A=m>>>24,h>>>=A,_-=A,A=m>>>16&255,16&A){if(T=65535&m,A&=15,_<A&&(h+=S[r++]<<_,_+=8,_<A&&(h+=S[r++]<<_,_+=8)),T+=h&(1<<A)-1,T>i){e.msg="invalid distance too far back",v.mode=Tn;break e}if(h>>>=A,_-=A,A=s-a,T>A){if(A=T-A,A>c&&v.sane){e.msg="invalid distance too far back",v.mode=Tn;break e}if(b=0,O=d,0===u){if(b+=l-A,A<R){R-=A;do{I[s++]=d[b++]}while(--A);b=s-T,O=I}}else if(u<A){if(b+=l+u-A,A-=u,A<R){R-=A;do{I[s++]=d[b++]}while(--A);if(b=0,u<R){A=u,R-=A;do{I[s++]=d[b++]}while(--A);b=s-T,O=I}}}else if(b+=u-A,A<R){R-=A;do{I[s++]=d[b++]}while(--A);b=s-T,O=I}for(;R>2;)I[s++]=O[b++],I[s++]=O[b++],I[s++]=O[b++],R-=3;R&&(I[s++]=O[b++],R>1&&(I[s++]=O[b++]))}else{b=s-T;do{I[s++]=I[b++],I[s++]=I[b++],I[s++]=I[b++],R-=3}while(R>2);R&&(I[s++]=I[b++],R>1&&(I[s++]=I[b++]))}break}if(64&A){e.msg="invalid distance code",v.mode=Tn;break e}m=f[(65535&m)+(h&(1<<A)-1)]}}break}}while(r<n&&s<o);R=_>>3,r-=R,_-=R<<3,h&=(1<<_)-1,e.next_in=r,e.next_out=s,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=s<o?o-s+257:257-(s-o),v.hold=h,v.bits=_};const On=15,Sn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),In=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Nn=(e,t,r,n,s,a,o,i)=>{const l=i.bits;let c,u,d,h,_,E,f=0,p=0,g=0,m=0,A=0,R=0,T=0,b=0,O=0,S=0,I=null;const v=new Uint16Array(16),y=new Uint16Array(16);let N,C,w,P=null;for(f=0;f<=On;f++)v[f]=0;for(p=0;p<n;p++)v[t[r+p]]++;for(A=l,m=On;m>=1&&0===v[m];m--);if(A>m&&(A=m),0===m)return s[a++]=20971520,s[a++]=20971520,i.bits=1,0;for(g=1;g<m&&0===v[g];g++);for(A<g&&(A=g),b=1,f=1;f<=On;f++)if(b<<=1,b-=v[f],b<0)return-1;if(b>0&&(0===e||1!==m))return-1;for(y[1]=0,f=1;f<On;f++)y[f+1]=y[f]+v[f];for(p=0;p<n;p++)0!==t[r+p]&&(o[y[t[r+p]]++]=p);if(0===e?(I=P=o,E=20):1===e?(I=Sn,P=In,E=257):(I=vn,P=yn,E=0),S=0,p=0,f=g,_=a,R=A,T=0,d=-1,O=1<<A,h=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){N=f-T,o[p]+1<E?(C=0,w=o[p]):o[p]>=E?(C=P[o[p]-E],w=I[o[p]-E]):(C=96,w=0),c=1<<f-T,u=1<<R,g=u;do{u-=c,s[_+(S>>T)+u]=N<<24|C<<16|w}while(0!==u);for(c=1<<f-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,p++,0==--v[f]){if(f===m)break;f=t[r+o[p]]}if(f>A&&(S&h)!==d){for(0===T&&(T=A),_+=g,R=f-T,b=1<<R;R+T<m&&(b-=v[R+T],!(b<=0));)R++,b<<=1;if(O+=1<<R,1===e&&O>852||2===e&&O>592)return 1;d=S&h,s[d]=A<<24|R<<16|_-a}}return 0!==S&&(s[_+S]=f-T<<24|64<<16),i.bits=A,0};const{Z_FINISH:Cn,Z_BLOCK:wn,Z_TREES:Pn,Z_OK:Ln,Z_STREAM_END:Dn,Z_NEED_DICT:xn,Z_STREAM_ERROR:kn,Z_DATA_ERROR:Un,Z_MEM_ERROR:Mn,Z_BUF_ERROR:Gn,Z_DEFLATED:Hn}=er,Fn=16180,Bn=16190,jn=16191,Wn=16192,Xn=16194,Kn=16199,Vn=16200,qn=16206,zn=16209,Yn=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Zn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $n=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Fn||t.mode>16211?1:0},Jn=e=>{if($n(e))return kn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Fn,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ln},Qn=e=>{if($n(e))return kn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Jn(e)},es=(e,t)=>{let r;if($n(e))return kn;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?kn:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Qn(e))},ts=(e,t)=>{if(!e)return kn;const r=new Zn;e.state=r,r.strm=e,r.window=null,r.mode=Fn;const n=es(e,t);return n!==Ln&&(e.state=null),n};let rs,ns,ss=!0;const as=e=>{if(ss){rs=new Int32Array(512),ns=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Nn(1,e.lens,0,288,rs,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Nn(2,e.lens,0,32,ns,0,e.work,{bits:5}),ss=!1}e.lencode=rs,e.lenbits=9,e.distcode=ns,e.distbits=5},os=(e,t,r,n)=>{let s;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(t.subarray(r-n,r-n+s),a.wnext),(n-=s)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0};var is={inflateReset:Qn,inflateReset2:es,inflateResetKeep:Jn,inflateInit:e=>ts(e,15),inflateInit2:ts,inflate:(e,t)=>{let r,n,s,a,o,i,l,c,u,d,h,_,E,f,p,g,m,A,R,T,b,O,S=0;const I=new Uint8Array(4);let v,y;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($n(e)||!e.output||!e.input&&0!==e.avail_in)return kn;r=e.state,r.mode===jn&&(r.mode=Wn),o=e.next_out,s=e.output,l=e.avail_out,a=e.next_in,n=e.input,i=e.avail_in,c=r.hold,u=r.bits,d=i,h=l,O=Ln;e:for(;;)switch(r.mode){case Fn:if(0===r.wrap){r.mode=Wn;break}for(;u<16;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===c){0===r.wbits&&(r.wbits=15),r.check=0,I[0]=255&c,I[1]=c>>>8&255,r.check=Jt(r.check,I,2,0),c=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=zn;break}if((15&c)!==Hn){e.msg="unknown compression method",r.mode=zn;break}if(c>>>=4,u-=4,b=8+(15&c),0===r.wbits&&(r.wbits=b),b>15||b>r.wbits){e.msg="invalid window size",r.mode=zn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:jn,c=0,u=0;break;case 16181:for(;u<16;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(r.flags=c,(255&r.flags)!==Hn){e.msg="unknown compression method",r.mode=zn;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=zn;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(I[0]=255&c,I[1]=c>>>8&255,r.check=Jt(r.check,I,2,0)),c=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(I[0]=255&c,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,r.check=Jt(r.check,I,4,0)),c=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(I[0]=255&c,I[1]=c>>>8&255,r.check=Jt(r.check,I,2,0)),c=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(I[0]=255&c,I[1]=c>>>8&255,r.check=Jt(r.check,I,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(_=r.length,_>i&&(_=i),_&&(r.head&&(b=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+_),b)),512&r.flags&&4&r.wrap&&(r.check=Jt(r.check,n,_,a)),i-=_,a+=_,r.length-=_),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===i)break e;_=0;do{b=n[a+_++],r.head&&b&&r.length<65536&&(r.head.name+=String.fromCharCode(b))}while(b&&_<i);if(512&r.flags&&4&r.wrap&&(r.check=Jt(r.check,n,_,a)),i-=_,a+=_,b)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===i)break e;_=0;do{b=n[a+_++],r.head&&b&&r.length<65536&&(r.head.comment+=String.fromCharCode(b))}while(b&&_<i);if(512&r.flags&&4&r.wrap&&(r.check=Jt(r.check,n,_,a)),i-=_,a+=_,b)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=zn;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=jn;break;case 16189:for(;u<32;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}e.adler=r.check=Yn(c),c=0,u=0,r.mode=Bn;case Bn:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=i,r.hold=c,r.bits=u,xn;e.adler=r.check=1,r.mode=jn;case jn:if(t===wn||t===Pn)break e;case Wn:if(r.last){c>>>=7&u,u-=7&u,r.mode=qn;break}for(;u<3;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}switch(r.last=1&c,c>>>=1,u-=1,3&c){case 0:r.mode=16193;break;case 1:if(as(r),r.mode=Kn,t===Pn){c>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=zn}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=zn;break}if(r.length=65535&c,c=0,u=0,r.mode=Xn,t===Pn)break e;case Xn:r.mode=16195;case 16195:if(_=r.length,_){if(_>i&&(_=i),_>l&&(_=l),0===_)break e;s.set(n.subarray(a,a+_),o),i-=_,a+=_,l-=_,o+=_,r.length-=_;break}r.mode=jn;break;case 16196:for(;u<14;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(r.nlen=257+(31&c),c>>>=5,u-=5,r.ndist=1+(31&c),c>>>=5,u-=5,r.ncode=4+(15&c),c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=zn;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}r.lens[N[r.have++]]=7&c,c>>>=3,u-=3}for(;r.have<19;)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,v={bits:r.lenbits},O=Nn(0,r.lens,0,19,r.lencode,0,r.work,v),r.lenbits=v.bits,O){e.msg="invalid code lengths set",r.mode=zn;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;S=r.lencode[c&(1<<r.lenbits)-1],p=S>>>24,g=S>>>16&255,m=65535&S,!(p<=u);){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(m<16)c>>>=p,u-=p,r.lens[r.have++]=m;else{if(16===m){for(y=p+2;u<y;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(c>>>=p,u-=p,0===r.have){e.msg="invalid bit length repeat",r.mode=zn;break}b=r.lens[r.have-1],_=3+(3&c),c>>>=2,u-=2}else if(17===m){for(y=p+3;u<y;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}c>>>=p,u-=p,b=0,_=3+(7&c),c>>>=3,u-=3}else{for(y=p+7;u<y;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}c>>>=p,u-=p,b=0,_=11+(127&c),c>>>=7,u-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=zn;break}for(;_--;)r.lens[r.have++]=b}}if(r.mode===zn)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=zn;break}if(r.lenbits=9,v={bits:r.lenbits},O=Nn(1,r.lens,0,r.nlen,r.lencode,0,r.work,v),r.lenbits=v.bits,O){e.msg="invalid literal/lengths set",r.mode=zn;break}if(r.distbits=6,r.distcode=r.distdyn,v={bits:r.distbits},O=Nn(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,v),r.distbits=v.bits,O){e.msg="invalid distances set",r.mode=zn;break}if(r.mode=Kn,t===Pn)break e;case Kn:r.mode=Vn;case Vn:if(i>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=i,r.hold=c,r.bits=u,bn(e,h),o=e.next_out,s=e.output,l=e.avail_out,a=e.next_in,n=e.input,i=e.avail_in,c=r.hold,u=r.bits,r.mode===jn&&(r.back=-1);break}for(r.back=0;S=r.lencode[c&(1<<r.lenbits)-1],p=S>>>24,g=S>>>16&255,m=65535&S,!(p<=u);){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(g&&!(240&g)){for(A=p,R=g,T=m;S=r.lencode[T+((c&(1<<A+R)-1)>>A)],p=S>>>24,g=S>>>16&255,m=65535&S,!(A+p<=u);){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}c>>>=A,u-=A,r.back+=A}if(c>>>=p,u-=p,r.back+=p,r.length=m,0===g){r.mode=16205;break}if(32&g){r.back=-1,r.mode=jn;break}if(64&g){e.msg="invalid literal/length code",r.mode=zn;break}r.extra=15&g,r.mode=16201;case 16201:if(r.extra){for(y=r.extra;u<y;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;S=r.distcode[c&(1<<r.distbits)-1],p=S>>>24,g=S>>>16&255,m=65535&S,!(p<=u);){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(!(240&g)){for(A=p,R=g,T=m;S=r.distcode[T+((c&(1<<A+R)-1)>>A)],p=S>>>24,g=S>>>16&255,m=65535&S,!(A+p<=u);){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}c>>>=A,u-=A,r.back+=A}if(c>>>=p,u-=p,r.back+=p,64&g){e.msg="invalid distance code",r.mode=zn;break}r.offset=m,r.extra=15&g,r.mode=16203;case 16203:if(r.extra){for(y=r.extra;u<y;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=zn;break}r.mode=16204;case 16204:if(0===l)break e;if(_=h-l,r.offset>_){if(_=r.offset-_,_>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=zn;break}_>r.wnext?(_-=r.wnext,E=r.wsize-_):E=r.wnext-_,_>r.length&&(_=r.length),f=r.window}else f=s,E=o-r.offset,_=r.length;_>l&&(_=l),l-=_,r.length-=_;do{s[o++]=f[E++]}while(--_);0===r.length&&(r.mode=Vn);break;case 16205:if(0===l)break e;s[o++]=r.length,l--,r.mode=Vn;break;case qn:if(r.wrap){for(;u<32;){if(0===i)break e;i--,c|=n[a++]<<u,u+=8}if(h-=l,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?Jt(r.check,s,h,o-h):Zt(r.check,s,h,o-h)),h=l,4&r.wrap&&(r.flags?c:Yn(c))!==r.check){e.msg="incorrect data check",r.mode=zn;break}c=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===i)break e;i--,c+=n[a++]<<u,u+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=zn;break}c=0,u=0}r.mode=16208;case 16208:O=Dn;break e;case zn:O=Un;break e;case 16210:return Mn;default:return kn}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=i,r.hold=c,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<zn&&(r.mode<qn||t!==Cn))&&os(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?Jt(r.check,s,h,e.next_out-h):Zt(r.check,s,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===jn?128:0)+(r.mode===Kn||r.mode===Xn?256:0),(0===d&&0===h||t===Cn)&&O===Ln&&(O=Gn),O},inflateEnd:e=>{if($n(e))return kn;let t=e.state;return t.window&&(t.window=null),e.state=null,Ln},inflateGetHeader:(e,t)=>{if($n(e))return kn;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,Ln):kn},inflateSetDictionary:(e,t)=>{const r=t.length;let n,s,a;return $n(e)?kn:(n=e.state,0!==n.wrap&&n.mode!==Bn?kn:n.mode===Bn&&(s=1,s=Zt(s,t,r,0),s!==n.check)?Un:(a=os(e,t,r,r),a?(n.mode=16210,Mn):(n.havedict=1,Ln)))},inflateInfo:"pako inflate (from Nodeca project)"};var ls=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const cs=Object.prototype.toString,{Z_NO_FLUSH:us,Z_FINISH:ds,Z_OK:hs,Z_STREAM_END:_s,Z_NEED_DICT:Es,Z_STREAM_ERROR:fs,Z_DATA_ERROR:ps,Z_MEM_ERROR:gs}=er;function ms(e){this.options=Qr({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new on,this.strm.avail_out=0;let r=is.inflateInit2(this.strm,t.windowBits);if(r!==hs)throw new Error(Qt[r]);if(this.header=new ls,is.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=nn(t.dictionary):"[object ArrayBuffer]"===cs.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=is.inflateSetDictionary(this.strm,t.dictionary),r!==hs)))throw new Error(Qt[r])}function As(e,t){const r=new ms(t);if(r.push(e),r.err)throw r.msg||Qt[r.err];return r.result}ms.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let a,o,i;if(this.ended)return!1;for(o=t===~~t?t:!0===t?ds:us,"[object ArrayBuffer]"===cs.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=is.inflate(r,o),a===Es&&s&&(a=is.inflateSetDictionary(r,s),a===hs?a=is.inflate(r,o):a===ps&&(a=Es));r.avail_in>0&&a===_s&&r.state.wrap>0&&0!==e[r.next_in];)is.inflateReset(r),a=is.inflate(r,o);switch(a){case fs:case ps:case Es:case gs:return this.onEnd(a),this.ended=!0,!1}if(i=r.avail_out,r.next_out&&(0===r.avail_out||a===_s))if("string"===this.options.to){let e=an(r.output,r.next_out),t=r.next_out-e,s=sn(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(s)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==hs||0!==i){if(a===_s)return a=is.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},ms.prototype.onData=function(e){this.chunks.push(e)},ms.prototype.onEnd=function(e){e===hs&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=en(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Rs={Inflate:ms,inflate:As,inflateRaw:function(e,t){return(t=t||{}).raw=!0,As(e,t)},ungzip:As,constants:er};const{Deflate:Ts,deflate:bs,deflateRaw:Os,gzip:Ss}=Rn,{Inflate:Is,inflate:vs,inflateRaw:ys,ungzip:Ns}=Rs;var Cs,ws={Deflate:Ts,deflate:bs,deflateRaw:Os,gzip:Ss,Inflate:Is,inflate:vs,inflateRaw:ys,ungzip:Ns,constants:er};class Ps{static init(e,t,r){this.axiosClient.defaults.baseURL=e,this.axiosClient.defaults.headers.post["Content-Type"]="application/json",this.axiosClient.defaults.headers.post["Content-Encoding"]="gzip",this.headers=r,this.namespace=t}static send(e){return n(this,void 0,void 0,(function*(){try{const t=JSON.stringify(e),r=ws.gzip(t);yield this.axiosClient.post(Ms.config.namespace,r,this.headers)}catch(e){}}))}}Ps.axiosClient=dt,Ps.headers={},Ps.namespace="";class Ls{constructor(){this.flushInterval=5e3,this.flushTimer=null,this.maxBufferBytes=0,this.currentBufferSize=0}scheduleFlushTimer(){this.flushTimer=window.setTimeout((()=>n(this,void 0,void 0,(function*(){yield this.flush(),this.scheduleFlushTimer()}))),this.flushInterval)}resetFlushTimer(){this.flushTimer&&clearTimeout(this.flushTimer),this.scheduleFlushTimer()}}class Ds extends Ls{constructor(e=5e3,t=1e4){super(),this.store=[],this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return n(this,void 0,void 0,(function*(){const t=new Blob([JSON.stringify(e)]).size;this.store.push(e),this.currentBufferSize+=t,this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())}))}flush(){return n(this,void 0,void 0,(function*(){0!==this.store.length?Ps.send(this.store).then((()=>{this.store=[],this.currentBufferSize=0,this.resetFlushTimer()})):this.resetFlushTimer()}))}}class xs extends Ls{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return n(this,void 0,void 0,(function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,this.appendLogs(e),this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())}))}flush(){return n(this,void 0,void 0,(function*(){const e=this.fetchLogs();0!==e.length?Ps.send(e).then((()=>{localStorage.removeItem(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()})).catch((e=>{})):this.resetFlushTimer()}))}appendLogs(e){const t=this.fetchLogs();t.push(e),localStorage.setItem(this.storageKey,JSON.stringify(t))}fetchLogs(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}}!function(e){e.MEMORY="memory",e.LOCAL="local",e.CHROME="chrome"}(Cs||(Cs={}));class ks extends Ls{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return n(this,void 0,void 0,(function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,yield this.appendLogs(e),this.currentBufferSize>this.maxBufferBytes&&(yield this.flush())}))}flush(){return n(this,void 0,void 0,(function*(){this.fetchLogs().then((e=>n(this,void 0,void 0,(function*(){0!==e.length?Ps.send(e).then((()=>n(this,void 0,void 0,(function*(){yield chrome.storage.local.remove(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()})))):this.resetFlushTimer()}))))}))}appendLogs(e){return n(this,void 0,void 0,(function*(){const t=yield this.fetchLogs();t.push(e),yield chrome.storage.local.set({[this.storageKey]:t})}))}fetchLogs(){return n(this,void 0,void 0,(function*(){return chrome.storage.local.get(this.storageKey).then((e=>e[this.storageKey]||[]))}))}scheduleFlushTimer(){this.flushTimer=setTimeout((()=>n(this,void 0,void 0,(function*(){yield this.flush(),this.scheduleFlushTimer()}))),this.flushInterval)}}class Us{static createStorage(e,t,r){switch(e){case Cs.LOCAL:return new xs(t,r);case Cs.CHROME:return new ks(t,r);default:return new Ds(t,r)}}}class Ms{static init(e="com.quillbot.dev",t="dev",r=Cs.CHROME,n=1e4,s=5e3,a={}){let o="https://ol-collector.quillbot.dev";"prod"===t&&(o="https://ol-collector.quillbot.com"),e="/"+e,Ps.init(o,e,a),this.storage=Us.createStorage(r,s,n),this.config={host:o,version:"v1",namespace:e,env:t,storageType:r,postBytes:n,postInterval:s,headers:a}}static log(e){this.storage.buffer(e).then((e=>{}))}static flush(){this.storage.flush().then((e=>{}))}}Ms.config={host:"",version:"",namespace:"",env:"",storageType:"",postBytes:2e3,postInterval:-1,headers:{}}},27580:(e,t,r)=>{"use strict";r.d(t,{TU:()=>a,Wm:()=>o});var n,s=r(41705),a="chrome-active/system/cloudflare_bot_detected",o="chrome-active/system/too_many_requests",i="EXTENSION",l="GC",c="GENERATIVE_AI",u="PPHR";n={},(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)(n,"lapr/system/dictionary_add_failure",l),"lapr/system/dictionary_add_success",l),"lapr/user/clicked_dictionary_add",l),"chrome-active/system/clicked_verify_bot_prompt",i),"chrome-active/system/clicked_privacy_prompt",i),"lapr/user/clicked_suggestions_edit",l),"chrome-active/user/discarded_text",c),"chrome-active/user/drafted_email",c),"chrome-active/user/edited_prompt_header",c),"chrome-active/user/inserted_text",c),(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)(n,"chrome-active/user/modified_output",c),"chrome-active/user/regenrated_output",c),"chrome-active/user/regenrated_subject_line",c),"chrome-active/system/extension_rendered",i),"chrome-active/system/shown_verify_bot_prompt",i),"chrome-active/system/shown_onboarding_helper",i),"pphr/system/shown_premium_modal",i),"chrome-active/system/shown_privacy_prompt",i),"chrome-active/system/unsupported_editor",i),"lapr/system/grammar_toggle_failure",l),(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)(n,"lapr/system/suggestions_edit_fail",l),"lapr/system/grammar_toggle_success",l),"lapr/system/suggestions_edit_success",l),"chrome-active/user/campaign_auth_premium_activated",i),"chrome-active/user/changed_ext_setting",i),"grmr/user/clicked_correct_all_button",l),"grmr/user/clicked_correct_error",l),"lapr/user/clicked_correct_suggested_word",l),"grmr/user/clicked_ignore_error",l),"chrome-active/user/clicked_like_button",i),(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)(n,"chrome-active/user/clicked_popup",i),"chrome-active/user/closed_classic_quillbot",i),"chrome-active/user/dismissed_onboarding_helper",i),"chrome-active/user/installed_extension",i),"chrome-active/user/loginSuccess",i),"chrome-active/user/logoutSuccess",i),"pphr/user/navigated_to_paraphraser",u),"comn/user/navigated_to_quillbot",u),"chrome-active/user/opened_classic_quillbot",i),"grmr/user/opened_correction_card",l),(0,s.A)((0,s.A)(n,"pphr/user/selected_sentence_from_beams",u),"chrome-active/user/updated_extension",i)},27120:(e,t,r)=>{"use strict";r.d(t,{tU:()=>u});var n=r(41705),s=r(27580),a=r(24295),o={key:"DE"},i={key:"EN"},l={key:"ES"},c={key:"FR"},u=(i.key,o.key,c.key,l.key,i.key,{ADVANCED_GC_FEATURE_FLAG:"true",AMPLITUDE_API_KEY:"6e403e775d1f5921fdc52daf8f866c66",AMPLITUDE_EXPERIMENT_DEPLOYMENT_KEY:"client-1FGauD2OA6aaKW7utchw72TkOn6WdAfB",AMPLITUDE_TEST_PROJECT_API_KEY:"4cb73e8d02ff7585dd16374c98edfea3",API_TIMEOUT:1e4,BACKEND_HOST:"https://quillbot.com",BUGSNAG_API_KEY:"c312d2e79c06cfa17065dc98d7ad74ab",CHROME_EXTENSION_ID:"iidnbdjijdkbmajdffnidomddglmieko",EDIT_STREAM_HTTP_URL:"https://stream.quillbot.com",ENABLE_SOCKET_QUEUE:"false",ENV_URL:"quillbot.com",EXTENSION_TYPE:"chrome-active",FALLBACK_CONN_RETRY_DELAY:"500",FALLBACK_MAX_RETRY_ATTEMPTS:"1",FALLBACK_SEND_RETRY_DELAY:"500",FIREBASE_API_KEY:"AIzaSyC8qsoEPOkRDlH3A5E9EqKpUiCxjLVPlho",FIREBASE_APP_ID:"1:174733774878:web:166594aa25a0605f2fde0f",FIREBASE_AUTH_DOMAIN:"auth.quillbot.com",FIREBASE_DATABASE_URL:"https://qb-extension.firebaseio.com",FIREBASE_MESSAGING_SENDER_ID:"174733774878",FIREBASE_PROJECT_ID:"paraphraser-472c1",GA_TRACKING_ID:"UA-108482885-1",GIPHY_API_KEY:"sXGNsG8jHYVfhNuNZ0L5oUqUKTPpqgHd",IS_RECOMMENDATION_ENABLED_FOR_WS:"true",MAX_RETRY_EDITOR_NOT_FOUND:"3",MESSAGE_ACK_TIMEOUT:"3000",MESSAGE_BATCH_SIZE:"10",MESSAGE_CACHE_TTL:"172800000",MESSAGE_MAX_RETRIES:"1",MESSAGE_QUEUE_TIMEOUT:"10000",MESSAGE_RETRY_DELAY_SEC:"200",OBSERVABLE_TIMEOUT:"30000",REDUX_DEVTOOLS_ENABLED:!1,RETURN_FROM_WS:"true",RUNNING_E2E:!1,SENTRY_DSN_KEY:"https://5b3c1d7a284db293d2a9dea5d8f9cd44@sentry-extension.quillbot.com/3",SENTRY_ENV:"production",SENTRY_SAMPLE_RATE:"0.05",SENTRY_TRACE_SAMPLE_RATE:"0.05",SOCKET_CONN_TIMEOUT:"40000",SOCKET_MAX_RETRY_ATTEMPTS:"5",SOCKET_RECONNECT_DELAY:"500",SOCKET_RETRY_TIME_AFTER_EXHAUST:"90000",TRACKING_HOST:"https://collector.quillbot.com",VERSION_NUMBER:"local",WS_URL:"wss://stream.quillbot.com"}),d=(Object.freeze({custom:"custom"}),Object.freeze({AB_TEST_EXPERIMENTS_API:"worker/abtest-experiments-info",CAMPAIGN_AUTH_API:"auth/campaign",DETECT_LANGUAGE:"utils/detect-language",DETECT_TONE_API:"utils/tone-detection",DICTIONARY_API:"config/lang/dictionary",EDITOR_CONFIGS:"chrome-extension/editor-settings",EXTENSION_CAMPAIGN_CHECK:"campaign/check",EXTENSION_HASH:"chrome-extension/extension-hash",EXTRACT_KEYWORDS:"utils/extract-keyword",GA_TRACKER:"collect",GA_TRACKER_DEBUGGER:"debug/collect",GC_ERROR_CATEGORY:"config/lang/gc-preferences",GENERATIVE_AI_API:"utils/generative-ai",GET_ACCOUNT_DETAILS:"auth/get-account-details",GET_USER_DETAILS:"auth/get-user-details",GRAMMAR_CHECKER_API:"utils/grammar-check",HEALTH_CHECK:"chrome-extension/health-check",ISSUE_TOKEN_API:"auth/issue-token",MODES_DETAILS:"chrome-extension/modes-details",PARAPHRASE:"paraphraser/single-paraphrase",PARAPHRASE_PHRASE:"utils/paraphrase-phrase",PASSIVE_TO_ACTIVE:"utils/active-voice",SENTENCE_SPLITTER:"utils/sentence-spiltter",SNEAK_PEEK_QUOTA_URL:"sneak-peek/recommendation/remaining-quota",SPAM_CHECK:"auth/spam-check",SUGGESTED_WORDS_API:"config/lang/suggested-words",SUMMARIZE_PARA:"summarizer/summarize-para",TESTING_API:"system/info",UPDATE_USER_DETAILS:"auth/update-demographic-information",UPDATE_USER_METRICS_API:"auth/update-user-metric",UPDATE_USER_PROFILE:"auth/update-user-profile",USER_LANGUAGE_CONFIG_API:"config/lang"})),h=(d.GRAMMAR_CHECKER_API,d.PARAPHRASE,d.SENTENCE_SPLITTER,d.DETECT_TONE_API,d.SUMMARIZE_PARA,d.EXTRACT_KEYWORDS,d.PASSIVE_TO_ACTIVE,d.PARAPHRASE_PHRASE,d.DETECT_LANGUAGE,function(e){return e.advanced_gc="advanced_gc",e.cf_cookie="cf_cookie",e.ext_bts_aug_24="ext_bts_aug_24",e.ext_changelog_campaign="ext_changelog_campaign",e.ext_gc_calls_batching_mar24="ext_gc_calls_batching_mar24",e.ext_gpt_v2_premium_users_gmail="ext_gpt_v2_premium_users_gmail",e.ext_integration_test="ext_integration_test",e.ext_lollipop="ext_lollipop",e.ext_on_device_lang_detect="ext_on_device_lang_detect",e["ext-bts-24"]="ext-bts-24",e["ext-gpt-v2-premium-users-gmail"]="ext-gpt-v2-premium-users-gmail",e["ext-premium-gpt-quota"]="ext-premium-gpt-quota",e["ext-tones-gmail-conversion"]="ext-tones-gmail-conversion",e.extBFCM2024="extBFCM2024",e.extension_reviews_campaign_q2_23="extension_reviews_campaign_q2_23",e.extension_test="extension_test",e["extension-follow-widget-mode"]="extension-follow-widget-mode",e["extension-follow-widget-with-quick-mode"]="extension-follow-widget-with-quick-mode",e["pphr-usage-chrome-ext"]="pphr-usage-chrome-ext",e}({})),_=(Object.freeze({CHROME_STORAGE_KEY:"detectedLanguagesData",DETECTED_LANGUAGES_FROM_BROWSER:"detectedLanguagesFromBrowser",DETECTED_LANGUAGES_FROM_CHROME_I18:"detectedLanguagesFromChromei18",DETECTED_LANGUAGES_FROM_COUNTRY:"detectedLanguagesFromCountry",DETECTED_LANGUAGES_FROM_WEBSITE:"detectedLanguagesFromWebsite",TIMEOUT:1e3,USER_PREFERRED_LANGUAGES:"userPreferredLanguages"}),Object.freeze({CONCURRENT_SESSION:"CONCURRENT_SESSION",COOKIE_NOT_FOUND:"COOKIE_NOT_FOUND",EXTERNAL_MESSAGE:"EXTERNAL_MESSAGE",EXTERNAL_MESSAGE_UID_MISMATCH:"EXTERNAL_MESSAGE_UID_MISMATCH",USER_MISMATCH:"USER_MISMATCH"}),Object.freeze({language:"default",product:"default"}),Object.freeze({collectUserTextualData:"collectUserTextualData",eventTime:"eventTime",isNewUser:"isNewUser",key:"data-opt-in",timeout:3e3,userShownConsentPrompt:"userShownConsentPrompt"}),Object.freeze({campaignID:"extension_campaign_gc_survey_2023_mar",eventTime:"eventTime",hostOriginUsed:"hostOriginUsed",key:"gc-survey",timeout:3e3,userShownSurveyModal:"userShownSurveyModal"}),Object.freeze({charLimit:250,charLimitWithThreshold:1e3}),Object.freeze({completePageClass:".kix-page",docClass:".kix-paginateddocumentplugin",editorClass:".kix-appview-editor",hostname:"docs.google.com",pageClass:".kix-page-column",pageEle:"docs-page kix-page-paginated kix-page-paginated-box-shadow docs-page-portrait",pageID:"data-quillbot-pageId",pageIDAttribute:"data-quillbot-pageid",paragraphClass:".kix-paragraphrenderer",paraID:"data-quillbot-paraid",selectionAttribute:".kix-selection-overlay",sidebarMenuBtnClass:"app-switcher-button"})),E=Object.freeze({hostname:"mail.google.com"});Object.freeze({editorID:"editorID",eventTime:"eventTime",isActive:"isActive",key:h["pphr-usage-chrome-ext"],lastActionTimeStamp:Date.now(),lastEditorDetected:"lastEditorDetected",shownPromptOn:"shownPromptOn",userActionCount:"userActionCount",variants:{completes_5th_sentence:{allowedHostnames:[_.hostname,E.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"completes_5th_sentence"},extension_rendered_on_doc:{allowedHostnames:[_.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"extension_rendered_on_doc"},hovers_over_paraphraser_button:{allowedHostnames:[_.hostname,E.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"hovers_over_paraphraser_button"},pastes_text:{allowedHostnames:[_.hostname,E.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"pastes_text"},selects_text:{allowedHostnames:[_.hostname,E.hostname],checkPromptOn:[1,5,10],enableDayCheck:!1,key:"selects_text"},shares_doc:{allowedHostnames:[_.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"shares_doc"}}}),Object.freeze({captcha:"quillbot-recaptcha",card:"quillbot-card",followWidget:"quillbot-extension-follow-widget",genai_toolbar:"quillbot-extension-generative-toolbar-btn",genAIButton:"quillbot-extension-generative-btn",genAIDraftView:"quillbot-extension-generative-draft-view",genAIQuickActions:"quillbot-extension-generative-quick-actions",genAIToolbarButton:"quillbot-extension-generative-toolbar-btn",highlights:"quillbot-extension-highlights",loader:"quillbot-loader",portal:"quillbot-extension-portal",privacy:"quillbot-privacy",reloader:"quillbot-extension-reloader",root:"quillbot-extension-root",sidebar:"quillbot-gdocs-sidebar",support:"quillbot-support",widget:"quillbot-extension"}),(0,n.A)((0,n.A)((0,n.A)({},a.HttpStatusCode.Forbidden,s.TU),a.HttpStatusCode.ServiceUnavailable,s.TU),a.HttpStatusCode.TooManyRequests,s.Wm),"https://".concat(u.ENV_URL,"/learn-more")},11713:(e,t,r)=>{"use strict";r.d(t,{MF:()=>i});var n,s=r(27120),a=r(81568),o=r(24504),i={AB_TEST_DATA_API_ERROR:"AB_TEST_DATA_API_ERROR",ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15:"ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15",ACTIVE_CAMPAIGNS_CHROME_STORAGE_KEY:"qb-active-campaigns",ADD_WORD_TO_DICTIONARY_ERROR:"ADD_WORD_TO_DICTIONARY_ERROR",AMPLITUDE_EXPERIMENTS:"ampExperiments",API_PREFIX_URL:"".concat(s.tU.BACKEND_HOST,"/api"),AUTHENTICATE_CAMPAIGN_API_ERROR:"AUTHENTICATE_CAMPAIGN_API_ERROR",BFCM_CAMPAIGN:"bfcm-2024",BOT_DETECTED:"botDetected",BTS_CAMPAIGN_2024:{abExperimentKey:"ext_bts_2024",campaign_type:"Back to School",campaign_url:"https://quillbot.com/upgrade?referrer=".concat(s.tU.EXTENSION_TYPE,"&p=12&coupon=SCHOOL30&product=marketing"),cta_title:"Save 30% on Premium",cta_title_2:"get Premium 30% off",end_date:"2024-01-26",key:"ext_bts_cm_campaign_2024",start_date:"2024-01-18"},CACHE_API:"cacheApi",CACHE_PREFIX:"cache~",CHANGELOG_CAMPAIGN:{android_url:"https://play.google.com/store/apps/details?id=com.quillbot.mobile",campaign_type:"Cyber Monday Sale",changelog_login:"CHANGELOG_LOGIN",desktop_url:"https://quillbot.com/app/mac",edge_url:"https://microsoftedge.microsoft.com/addons/detail/quillbot-ai-writing-and-/cphpplikchcioccedpjacdanfibnimmh",end_date:"2023-11-27",ios_url:"https://apps.apple.com/us/app/quillbot-ai-writing-keyboard/id6463116243",key:"ext_bf_cm_campaign_2023",page_name:"Changelog Page",PAGE_OPEN:"CHANGELOG_PAGE_OPEN",platforms:{android:"Android",edge:"Edge",ios:"iOS",macos:"macOS"},SEEN_BFS_2024_TIMESTAMP:"seenBfs2024Timestamp",SEEN_PAGE_CHROME_STORAGE_KEY:"SEEN_CHANGELOG_PAGE",SEEN_PAGE_TIMESTAMP_CHROME_STORAGE_KEY:"SEEN_CHANGELOG_PAGE_TIMESTAMP",start_date:"2023-11-20"},CHROME_PROTOCOL_BASED_URL:"chrome://**",CHROME_STORAGE_LANGUAGE_CONFIG_KEY:"languageConfig",CLASSIC_EXT_URL:"https://".concat(s.tU.ENV_URL,"/extension"),CUSTOM_TOKEN_SCOPE:"CHROME_EXT",DATA_SHARING:"DATA_SHARING",DETECT_LANGUAGE_API_ERROR:"UTILS_DETECT_LANGUAGE_ERROR",DETECT_LANGUAGE_API_SUCCESS:"UTILS_DETECT_LANGUAGE_API_SUCCESS",DEVICE_ID_HEADER_NAME:"device-id",DISABLE:"DISABLE_EXTENSION",DOCS_EXT_URL:"https://workspace.google.com/marketplace/app/quillbot_paraphrasing_and_summarizing_to/305988918037",ELEMENT_OBSERVABLE_SUBS:{ELEMENT_POSITION_UPDATES:"ELEMENT_POSITION_UPDATES",GRAMMAR_HIGHLIGHTS:"GRAMMAR_HIGHLIGHTS",INPUT_TEXT_DESELECTION:"INPUT_TEXT_DESELECTION",INPUT_TEXT_SELECTION:"INPUT_TEXT_SELECTION",RESIZE_ELEMENT:"RESIZE_ELEMENT",RESIZE_PARENT:"RESIZE_PARENT",TRACK_TOKENS:"TRACK_TOKENS"},EMAIL_FEEDBACK_URL:"https://mail.google.com/mail/",ENABLE_LOLLIPOP:"hasLollipopEnabled",EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP:"EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP",EXT_INSTALLATION_TIMESTAMP:"EXT_INSTALLATION_TIMESTAMP",EXT_INSTALLATION_TYPE:"EXT_INSTALLATION_TYPE",EXTENSION_HASH:"extensionHash",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED:"OnBoardingDismissed",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED_TIMESTAMP:"onboardingDismissedTimestamp",EXTENSION_INITIAL_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"onboardingFirstTimeRendered",EXTENSION_PLAYGROUND:"qb-extension-playground",EXTERNAL_MSG_DETECT:"detect-extension",EXTERNAL_MSG_FOR_DATA_OPT_IN:"data-opt-in",EXTERNAL_MSG_FOR_DISABLE:"EXTERNAL_MSG_FOR_DISABLE",EXTERNAL_MSG_FOR_ENABLE:"EXTERNAL_MSG_FOR_ENABLE",EXTERNAL_MSG_FOR_PRIVACY:"privacy-policy-verified",EXTERNAL_MSG_FOR_RECAPTCHA:"captcha-verified",EXTERNAL_MSG_FOR_USER_GC_LANGUAGE_CONFIG:"user-gc-language-config",EXTERNAL_MSG_FOR_USER_ID_TOKEN:"EXTERNAL_MSG_FOR_USER_ID_TOKEN",EXTERNAL_MSG_FOR_USER_PREFERENCE:"EXTERNAL_MSG_FOR_USER_PREFERENCE",EXTERNAL_MSG_HANDLE_OCTOBER24_TOS:"HANDLE_OCTOBER24_TOS",EXTERNAL_MSG_INPUT_TEXT:"paraphrase-input-text",EXTERNAL_MSG_TO_CHECK_PIN_STATUS:"check-is-pinned",EXTRACT_KEYWORDS_API_ERROR:"EXTRACT_KEYWORDS_API_ERROR",FEATURE_CONFIG:"featureConfig",GA_API_URL:"https://www.google-analytics.com",GA_COOKIE_KEY:"CUSTOM_GA_CLIENT_ID",GC_SURVEY_URL:"https://docs.google.com/forms/d/1iQeB8Kc-VtJ4hqgusrgTM2gqoTEfcnJRyfsLxhyezS0/viewform?edit_requested=true",GDOCS_FEEDBACK_FORM_URL:"https://forms.gle/9B3npkDkZ9Xqj81L6",GDOCS_MODE_CHECKER:"GDOCS_MODE_CHECKER",GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED",GENERIC_DOMAIN_CONFIG:"generic-config",GET_USER_LANGUAGE_CONFIG_ERROR:"GET_USER_LANGUAGE_CONFIG_ERROR",GMCR:"GRAMMAR_CHECKER",GRAMMAR_CHECKER_API_ERROR:"UTILS_GRAMMAR_CHECKER_ERROR",HARDWARE_INFO_TRACKED:"hardwareInfoTracked",INSTALL_SUCCESS_URL:"https://".concat(s.tU.ENV_URL,"/extension-success"),IS_BEAM_COMPONENT_FOOTER_OPEN:"IS_BEAM_COMPONENT_FOOTER_OPEN",IS_DEV:!1,IS_PROD:!0,LANGUAGE_PREF_HEADER_NAME:"language_pref_updated_at",LANGUAGE_PREF_UPDATED_AT_STRING:"language_pref_updated_at",LOG_IN_URL:"https://".concat(s.tU.ENV_URL,"/login?referrer=").concat(s.tU.EXTENSION_TYPE),LOGGER_EXTENSION_ID:"hhgjgghchegningnonjkmcbkmhfgelkp",LOGIN_URL:"https://".concat(s.tU.ENV_URL,"/login"),LOLLIPOP:"LOLLIPOP",LOLLIPOP_LANDING_PAGE_URL:"https://".concat(s.tU.ENV_URL,"/app/text-cursor"),MAX_PERMISSIBLE_ZINDEX:2147483647,MODEL_STATS_PREFIX:"quillbotModelStats_",NETWORK_API:"networkApi",NEW_TAB:"newTab",onboardingWalkthroughCampaigns:"onboardingWalkthroughCampaigns",OVERHANG_SUGGESTION_ID_SUFFIX:"OVERHANG_SUGGESTION_ID_SUFFIX",PASSIVE_VOICE_EMPTY_OUTPUTS:["",null,"none"],PAUSE:"PAUSE_EXTENSION",PLAN_PAGE_URL:"https://".concat(s.tU.ENV_URL,"/settings?tab=1&referrer=").concat(s.tU.EXTENSION_TYPE),PLATFORM_TYPE:s.tU.EXTENSION_TYPE,PLATFORM_TYPE_HEADER_NAME:"platform-type",PLATFORM_VERSION_HEADER_NAME:"platform-version",PPHR:"PARAPHRASER",PREFERENCES_PAGE_URL:"https://".concat(s.tU.ENV_URL,"/settings?menu=preferences&referrer=").concat(s.tU.EXTENSION_TYPE),PREMIUM_HEADER_NAME:"premium",PREMIUM_URL:"https://".concat(s.tU.ENV_URL,"/premium?product=").concat(s.tU.EXTENSION_TYPE),PRIVACY_POLICY_URL:"https://".concat(s.tU.ENV_URL,"/privacy?referrer=").concat(s.tU.EXTENSION_TYPE),PROFILE_PAGE_URL:"https://".concat(s.tU.ENV_URL,"/settings?referrer=").concat(s.tU.EXTENSION_TYPE),QB_COOKIE_ABIDV2:"abIDV2",QB_COOKIE_AUTH_STRING:"authenticated",QB_COOKIE_DEVICE_ID:"qbDeviceId",QB_COOKIE_GET_URL:s.tU.ENV_URL,QB_COOKIE_INCLUDE_URL:s.tU.ENV_URL,QB_COOKIE_INSTALLATION_SOURCE:"qbExtInstSrc",QB_COOKIE_PREMIUM_STRING:"premium",QB_COOKIE_PREMIUM_TIMESTAMP:"premiumUpdateTimestamp",QB_COOKIE_URL:s.tU.ENV_URL,QB_ID_TOKEN_STRING:"useridtoken",QB_SIGN_OUT:"sign-out",QB_STORAGE_AREA:"local",QB_URL:"https://".concat(s.tU.ENV_URL),QB_USER_PROFILE_FETCH_TIMESTAMP:"QB_USER_PROFILE_FETCH_TIMESTAMP",QB_WRITER_BLOCK_BLOG_URL:"https://quillbot.com/blog/how-to-overcome-common-writing-roadblocks-part-1/",QUILLBOT_SHADOW_ROOT:"qb-ext-sr",RATE_ON_CHROMESTORE_URL_BTN:(0,a.Y)(),RATE_ON_CHROMESTORE_URL_LINK:(0,a.Y)(),REFERRER:"CHROME-EXT",REMOVE_WORD_FROM_DICTIONARY_ERROR:"REMOVE_WORD_FROM_DICTIONARY_ERROR",RENDERED_SECOND_TIME:"RENDERED_SECOND_TIME",RERUN_PIPELINE_FOR_EDITORS:"rerun-pipeline-for-editors",RUNNING_E2E:"true"===s.tU.RUNNING_E2E,SENTENCE_SPLITTER_API_ERROR:"UTILS_SENTENCE_SPLITTER_ERROR",SHOW_HIGHLIGHTS:"SHOW_HIGHLIGHTS",SHOWN_MULTILINGUAL_ONBOARING:"SHOWN_MULTILINGUAL_ONBOARING",SIGN_UP_URL:"https://".concat(s.tU.ENV_URL,"/signup?referrer=").concat(s.tU.EXTENSION_TYPE),SPELLING_ERROR_EXPLAINER_ID:"000051",SUMMARIZER_API_ERROR:"SUMMARIZER_API_ERROR",TOGGLE_SENTENCE_SUGGESTIONS:"TOGGLE_SENTENCE_SUGGESTIONS",TOOLBOX_GET_REQUEST_ERROR:"TOOLBOX_GET_REQUEST_ERROR",TOTAL_FIXALL_PERFORMED_COUNT:"totalFixallPerformedCount",TOTAL_GC_SUGGESTIONS_ACCEPTED:"TOTAL_GC_SUGGESTIONS_ACCEPTED",TRACKING_API:"".concat(s.tU.TRACKING_HOST),UNDERLINES_TOGGLE:"UNDERLINES_TOGGLE",UNINSTALL_SURVEY_URL:"https://".concat(s.tU.ENV_URL,"/exit-survey"),UPDATE_SUGGESTED_WORD_ERROR:"UPDATE_SUGGESTED_WORD_ERROR",UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR:"UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR",UPDATE_USER_PROFILE_API_ERROR:"UPDATE_USER_PROFILE_API_ERROR",UPGRADE_URL:"https://".concat(s.tU.ENV_URL,"/upgrade?product=").concat(s.tU.EXTENSION_TYPE),UPGRADE_URL_WITH_COUPON:"https://".concat(s.tU.ENV_URL,"/upgrade?referrer=extension_campaign_2022_oct&p=12&coupon="),UPSELL_CAMPAIGN_OCT_2022:{metricsName:"extension_campaign_2022_oct",name:"extension_campaign_2022_oct",promoCode:"GET30",showedPromoModalChromeStorageKey:"extension_campaign_2022_oct__showedPromoModalChromeStorageKey",showPromoModalChromeStorageKey:"extension_campaign_2022_oct__showPromoModalChromeStorageKey"},USER_ID_TOKEN_FORCE_REFRESH_TIMESTAMP:"userIdTokenForceRefreshTimestamp",WEBSITE_ORIGIN_HEADER_NAME:"x-website-origin",WEBSITE_URL_HEADER_NAME:"x-website-url",WORD_EXT_URL:"https://".concat(s.tU.ENV_URL,"/word")};Object.freeze({GRAY:"#b8b8b8",GREEN:"#398547",GREEN_BUBBLES:"#E8F3EB",GREEN_SALEM:"#178733",RED:"#FB3F4B",WHITE:"#ffffff"}),null===(n=i.QB_COOKIE_URL)||void 0===n||null===(n=n.split("."))||void 0===n||null===(n=n.slice(-2))||void 0===n||n.join("."),o.eL.CHROME},40818:(e,t,r)=>{"use strict";r.d(t,{fw:()=>i});var n=r(45841),s=r(61790),a=r.n(s),o=r(46397);var i=function(e){return new Promise(function(){var t=(0,n.A)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.O)().storage.local.get(e);case 2:n=t.sent,r(n[e]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},81568:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});var n=r(27120),s=function(){var e="https://chromewebstore.google.com/detail/quillbot-ai-writing-and-g/iidnbdjijdkbmajdffnidomddglmieko/reviews?utm_source=chrome-active&utm_medium=referral&utm_campaign=feedback_review_cta_link";return"edge-active"===n.tU.EXTENSION_TYPE&&(e="https://microsoftedge.microsoft.com/addons/detail/cphpplikchcioccedpjacdanfibnimmh"),e}},89493:(e,t,r)=>{"use strict";function n(){var e={cpuArchitecture:"Unknown",cpuCores:navigator.hardwareConcurrency||"Unknown",gpuRenderer:"Unavailable",gpuVendor:"Unavailable",platform:navigator.platform||"Unknown",ramGB:navigator.deviceMemory||"Unknown",userAgent:navigator.userAgent||"Unknown"};try{if("undefined"!=typeof document){var t=document.createElement("canvas"),r=t.getContext("webgl")||t.getContext("experimental-webgl");if(r){var n=r.getExtension("WEBGL_debug_renderer_info");n?(e.gpuVendor=r.getParameter(n.UNMASKED_VENDOR_WEBGL),e.gpuRenderer=r.getParameter(n.UNMASKED_RENDERER_WEBGL)):(e.gpuVendor="unknown",e.gpuRenderer="unknown")}else e.gpuVendor="unknown",e.gpuRenderer="unknown"}else e.gpuVendor="unknown",e.gpuRenderer="unknown"}catch(t){e.gpuVendor="unknown",e.gpuRenderer="unknown"}try{navigator.userAgentData&&"userAgentData"in navigator&&"function"==typeof navigator.userAgentData.getHighEntropyValues&&"userAgentData"in navigator&&"function"==typeof navigator.userAgentData.getHighEntropyValues?navigator.userAgentData.getHighEntropyValues(["architecture"]).then((function(t){e.cpuArchitecture=t.architecture||"Unknown"})).catch((function(){e.cpuArchitecture="unknown"})):e.cpuArchitecture="unknown"}catch(t){e.cpuArchitecture="unknown"}return e}r.d(t,{j:()=>n})},46397:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var n=r(83131),s=r.n(n);function a(){return s()}},8140:(e,t,r)=>{"use strict";r.a(e,(async(e,t)=>{try{var n=r(40694),s=r(11713),a=r(40818),o=r(89493),i=r(13031),l=r(94301),c=r(46397),u=location.href.includes("docs.google.com/document/")||location.href.includes("docs.google.com/presentation/");try{if(i.Qf.set(i.OJ.CHROME_EXTENSION_ID,"oldceeleldhonbafppcapldpdifcinji"),i.Qf.set(i.OJ.EXTN_PREFIX,"qb"),i.Qf.set(i.OJ.COLORS_GRAMMAR,{BACKGROUND:"rgba(220,38,38,0.1)",EMPHASIZE:"rgba(220,38,38,0.1)",SELECTED_UNDERLINE:"#df2020",UNDERLINE:"#f2a6a6"}),i.Qf.set(i.OJ.COLORS_SPELLING,{BACKGROUND:"rgba(220,38,38,0.1)",EMPHASIZE:"rgba(220,38,38,0.1)",SELECTED_UNDERLINE:"#df2020",UNDERLINE:"#f2a6a6"}),i.Qf.set(i.OJ.COLORS_PARAPHRASE,{BACKGROUND:"rgb(0, 103, 197, 0.15)",EMPHASIZE:"rgb(0, 103, 197, 0.15)",TITLE:"",UNDERLINE:"transparent"}),i.Qf.set(i.OJ.COLORS_STYLE,{BACKGROUND:"rgba(67, 67, 67, 0.1)",EMPHASIZE:"rgba(67, 67, 67, 0.1)",SELECTED_UNDERLINE:"#B4B4B4",TITLE:"",UNDERLINE:"#00000033"}),i.Qf.set(i.OJ.CARD_LAYOUT,{FOOTER_HEIGHT:36,HEADER_HEIGHT:36,KEYBOARD_HINT_HEIGHT:60,MAX_HEIGHT_TOOLBOX:360,MIN_HEIGHT_PARAPHRASE:200,MIN_HEIGHT_TOOLBOX:230,TARGET_BOX_HORIZONTAL_MARGIN:8,TARGET_BOX_VERTICAL_MARGIN:1}),i.Qf.set(i.OJ.SITE_INIT_ATTRIBUTE,"data-qb-site"),i.Qf.set(i.OJ.INSTALLED_ATTRIBUTE,"data-qb-installed"),i.Qf.set(i.OJ.MAIN_CONTENT_SCRIPT_FILENAME,"quillbot-content.js"),i.Qf.set(i.OJ.TMP_ID_ATTRIBUTE,"data-qb-tmp-id"),i.Qf.set(i.OJ.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED,!0),i.Qf.set(i.OJ.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS,1e4),i.Qf.set(i.OJ.SELECTED_UNDERLINE_THICKNESS,2),i.Qf.set(i.OJ.COLORS_RECOMMENDATION_TEASE,{BACKGROUND:"rgba(242,181,24,0.16)",EMPHASIZE:"rgba(242,181,24,0.16)",SELECTED_UNDERLINE:"#CF9F02",UNDERLINE:"#CF9F0280"}),i.Qf.set(i.OJ.TOOLBAR_SIZE,l._O),i.Qf.set(i.OJ.BULLET_POINT_PARSING_PREFIX,""),i.Qf.set(i.OJ.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA,!0),i.Qf.set(i.OJ.IGNORE_EDITOR_WITH_ATTRIBUTES,["spellcheck"]),i.Qf.set(i.OJ.SPECIAL_INTRODUCTORY_TEASER_ENABLED,!1),i.Qf.set(i.OJ.TERMS_OF_SERVICE_MODAL_ENABLED,!1),i.Qf.set(i.OJ.LOLLIPOP_CONFIG,{LOLLIPOP_CIRCLE_GDOCS_IMAGE_PATH:"/assets/images/toolbox/lp_icon_gdocs_qb.svg",LOLLIPOP_CIRCLE_IMAGE_PATH:"/assets/images/toolbox/lp_icon_qb.svg",LOLLIPOP_CSS_PATH:"assets/css/lollipop.css",LOLLIPOP_FREEZE_STATE_COLOR:"green",ONBOARDING_BORDER_RADIUS:"40px",ONBOARDING_IMAGE_PATH:"/assets/images/toolbox/toolbox_onboarding_qb.webp",ONBOARDING_LANDING_PAGE_URL:"https://quillbot.com/app/text-cursor",SUPPORTS_DARK_MODE:!1,TOOLBOX_IFRAME_PATH:"toolbox/toolbox.html"}),i.Qf.set(i.OJ.NORMALIZE_SPACE,!0),i.Qf.set(i.OJ.STRIP_WRAPPING_QUOTES_FROM_SENTENCE,!1),u){var d=document.createElement("script"),h="object"===("undefined"==typeof browser?"undefined":(0,n.A)(browser))?browser:self.chrome;d.src=h.runtime.getURL("content.js"),d.setAttribute("data-lt-extension-id",h.runtime.id),d.setAttribute("fetchpriority","high"),(document.head||document.documentElement).appendChild(d),d.onload=function(){d.remove()}}}catch(e){}var _=!1;try{_=await(0,a.fw)(s.MF.HARDWARE_INFO_TRACKED)}catch(e){}if(!0!==_){var E=(0,o.j)();(0,c.O)().runtime.sendMessage({command:"SEND_HARDWARE_INFO",payload:E})}t()}catch(e){t(e)}}),1)},94301:(e,t,r)=>{"use strict";r.d(t,{_O:()=>s});var n=r(63696),s=(Object.freeze({DISABLED:{default:"#8590A2",hover:"#008847"},GC_ALL_ERROR:{default:"#E34935",hover:"#BC2803"},GC_DEFAULT:{default:"#008847",hover:"#115735"},GC_ONLY_FREE_RECOMMENDATION:{default:"#CF9F02",hover:"#B38A03"},GC_ONLY_PREMIUM_RECOMMENDATION:{default:"#1D7AFC",hover:"#035DDA"},PPHR:{default:"#ffffff",hover:"#17873314"},STANDBY:{default:"#ffffff",hover:"#17873314"}}),Object.freeze({ASSISTANT_UNSUPPORTED_NO_ERRORS:"Assistant isn't available here",ASSISTANT_UNSUPPORTED_WITH_ERRORS:"Assistant isn't available here. Double-click to fix all.",CLOSE_ASSISTANT:"Click to close assistant",DOUBLE_CLICK_TO_FIX_ALL:"\u{1f4a1} Double-click to fix all",LOGIN:"Log in to use QuillBot",LOGIN_TO_PARAPHRASE_TOO_LONG_TEXT:"To paraphrase longer texts, log in to a Premium account or upgrade now",LOGIN_TOO_LONG_TEXT:"To check longer texts, log in to a Premium account or upgrade now",NO_EDIT_ACCESS:"No edit access",OPEN_ASSISTANT:"Click to open assistant",OPEN_ASSISTANT_AND_FIX_ALL:"\u{1f4a1} Click to open assistant and fix all",OPEN_ASSISTANT_OR_FIX_ALL:n.createElement(n.Fragment,null,"Click to open assistant",n.createElement("br",null),"or double-click to fix all"),PAGELESS_MODE:"For assistant view, switch to Pages Mode",PARAPHRASE:"Paraphrase text",PARAPHRASE_TOO_LONG_TEXT:"Paraphrase longer texts by upgrading",PARAPHRASE_TOO_LONG_TEXT_PREMIUM:"Text is too long. Try paraphrasing shorter sections.",RESUME:"Show grammar suggestions and paraphrasing options",SHOW_RECAPTCHA:"Please click to verify you\u2019re human",STANDBY_ICON:"Quick settings",START_WRITING:"Start writing",TOO_LONG_TEXT:"Check longer texts by upgrading",UNSUPPORTED_LANG:"Unsupported language"}),{height:24,width:48})},14403:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),_=Symbol.iterator;var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,p={};function g(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||E}function m(){}function A(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||E}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var R=A.prototype=new m;R.constructor=A,f(R,g.prototype),R.isPureReactComponent=!0;var T=Array.isArray,b=Object.prototype.hasOwnProperty,O={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var s,a={},o=null,i=null;if(null!=t)for(s in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,s)&&!S.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:r,type:e,key:o,ref:i,props:a,_owner:O.current}}function v(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var y=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,s,a,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return o=o(l=e),e=""===a?"."+N(l,0):a,T(o)?(s="",null!=e&&(s=e.replace(y,"$&/")+"/"),C(o,t,s,"",(function(e){return e}))):null!=o&&(v(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(y,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",T(e))for(var c=0;c<e.length;c++){var u=a+N(i=e[c],c);l+=C(i,t,s,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(i=e.next()).done;)l+=C(i=i.value,t,s,u=a+N(i,c++),o);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function w(e,t,r){if(null==e)return e;var n=[],s=0;return C(e,n,"","",(function(e){return t.call(r,e,s++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},D={transition:null},x={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:O};t.Children={map:w,forEach:function(e,t,r){w(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return w(e,(function(){t++})),t},toArray:function(e){return w(e,(function(e){return e}))||[]},only:function(e){if(!v(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=o,t.PureComponent=A,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),a=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=O.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)b.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:r,type:e.type,key:a,ref:o,props:s,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=v,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,r){return L.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,r){return L.current.useReducer(e,t,r)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return L.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return L.current.useTransition()},t.version="18.1.0"},63696:(e,t,r)=>{"use strict";e.exports=r(14403)},83131:function(e,t){var r,n,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[e],r=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=e=>e&&"object"==typeof e&&"function"==typeof e.then,a=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},o=e=>1==e?"argument":"arguments",i=(e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,o)=>{if(t.fallbackToNoCallback)try{r[e](...n,a({resolve:s,reject:o},t))}catch(a){r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(r[e](...n),s()):r[e](...n,a({resolve:s,reject:o},t))}))},l=(e,t,r)=>new Proxy(t,{apply:(t,n,s)=>r.call(n,e,...s)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const u=(e,t={},r={})=>{let n=Object.create(null),s={has:(t,r)=>r in e||r in n,get(s,a,o){if(a in n)return n[a];if(!(a in e))return;let d=e[a];if("function"==typeof d)if("function"==typeof t[a])d=l(e,e[a],t[a]);else if(c(r,a)){let t=i(a,r[a]);d=l(e,e[a],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(c(t,a)||c(r,a)))d=u(d,t[a],r[a]);else{if(!c(r,"*"))return Object.defineProperty(n,a,{configurable:!0,enumerable:!0,get:()=>e[a],set(t){e[a]=t}}),d;d=u(d,t[a],r["*"])}return n[a]=d,d},set:(t,r,s,a)=>(r in n?n[r]=s:e[r]=s,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},a=Object.create(e);return new Proxy(a,s)},d=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),h=new n((e=>"function"!=typeof e?e:function(t){const r=u(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)})),_=new n((e=>"function"!=typeof e?e:function(t,r,n){let a,o,i=!1,l=new Promise((e=>{a=function(t){i=!0,e(t)}}));try{o=e(t,r,a)}catch(e){o=Promise.reject(e)}const c=!0!==o&&s(o);if(!0!==o&&!c&&!i)return!1;const u=e=>{e.then((e=>{n(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{}))};return u(c?o:l),!0})),E=({reject:r,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?r(new Error(s.message)):n(s)},f=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const s=E.bind(null,{resolve:e,reject:t});n.push(s),r.sendMessage(...n)}))},p={devtools:{network:{onRequestFinished:d(h)}},runtime:{onMessage:d(_),onMessageExternal:d(_),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},g={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":g},services:{"*":g},websites:{"*":g}},u(e,p,r)};e.exports=r(chrome)}},void 0===(s="function"==typeof r?r.apply(t,n):r)||(e.exports=s)},53051:(e,t,r)=>{var n=r(10564).default;function s(){"use strict";e.exports=s=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,r){return e[t]=r}}function _(e,t,r,n){var s=t&&t.prototype instanceof R?t:R,a=Object.create(s.prototype),o=new D(n||[]);return i(a,"_invoke",{value:C(e,r,o)}),a}function E(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=_;var f="suspendedStart",p="suspendedYield",g="executing",m="completed",A={};function R(){}function T(){}function b(){}var O={};h(O,c,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(x([])));I&&I!==a&&o.call(I,c)&&(O=I);var v=b.prototype=R.prototype=Object.create(O);function y(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function r(s,a,i,l){var c=E(e[s],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var s;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,s){r(e,n,t,s)}))}return s=s?s.then(a,a):a()}})}function C(e,r,n){var s=f;return function(a,o){if(s===g)throw Error("Generator is already running");if(s===m){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var l=w(i,n);if(l){if(l===A)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=g;var c=E(e,r,n);if("normal"===c.type){if(s=n.done?m:p,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=m,n.method="throw",n.arg=c.arg)}}}function w(e,r){var n=r.method,s=e.iterator[n];if(s===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,w(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),A;var a=E(s,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,A;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,A):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,A)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function x(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function r(){for(;++s<e.length;)if(o.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return T.prototype=b,i(v,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:T,configurable:!0}),T.displayName=h(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(v),e},r.awrap=function(e){return{__await:e}},y(N.prototype),h(N.prototype,u,(function(){return this})),r.AsyncIterator=N,r.async=function(e,t,n,s,a){void 0===a&&(a=Promise);var o=new N(_(e,t,n,s),a);return r.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),h(v,d,"Generator"),h(v,c,(function(){return this})),h(v,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=x,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,s){return i.type="throw",i.arg=e,r.next=n,s&&(r.method="next",r.arg=t),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;L(r)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:x(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),A}},r}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},10564:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},61790:(e,t,r)=>{var n=r(53051)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},45841:(e,t,r)=>{"use strict";function n(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var o=e.apply(t,r);function i(e){n(o,s,a,i,l,"next",e)}function l(e){n(o,s,a,i,l,"throw",e)}i(void 0)}))}}r.d(t,{A:()=>s})},41705:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(80092);function s(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},51417:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(40694);function s(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=(0,n.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},80092:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(40694),s=r(51417);function a(e){var t=(0,s.A)(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},40694:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},24295:(e,t,r)=>{"use strict";let n,s,a;r.d(t,{HttpStatusCode:()=>j});var o,i,l,c,u,d,h,_,E,f,p,g,m,A,R,T,b,O,S,I,v,y;function N(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){N(a,n,s,o,i,"next",e)}function i(e){N(a,n,s,o,i,"throw",e)}o(void 0)}))}}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function k(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var U=function(e){var t,r;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(){var e,t,r;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return r=arguments,t=L(t=n),P(e=function(e,t){var r;if(t&&("object"==((r=t)&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,x()?Reflect.construct(t,r||[],L(this).constructor):t.apply(this,r)),"socket",null),P(e,"oldSocket",null),P(e,"url",""),P(e,"onMessageCallback",(function(){})),P(e,"onCloseHandler",(function(){})),P(e,"onErrorHandler",(function(){})),P(e,"isOpen",(function(){var t;return(null==(t=e.socket)?void 0:t.readyState)===WebSocket.OPEN})),e}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&D(n,e),t=[{key:"setInitialConfig",value:function(e){var t=e.url,r=e.onMessageCallback;this.url=t,this.onMessageCallback=function(e){r(e)}}},{key:"setOnCloseHandler",value:function(e){this.onCloseHandler=e}},{key:"setOnErrorHandler",value:function(e){this.onErrorHandler=e}},{key:"connect",value:function(e){return C((function(){var t;return k(this,(function(r){return t=this,[2,new Promise((function(r,n){var s;if(!(null==(s=t.socket)?void 0:s.CONNECTING))try{var a=e.connectionSessionId,o=e.userToken,i=void 0===o?"":o,l=e.anonId,c=e.abIdV2,u=e.retry,d=e.platformType,h=t.url,_={connSessionId:void 0===a?void 0:a,anonId:l,abIdV2:c,platformType:d,retry:null==u?void 0:u.toString()},E=Object.keys(_).filter((function(e){return void 0!==_[e]&&""!==_[e]})).map((function(e){return"".concat(e,"=").concat(_[e])})).join("&");E&&(h+=(t.url.includes("?")?"&":"?")+E),t.oldSocket=t.socket,t.socket=i?new WebSocket(h,["Bearer",i]):new WebSocket(h),t.socket.onopen=function(){r(),t.oldSocket&&t.oldSocket.readyState!==WebSocket.CLOSED&&(t.oldSocket.onclose=function(){},t.oldSocket.onerror=function(){},t.oldSocket.close())},t.socket.onmessage=function(e){return t.onMessageCallback(e)},t.socket.onerror=function(e){t.onErrorHandler(e)},t.socket.onclose=function(e){t.onCloseHandler(e)}}catch(e){n(e)}}))]}))})).call(this)}},{key:"send",value:function(e){return C((function(){var t;return k(this,(function(r){return this.socket&&this.socket.readyState===WebSocket.OPEN?[2,null==(t=this.socket)?void 0:t.send(JSON.stringify(e))]:[2]}))})).call(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}}],r=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}],t&&w(n.prototype,t),r&&w(n,r),n}((function e(){var t;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");if(((null!=(t=e)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](this):this instanceof t)?this.constructor:void 0)===e)throw TypeError("Cannot construct ISocketClient instances directly")}));P(U,"instance",void 0);var M=((o={}).UNAUTHORIZED="UNAUTHORIZED",o.INVALID_TOKEN="INVALID_TOKEN",o.TOKEN_EXPIRED="TOKEN_EXPIRED",o.FORCE_PASSWORD_CHANGE="FORCE_PASSWORD_CHANGE",o.TOKEN_REVOKED="TOKEN_REVOKED",o),G=((i={}).EDITOR_NOT_FOUND="EDITOR_NOT_FOUND",i.EDITOR_ALREADY_EXISTS="EDITOR_ALREADY_EXISTS",i.LANGUAGE_NOT_SUPPORTED="LANGUAGE_NOT_SUPPORTED",i),H=((l={}).IDLE_TIMEOUT="IDLE_TIMEOUT",l.WS_CONNECTION_REJECTED="WS_CONNECTION_REJECTED",l.WS_CONNECTION_EXHAUSTED="WS_CONNECTION_EXHAUSTED",l.SERVER_SHUTDOWN="SERVER_SHUTDOWN",l.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",l),F=((c={}).UNKNOWN="UNKNOWN",c.TIMEOUT="TIMEOUT",c.GENERIC="GENERIC",c.ANON_ID_NOT_PRESENT="ANON_ID_NOT_PRESENT",c.INVALID_OR_EXPIRED_SESSION="INVALID_OR_EXPIRED_SESSION",c.PING_FAILED="PING_FAILED",c),B=((u={}).PROCESSING_ERROR="PROCESSING_ERROR",u.TRANSPORT_NOT_INITIALIZED="TRANSPORT_NOT_INITIALIZED",u),j=((d={})[d.Continue=100]="Continue",d[d.SwitchingProtocols=101]="SwitchingProtocols",d[d.Processing=102]="Processing",d[d.EarlyHints=103]="EarlyHints",d[d.Ok=200]="Ok",d[d.Created=201]="Created",d[d.Accepted=202]="Accepted",d[d.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",d[d.NoContent=204]="NoContent",d[d.ResetContent=205]="ResetContent",d[d.PartialContent=206]="PartialContent",d[d.MultiStatus=207]="MultiStatus",d[d.AlreadyReported=208]="AlreadyReported",d[d.ImUsed=226]="ImUsed",d[d.MultipleChoices=300]="MultipleChoices",d[d.MovedPermanently=301]="MovedPermanently",d[d.Found=302]="Found",d[d.SeeOther=303]="SeeOther",d[d.NotModified=304]="NotModified",d[d.UseProxy=305]="UseProxy",d[d.Unused=306]="Unused",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d[d.BadRequest=400]="BadRequest",d[d.Unauthorized=401]="Unauthorized",d[d.PaymentRequired=402]="PaymentRequired",d[d.Forbidden=403]="Forbidden",d[d.NotFound=404]="NotFound",d[d.MethodNotAllowed=405]="MethodNotAllowed",d[d.NotAcceptable=406]="NotAcceptable",d[d.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",d[d.RequestTimeout=408]="RequestTimeout",d[d.Conflict=409]="Conflict",d[d.Gone=410]="Gone",d[d.LengthRequired=411]="LengthRequired",d[d.PreconditionFailed=412]="PreconditionFailed",d[d.PayloadTooLarge=413]="PayloadTooLarge",d[d.UriTooLong=414]="UriTooLong",d[d.UnsupportedMediaType=415]="UnsupportedMediaType",d[d.RangeNotSatisfiable=416]="RangeNotSatisfiable",d[d.ExpectationFailed=417]="ExpectationFailed",d[d.ImATeapot=418]="ImATeapot",d[d.MisdirectedRequest=421]="MisdirectedRequest",d[d.UnprocessableEntity=422]="UnprocessableEntity",d[d.Locked=423]="Locked",d[d.FailedDependency=424]="FailedDependency",d[d.TooEarly=425]="TooEarly",d[d.UpgradeRequired=426]="UpgradeRequired",d[d.PreconditionRequired=428]="PreconditionRequired",d[d.TooManyRequests=429]="TooManyRequests",d[d.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",d[d.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",d[d.InternalServerError=500]="InternalServerError",d[d.NotImplemented=501]="NotImplemented",d[d.BadGateway=502]="BadGateway",d[d.ServiceUnavailable=503]="ServiceUnavailable",d[d.GatewayTimeout=504]="GatewayTimeout",d[d.HttpVersionNotSupported=505]="HttpVersionNotSupported",d[d.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",d[d.InsufficientStorage=507]="InsufficientStorage",d[d.LoopDetected=508]="LoopDetected",d[d.NotExtended=510]="NotExtended",d[d.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",d),W=((h={}).INIT_EDITOR="init_editor",h.ON_CHANGE="on_change",h.ACK="ack",h.UPDATE_CONNECTION="update_connection",h.TERMINATE_EDITOR_GROUP="terminate_editor_group",h.SET_ACTIVE_EDITOR_GROUP="set_active_editor_group",h.PONG="pong",h),X=((_={}).ACCEPT_CHANGES="ACCEPT_CHANGES",_.USER_CHANGE="USER_CHANGE",_.SYSTEM_CHANGE="SYSTEM_CHANGED",_),K=((E={}).GC="GC",E.GC_WITH_RECOMMENDATION="GC_WITH_RECOMMENDATION",E.NONE="NONE",E.RECOMMENDATION="RECOMMENDATION",E),V=((f={}).NOT_SENT="NOT_SENT",f.PENDING="PENDING",f.RESOLVED="RESOLVED",f),q=((p={}).GC="GC",p.GC_RECOMMENDATION="GC_RECOMMENDATION",p.PPHR="PPHR",(g={}).GRAMMAR_CHECKER="GRAMMAR_CHECKER",(m={}).AUTH_SUCCESS="auth_success",m.GC_SUCCESS="gc_success",m.PROCESSING_SUCCESS="processing_success",m.ACK="ack",m.PING="ping",m),z=((A={}).SENTENCE_SUGGESTION_GC_COMPLETED="sentence_suggestion_gc_completed",A.SENTENCE_SUGGESTION_GC="sentence_suggestion_gc",A.SENTENCE_SUGGESTIONS_RECOMMENDATION="sentence-suggestions-recommendation",(R={}).AUTH_FAILED="auth_failed",R.GC_FAILED="gc_failed",R.ACK_FAILED="ack_failed",R.PROCESSING_FAILED="processing_failed",R),Y=((T={}).EDGE_EXT="edge-active",T.CHROME_EXT="chrome-active",T.DESKTOP="desktop-active",T.MOBILE="android-app",T.WEBAPP="webapp",(b={}).RESOLVE="resolve",b.REJECT="reject",b),Z=((O={}).SentenceSuggestionsGC="sentence-suggestions-gc",O.SentenceSplitter="sentence-splitter",O.Unknown="unknown",O.SentenceSuggestionsRecommendation="sentence-suggestions-recommendation",O.SentenceSuggestionsGCCompleted="sentence-suggestions-gc-completed",O.SkipProcessing="skip-processing",O),$=((S={}).SENTRY="SENTRY",S.LT_QB_GC_ADAPTER="LT_QB_GC_ADAPTER",(I={}).NOT_INITIALIZED="NOT_INITIALIZED",I.CONNECTING="CONNECTING",I.CONNECTED="CONNECTED",I.READY="READY",I.ERRORED="ERRORED",I.RETRY_EXHAUSTED="RETRY_EXHAUSTED",I.AUTH_SUCCESS="AUTH_SUCCESS",I),J=((v={}).GC_MODEL_STATS="gc_model_stats",v.GC_RECOM_RES="gc_recom_res",v.UPDATE_CONN_ID="update_conn_id",v);function Q(e){return"".concat(e,"-").concat(Math.random().toString(36).substring(2,11))}var ee="initialize",te=function(e){var t=e.requestEventId,r=e.pendingAcks,n=e.eventData,s=e.ackType;if(ie({transport:e.transport,errorCode:null==n||null==(c=n.data)?void 0:c.errorCode}),r.has(t)){var a=r.get(t),o=a.resolve,i=a.reject,l=a.timeout;if(s===Y.REJECT){var c,u,d=null==n||null==(u=n.data)?void 0:u.errorCode,h=!Object.values(M).includes(d)&&!Object.values(G).includes(d);i(h?{shouldRetry:h,errorData:n}:{errorData:n})}else o(n);l&&clearTimeout(l),r.delete(t)}},re=function(e){return null==e?void 0:e.shouldRetry};function ne(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function se(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){ne(a,n,s,o,i,"next",e)}function i(e){ne(a,n,s,o,i,"throw",e)}o(void 0)}))}}function ae(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function oe(e){return se((function(e){var t,r,n,s,a,o;return ae(this,(function(i){switch(i.label){case 0:var l,c,u;return t=e.transport,r=e.error,ie({transport:t,errorCode:null==r||null==(n=r.data)?void 0:n.errorCode}),a=function(){if(t.pendingAcks.has(ee)){var e=t.pendingAcks.get(ee),n=e.reject,s=e.timeout;s&&clearTimeout(s),n(r),t.pendingAcks.delete(ee)}},"AUTHENTICATION"!==(null==r||null==(s=r.data)?void 0:s.errorNamespace)?[3,2]:[4,(l=t,c=null==r||null==(o=r.data)?void 0:o.errorCode,u=a,se((function(){var e,t;return ae(this,(function(r){switch(r.label){case 0:switch(l.setErroredState(c),c){case M.INVALID_TOKEN:return[3,1];case M.TOKEN_EXPIRED:return[3,2];case M.FORCE_PASSWORD_CHANGE:return[3,4];case M.TOKEN_REVOKED:return[3,5]}return[3,6];case 1:return u(),l.closeConnection(),[3,8];case 2:case 6:return[4,l.authHandlers.getIdToken(!0)];case 3:case 7:return r.sent(),l.reconnect(),[3,8];case 4:return u(),null==l||null==(e=l.authHandlers)||e.logout("EXTERNAL_MESSAGE"),[3,8];case 5:return u(),null==l||null==(t=l.authHandlers)||t.logout("EXTERNAL_MESSAGE"),[3,8];case 8:return[2]}}))}))())];case 1:return i.sent(),[2];case 2:return Object.values(M).includes(r.reason)||Object.values(H).includes(r.reason)?(a(),[2]):(t.reconnect(),[2])}}))})).apply(this,arguments)}function ie(e){var t=e.transport,r=e.errorCode;r===F.INVALID_OR_EXPIRED_SESSION&&t.resetConnectionSession(r)}let le=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,_e={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return ce.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ue.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ee(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ee(e){if(e instanceof IDBRequest){let t=new Promise(((t,r)=>{let n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(Ee(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&le.set(t,e)})).catch((()=>{})),he.set(t,e),t}if(de.has(e))return de.get(e);let t=function(e){return"function"==typeof e?e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(fe(this),t),Ee(le.get(this))}:function(...t){return Ee(e.apply(fe(this),t))}:function(t,...r){let n=e.call(fe(this),t,...r);return ue.set(n,t.sort?t.sort():[t]),Ee(n)}:(e instanceof IDBTransaction&&function(e){if(ce.has(e))return;let t=new Promise(((t,r)=>{let n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)}));ce.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,_e):e)}(e);return t!==e&&(de.set(e,t),he.set(t,e)),t}let fe=e=>he.get(e),pe=["get","getKey","getAll","getAllKeys","count"],ge=["put","add","delete","clear"],me=new Map;function Ae(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(me.get(t))return me.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,s=ge.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!pe.includes(r))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),o=a.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),s&&a.done]))[0]};return me.set(t,a),a}function Re(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function Te(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){Re(a,n,s,o,i,"next",e)}function i(e){Re(a,n,s,o,i,"throw",e)}o(void 0)}))}}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}_e={...a=_e,get:(e,t,r)=>Ae(e,t)||a.get(e,t,r),has:(e,t)=>!!Ae(e,t)||a.has(e,t)};var Se=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");be(this,"dbPromise",void 0),be(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=function(e,t,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){let o=indexedDB.open(e,1),i=Ee(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(Ee(o.result),e.oldVersion,e.newVersion,Ee(o.transaction))})),r&&o.addEventListener("blocked",(()=>r())),i.then((e=>{a&&e.addEventListener("close",(()=>a())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),i}("keyval-store",0,{upgrade:function(e){e.createObjectStore("keyval")}}):this.dbPromise=Promise.resolve(null)}return e=[{key:"get",value:function(e){return Te((function(){var t;return Oe(this,(function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[2,null==(t=r.sent())?void 0:t.get("keyval",e)]}}))})).call(this)}},{key:"set",value:function(e,t){return Te((function(){var r;return Oe(this,(function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(r=n.sent())?void 0:r.put("keyval",t,e)];case 2:return n.sent(),[2]}}))})).call(this)}},{key:"delete",value:function(e){return Te((function(){var t;return Oe(this,(function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(t=r.sent())?void 0:t.delete("keyval",e)];case 2:return r.sent(),[2]}}))})).call(this)}},{key:"clear",value:function(){return Te((function(){var e;return Oe(this,(function(t){switch(t.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(e=t.sent())?void 0:e.clear("keyval")];case 2:return t.sent(),[2]}}))})).call(this)}},{key:"deleteOldData",value:function(){return Te((function(){var e,t,r,n,s,a,o,i;return Oe(this,(function(l){switch(l.label){case 0:return l.trys.push([0,7,,8]),t=+(new Date).setDate((new Date).getDate()-10),[4,this.dbPromise];case 1:return s=null==(n=null==(r=null==(e=l.sent())?void 0:e.transaction("cache"))?void 0:r.store)?void 0:n.index("date"),a=IDBKeyRange.upperBound(t),[4,null==s?void 0:s.openKeyCursor(a)];case 2:o=l.sent(),l.label=3;case 3:return o?[4,this.dbPromise]:[3,6];case 4:return null==(i=l.sent())||i.delete("cache",o.primaryKey),[4,o.continue()];case 5:return o=l.sent(),[3,3];case 6:return[3,8];case 7:return l.sent(),[3,8];case 8:return[2]}}))})).call(this)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}();function Ie(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){Ie(a,n,s,o,i,"next",e)}function i(e){Ie(a,n,s,o,i,"throw",e)}o(void 0)}))}}function ye(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ne=new Map,Ce=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");(e="isAvailable")in this?Object.defineProperty(this,e,{value:!0,enumerable:!0,configurable:!0,writable:!0}):this[e]=!0}return e=[{key:"get",value:function(e){return ve((function(){return ye(this,(function(t){return[2,Ne.get(e)]}))}))()}},{key:"set",value:function(e,t){return ve((function(){return ye(this,(function(r){switch(r.label){case 0:return[4,Ne.set(e,t)];case 1:return r.sent(),[2]}}))}))()}},{key:"delete",value:function(e){return ve((function(){return ye(this,(function(t){switch(t.label){case 0:return[4,Ne.delete(e)];case 1:return t.sent(),[2]}}))}))()}},{key:"clear",value:function(){return ve((function(){return ye(this,(function(e){switch(e.label){case 0:return[4,Ne.clear()];case 1:return e.sent(),[2]}}))}))()}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}(),we=function(e,t,r){if("number"!=typeof r||r<=0)throw Error("timedPromise: Encountered invalid timeout value. Got ".concat(r));return new Promise((function(n,s){var a=setTimeout((function(){n({timedOut:!0,value:t})}),r);e.then((function(e){clearTimeout(a),n({timedOut:!1,value:e})})).catch((function(e){clearTimeout(a),s(e)}))}))};function Pe(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function Le(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){Pe(a,n,s,o,i,"next",e)}function i(e){Pe(a,n,s,o,i,"throw",e)}o(void 0)}))}}function De(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var xe=Le((function(){var e,t;return De(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,we((e=new Se).dbPromise,null,3e3)];case 1:return t=r.sent(),e.isAvailable&&t.value?(e.deleteOldData(),[2,e]):[3,3];case 2:return r.sent(),[3,3];case 3:return[2,new Ce]}}))}))(),ke={get:function(e){return Le((function(){var t,r,n,s;return De(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,xe.then((function(t){return t.get(e)}))];case 1:return(t=a.sent())?(n=(r=JSON.parse(t)).value,(s=r.expireAt)?(new Date).getTime()>new Date(s).getTime()?[4,xe.then((function(t){return t.delete(e)}))]:[3,3]:[2,n]):[2,void 0];case 2:case 4:return a.sent(),[2,void 0];case 3:return[2,n];case 5:return[2]}}))}))()},set:function(e,t,r){return Le((function(){var n;return De(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),n=r?new Date((new Date).getTime()+r).toISOString():void 0,[4,xe.then((function(r){return r.set(e,JSON.stringify({expireAt:n,value:t}))}))];case 1:return s.sent(),[3,3];case 2:return s.sent(),[2,void 0];case 3:return[2,void 0]}}))}))()},delete:function(e){return Le((function(){return De(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,xe.then((function(t){return t.delete(e)}))];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2,void 0];case 3:return[2,void 0]}}))}))()}};function Ue(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}var Me=function(e){var t;return(t=function(){return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,ke.get(e)];case 1:return[2,t.sent()||null];case 2:return[3,3];case 3:return[2]}}))},function(){var e=this,r=arguments;return new Promise((function(n,s){var a=t.apply(e,r);function o(e){Ue(a,n,s,o,i,"next",e)}function i(e){Ue(a,n,s,o,i,"throw",e)}o(void 0)}))})()};function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var He=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Ge(this,"observers",void 0),Ge(this,"isCompleted",void 0),Ge(this,"eventQueue",void 0),Ge(this,"errorQueue",void 0),Ge(this,"isSubscribed",void 0),this.observers=[],this.isCompleted=!1,this.eventQueue=[],this.errorQueue=null,this.isSubscribed=!1}return e=[{key:"isObsCompleted",value:function(){return this.isCompleted}},{key:"subscribe",value:function(e,t,r){var n=this,s={onNext:e,onComplete:t,onError:r};return this.observers.push(s),this.isSubscribed=!0,this.eventQueue.forEach((function(e){return s.onNext(e)})),this.errorQueue?(s.onError(this.errorQueue),this.clearObservers(),{unsubscribe:function(){}}):this.isCompleted?(s.onComplete(),this.clearObservers(),{unsubscribe:function(){}}):{unsubscribe:function(){n.observers=n.observers.filter((function(e){return e!==s}))}}}},{key:"next",value:function(e){this.isCompleted||(this.isSubscribed?this.observers.forEach((function(t){t.onNext&&t.onNext(e)})):this.eventQueue.push(e))}},{key:"complete",value:function(){this.isCompleted||(this.isSubscribed&&(this.observers.forEach((function(e){e.onComplete&&e.onComplete()})),this.clearObservers()),this.isCompleted=!0)}},{key:"error",value:function(e){this.isCompleted||(this.isSubscribed?(this.observers.forEach((function(t){t.onError&&t.onError(e)})),this.clearObservers()):this.errorQueue=e,this.isCompleted=!0)}},{key:"clearObservers",value:function(){this.observers=[]}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}(),Fe=function(e){try{var t=new He,r=0,n=!1;return Object.keys(e).forEach((function(s){e[s].subscribe((function(e){return t.next({data:e,source:s})}),(function(){++r!==Object.keys(e).length||n||t.complete()}),(function(e){n||(n=!0,t.error(e))}))})),t}catch(e){return new He}},Be=function(e){return JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}))}return e}({message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,name:null==e?void 0:e.name},(null==e?void 0:e.cause)&&{cause:null==e?void 0:e.cause}))};function je(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ke=((y={}).INIT="INIT",y.GENERIC="GENERIC",y),Ve=function(){var e,t;function r(){var e;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");Xe(this,"_queues",(Xe(e={},"INIT",{queue:[],isProcessing:!1}),Xe(e,"GENERIC",{queue:[],isProcessing:!1}),e))}return e=[{key:"enqueue",value:function(e,t,r,n){var s=this._queues[e].queue,a=setTimeout((function(){var e=s.findIndex((function(e){return e.message.eventId===t.eventId}));-1!==e&&s.splice(e,1)}),n);s.push({message:t,waitForAck:r,timeoutId:a})}},{key:"processQueue",value:function(e,t){var r;return(r=function(){var r,n;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(s){switch(s.label){case 0:if(!(r=this._queues[e])||r.isProcessing||0===r.queue.length)return[2];r.isProcessing=!0,s.label=1;case 1:if(!(r.queue.length>0))return[3,6];if(!(n=r.queue.shift()))return[3,5];clearTimeout(n.timeoutId),s.label=2;case 2:var a,o;return s.trys.push([2,4,,5]),[4,t((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xe(e,t,r[t])}))}return e}({},n.message),o=o={eventTimeStamp:Date.now()},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(o)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(o,e))})),a),n.waitForAck)];case 3:return s.sent(),[3,5];case 4:return s.sent(),[3,5];case 5:return[3,1];case 6:return r.isProcessing=!1,[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,s){var a=r.apply(e,t);function o(e){je(a,n,s,o,i,"next",e)}function i(e){je(a,n,s,o,i,"throw",e)}o(void 0)}))}).call(this)}}],t=[{key:"getInstance",value:function(){return r._instance||(r._instance=new r),r._instance}}],e&&We(r.prototype,e),t&&We(r,t),r}();function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qe(e,t,r[t])}))}return e}function Ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}Xe(Ve,"_instance",void 0);var Ze=function(){var e;function t(e,r,n,s,a,o,i,l){var c,u=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");qe(this,"onComplete",(function(e,t,r){})),qe(this,"paraKey",void 0),qe(this,"timeout",void 0),qe(this,"gcObservable",void 0),qe(this,"recommendationObservable",void 0),qe(this,"isCompleted",!1),qe(this,"events",[]),qe(this,"error",void 0),qe(this,"timer",void 0),qe(this,"isTimedOut",!1),qe(this,"paraMeta",void 0),qe(this,"processingType",void 0),qe(this,"isSentenceReceived",!1),qe(this,"isGCCompleted",!1),qe(this,"sentenceReceivedTime",0),qe(this,"sentencesCount",0),qe(this,"receivedCount",0),this.paraMeta=a,this.paraKey=r,this.gcObservable=n,this.recommendationObservable=l,this.processingType=i,this.onComplete=function(t,r,n){u.isCompleted=!0,clearTimeout(u.timer),e(u.paraKey,u.events,n)},this.timeout=s,(null==o?void 0:o.aborted)&&(this.error=Error("Aborted"),this.gcObservable.error({data:{signal:o,errorCode:"AbortError",paraMeta:a,paraKey:r}}),null==(c=this.recommendationObservable)||c.error({data:{signal:o,errorCode:"AbortError",paraMeta:a,paraKey:r}}),this.onComplete(this.paraKey,this.events,Error("Aborted"))),null==o||o.addEventListener("abort",(function(){var e;u.isCompleted||(u.error=Error("Aborted"),u.gcObservable.error({data:{signal:o,errorCode:"AbortError",paraMeta:a,paraKey:r}}),null==(e=u.recommendationObservable)||e.error({data:{signal:o,errorCode:"AbortError",paraMeta:a,paraKey:r}}),u.onComplete(u.paraKey,u.events,Error("Aborted")))})),this.timer=setTimeout((function(){if(!u.isCompleted){if(u.isTimedOut=!0,u.isSentenceReceived){for(var e,t=u.gcObservable.isObsCompleted(),r=u.sentencesCount-u.receivedCount,n=t?u.recommendationObservable:u.gcObservable,s=t?u.getRecommendationFallbackResponse():u.getGCFallbackResponse(),a=0;a<r;a++)u.events.push(s),null==n||n.next(s);null==n||n.complete(),t||null==(e=u.recommendationObservable)||e.complete()}else u.fallback();u.onComplete(u.paraKey,u.events,Error("Timeout"))}}),this.timeout)}return e=[{key:"getSentenceSplitterFallbackResponse",value:function(){var e,t,r,n,s;return{type:Z.SentenceSplitter,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(r=this.paraMeta)?void 0:r.editorId,sentenceRanges:[[0,(null==(s=this.paraMeta)||null==(n=s.text)?void 0:n.length)-1]],language:{name:"English (US)",code:"en-us",detectedLanguage:{name:"English (US)",code:"en-us",confidence:1,source:""}},errorCode:"TIMEOUT"}}},{key:"getGCFallbackResponse",value:function(){var e,t,r;return{type:Z.SentenceSuggestionsGC,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(r=this.paraMeta)?void 0:r.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"getRecommendationFallbackResponse",value:function(){var e,t,r;return{type:Z.SentenceSuggestionsRecommendation,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(r=this.paraMeta)?void 0:r.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"fallback",value:function(){var e;this.gcObservable.next(this.getSentenceSplitterFallbackResponse()),this.events.push(this.getSentenceSplitterFallbackResponse()),this.gcObservable.next(this.getGCFallbackResponse()),this.events.push(this.getGCFallbackResponse()),this.gcObservable.complete(),null==(e=this.recommendationObservable)||e.complete()}},{key:"next",value:function(e){if(!this.isTimedOut&&!this.isCompleted){var t,r,n,s,a,o=(null==e?void 0:e.isError)?null==e||null==(t=e.data)?void 0:t.errorCode:void 0;o&&(this.error=Error(o)),this.events.push(e);var i=Ye(ze({},null==e?void 0:e.data),{isCached:null==e?void 0:e.isCached});if((null==i?void 0:i.type)===Z.SentenceSplitter){if(this.isSentenceReceived=!0,!(null==i||null==(n=i.sentenceRanges)?void 0:n.length))return void this.fallback();this.sentencesCount=null==i||null==(s=i.sentenceRanges)?void 0:s.length,this.gcObservable.next(i),this.processingType===K.RECOMMENDATION&&(this.gcObservable.next({type:Z.SentenceSuggestionsGCCompleted}),this.gcObservable.complete())}(null==i?void 0:i.type)===Z.SentenceSuggestionsGC&&(this.receivedCount=(this.receivedCount||0)+1,this.gcObservable.next(i)),(null==i?void 0:i.type)===Z.SentenceSuggestionsGCCompleted&&(this.gcObservable.next(i),this.gcObservable.complete()),(null==i?void 0:i.type)===Z.SkipProcessing&&(this.gcObservable.complete(),null==(a=this.recommendationObservable)||a.complete()),(null==i?void 0:i.type)===Z.SentenceSuggestionsRecommendation&&this.recommendationObservable&&(this.receivedCount=(this.receivedCount||0)+1,this.recommendationObservable.next(i)),this.sentencesCount&&this.receivedCount&&this.sentencesCount===this.receivedCount&&this.recommendationObservable&&this.recommendationObservable.complete(),(null==e||null==(r=e.data)?void 0:r.errorCode)===G.LANGUAGE_NOT_SUPPORTED&&(this.error=Error("Language not supported"),this.gcObservable.error(e),this.recommendationObservable&&this.recommendationObservable.error(e)),this.gcObservable.isObsCompleted()&&(!this.recommendationObservable||this.recommendationObservable.isObsCompleted())&&this.onComplete(this.paraKey,this.events,this.error)}}},{key:"sendBulk",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0;r<e.length;r++)if(e){var n=t?Ye(ze({},e[r]),{isCached:t}):e[r];this.next(n)}}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}();function $e(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function Je(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){$e(a,n,s,o,i,"next",e)}function i(e){$e(a,n,s,o,i,"throw",e)}o(void 0)}))}}function Qe(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var et=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"executeWithExponentialBackoff",value:function(e,r,n,s,a,o){return Je((function(){var i,l,c,u,d,h,_,E,f,p;return Qe(this,(function(g){switch(g.label){case 0:i=e,l=r,c=500,u=-1,g.label=1;case 1:if(!(u<i))return[3,8];g.label=2;case 2:return g.trys.push([2,4,,7]),[4,n({retryCount:u<=0?0:u})];case 3:return[2,g.sent()];case 4:if(s(d=g.sent()),o&&!o(d))throw d;return E=null==d||null==(_=d.errorData)||null==(h=_.data)?void 0:h.retryConfig,-1===u&&E&&(l=null!=(f=null==E?void 0:E.retryDelay)?f:r,i=null!=(p=null==E?void 0:E.maxRetry)?p:e),[4,null==a?void 0:a(d)];case 5:if(g.sent(),++u>=i)throw d;return[4,t.delay(c)];case 6:return g.sent(),c=Math.min(l*Math.pow(2,u+1),3e4),[3,7];case 7:return[3,1];case 8:return[2]}}))}))()}},{key:"delay",value:function(e){return Je((function(){return Qe(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))()}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t,e),t}();function tt(e,t,r){return(tt=at()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&nt(s,r.prototype),s}).apply(null,arguments)}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t="function"==typeof Map?new Map:void 0;return(st=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return tt(e,arguments,rt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),nt(r,e)})(e)}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}var ot=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n,s,a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=[e],t=rt(t=r),o=function(e,t){var r;if(t&&("object"==((r=t)&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,at()?Reflect.construct(t,n||[],rt(this).constructor):t.apply(this,n)),a=void 0,(s="details")in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,o.name=o.constructor.name,o.details=i,Error.captureStackTrace&&Error.captureStackTrace(o,o.constructor),o}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&nt(r,e),t=[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," ").concat(Object.keys(this.details).length?"| Details: ".concat(JSON.stringify(this.details)):"")}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(r.prototype,t),r}(st(Error));function it(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function lt(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){it(a,n,s,o,i,"next",e)}function i(e){it(a,n,s,o,i,"throw",e)}o(void 0)}))}}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ut(e,t,r[t])}))}return e}function ht(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function _t(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Et=function(){var e,t;function r(){if(!(this instanceof r))throw TypeError("Cannot call a class as a function");ut(this,"baseURL",""),ut(this,"defaultHeaders",{"Content-Type":"application/json"}),ut(this,"retryConfig",{maxRetries:0,retryDelay:1e3})}return e=[{key:"executeRequest",value:function(e,t){return lt((function(e,t){var r,n,s,a,o,i,l,c,u,d,h=arguments;return _t(this,(function(_){switch(_.label){case 0:if(r=this,n=h.length>2&&void 0!==h[2]?h[2]:{},s=h.length>3&&void 0!==h[3]?h[3]:0,!this.baseURL)throw Error("Base URL not set. Please call setBaseURL before making requests.");_.label=1;case 1:return _.trys.push([1,7,,10]),a="".concat(this.baseURL).concat(t.startsWith("/")?t:"/".concat(t)),o={method:e,headers:dt({},this.defaultHeaders,n.headers)},n.body&&(o.body=JSON.stringify(n.body)),n.signal&&(o.signal=n.signal),[4,fetch(a,o)];case 2:i=_.sent(),_.label=3;case 3:return _.trys.push([3,5,,6]),[4,i.json()];case 4:return l=_.sent(),[3,6];case 5:return[3,6];case 6:if(!i.ok)throw null==(c=n.responseCallback)||c.call(n,i,l),new ot(l.message||"Request failed",l);return[2,l];case 7:return u=_.sent(),d=n.retries||this.retryConfig.maxRetries,s<d?[4,new Promise((function(e){return setTimeout(e,r.retryConfig.retryDelay)}))]:[3,9];case 8:return _.sent(),[2,this.executeRequest(e,t,n,s+1)];case 9:throw u;case 10:return[2]}}))})).apply(this,arguments)}},{key:"setBaseURL",value:function(e){return this.baseURL=e.endsWith("/")?e.slice(0,-1):e,this}},{key:"getBaseURL",value:function(){return this.baseURL}},{key:"setDefaultHeaders",value:function(e){return this.defaultHeaders=dt({"Content-Type":"application/json"},e),this}},{key:"setDefaultHeader",value:function(e,t){return this.defaultHeaders[e]=t,this}},{key:"removeDefaultHeader",value:function(e){return delete this.defaultHeaders[e],this}},{key:"getDefaultHeaders",value:function(){return dt({},this.defaultHeaders)}},{key:"setRetryConfig",value:function(e){return this.retryConfig=dt({},e),this}},{key:"getRetryConfig",value:function(){return dt({},this.retryConfig)}},{key:"get",value:function(e,t){return lt((function(){return _t(this,(function(r){return[2,this.executeRequest("get",e,t)]}))})).call(this)}},{key:"post",value:function(e,t,r){return lt((function(){return _t(this,(function(n){return[2,this.executeRequest("post",e,ht(dt({},r),{body:t}))]}))})).call(this)}},{key:"put",value:function(e,t,r){return lt((function(){return _t(this,(function(n){return[2,this.executeRequest("put",e,ht(dt({},r),{body:t}))]}))})).call(this)}},{key:"delete",value:function(e,t){return lt((function(){return _t(this,(function(r){return[2,this.executeRequest("delete",e,t)]}))})).call(this)}}],t=[{key:"getInstance",value:function(){return r.instance||(r.instance=new r),r.instance}},{key:"resetInstance",value:function(){r.instance=null}}],e&&ct(r.prototype,e),t&&ct(r,t),r}();ut(Et,"instance",null);var ft="http_error",pt="processing_error",gt="transport_error",mt="transport_not_initialized",At="ack_timeout",Rt="socket_closed",Tt="transport-send",bt="transport-validate",Ot="transport-ready",St={socket:{enableQueue:!1,maxRetryAttempts:5,retryTimeAfterExhaust:3e5,connTimeout:4e4,reconnectDelay:500},fallback:{maxRetryAttempts:1,connectionRetryDelay:500,sendRetryDelay:500},message:{retryDelay:500,ackTimeout:3e3,queueTimeout:1e4,maxRetries:1,cacheTtl:1728e5,batchSize:10},observableTimeout:3e4,maxRetryEditorNotFound:3},It={socketUrl:"wss://edit-stream.quillbot.com",fallbackUrl:"https://edit-stream.quillbot.com"};function vt(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){vt(a,n,s,o,i,"next",e)}function i(e){vt(a,n,s,o,i,"throw",e)}o(void 0)}))}}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ct(e,t,r[t])}))}return e}function Pt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Lt(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Dt=function(){var e,t;function r(){var e=this;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");Ct(this,"connectionReattempts",0),Ct(this,"sendReattempts",0),Ct(this,"maxReconnectAttempts",St.fallback.maxRetryAttempts),Ct(this,"sendRetryDelay",St.fallback.sendRetryDelay),Ct(this,"trackEvent",(function(){})),Ct(this,"resetConnectionSession",(function(){})),Ct(this,"setConnectionSessionId",(function(){})),Ct(this,"httpClient",Et.getInstance()),Ct(this,"authHandlers",{logout:function(){},getIdToken:function(){return Promise.resolve("")}}),Ct(this,"deviceMeta",{}),Ct(this,"userMeta",{anonId:"",abIdV2:""}),Ct(this,"headers",{"Content-Type":"application/json"}),Ct(this,"_responseCallback",(function(t,r){var n,s={eventName:ft,eventData:{statusCode:t.status,requestUrl:t.url,errorCode:(null==r?void 0:r.errorCode)||"UNKNOWN"}};403===t.status&&(s.eventData.rayID=t.headers.get("cf-ray")||"",s.eventData.cfStatus=t.headers.get("cf-mitigated")),null==(n=e.trackEvent)||n.call(e,{tracking:s})}))}return e=[{key:"setHttpClient",value:function(e){this.httpClient=e}},{key:"setConfig",value:function(e){this.authHandlers=e.authHandlers,this.trackEvent=e.trackEvent,this.resetConnectionSession=e.resetConnectionSession,this.setConnectionSessionId=e.setConnectionSessionId,this.deviceMeta=e.deviceMeta,this.userMeta=e.userMeta,this.httpClient&&this.httpClient.setBaseURL&&this.httpClient.setBaseURL(e.baseUrl),this.maxReconnectAttempts=e.maxReconnectAttempts}},{key:"setHeaders",value:function(e){this.headers=wt({},this.headers,e)}},{key:"handleAuthError",value:function(e){return yt((function(){var t,r,n;return Lt(this,(function(s){switch(s.label){case 0:return[M.TOKEN_EXPIRED].includes(null==(t=e.details)?void 0:t.errorCode)?[4,this.authHandlers.getIdToken(!0)]:[3,2];case 1:return s.sent(),[2];case 2:[M.FORCE_PASSWORD_CHANGE,M.TOKEN_REVOKED].includes(null==(r=e.details)?void 0:r.errorCode)&&(null==(n=this.authHandlers)||n.logout("EXTERNAL_MESSAGE")),s.label=3;case 3:throw e}}))})).call(this)}},{key:"establishConnection",value:function(e){return yt((function(e){var t,r,n,s,a,o,i,l,c,u,d,h,_;return Lt(this,(function(E){switch(E.label){case 0:if(t=e.connSessionId,r=e.connectionData,n=e.signal,!this.httpClient)throw Error("HTTP client not set");E.label=1;case 1:return E.trys.push([1,4,,10]),i=(o=this.httpClient).post,l=["/api/ws/fallback/connection-session",wt({},r,t&&{connSessionId:t})],c={},u=[wt({},this.headers)],d={},[4,this.authHandlers.getIdToken(!1)];case 2:return[4,i.apply(o,l.concat([(c.headers=Pt.apply(void 0,u.concat([(d.useridtoken=E.sent()||"",d)])),c)]))];case 3:return a=E.sent(),this.connectionReattempts=0,this.setConnectionSessionId(null==(s=a.data)?void 0:s.connSessionId),[2,a.data];case 4:return h=E.sent(),Object.values(M).includes(null==(_=h.details)?void 0:_.errorCode)?[4,this.handleAuthError(h)]:[3,6];case 5:E.sent(),E.label=6;case 6:return this.connectionReattempts<this.maxReconnectAttempts?(this.connectionReattempts++,[4,new Promise((function(e){return setTimeout(e,St.fallback.connectionRetryDelay)}))]):[3,8];case 7:return E.sent(),[2,this.establishConnection({connectionData:r,signal:n})];case 8:this.connectionReattempts=0,E.label=9;case 9:throw Error("Failed to establish connection after ".concat(this.maxReconnectAttempts," attempts"));case 10:return[2]}}))})).apply(this,arguments)}},{key:"sendEvent",value:function(e){return yt((function(e){var t,r,n,s,a,o,i,l,c,u,d,h,_,E,f,p,g,m,A,R,T,b,O;return Lt(this,(function(S){switch(S.label){case 0:if(t=this,r=e.eventData,n=e.activeObservables,s=e.signal,!this.httpClient)throw Error("HTTP client not set");S.label=1;case 1:return S.trys.push([1,4,,12]),i=(o=this.httpClient).post,l=["/api/ws/fallback/event",r],c={},u=[wt({},this.headers)],d={},[4,this.authHandlers.getIdToken(!1)];case 2:return[4,i.apply(o,l.concat([(c.headers=Pt.apply(void 0,u.concat([(d.useridtoken=S.sent()||"",d)])),c.signal=s,c.responseCallback=this._responseCallback,c)]))];case 3:return a=S.sent(),r.eventName===W.ON_CHANGE&&(null==(h=a.data)||h.forEach((function(e){var t,r=n["".concat(e.requestEventId,"_").concat(null==(t=e.data)?void 0:t.changeIndex)];r&&r.next(e)}))),this.sendReattempts=0,[2,a.data];case 4:return A=null==(_=S.sent())||null==(f=_.errorData)||null==(E=f.data)?void 0:E.retryConfig,Object.values(M).includes(null==(p=_.details)?void 0:p.errorCode)?[4,this.handleAuthError(_)]:[3,6];case 5:S.sent(),S.label=6;case 6:if([G.EDITOR_NOT_FOUND,G.EDITOR_ALREADY_EXISTS].includes(null==(g=_.details)?void 0:g.errorCode)&&_.details.statusCode===j.InternalServerError)throw _;return[F.INVALID_OR_EXPIRED_SESSION].includes(null==(m=_.details)?void 0:m.errorCode)?(this.resetConnectionSession(null==(R=_.details)?void 0:R.errorCode),[4,this.establishConnection({connectionData:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2,deviceMeta:this.deviceMeta},signal:s})]):[3,8];case 7:T=S.sent(),r.connSessionId=T.connSessionId,S.label=8;case 8:return A&&(this.maxReconnectAttempts=null!=(b=A.maxRetry)?b:this.maxReconnectAttempts,this.sendRetryDelay=null!=(O=A.retryDelay)?O:this.sendRetryDelay),this.sendReattempts<this.maxReconnectAttempts?(this.sendReattempts++,[4,new Promise((function(e){return setTimeout(e,t.sendRetryDelay)}))]):[3,10];case 9:return S.sent(),[2,this.sendEvent({eventData:r,activeObservables:n,signal:s})];case 10:this.sendReattempts=0,S.label=11;case 11:var I,v;return[2,{success:!1,message:(I=_,(null!=(v=Error)&&"undefined"!=typeof Symbol&&v[Symbol.hasInstance]?v[Symbol.hasInstance](I):I instanceof v)?_.message:"Unknown error occurred")}];case 12:return[2]}}))})).apply(this,arguments)}},{key:"disconnect",value:function(){this.connectionReattempts=0,this.sendReattempts=0}}],t=[{key:"getInstance",value:function(){return r.instance||(r.instance=new r),r.instance}}],e&&Nt(r.prototype,e),t&&Nt(r,t),r}();function xt(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function kt(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){xt(a,n,s,o,i,"next",e)}function i(e){xt(a,n,s,o,i,"throw",e)}o(void 0)}))}}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Mt(e,t,r[t])}))}return e}function Ht(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Ft(e,t,r,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(o=(a<3?s(o):a>3?s(t,r,o):s(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function Bt(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function jt(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Wt(){return function(e,t,r){if(r&&r.value){var n=r.value;return r.value=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.socketState===$.NOT_INITIALIZED){var s,a=Error();throw a.name=B.TRANSPORT_NOT_INITIALIZED,a.message="Transport layer not initialized",null==(s=this.trackEvent)||s.call(this,{tracking:{eventName:gt,eventData:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}))}return e}({category:mt,errorOrigin:bt},this.userMeta)}}),a}return n.apply(this,t)},r}}}Ct(Dt,"instance",null);var Xt=function(){var e,t;function r(){var e=this,t=this;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");Mt(this,"_wsClient",void 0),Mt(this,"_queueManager",void 0),Mt(this,"_lastConnAttemptTime",0),Mt(this,"_activeObservables",{}),Mt(this,"_activeEditors",{}),Mt(this,"_onMessageCallback",void 0),Mt(this,"socketState",$.NOT_INITIALIZED),Mt(this,"retryAttempts",0),Mt(this,"errorCode",void 0),Mt(this,"socketStateTimeout",void 0),Mt(this,"connectionSessionId",void 0),Mt(this,"pendingAcks",new Map),Mt(this,"deviceMeta",{}),Mt(this,"userMeta",{anonId:"",abIdV2:""}),Mt(this,"authHandlers",{logout:function(e){},getIdToken:function(){return Promise.resolve("")}}),Mt(this,"recoveryConfig",St),Mt(this,"connectionConfig",It),Mt(this,"_connectedInitially",!1),Mt(this,"_devMode",{debug:!1,fallback:!1}),Mt(this,"trackEvent",void 0),Mt(this,"_eventCallback",void 0),Mt(this,"notifyClient",(function(t){var r=t.eventName,n=t.data;e._eventCallback&&e._eventCallback({eventName:r,data:n})})),Mt(this,"_setConnectionSessionId",(function(t){e.connectionSessionId=t,e.notifyClient({eventName:J.UPDATE_CONN_ID,data:{connSessionId:t,ttl:e.recoveryConfig.message.cacheTtl}})})),Mt(this,"_messageHandler",(function(t){try{var r=JSON.parse(t.data);zt(r,e.pendingAcks,e._activeObservables),e._onMessageCallback&&e._onMessageCallback(r)}catch(e){}})),Mt(this,"_socketStateTimer",(function(){e.socketStateTimeout&&clearTimeout(e.socketStateTimeout),e.socketStateTimeout=setTimeout((function(){(e.socketState===$.CONNECTING||e.socketState===$.CONNECTED||e.socketState===$.AUTH_SUCCESS)&&e.setErroredState(void 0)}),e.recoveryConfig.socket.connTimeout)})),Mt(this,"_getConnectionData",(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).retry;return kt((function(){var t;return Bt(this,(function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[2,Gt(Ht(Gt({},this.userMeta),{userToken:t,platformType:this.deviceMeta.platformType}),this.connectionSessionId?{connectionSessionId:this.connectionSessionId}:{connectionSessionId:this.connectionConfig.connSessionId||""},void 0!==e&&{retry:e})]}}))})).call(t)})),Mt(this,"_initTransport",(function(){return kt((function(){var e,t;return Bt(this,(function(r){switch(r.label){case 0:return e=this,[4,this._getConnectionData()];case 1:return t=r.sent(),[2,new Promise((function(r,n){try{if(e.socketState===$.CONNECTING||e.socketState===$.CONNECTED||e.socketState===$.AUTH_SUCCESS)return;e.socketState=$.CONNECTING,e._lastConnAttemptTime=Date.now(),e._socketStateTimer();var s=setTimeout((function(){e.socketState!==$.READY&&e.pendingAcks.has(ee)&&(n(Error("Connection timeout")),e.pendingAcks.delete(ee))}),e.recoveryConfig.socket.connTimeout);e.pendingAcks.set(ee,{resolve:r,reject:n,timeout:s}),e._wsClient.connect(t).then((function(){e.socketState=$.CONNECTED}))}catch(e){n(e)}}))]}}))})).call(e)})),Mt(this,"initialize",(function(t){return kt((function(){return Bt(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.userMeta=Gt({},this.userMeta,t.userMeta),this._setConfig(t),Dt.getInstance().setConfig({authHandlers:this.authHandlers,trackEvent:this.trackEvent,resetConnectionSession:this.resetConnectionSession,setConnectionSessionId:this._setConnectionSessionId,deviceMeta:this.deviceMeta,userMeta:this.userMeta,maxReconnectAttempts:this.recoveryConfig.fallback.maxRetryAttempts,baseUrl:this.connectionConfig.fallbackUrl}),[4,this._initTransport()];case 1:return e.sent(),[3,3];case 2:return[3,3];case 3:return[2]}}))})).call(e)})),Mt(this,"reconnect",(function(){return kt((function(){var e,t,r,n,s,a;return Bt(this,(function(o){switch(o.label){case 0:if(e=this,[$.CONNECTING,$.CONNECTED,$.AUTH_SUCCESS,$.READY].includes(this.socketState))return[2];if(!(this.retryAttempts>=this.recoveryConfig.socket.maxRetryAttempts))return[3,9];if(this.socketState=$.RETRY_EXHAUSTED,this.connectionSessionId)return[3,8];if(!this.pendingAcks.has(ee))return[3,7];r=(t=this.pendingAcks.get(ee)).resolve,n=t.reject,s=t.timeout,o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,Dt.getInstance().establishConnection({connectionData:{deviceMeta:this.deviceMeta,anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2}})];case 2:return a=o.sent(),r(a),[4,this.processPendingMessages()];case 3:return o.sent(),[3,6];case 4:return n(undefined),[3,6];case 5:return this.pendingAcks.delete(ee),s&&clearTimeout(s),[7];case 6:return[3,8];case 7:o.label=8;case 8:return[2];case 9:return this.socketState=$.CONNECTING,this._socketStateTimer(),setTimeout((function(){return kt((function(){var e,t;return Bt(this,(function(r){switch(r.label){case 0:return e=this,this._lastConnAttemptTime=Date.now(),this.retryAttempts++,[4,this._getConnectionData({retry:this.retryAttempts})];case 1:return t=r.sent(),this._wsClient.connect(t).then((function(){return e.socketState=$.CONNECTED})),[2]}}))})).call(e)}),Math.min(this.recoveryConfig.socket.reconnectDelay*Math.pow(2,this.retryAttempts),3e4)),[2]}}))})).call(e)})),Mt(this,"setReadyState",(function(t){return kt((function(){var e,r,n,s,a,o,i,l;return Bt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this._sendViaSocket({event:W.UPDATE_CONNECTION,data:{deviceMeta:this.deviceMeta,userMeta:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2}}})];case 1:return c.sent(),this._setConnectionSessionId(t.data.connSessionId),this.socketState=$.READY,this.socketStateTimeout&&clearTimeout(this.socketStateTimeout),this.retryAttempts=0,this.errorCode=void 0,this._connectedInitially=!0,this.pendingAcks.has(ee)&&(r=(e=this.pendingAcks.get(ee)).resolve,(n=e.timeout)&&clearTimeout(n),r(t),this.pendingAcks.delete(ee)),[3,3];case 2:return(null==(s=c.sent())||null==(o=s.errorData)||null==(a=o.data)?void 0:a.errorCode)!==F.TIMEOUT&&(null==(i=(l=this).trackEvent)||i.call(l,{tracking:{eventName:gt,eventData:Ht(Gt({category:mt,errorOrigin:Ot},this.userMeta),{error:Be(s)})}})),[3,3];case 3:return[2]}}))})).call(e)})),Mt(this,"sendAck",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.eventId,n=e.eventTimestamp,s={event:W.ACK,data:null==e?void 0:e.data,eventId:r,eventTimestamp:n};t.send(s,!1)})),Mt(this,"setErroredState",(function(t){e.socketState=$.ERRORED,t&&(e.errorCode=t),e.socketStateTimeout&&clearTimeout(e.socketStateTimeout)})),Mt(this,"resetConnectionSession",(function(t){e.connectionSessionId=void 0,e.notifyClient({eventName:J.UPDATE_CONN_ID,data:{connSessionId:""}}),t?e.setErroredState(t):(e.socketState=$.NOT_INITIALIZED,e.retryAttempts=0,e.errorCode=void 0)})),Mt(this,"sendPong",(function(){e._sendViaSocket({event:W.PONG,data:{}},!1)})),this._queueManager=Ve.getInstance(),this._wsClient=U.getInstance(),this._wsClient.setOnCloseHandler(this._onClose.bind(this)),this._wsClient.setOnErrorHandler(this._onError.bind(this))}return e=[{key:"setHttpClient",value:function(e){Dt.getInstance().setHttpClient(e)}},{key:"setEventCallback",value:function(e){this._eventCallback=e}},{key:"setUserMeta",value:function(e){this.userMeta=Gt({},this.userMeta,e)}},{key:"enableDevMode",value:function(e){this._devMode=Gt({},this._devMode,e)}},{key:"getAuthToken",value:function(){return kt((function(){return Bt(this,(function(e){switch(e.label){case 0:return[4,this.authHandlers.getIdToken(!1)];case 1:return[2,e.sent()||""]}}))})).call(this)}},{key:"_setConfig",value:function(e){var t=e.onMessageCallback,r=e.socketClient,n=e.storageClient,s=e.deviceMeta,a=e.authHandlers,o=e.recoveryConfig,i=e.connectionConfig;this._wsClient=r||this._wsClient,n&&Le((function(){return De(this,(function(e){return xe=Promise.resolve(n),[2]}))}))(),this.deviceMeta=s||this.deviceMeta,this.authHandlers=a||this.authHandlers,this.recoveryConfig=o||this.recoveryConfig,this.connectionConfig=i||this.connectionConfig,this.trackEvent=e.trackEvents,this._onMessageCallback=t,this._wsClient.setInitialConfig({onMessageCallback:this._messageHandler,url:this.connectionConfig.socketUrl})}},{key:"_sendViaSocket",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return kt((function(){var r;return Bt(this,(function(n){return r=this,[2,new Promise((function(n,s){var a=e.eventTimestamp||Date.now(),o=e.eventId||Q(a),i=e.retryCount;if(t){var l=setTimeout((function(){var e;r.pendingAcks.has(o)&&(null==(e=r.pendingAcks.get(o))||e.reject({shouldRetry:!0,errorData:{data:{errorCode:F.TIMEOUT}}}),r.pendingAcks.delete(o))}),r.recoveryConfig.message.ackTimeout);r.pendingAcks.set(o,{resolve:n,reject:s,timeout:l})}r._wsClient.send({event:e.event,data:Ht(Gt({},e.data),{eventId:o,eventTimestamp:a,retryCount:i})}),t||n(e)}))]}))})).call(this)}},{key:"_setActiveObservables",value:function(e,t){this._activeObservables[e]=t}},{key:"send",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2?arguments[2]:void 0;return kt((function(){var n,s,a,o,i,l,c,u;return Bt(this,(function(d){switch(d.label){case 0:if(n=this,this.connectionSessionId)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,5]),[4,this._initTransport()];case 2:case 4:return d.sent(),[3,5];case 3:return s=d.sent(),null==(a=(o=this).trackEvent)||a.call(o,{tracking:{eventName:gt,eventData:Gt({category:mt,errorOrigin:Tt,error:Be(s)},this.userMeta)}}),[4,Dt.getInstance().establishConnection({connectionData:{deviceMeta:this.deviceMeta,anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2}})];case 5:return i=e.eventTimestamp||Date.now(),l=e.eventId||Q(i),e=Ht(Gt({},e),{eventId:l,eventTimestamp:i}),this.recoveryConfig.socket.enableQueue&&[$.CONNECTING,$.CONNECTED,$.ERRORED,$.AUTH_SUCCESS].includes(this.socketState)?(this.socketState===$.ERRORED&&Object.values(H).includes(this.errorCode)&&this.reconnect(),c=e.event===W.INIT_EDITOR?Ke.INIT:Ke.GENERIC,this._queueManager.enqueue(c,e,t,this.recoveryConfig.message.queueTimeout),[2]):this.socketState!==$.READY||!this._wsClient.isOpen()||this._devMode.fallback?[3,7]:[4,et.executeWithExponentialBackoff(this.recoveryConfig.message.maxRetries,this.recoveryConfig.message.retryDelay,(function(r){return n._sendViaSocket(Ht(Gt({},e),{retryCount:r.retryCount}),t)}),(function(t){var r,s,a,o;(null==t||null==(s=t.errorData)||null==(r=s.data)?void 0:r.errorCode)===F.TIMEOUT&&(null==(a=(o=n).trackEvent)||a.call(o,{tracking:{eventName:pt,eventData:{category:At,event:e.event,eventId:l}}}))}),(function(e){return kt((function(){var t,r,n,s;return Bt(this,(function(a){switch(a.label){case 0:return(null==e||null==(r=e.errorData)||null==(t=r.data)?void 0:t.errorCode)!==F.INVALID_OR_EXPIRED_SESSION?[3,2]:(this.resetConnectionSession(null==e||null==(s=e.errorData)||null==(n=s.data)?void 0:n.errorCode),[4,this._initTransport().catch((function(e){}))]);case 1:a.sent(),a.label=2;case 2:return[2]}}))})).call(n)}),re)];case 6:return d.sent(),[3,11];case 7:u=this.errorCode,d.label=8;case 8:return d.trys.push([8,,10,11]),[4,Dt.getInstance().sendEvent(Gt({eventData:{eventName:e.event,eventData:Ht(Gt({},e.data),{eventId:l,eventTimestamp:i}),connSessionId:this.connectionSessionId},activeObservables:this._activeObservables},r&&{signal:r}))];case 9:return d.sent(),[3,11];case 10:return setTimeout((function(){n.socketState===$.ERRORED&&Object.values(H).includes(u)&&n.reconnect(),(n.socketState===$.RETRY_EXHAUSTED||n.socketState===$.ERRORED)&&Date.now()>=n._lastConnAttemptTime+n.recoveryConfig.socket.retryTimeAfterExhaust&&(n.socketState=$.RETRY_EXHAUSTED,n.retryAttempts=0,n.reconnect())}),0),[7];case 11:return[2]}}))})).call(this)}},{key:"updateEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return kt((function(){var r,n,s,a,o,i,l,c,u,d,h,_,E,f,p,g,m,A,R,T,b,O,S,I,v,y,N,C,w,P,L,D;return Bt(this,(function(x){switch(x.label){case 0:return r=this,this._activeEditors[e.editorId]||(this._activeEditors[e.editorId]={editorContentVersion:"",lastSentHash:"",ackStatus:V.NOT_SENT}),(null==(n=this._activeEditors[e.editorId])?void 0:n.ackStatus)!==V.NOT_SENT?[3,2]:(this._activeEditors[e.editorId].ackStatus=V.PENDING,[4,this._initEditor({editorGroupId:e.editorGroupId,editorId:e.editorId,editorVersion:e.editorContentVersion,hostUrl:e.hostUrl||"",hostCategory:e.hostCategory||"",product:e.product}).catch((function(t){throw r._activeEditors[e.editorId].ackStatus=V.NOT_SENT,t}))]);case 1:x.sent(),this._activeEditors[e.editorId].ackStatus=V.RESOLVED,x.label=2;case 2:if(this._activeEditors[e.editorId].editorContentVersion=e.editorContentVersion,a=e.editorCompleteText,e.hostUrl,e.product,e.hostCategory,o=e.meta,i=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,["editorCompleteText","hostUrl","product","hostCategory","meta"]),c=function(e){for(var t=2166136261,r=0;r<e.length;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(l=a.slice(0,1e3)),u=this.recoveryConfig.message.batchSize,d=[],e.changes.length<=10)d.push(e.changes);else for(h=0;h<e.changes.length;h+=u)_=e.changes.slice(h,h+u),d.push(_);E=-1,f=Date.now(),p={},g={},m=(null==(s=this._activeEditors[e.editorId])?void 0:s.lastSentHash)!==c,A=!0,R=!1,T=void 0,x.label=3;case 3:x.trys.push([3,19,20,21]),b=d[Symbol.iterator](),x.label=4;case 4:if(A=(O=b.next()).done)return[3,18];S=O.value,E+=1,I={event:W.ON_CHANGE,data:Ht(Gt({},i),{changes:S.filter((function(e){return""!==e.text})).map((function(t){return Gt({text:t.text,processingType:t.processingType},(null==e?void 0:e.acceptChangeType)&&{changeSentenceLength:t.changeSentenceLength,replacementText:t.replacementText})})),meta:Gt({},o,m&&{editorStartText:l})}),eventTimestamp:f,eventId:Q(f)},m&&(this._activeEditors[e.editorId].lastSentHash=c),v=0,y=!1,x.label=5;case 5:x.trys.push([5,12,,17]),C=function(t){var n,s,a,o,i,l,c,d;return Bt(this,(function(h){switch(h.label){case 0:return n=new He,p[s=E*u+t]=n,a=void 0,[K.GC_WITH_RECOMMENDATION,K.RECOMMENDATION].includes(S[t].processingType)&&(a=new He,g[s]=a),""!==S[t].text?[3,1]:(n.next({type:Z.SentenceSplitter,sentenceRanges:[[0,0]]}),n.complete(),a&&a.complete(),[3,3]);case 1:return o="".concat(I.eventId,"_").concat(v),[4,Me(i="".concat(W.ON_CHANGE,"-").concat(S[t].text,"-").concat(S[t].processingType,"-").concat(I.data.meta.userPreferredDialect,"-").concat(I.data.meta.language).concat(N.userMeta.premium?"-".concat(N.userMeta.premium):""))];case 2:c=(l=h.sent())&&Object.keys(l).length,d=new Ze((function(e,t,n){var s,a;delete r._activeObservables[e],c||n||(s=i,a=r.recoveryConfig.message.cacheTtl,ke&&s&&(null==ke||ke.set(s,t,a)))}),o,n,N.recoveryConfig.observableTimeout,{text:S[t].text,editorId:e.editorId,editorGroupId:e.editorGroupId,changeIndex:v},e.signal,S[t].processingType,a),N._setActiveObservables(o,d),c?(d.sendBulk(l,!0),I.data.changes[v].processingType=K.NONE):y=!0,v+=1,h.label=3;case 3:return[2]}}))},w=0,x.label=6;case 6:return w<S.length?(N=this,[5,function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(C(w))]):[3,9];case 7:x.sent(),x.label=8;case 8:return w+=1,[3,6];case 9:return I.data.changes.length>0?[4,this.send(I,y,e.signal)]:[3,11];case 10:x.sent(),x.label=11;case 11:case 16:return[3,17];case 12:return(void 0===G.EDITOR_NOT_FOUND||void 0===G.EDITOR_NOT_FOUND)&&t<St.maxRetryEditorNotFound?(delete this._activeEditors[null==e?void 0:e.editorId],L=a.split("\n\n").map((function(e){return{text:e,processingType:K.NONE}})),[4,this.updateEditorContent(Ht(Gt({},e),{changes:L,changeType:X.USER_CHANGE}),t+1)]):[3,15];case 13:return x.sent(),[4,this.send(I,!0,e.signal)];case 14:return x.sent(),[3,16];case 15:throw P;case 17:return A=!0,[3,4];case 18:return[3,21];case 19:return D=x.sent(),R=!0,T=D,[3,21];case 20:try{A||null==b.return||b.return()}finally{if(R)throw T}return[7];case 21:return[2,{gcMergedObservable:Fe(p),recommendationMergedObservable:Fe(g)}]}}))})).call(this)}},{key:"updateConnectionSession",value:function(e){return kt((function(){var t;return Bt(this,(function(r){switch(r.label){case 0:return t={event:W.UPDATE_CONNECTION,data:{deviceMeta:Gt({},this.deviceMeta,null==e?void 0:e.deviceMeta),userMeta:Gt({},e.userMeta)}},[4,this.send(t,!0)];case 1:return r.sent(),[2]}}))})).call(this)}},{key:"_initEditor",value:function(e){return kt((function(){var t;return Bt(this,(function(r){switch(r.label){case 0:return t={event:W.INIT_EDITOR,data:e},[4,this.send(t).catch((function(e){if(e.errorData.data.errorCode!==G.EDITOR_ALREADY_EXISTS)throw e}))];case 1:return r.sent(),[2]}}))})).call(this)}},{key:"terminateEditorGroup",value:function(e){return kt((function(){var t;return Bt(this,(function(r){switch(r.label){case 0:return t={event:W.TERMINATE_EDITOR_GROUP,data:e},[4,this.send(t)];case 1:return r.sent(),[2]}}))})).call(this)}},{key:"setActiveEditorGroup",value:function(e){return kt((function(){var t;return Bt(this,(function(r){switch(r.label){case 0:return t={event:W.SET_ACTIVE_EDITOR_GROUP,data:{editorGroupId:e.editorGroupId}},[4,this.send(t)];case 1:return r.sent(),[2]}}))})).call(this)}},{key:"processPendingMessages",value:function(){return kt((function(){var e;return Bt(this,(function(t){switch(t.label){case 0:return e=this,[4,this._queueManager.processQueue(Ke.INIT,(function(t,r){return e.send(t,r)}))];case 1:return t.sent(),[4,this._queueManager.processQueue(Ke.GENERIC,(function(t,r){return e.send(t,r)}))];case 2:return t.sent(),[2]}}))})).call(this)}},{key:"_onClose",value:function(e){var t,n;this.setErroredState((null==e?void 0:e.reason)||(null==e||null==(t=e.code)?void 0:t.toString())),oe({error:e,transport:r.getInstance()}),null==(n=this.trackEvent)||n.call(this,{tracking:{eventName:gt,eventData:{category:Rt,code:null==e?void 0:e.code,reason:null==e?void 0:e.reason,retryAttempt:this.retryAttempts,connectedInitially:this._connectedInitially}}})}},{key:"_onError",value:function(e){this.setErroredState(void 0)}},{key:"closeConnection",value:function(){this._wsClient.close()}}],t=[{key:"getInstance",value:function(){return r._instance||(r._instance=new r),r._instance}}],e&&Ut(r.prototype,e),t&&Ut(r,t),r}();function Kt(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function Vt(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){Kt(a,n,s,o,i,"next",e)}function i(e){Kt(a,n,s,o,i,"throw",e)}o(void 0)}))}}function qt(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(l){var c=[i,l];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&c[0]?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,n=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(6===c[0]&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],n=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}Mt(Xt,"_instance",null),Ft([Wt(),jt("design:type",Function),jt("design:paramtypes",["undefined"==typeof OnChangeData?Object:OnChangeData,void 0]),jt("design:returntype",Promise)],Xt.prototype,"updateEditorContent",null),Ft([Wt(),jt("design:type",Function),jt("design:paramtypes",["undefined"==typeof UpdateConnectionSessionData?Object:UpdateConnectionSessionData]),jt("design:returntype",Promise)],Xt.prototype,"updateConnectionSession",null),Ft([Wt(),jt("design:type",Function),jt("design:paramtypes",["undefined"==typeof TabInfo?Object:TabInfo]),jt("design:returntype",Promise)],Xt.prototype,"setActiveEditorGroup",null);var zt=function(e,t,r){return Vt((function(){var n,s,a,o,i,l;return qt(this,(function(c){switch(c.label){case 0:switch(n=e.requestEventId,s=e.event,a=Xt.getInstance(),o=function(e){return Vt((function(){var t,r;return qt(this,(function(n){switch(n.label){case 0:a.socketState=$.AUTH_SUCCESS,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,a.setReadyState(e)];case 2:return n.sent(),a.processPendingMessages(),[3,4];case 3:return t=n.sent(),a.setErroredState(null==t||null==(r=t.data)?void 0:r.errorCode),a.reconnect(),[3,4];case 4:return[2]}}))}))()},i=function(e){a.send({event:W.ACK,data:{responseEventId:e.eventId}},!1)},l=function(e){try{var t=r["".concat(e.requestEventId,"_").concat(e.data.changeIndex)];if(!t)return;t.next(e)}catch(e){}},s){case q.AUTH_SUCCESS:return[3,1];case q.PROCESSING_SUCCESS:return[3,3];case q.ACK:return[3,4];case z.AUTH_FAILED:return[3,5];case z.PROCESSING_FAILED:return[3,7];case z.ACK_FAILED:return[3,8];case q.PING:return[3,9]}return[3,10];case 1:return[4,o(e)];case 2:case 6:return c.sent(),[3,11];case 3:return l(e),i(e),[3,11];case 4:return te({requestEventId:n,pendingAcks:t,eventData:e,ackType:Y.RESOLVE,transport:a}),[3,11];case 5:return[4,oe({transport:a,error:e})];case 7:return l(e),[3,11];case 8:return te({requestEventId:n,pendingAcks:t,eventData:e,ackType:Y.REJECT,transport:a}),[3,11];case 9:return a.sendPong(),[3,11];case 10:return[3,11];case 11:return[2]}}))}))()};!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="effa5b04-682f-5b71-bc57-e6cfd836df2e")}catch(e){}}()}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return s[e].call(r.exports,r,r.exports,o),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(s,a,o)=>{var i;o&&((i=[]).d=-1);var l,c,u,d=new Set,h=s.exports,_=new Promise(((e,t)=>{u=t,c=e}));_[t]=h,_[e]=e=>(i&&e(i),d.forEach(e),_.catch((e=>{}))),s.exports=_,a((s=>{var a;l=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var a=[];a.d=0,s.then((e=>{o[t]=e,n(a)}),(e=>{o[r]=e,n(a)}));var o={};return o[e]=e=>e(a),o}}var i={};return i[e]=e=>{},i[t]=s,i})))(s);var o=()=>l.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(a=()=>t(o)).r=0;var r=e=>e!==i&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));l.map((t=>t[e](r)))}));return a.r?c:o()}),(e=>(e?u(_[r]=e):c(h),n(i)))),i&&i.d<0&&(i.d=0)},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};o(8140)})();
//# sourceMappingURL=sourceMap/content-gdocs-pre.js.map