try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4efe3805-eb74-4b4a-a2dc-4455071d93bc",e._sentryDebugIdIdentifier="sentry-dbid-4efe3805-eb74-4b4a-a2dc-4455071d93bc")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.20.1"};(self.webpackChunk=self.webpackChunk||[]).push([[3958],{23958:(e,t,r)=>{let n,i;var a;r.r(t),r.d(t,{AI_COMMAND_GROUP_MAP:()=>re,CacheTypeEnum:()=>ue,addAWordToDictionary:()=>ei,checkAndUpdateTimeStamp:()=>En,checkGrammar:()=>mn,clearCacheByType:()=>V,computeGrammarCheck:()=>hn,deleteAWordFromDictionary:()=>ti,detectLanguage:()=>hi,getAICommandSuggestions:()=>fi,getAIContentScore:()=>Sn,getConfig:()=>Hr,getDictionaryWords:()=>Zn,getGrammarErrors:()=>Jn,getGrammarPreferences:()=>ri,getRecommendations:()=>Qn,getRecommendationsList:()=>An,notifyClient:()=>Vn,qualityScore:()=>ii,recommendation:()=>Rn,setConfig:()=>Vr,setEventCallback:()=>Hn,setGCCoreConfig:()=>Yn,setHTTPClient:()=>ae,setLoggerClient:()=>A,setStorageClient:()=>H,setTrackerClient:()=>_n,storeSentenceForSkippingCheck:()=>kn,unlockRecommendation:()=>pi,updateGrammarPreferences:()=>ni}),(a=ue||(ue={})).recommendationNone="recommendation:none",a.recommendationPremium="recommendation:premium",a.recommendationLocked="recommendation:locked",a.recommendationUpsell="recommendation:upsell";let o=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap;let d={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return p(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),p(o.get(this))}:function(...t){return p(e.apply(m(this),t))}:function(t,...r){let n=e.call(m(this),t,...r);return l.set(n,t.sort?t.sort():[t]),p(n)}}function f(e){return"function"==typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(s.has(e))return;let t=new Promise(((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));s.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function p(e){if(e instanceof IDBRequest)return function(e){let t=new Promise(((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(p(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);let t=f(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}let m=e=>u.get(e);let g=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],v=new Map;function y(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=_.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!g.includes(r))return;let a=async function(e,...t){let a=this.transaction(e,i?"readwrite":"readonly"),o=a.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&a.done]))[0]};return v.set(t,a),a}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){d=e(d)}((e=>({...e,get:(t,r,n)=>y(t,r)||e.get(t,r,n),has:(t,r)=>!!y(t,r)||e.has(t,r)})));let E="product-gc",b=3,T={cache:"cache",correctedSentences:"correctedSentences",lockedRecommendationMapping:"lockedRecommendationMapping"};class S{async get(e,t){var r;return null===(r=await this.dbPromise)||void 0===r?void 0:r.get(t,e).then((e=>null==e?void 0:e.data))}async set(e,t,r){var n,i;let a={data:t,type:(null==t||null===(n=t.value)||void 0===n?void 0:n.type)||"default",date:+(new Date).setHours(0,0,0,0)};await(null===(i=await this.dbPromise)||void 0===i?void 0:i.put(r,a,e))}async delete(e,t){var r;await(null===(r=await this.dbPromise)||void 0===r?void 0:r.delete(t,e))}async clear(e){var t;await(null===(t=await this.dbPromise)||void 0===t?void 0:t.clear(e))}async deleteOldData(e){try{var t;let r=+(new Date).setDate((new Date).getDate()-10),n=null===(t=await this.dbPromise)||void 0===t?void 0:t.transaction(e,"readwrite"),i=null==n?void 0:n.store,a=null==i?void 0:i.index("date"),o=IDBKeyRange.upperBound(r),s=await(null==a?void 0:a.openKeyCursor(o));for(;s;)null==i||i.delete(s.primaryKey),s=await s.continue()}catch(e){}}async getDatabaseSize(e){let t=await this.dbPromise,r=null==t?void 0:t.transaction(e,"readonly"),n=null==r?void 0:r.store;return(null==n?void 0:n.count())||0}async getByType(e,t=T.cache){let r=await this.dbPromise;if(!r)return[];let n=r.transaction(t,"readonly").store.index("type"),i=[],a=await n.openCursor(IDBKeyRange.only(e));for(;a;)i.push(a.value.data),a=await a.continue();return i}async deleteByType(e,t=T.cache){let r=await this.dbPromise;if(!r)return;let n=r.transaction(t,"readwrite"),i=n.store,a=i.index("type"),o=await a.openKeyCursor(IDBKeyRange.only(e));for(;o;)i.delete(o.primaryKey),o=await o.continue();await n.done}constructor(){w(this,"dbPromise",void 0),w(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=new Promise(((e,t)=>{let r=function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=p(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(p(o.result),e.oldVersion,e.newVersion,p(o.transaction))})),r&&o.addEventListener("blocked",(()=>r())),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}(E,b,{upgrade(e,t,r,n){try{if(!e.objectStoreNames.contains(T.cache)){let t=e.createObjectStore(T.cache);t.createIndex("date","date"),t.createIndex("type","type",{unique:!1})}if(e.objectStoreNames.contains(T.cache)){let e=n.objectStore(T.cache);e.indexNames.contains("type")||e.createIndex("type","type",{unique:!1})}if(!e.objectStoreNames.contains(T.correctedSentences)){e.createObjectStore(T.correctedSentences).createIndex("date","date")}if(!e.objectStoreNames.contains(T.lockedRecommendationMapping)){e.createObjectStore(T.lockedRecommendationMapping).createIndex("date","date")}}catch(e){}},blocked(){e(null)},blocking(){},terminated(){}});r.then((t=>{e(t||null)})).catch((t=>{e(null)}))})):this.dbPromise=Promise.resolve(null)}}let x=new Map;class P{async get(e){return x.get(e)}async set(e,t){await x.set(e,t)}async delete(e){await x.delete(e)}async clear(){await x.clear()}async getDatabaseSize(){return x.size}async deleteByType(e){for(let[t,r]of x.entries())r.type===e&&x.delete(t)}async getByType(e){let t=[];for(let[r,n]of x.entries())n.type===e&&t.push(r);return t}constructor(){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"isAvailable",!0)}}let R={log:()=>{},info:()=>{},warn:()=>{},error:()=>{}},A=async e=>{let{log:t,info:r,warn:n,error:i}=e;R.log=t,R.info=r,R.warn=n,R.error=i},k=(e,t,r)=>{if("number"!=typeof r||r<=0)throw Error(`timedPromise: Encountered invalid timeout value. Got ${r}`);return new Promise(((n,i)=>{let a=setTimeout((()=>{n({timedOut:!0,value:t})}),r);e.then((e=>{clearTimeout(a),n({timedOut:!1,value:e})})).catch((e=>{clearTimeout(a),i(e)}))}))},I=T.correctedSentences,C=(async()=>{try{let e=new S,t=e.dbPromise,r=await k(t,null,3e3);if(e.isAvailable&&r.value)return e.deleteOldData(I),e}catch(e){}return new P})(),D=async e=>{try{let t=await C.then((t=>t.get(e,I)));if(!t)return;let r="string"==typeof t?JSON.parse(t):t,{value:n}=r,{expireAt:i}=r;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){}return i&&(new Date).getTime()>new Date(i).getTime()?void await C.then((t=>t.delete(e,I))):n}catch(e){return void R.error(e)}},O=async(e,t,r)=>{try{let n=r?new Date((new Date).getTime()+r).toISOString():void 0;await C.then((r=>r.set(e,{expireAt:n,value:t},I)))}catch(e){return void R.error(e)}},N=async()=>{try{return await C.then((e=>{var t;return(null===(t=e.getDatabaseSize)||void 0===t?void 0:t.call(e,I))||0}))}catch(e){return R.error(e),0}},M=T.lockedRecommendationMapping,L=(async()=>{try{let e=new S,t=e.dbPromise,r=await k(t,null,3e3);if(e.isAvailable&&r.value)return e.deleteOldData(M),e}catch(e){}return new P})(),F=async e=>{try{let t=await L.then((t=>t.get(e,M)));if(!t)return;let{value:r,expireAt:n}=t;return n&&(new Date).getTime()>new Date(n).getTime()?void await L.then((t=>t.delete(e,M))):r}catch(e){return void R.error(e)}},$=async(e,t,r)=>{try{let n=r?new Date((new Date).getTime()+r).toISOString():void 0;await L.then((r=>r.set(e,{expireAt:n,value:t},M)))}catch(e){return void R.error(e)}},j=T.cache,U=(async()=>{try{let e=new S,t=e.dbPromise,r=await k(t,null,3e3);if(e.isAvailable&&r.value)return e.deleteOldData(j),e}catch(e){}return new P})(),G=async e=>{try{let t=await U.then((t=>t.get(e,j)));if(!t)return;let r="string"==typeof t?JSON.parse(t):t,{value:n}=r,{expireAt:i}=r;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){}return i&&(new Date).getTime()>new Date(i).getTime()?void await U.then((t=>t.delete(e,j))):n}catch(e){return void R.error(e)}},B=async(e,t,r)=>{try{let n=r?new Date((new Date).getTime()+r).toISOString():void 0;await U.then((r=>r.set(e,{expireAt:n,value:t},j)))}catch(e){return void R.error(e)}},W=async e=>{try{await U.then((t=>t.delete(e,j)))}catch(e){return void R.error(e)}},z=async e=>{try{await U.then((async t=>{t.deleteByType&&await t.deleteByType(e,j)}))}catch(e){return void R.error(e)}},H=async e=>{U=Promise.resolve(e),(async e=>{C=Promise.resolve(e)})(e),(async e=>{L=Promise.resolve(e)})(e)},V=async e=>{await z(e)},q={timeout:1e4,cacheDuration:864e6,retry:{limit:3}},K={timeout:1e4,retry:{limit:0,statusCodes:[400]},batch:4,cacheDuration:864e6,shortCircuit:{textUpperLimit:3e4,textLowerLimit:3}},X={timeout:1e4,retry:{limit:0},cacheDuration:864e6},Y={timeout:1e4,retry:{limit:0},cacheDuration:864e6},J={timeout:1e4,retry:{limit:0},cacheDuration:864e6},Q={timeout:1e4,cacheDuration:864e6,retry:{limit:0}},Z={timeout:1e4,cacheDuration:864e6,retry:{limit:0}},ee={timeout:1e4,retry:{limit:0},cacheDuration:864e6},te={timeout:1e4,cacheDuration:36e5,retry:{limit:0}},re={PPHR_ACADEMIC:"INTERNAL_PARAPHRASE",PPHR_NATURAL:"INTERNAL_PARAPHRASE",PPHR_CREATIVE:"INTERNAL_PARAPHRASE",PPHR_FORMAL:"INTERNAL_PARAPHRASE",PPHR_SIMPLIFY:"INTERNAL_PARAPHRASE",PPHR_EXPAND:"INTERNAL_PARAPHRASE",PPHR_SHORTEN:"INTERNAL_PARAPHRASE",GEN_SECTION:"EXTERNAL_GENERATIVE",GEN_IDEA:"EXTERNAL_GENERATIVE",GEN_OPPOSING_VIEW:"EXTERNAL_GENERATIVE",GEN_EXPLANATION:"EXTERNAL_GENERATIVE",GEN_CONCLUSION:"EXTERNAL_GENERATIVE",REWRITE_IMPROVE:"EXTERNAL_PARAPHRASE",CUSTOM:"EXTERNAL_CUSTOM"},ne=e=>async(t,r)=>{var n,i,a;let o=null!==(a=null!==(i=null==r||null===(n=r.retry)||void 0===n?void 0:n.limit)&&void 0!==i?i:q.retry.limit)&&void 0!==a?a:1,s=0,l=null;for(;s<=o;){try{return s>0&&(r.headers=r.headers||{},r.headers["qb-retry"]=s.toString()),await e(t,r)}catch(e){l=e,R.error(`Attempt ${s+1} failed: ${e}`)}s++}throw l},ie={request:ne((async(e,t)=>{throw Error("HTTP Client is not set")}))},ae=async e=>{ie.request=ne(e)};function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let se={},le={};class ce{static getInstance(e,t){return se[e]=se[e]||new ce,se[e]._maxConcurrentRequests=t,se[e]}async fetch(e){return new Promise(((t,r)=>{this._queue.push({params:e,resolve:t,reject:r}),this._processQueue()}))}_processQueue(){for(;this._inFlight<this._maxConcurrentRequests&&this._queue.length>0;){let{params:e,resolve:t,reject:r}=this._queue.shift(),{url:n,options:i}=e;this._inFlight++;let a=JSON.stringify({url:n,options:i});le[a]||(le[a]=Cr.base(n,i)),le[a].then((e=>{this._inFlight--,t(e),this._processQueue()})).catch((e=>{this._inFlight--,r(e),this._processQueue()})).finally((()=>{delete le[a]}))}}constructor(){oe(this,"_maxConcurrentRequests",3),oe(this,"_inFlight",0),oe(this,"_queue",[])}}var ue,de="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},he=Object.prototype;var fe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||he)};var pe=function(e,t){return function(r){return e(t(r))}},me=pe(Object.keys,Object),ge=fe,_e=me,ve=Object.prototype.hasOwnProperty;var ye=function(e){if(!ge(e))return _e(e);var t=[];for(var r in Object(e))ve.call(e,r)&&"constructor"!=r&&t.push(r);return t},we="object"==typeof de&&de&&de.Object===Object&&de,Ee=we,be="object"==typeof self&&self&&self.Object===Object&&self,Te=Ee||be||Function("return this")(),Se=Te.Symbol,xe=Se,Pe=Object.prototype,Re=Pe.hasOwnProperty,Ae=Pe.toString,ke=xe?xe.toStringTag:void 0;var Ie=function(e){var t=Re.call(e,ke),r=e[ke];try{e[ke]=void 0;var n=!0}catch(e){}var i=Ae.call(e);return n&&(t?e[ke]=r:delete e[ke]),i},Ce=Object.prototype.toString;var De=function(e){return Ce.call(e)},Oe=Ie,Ne=De,Me=Se?Se.toStringTag:void 0;var Le=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Me&&Me in Object(e)?Oe(e):Ne(e)};var Fe=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},$e=Le,je=Fe;var Ue=function(e){if(!je(e))return!1;var t=$e(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ge=Te["__core-js_shared__"],Be=function(){var e=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var We=function(e){return!!Be&&Be in e},ze=Function.prototype.toString;var He=function(e){if(null!=e){try{return ze.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ve=Ue,qe=We,Ke=Fe,Xe=He,Ye=/^\[object .+?Constructor\]$/,Je=Function.prototype,Qe=Object.prototype,Ze=Je.toString,et=Qe.hasOwnProperty,tt=RegExp("^"+Ze.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var rt=function(e){return!(!Ke(e)||qe(e))&&(Ve(e)?tt:Ye).test(Xe(e))};var nt=function(e,t){return null==e?void 0:e[t]},it=rt,at=nt;var ot=function(e,t){var r=at(e,t);return it(r)?r:void 0},st=ot(Te,"DataView"),lt=ot(Te,"Map"),ct=ot(Te,"Promise"),ut=ot(Te,"Set"),dt=ot(Te,"WeakMap"),ht=Le,ft=He,pt="[object Map]",mt="[object Promise]",gt="[object Set]",_t="[object WeakMap]",vt="[object DataView]",yt=ft(st),wt=ft(lt),Et=ft(ct),bt=ft(ut),Tt=ft(dt),St=ht;(st&&St(new st(new ArrayBuffer(1)))!=vt||lt&&St(new lt)!=pt||ct&&St(ct.resolve())!=mt||ut&&St(new ut)!=gt||dt&&St(new dt)!=_t)&&(St=function(e){var t=ht(e),r="[object Object]"==t?e.constructor:void 0,n=r?ft(r):"";if(n)switch(n){case yt:return vt;case wt:return pt;case Et:return mt;case bt:return gt;case Tt:return _t}return t});var xt=St;var Pt=function(e){return null!=e&&"object"==typeof e},Rt=Le,At=Pt;var kt=function(e){return At(e)&&"[object Arguments]"==Rt(e)},It=kt,Ct=Pt,Dt=Object.prototype,Ot=Dt.hasOwnProperty,Nt=Dt.propertyIsEnumerable,Mt=It(function(){return arguments}())?It:function(e){return Ct(e)&&Ot.call(e,"callee")&&!Nt.call(e,"callee")},Lt=Mt,Ft=Array.isArray;var $t=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},jt=Ue,Ut=$t;var Gt=function(e){return null!=e&&Ut(e.length)&&!jt(e)},Bt={exports:{}};var Wt=function(){return!1};!function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Te.Buffer:void 0,a=i?i.isBuffer:void 0;e.exports=a||Wt}(Bt,Bt.exports);var zt=Le,Ht=$t,Vt=Pt,qt={};qt["[object Float32Array]"]=qt["[object Float64Array]"]=qt["[object Int8Array]"]=qt["[object Int16Array]"]=qt["[object Int32Array]"]=qt["[object Uint8Array]"]=qt["[object Uint8ClampedArray]"]=qt["[object Uint16Array]"]=qt["[object Uint32Array]"]=!0,qt["[object Arguments]"]=qt["[object Array]"]=qt["[object ArrayBuffer]"]=qt["[object Boolean]"]=qt["[object DataView]"]=qt["[object Date]"]=qt["[object Error]"]=qt["[object Function]"]=qt["[object Map]"]=qt["[object Number]"]=qt["[object Object]"]=qt["[object RegExp]"]=qt["[object Set]"]=qt["[object String]"]=qt["[object WeakMap]"]=!1;var Kt=function(e){return Vt(e)&&Ht(e.length)&&!!qt[zt(e)]};var Xt=function(e){return function(t){return e(t)}},Yt={exports:{}};!function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&we.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(Yt,Yt.exports);var Jt=Kt,Qt=Xt,Zt=Yt.exports,er=Zt&&Zt.isTypedArray,tr=er?Qt(er):Jt,rr=ye,nr=xt,ir=Lt,ar=Ft,or=Gt,sr=Bt.exports,lr=fe,cr=tr,ur=Object.prototype.hasOwnProperty;var dr=function(e){if(null==e)return!0;if(or(e)&&(ar(e)||"string"==typeof e||"function"==typeof e.splice||sr(e)||cr(e)||ir(e)))return!e.length;var t=nr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(lr(e))return!rr(e).length;for(var r in e)if(ur.call(e,r))return!1;return!0};let hr=(e,t,r)=>{let n,i;if(!t&&!r)return[0,0];let a=RegExp(`^(?:\\p{L}|\\p{N}|${t})$`,"gu"),o=RegExp(`^(?:\\p{L}|\\p{N}|${r})$`,"gu"),s=/["\u201e]$/,l=/^["\u201e]/,c=e.split("").reverse().join(""),u=Math.floor(e.length/2),d=!1,h=!1,f=0,p=0;for(let t=0;t<u;t++){let r=e.charAt(t),u=c.charAt(t);if(!0!==n&&null===r.match(a)?(d=null!==r.match(l),f+=1,n=!1):r.match(/\s/)&&!1===n?f+=1:n=!0,!0!==i&&null===u.match(o)?(h=null!==u.match(s),p+=1,i=!1):u.match(/\s/)&&!1===i?p+=1:i=!0,n&&i)break}return d&&!h&&(f-=1),h&&!d&&(p-=1),[f,p]},fr=async(e,t,r,n=!1,i,a,o,s,l,c,u="")=>{if(n){let n=e;i||(n=gr(t,e,r,l,c));let d=(e=>e.flatMap(((t,r)=>{let n=t.paraID;return t.sentences.map(((t,i)=>{var a,o,s,l;let{start:c,text:u}=t,d=(null===(a=e[r].sentences[i-1])||void 0===a?void 0:a.text)||"",h=(null===(o=e[r].sentences[i+1])||void 0===o?void 0:o.text)||"",f=null===(s=t.grammarResponse)||void 0===s?void 0:s.contentToReplace.map((e=>({replacementWord:e.replacementWord,startIndex:e.startIndex,endIndex:e.endIndex,originalWord:e.originalWord,isSuppressed:e.isSuppressed})));return{paraId:n,sentenceId:t.sentenceId,offset:c,errors:f,gcTimedOut:(null===(l=t.grammarResponse)||void 0===l?void 0:l.timedOut)||!1,text:u,pre:d,post:h}}))})))([n]),h=async function(e){let{recommendationInput:t,recommendationResponseCallback:r,writingGoal:n=""}=e,i=await $r.get("REGIONAL_LANGUAGE"),a=await $r.get("INPUT_LANGUAGE")||"en",o=await $r.get("RECOMMENDATION_DISABLED_CATEGORIES"),s=t;if("true"===await $r.get("RECOMMENDATION_PRE_VALIDATE_CHECK")&&(s=function(e){return e.filter((e=>{var t;return 0===(null===(t=e.errors)||void 0===t?void 0:t.length)&&""!==e.text.trim()&&!0!==e.gcTimedOut})).filter((e=>{var t;return null===(t=e.errors)||void 0===t?void 0:t.every((e=>e.isSuppressed))}))}(t)),0===s.length)return;let l=[],c=function(e,t,r,n,i=""){let a={language:`${e.toLowerCase()}-${t.toLowerCase()}`,texts:r,writingGoal:i};return n?{...a,disabledCategories:n}:a}(a,i,s,o,n),u=await Rn(c,{signal:e.signal,headers:e.headers});return(null==u?void 0:u.length)>0&&(r&&r(u),l.push(u)),l}({recommendationInput:d,recommendationResponseCallback:a,signal:o.signal,headers:o.headers,writingGoal:u});s.push(h)}};!function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,r,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=i;if(null==e||null==r)throw Error("Null input. (diff_main)");if(e==r)return e?[new t.Diff(0,e)]:[];void 0===n&&(n=!0);var o=n,s=this.diff_commonPrefix(e,r),l=e.substring(0,s);e=e.substring(s),r=r.substring(s),s=this.diff_commonSuffix(e,r);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),r=r.substring(0,r.length-s);var u=this.diff_compute_(e,r,o,a);return l&&u.unshift(new t.Diff(0,l)),c&&u.push(new t.Diff(0,c)),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,r,n,i){if(!e)return[new t.Diff(1,r)];if(!r)return[new t.Diff(-1,e)];var a,o=e.length>r.length?e:r,s=e.length>r.length?r:e,l=o.indexOf(s);if(-1!=l)return a=[new t.Diff(1,o.substring(0,l)),new t.Diff(0,s),new t.Diff(1,o.substring(l+s.length))],e.length>r.length&&(a[0][0]=a[2][0]=-1),a;if(1==s.length)return[new t.Diff(-1,e),new t.Diff(1,r)];var c=this.diff_halfMatch_(e,r);if(c){var u=c[0],d=c[1],h=c[2],f=c[3],p=c[4],m=this.diff_main(u,h,n,i),g=this.diff_main(d,f,n,i);return m.concat([new t.Diff(0,p)],g)}return n&&e.length>100&&r.length>100?this.diff_lineMode_(e,r,i):this.diff_bisect_(e,r,i)},t.prototype.diff_lineMode_=function(e,r,n){var i=this.diff_linesToChars_(e,r);e=i.chars1,r=i.chars2;var a=i.lineArray,o=this.diff_main(e,r,!1,n);this.diff_charsToLines_(o,a),this.diff_cleanupSemantic(o),o.push(new t.Diff(0,""));for(var s=0,l=0,c=0,u="",d="";s<o.length;){switch(o[s][0]){case 1:c++,d+=o[s][1];break;case-1:l++,u+=o[s][1];break;case 0:if(l>=1&&c>=1){o.splice(s-l-c,l+c),s=s-l-c;for(var h=this.diff_main(u,d,!1,n),f=h.length-1;f>=0;f--)o.splice(s,0,h[f]);s+=h.length}c=0,l=0,u="",d=""}s++}return o.pop(),o},t.prototype.diff_bisect_=function(e,r,n){for(var i=e.length,a=r.length,o=Math.ceil((i+a)/2),s=2*o,l=Array(s),c=Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[o+1]=0,c[o+1]=0;for(var d=i-a,h=d%2!=0,f=0,p=0,m=0,g=0,_=0;_<o&&!((new Date).getTime()>n);_++){for(var v=-_+f;v<=_-p;v+=2){for(var y=o+v,w=(x=v==-_||v!=_&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1)-v;x<i&&w<a&&e.charAt(x)==r.charAt(w);)x++,w++;if(l[y]=x,x>i)p+=2;else if(w>a)f+=2;else if(h){if((T=o+d-v)>=0&&T<s&&-1!=c[T])if(x>=(b=i-c[T]))return this.diff_bisectSplit_(e,r,x,w,n)}}for(var E=-_+m;E<=_-g;E+=2){for(var b,T=o+E,S=(b=E==-_||E!=_&&c[T-1]<c[T+1]?c[T+1]:c[T-1]+1)-E;b<i&&S<a&&e.charAt(i-b-1)==r.charAt(a-S-1);)b++,S++;if(c[T]=b,b>i)g+=2;else if(S>a)m+=2;else if(!h){if((y=o+d-E)>=0&&y<s&&-1!=l[y]){var x;w=o+(x=l[y])-y;if(x>=(b=i-b))return this.diff_bisectSplit_(e,r,x,w,n)}}}}return[new t.Diff(-1,e),new t.Diff(1,r)]},t.prototype.diff_bisectSplit_=function(e,t,r,n,i){var a=e.substring(0,r),o=t.substring(0,n),s=e.substring(r),l=t.substring(n),c=this.diff_main(a,o,!1,i),u=this.diff_main(s,l,!1,i);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var r=[],n={};function i(e){for(var t="",i=0,o=-1,s=r.length;o<e.length-1;){-1==(o=e.indexOf("\n",i))&&(o=e.length-1);var l=e.substring(i,o+1);(n.hasOwnProperty?n.hasOwnProperty(l):void 0!==n[l])?t+=String.fromCharCode(n[l]):(s==a&&(l=e.substring(i),o=e.length),t+=String.fromCharCode(s),n[l]=s,r[s++]=l),i=o+1}return t}r[0]="";var a=4e4;return a=65535,{chars1:i(e),chars2:i(t),lineArray:r}},t.prototype.diff_charsToLines_=function(e,t){for(var r=0;r<e.length;r++){for(var n=e[r][1],i=[],a=0;a<n.length;a++)i[a]=t[n.charCodeAt(a)];e[r][1]=i.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,a=0;r<i;)e.substring(a,i)==t.substring(a,i)?a=r=i:n=i,i=Math.floor((n-r)/2+r);return i},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,a=0;r<i;)e.substring(e.length-i,e.length-a)==t.substring(t.length-i,t.length-a)?a=r=i:n=i,i=Math.floor((n-r)/2+r);return i},t.prototype.diff_commonOverlap_=function(e,t){var r=e.length,n=t.length;if(0==r||0==n)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var i=Math.min(r,n);if(e==t)return i;for(var a=0,o=1;;){var s=e.substring(i-o),l=t.indexOf(s);if(-1==l)return a;o+=l,(0==l||e.substring(i-o)==t.substring(0,o))&&(a=o,o++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var r,n,i,a,o,s=e.length>t.length?e:t,l=e.length>t.length?t:e;if(s.length<4||2*l.length<s.length)return null;var c=this;function u(e,t,r){for(var n,i,a,o,s=e.substring(r,r+Math.floor(e.length/4)),l=-1,u="";-1!=(l=t.indexOf(s,l+1));){var d=c.diff_commonPrefix(e.substring(r),t.substring(l)),h=c.diff_commonSuffix(e.substring(0,r),t.substring(0,l));u.length<h+d&&(u=t.substring(l-h,l)+t.substring(l,l+d),n=e.substring(0,r-h),i=e.substring(r+d),a=t.substring(0,l-h),o=t.substring(l+d))}return 2*u.length>=e.length?[n,i,a,o,u]:null}var d=u(s,l,Math.ceil(s.length/4)),h=u(s,l,Math.ceil(s.length/2));return d||h?(r=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(n=r[0],i=r[1],a=r[2],o=r[3]):(a=r[0],o=r[1],n=r[2],i=r[3]),[n,i,a,o,r[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var r=!1,n=[],i=0,a=null,o=0,s=0,l=0,c=0,u=0;o<e.length;)0==e[o][0]?(n[i++]=o,s=c,l=u,c=0,u=0,a=e[o][1]):(1==e[o][0]?c+=e[o][1].length:u+=e[o][1].length,a&&a.length<=Math.max(s,l)&&a.length<=Math.max(c,u)&&(e.splice(n[i-1],0,new t.Diff(-1,a)),e[n[i-1]+1][0]=1,i--,o=--i>0?n[i-1]:-1,s=0,l=0,c=0,u=0,a=null,r=!0)),o++;for(r&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var d=e[o-1][1],h=e[o][1],f=this.diff_commonOverlap_(d,h),p=this.diff_commonOverlap_(h,d);f>=p?(f>=d.length/2||f>=h.length/2)&&(e.splice(o,0,new t.Diff(0,h.substring(0,f))),e[o-1][1]=d.substring(0,d.length-f),e[o+1][1]=h.substring(f),o++):(p>=d.length/2||p>=h.length/2)&&(e.splice(o,0,new t.Diff(0,d.substring(0,p))),e[o-1][0]=1,e[o-1][1]=h.substring(0,h.length-p),e[o+1][0]=-1,e[o+1][1]=d.substring(p),o++),o++}o++}},t.prototype.diff_cleanupSemanticLossless=function(e){function r(e,r){if(!e||!r)return 6;var n=e.charAt(e.length-1),i=r.charAt(0),a=n.match(t.nonAlphaNumericRegex_),o=i.match(t.nonAlphaNumericRegex_),s=a&&n.match(t.whitespaceRegex_),l=o&&i.match(t.whitespaceRegex_),c=s&&n.match(t.linebreakRegex_),u=l&&i.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&r.match(t.blanklineStartRegex_);return d||h?5:c||u?4:a&&!s&&l?3:s||l?2:a||o?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var i=e[n-1][1],a=e[n][1],o=e[n+1][1],s=this.diff_commonSuffix(i,a);if(s){var l=a.substring(a.length-s);i=i.substring(0,i.length-s),a=l+a.substring(0,a.length-s),o=l+o}for(var c=i,u=a,d=o,h=r(i,a)+r(a,o);a.charAt(0)===o.charAt(0);){i+=a.charAt(0),a=a.substring(1)+o.charAt(0),o=o.substring(1);var f=r(i,a)+r(a,o);f>=h&&(h=f,c=i,u=a,d=o)}e[n-1][1]!=c&&(c?e[n-1][1]=c:(e.splice(n-1,1),n--),e[n][1]=u,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var r=!1,n=[],i=0,a=null,o=0,s=!1,l=!1,c=!1,u=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(c||u)?(n[i++]=o,s=c,l=u,a=e[o][1]):(i=0,a=null),c=u=!1):(-1==e[o][0]?u=!0:c=!0,a&&(s&&l&&c&&u||a.length<this.Diff_EditCost/2&&s+l+c+u==3)&&(e.splice(n[i-1],0,new t.Diff(-1,a)),e[n[i-1]+1][0]=1,i--,a=null,s&&l?(c=u=!0,i=0):(o=--i>0?n[i-1]:-1,c=u=!1),r=!0)),o++;r&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var r,n=0,i=0,a=0,o="",s="";n<e.length;)switch(e[n][0]){case 1:a++,s+=e[n][1],n++;break;case-1:i++,o+=e[n][1],n++;break;case 0:i+a>1?(0!==i&&0!==a&&(0!==(r=this.diff_commonPrefix(s,o))&&(n-i-a>0&&0==e[n-i-a-1][0]?e[n-i-a-1][1]+=s.substring(0,r):(e.splice(0,0,new t.Diff(0,s.substring(0,r))),n++),s=s.substring(r),o=o.substring(r)),0!==(r=this.diff_commonSuffix(s,o))&&(e[n][1]=s.substring(s.length-r)+e[n][1],s=s.substring(0,s.length-r),o=o.substring(0,o.length-r))),n-=i+a,e.splice(n,i+a),o.length&&(e.splice(n,0,new t.Diff(-1,o)),n++),s.length&&(e.splice(n,0,new t.Diff(1,s)),n++),n++):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,a=0,i=0,o="",s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var r,n=0,i=0,a=0,o=0;for(r=0;r<e.length&&(1!==e[r][0]&&(n+=e[r][1].length),-1!==e[r][0]&&(i+=e[r][1].length),!(n>t));r++)a=n,o=i;return e.length!=r&&-1===e[r][0]?o:o+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],r=/&/g,n=/</g,i=/>/g,a=/\n/g,o=0;o<e.length;o++){var s=e[o][0],l=e[o][1].replace(r,"&amp;").replace(n,"&lt;").replace(i,"&gt;").replace(a,"&para;<br>");switch(s){case 1:t[o]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:t[o]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[o]="<span>"+l+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],r=0;r<e.length;r++)1!==e[r][0]&&(t[r]=e[r][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],r=0;r<e.length;r++)-1!==e[r][0]&&(t[r]=e[r][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,r=0,n=0,i=0;i<e.length;i++){var a=e[i][0],o=e[i][1];switch(a){case 1:r+=o.length;break;case-1:n+=o.length;break;case 0:t+=Math.max(r,n),r=0,n=0}}return t+Math.max(r,n)},t.prototype.diff_toDelta=function(e){for(var t=[],r=0;r<e.length;r++)switch(e[r][0]){case 1:t[r]="+"+encodeURI(e[r][1]);break;case-1:t[r]="-"+e[r][1].length;break;case 0:t[r]="="+e[r][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,r){for(var n=[],i=0,a=0,o=r.split(/\t/g),s=0;s<o.length;s++){var l=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[i++]=new t.Diff(1,decodeURI(l))}catch(e){throw Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var c=parseInt(l,10);if(isNaN(c)||c<0)throw Error("Invalid number in diff_fromDelta: "+l);var u=e.substring(a,a+=c);"="==o[s].charAt(0)?n[i++]=new t.Diff(0,u):n[i++]=new t.Diff(-1,u);break;default:if(o[s])throw Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(a!=e.length)throw Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return n},t.prototype.match_main=function(e,t,r){if(null==e||null==t||null==r)throw Error("Null input. (match_main)");return r=Math.max(0,Math.min(r,e.length)),e==t?0:e.length?e.substring(r,r+t.length)==t?r:this.match_bitap_(e,t,r):-1},t.prototype.match_bitap_=function(e,t,r){if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var n,i,a,o=this.match_alphabet_(t),s=this;function l(e,n){var i=e/t.length,a=Math.abs(r-n);return s.Match_Distance?i+a/s.Match_Distance:a?1:i}var c=this.Match_Threshold,u=e.indexOf(t,r);-1!=u&&(c=Math.min(l(0,u),c),-1!=(u=e.lastIndexOf(t,r+t.length))&&(c=Math.min(l(0,u),c)));var d=1<<t.length-1;u=-1;for(var h=t.length+e.length,f=0;f<t.length;f++){for(n=0,i=h;n<i;)l(f,r+i)<=c?n=i:h=i,i=Math.floor((h-n)/2+n);h=i;var p=Math.max(1,r-i+1),m=Math.min(r+i,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<f)-1;for(var _=m;_>=p;_--){var v=o[e.charAt(_-1)];if(g[_]=0===f?(g[_+1]<<1|1)&v:(g[_+1]<<1|1)&v|(a[_+1]|a[_])<<1|1|a[_+1],g[_]&d){var y=l(f,_-1);if(y<=c){if(c=y,!((u=_-1)>r))break;p=Math.max(1,2*r-u)}}}if(l(f+1,r)>c)break;a=g}return u},t.prototype.match_alphabet_=function(e){for(var t={},r=0;r<e.length;r++)t[e.charAt(r)]=0;for(r=0;r<e.length;r++)t[e.charAt(r)]|=1<<e.length-r-1;return t},t.prototype.patch_addContext_=function(e,r){if(0!=r.length){if(null===e.start2)throw Error("patch not initialized");for(var n=r.substring(e.start2,e.start2+e.length1),i=0;r.indexOf(n)!=r.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=r.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var a=r.substring(e.start2-i,e.start2);a&&e.diffs.unshift(new t.Diff(0,a));var o=r.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push(new t.Diff(0,o)),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+o.length,e.length2+=a.length+o.length}},t.prototype.patch_make=function(e,r,n){if("string"==typeof e&&"string"==typeof r&&void 0===n)i=e,(a=this.diff_main(i,r,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&"object"==typeof e&&void 0===r&&void 0===n)a=e,i=this.diff_text1(a);else if("string"==typeof e&&r&&"object"==typeof r&&void 0===n)i=e,a=r;else{if("string"!=typeof e||"string"!=typeof r||!n||"object"!=typeof n)throw Error("Unknown call format to patch_make.");i=e,a=n}if(0===a.length)return[];for(var i,a,o=[],s=new t.patch_obj,l=0,c=0,u=0,d=i,h=i,f=0;f<a.length;f++){var p=a[f][0],m=a[f][1];switch(l||0===p||(s.start1=c,s.start2=u),p){case 1:s.diffs[l++]=a[f],s.length2+=m.length,h=h.substring(0,u)+m+h.substring(u);break;case-1:s.length1+=m.length,s.diffs[l++]=a[f],h=h.substring(0,u)+h.substring(u+m.length);break;case 0:m.length<=2*this.Patch_Margin&&l&&a.length!=f+1?(s.diffs[l++]=a[f],s.length1+=m.length,s.length2+=m.length):m.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,d),o.push(s),s=new t.patch_obj,l=0,d=h,c=u)}1!==p&&(c+=m.length),-1!==p&&(u+=m.length)}return l&&(this.patch_addContext_(s,d),o.push(s)),o},t.prototype.patch_deepCopy=function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n],a=new t.patch_obj;a.diffs=[];for(var o=0;o<i.diffs.length;o++)a.diffs[o]=new t.Diff(i.diffs[o][0],i.diffs[o][1]);a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,r[n]=a}return r},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);t=r+t+r,this.patch_splitMax(e);for(var n=0,i=[],a=0;a<e.length;a++){var o=e[a].start2+n,s=this.diff_text1(e[a].diffs),l=-1;if(s.length>this.Match_MaxBits?-1!=(u=this.match_main(t,s.substring(0,this.Match_MaxBits),o))&&(-1==(l=this.match_main(t,s.substring(s.length-this.Match_MaxBits),o+s.length-this.Match_MaxBits))||u>=l)&&(u=-1):u=this.match_main(t,s,o),-1==u)i[a]=!1,n-=e[a].length2-e[a].length1;else if(i[a]=!0,n=u-o,s==(d=-1==l?t.substring(u,u+s.length):t.substring(u,l+this.Match_MaxBits)))t=t.substring(0,u)+this.diff_text2(e[a].diffs)+t.substring(u+s.length);else{var c=this.diff_main(s,d,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(c)/s.length>this.Patch_DeleteThreshold)i[a]=!1;else{this.diff_cleanupSemanticLossless(c);for(var u,d,h,f=0,p=0;p<e[a].diffs.length;p++){var m=e[a].diffs[p];0!==m[0]&&(h=this.diff_xIndex(c,f)),1===m[0]?t=t.substring(0,u+h)+m[1]+t.substring(u+h):-1===m[0]&&(t=t.substring(0,u+h)+t.substring(u+this.diff_xIndex(c,f+m[1].length))),-1!==m[0]&&(f+=m[1].length)}}}}return[t=t.substring(r.length,t.length-r.length),i]},t.prototype.patch_addPadding=function(e){for(var r=this.Patch_Margin,n="",i=1;i<=r;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=r,e[i].start2+=r;var a=e[0],o=a.diffs;if(0==o.length||0!=o[0][0])o.unshift(new t.Diff(0,n)),a.start1-=r,a.start2-=r,a.length1+=r,a.length2+=r;else if(r>o[0][1].length){var s=r-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],a.start1-=s,a.start2-=s,a.length1+=s,a.length2+=s}if(0==(o=(a=e[e.length-1]).diffs).length||0!=o[o.length-1][0])o.push(new t.Diff(0,n)),a.length1+=r,a.length2+=r;else if(r>o[o.length-1][1].length){s=r-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),a.length1+=s,a.length2+=s}return n},t.prototype.patch_splitMax=function(e){for(var r=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=r)){var i=e[n];e.splice(n--,1);for(var a=i.start1,o=i.start2,s="";0!==i.diffs.length;){var l=new t.patch_obj,c=!0;for(l.start1=a-s.length,l.start2=o-s.length,""!==s&&(l.length1=l.length2=s.length,l.diffs.push(new t.Diff(0,s)));0!==i.diffs.length&&l.length1<r-this.Patch_Margin;){var u=i.diffs[0][0],d=i.diffs[0][1];1===u?(l.length2+=d.length,o+=d.length,l.diffs.push(i.diffs.shift()),c=!1):-1===u&&1==l.diffs.length&&0==l.diffs[0][0]&&d.length>2*r?(l.length1+=d.length,a+=d.length,c=!1,l.diffs.push(new t.Diff(u,d)),i.diffs.shift()):(d=d.substring(0,r-l.length1-this.Patch_Margin),l.length1+=d.length,a+=d.length,0===u?(l.length2+=d.length,o+=d.length):c=!1,l.diffs.push(new t.Diff(u,d)),d==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(d.length))}s=(s=this.diff_text2(l.diffs)).substring(s.length-this.Patch_Margin);var h=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==h&&(l.length1+=h.length,l.length2+=h.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=h:l.diffs.push(new t.Diff(0,h))),c||e.splice(++n,0,l)}}},t.prototype.patch_toText=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t.join("")},t.prototype.patch_fromText=function(e){var r=[];if(!e)return r;for(var n=e.split("\n"),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var o=n[i].match(a);if(!o)throw Error("Invalid patch string: "+n[i]);var s=new t.patch_obj;for(r.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),i++;i<n.length;){var l=n[i].charAt(0);try{var c=decodeURI(n[i].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+c)}if("-"==l)s.diffs.push(new t.Diff(-1,c));else if("+"==l)s.diffs.push(new t.Diff(1,c));else if(" "==l)s.diffs.push(new t.Diff(0,c));else{if("@"==l)break;if(""!==l)throw Error('Invalid patch mode "'+l+'" in: '+c)}i++}}return r},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[r+1]=e+encodeURI(this.diffs[r][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}({exports:{}});let pr=e=>{try{return"structuredClone"in globalThis?structuredClone(e):JSON.parse(JSON.stringify(e))}catch(t){return e}},mr=e=>{let t=[65279,160],r=0;if(0===e.length)return r;for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);t.includes(i)||(r=(r<<5)-r+i,r&=r)}return r},gr=(e,t,r=null,n,i)=>{let a={},o=n&&i;r&&r.sentences&&r.sentences.forEach((e=>a[e.text]=e));let s=[],l=0;for(let t=0;t<e.length;t++){var c,u,d;let r=e[t],h=r.text;if(o){let[e,t]=hr(r.text,n,i),a=r.text.length-t;h=r.text.substring(e,a)}let f=pr(a[h]);(null==f?void 0:f.timedOut)&&(l+=1),(null==f?void 0:f.contentToReplace)&&f.contentToReplace.forEach((e=>{e.startIndex=e.startIndex+r.start,e.endIndex=e.endIndex+r.start})),(null==f||null===(c=f.fluencyEdits)||void 0===c?void 0:c.result)&&(null==f||null===(u=f.fluencyEdits)||void 0===u||null===(d=u.result)||void 0===d?void 0:d.length)>0&&(f.isFluencyEdits=!0,f.fluencyEdits.result.length>1&&(f.isSentenceLevelFluencyEdits=!0)),s.push({text:r.text,start:r.start,end:r.end,pastCumulativeLength:r.start,sentenceId:`${mr(r.text+t)}`,isSentencePhrase:!1,...f?{grammarResponse:f}:null})}return t.sentences=s,t.sentenceTimeOutCount=l,t},_r=e=>{for(let t=0;t<e.sentences.length;t++){let r=e.sentences[t];if(r.timedOut&&(e.timedOut=!0),r.modelID&&"NA"!==r.modelID&&(e.modelID=r.modelID),e.timedOut&&e.modelID&&"NA"!==e.modelID)break}let t=Array.from((e=>{let t=new Set;return e.sentences.forEach((e=>{e.modelID&&t.add(e.modelID)})),t})(e));return e.modelIDArr=t,e};async function vr(e){try{let t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")}catch(e){return""}}let yr=(e,t)=>t.includes("api/utils/grammar-check")?e&&e.contentToReplace&&!e.timedOut:t.includes("api/utils/recommendation")?e&&e.recommendations&&!e.error:t.includes("api/utils/fluency-score")||t.includes("api/utils/clarity-score")||t.includes("api/utils/quality-score")?e&&null!==e.score&&e.score>=0:e&&!e.timedOut;async function wr(e,t){try{for(let r of e.recommendations)for(let e of r.phrases){let r=e.text;if(e.isLocked&&r){if(!await F(r)){let e={data:{recommendationCacheKey:t}};await $(r,e,864e6)}}}}catch(e){}}let Er=async(e,t)=>{var r,n,i;let a="true"===await $r.get("IS_PREMIUM_USER")?"premium":"",o=await br(),s=t.cacheSuffix||"",{requestId:l,batch:c,maxConcurrentRequests:u,cacheDuration:d,timeout:h,retry:f,...p}=t,{headers:m={}}=t;delete p.headers;let g=null!==(r=m["platform-type"])&&void 0!==r?r:"",_=null!==(n=m["qb-dialect"])&&void 0!==n?n:"",v=null!==(i=m["qb-Product"])&&void 0!==i?i:"";return e+t.method+o+a+s+g+_+v+JSON.stringify(p)},br=async()=>{let e=await $r.get("USER_ID_TOKEN");return(null==e?void 0:e.length)>0&&"empty-token"!==e},Tr=async(e,t)=>{var r;let n="true"===await $r.get("IS_PREMIUM_USER"),i=await br();return!n&&i&&(e=>e.includes("api/utils/recommendation")&&!e.includes("utils/recommendations-list"))(e)&&(null==t||null===(r=t.recommendations)||void 0===r?void 0:r.length)>0},Sr=async(e,t)=>{var r,n,i,a,o,s,l,c,u,d;let h,f=!1;if("text"===t.batchKey)try{let e=(null===(a=null==t?void 0:t.json)||void 0===a||null===(o=a.text)||void 0===o||null===(s=o.text)||void 0===s?void 0:s.trim())||"",r=await vr(e);f=void 0!==await D(r)}catch(e){f=!1}if(f)return{fixed:null===(l=null==t?void 0:t.json)||void 0===l||null===(c=l.text)||void 0===c?void 0:c.text,text:null===(u=null==t?void 0:t.json)||void 0===u||null===(d=u.text)||void 0===d?void 0:d.text,contentToReplace:[],timedOut:!1,modelID:"",_cached:!0};if("api/utils/grammar-check"===e&&0===(null==t||null===(r=t.json)||void 0===r||null===(n=r.text)||void 0===n||null===(i=n.text)||void 0===i?void 0:i.trim().length))return(e=>({text:e,fixed:e,content_to_replace:[],explainer:[],modelID:null,timedOut:!1}))(t.json.text);h=t.cacheKey?t.cacheKey:await Er(e,t);let p=await G(h);return p?(await Tr(e,p)&&await wr(p,h),p):void 0},xr=(e,t)=>{var r;if(0===(null==e||null===(r=e.recommendations)||void 0===r?void 0:r.length))return ue.recommendationNone;if(t)return ue.recommendationPremium;let n=!1,i=!1;for(let t of e.recommendations)t.phrases.forEach((e=>{e.isLocked?n=!0:(void 0===e.isLocked||null===e.isLocked)&&""===e.text&&(i=!0)}));return i?ue.recommendationUpsell:n?ue.recommendationLocked:ue.recommendationPremium},Pr=(e,t,r)=>{let n=e.split("?")[0].replace(/^api\/[^/]+\//,"");return"recommendation"===n?xr(r,t):n},Rr=async(e,t,r)=>{let n=(null==t?void 0:t.cacheDuration)||0;if(n&&["get","post"].includes((null==t?void 0:t.method)||"")){let i;i=t.cacheKey?t.cacheKey:await Er(e,t);let a=await G(i);if(await Tr(e,r)&&await wr(r,i),!a){let t={...r,_cached:!0};if(!dr(t)){let r="true"===await $r.get("IS_PREMIUM_USER");t={...t,type:Pr(e,r,t)},await B(i,t,n)}}}},Ar=async()=>`${(await $r.get("INPUT_LANGUAGE")||"en").toLowerCase()}-${(await $r.get("REGIONAL_LANGUAGE")||"us").toLowerCase()}`,kr=async()=>`${(await $r.get("PLATFORM_TYPE")||"").toLowerCase()}`,Ir=async()=>{let e="";return"undefined"!=typeof navigator&&(e=null==navigator?void 0:navigator.language),{"qb-dialect":await Ar(),"platform-type":await kr(),"x-device-language":e}},Cr={post:async(e,t)=>{let r=ce.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),{headers:n}=t;return r.fetch({url:e,options:{...t,method:"post",headers:{...await Ir(),...n}}})},get:async(e,t)=>{let r=ce.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),{headers:n}=t;return r.fetch({url:e,options:{...t,method:"get",headers:{...n,...await Ir()}}})},base:async(e,t)=>{let r,{batchKey:n}=t;if(n)return await(async(e,t,r)=>{var n,i;let a=null!==(n=null==t?void 0:t.json)&&void 0!==n?n:{},o=null!==(i=a[r])&&void 0!==i?i:[],s=(e=>e.includes("api/utils/grammar-check")?"sentences":e.includes("api/utils/recommendation")?"data":e.includes("api/utils/fluency-score")||e.includes("api/utils/clarity-score")||e.includes("api/utils/quality-score")?"scores":"")(e),l=[],c=[],u={};for(let n of o){let i,s=o.indexOf(n),d={...a,[r]:n};!0!==t.skipCacheCheck&&(i=await Sr(e,{...t,json:d})),i?l[s]=i:(c.push(n),u[c.length-1]=s)}if(0===c.length)return{[s]:l};let{batch:d=4}=t,h=[];for(let e=0;e<c.length;e+=d)h.push(c.slice(e,e+d));let f=h.map((n=>{let i={...a,[r]:n};return ie.request(e,{...t,json:i})})),p=await Promise.allSettled(f),m=[];p.forEach(((t,n)=>{if("rejected"===t.status)m=[...m,...h[n].map(((e,t)=>({[r]:e})))];else{let i=((e,t)=>{var r,n,i,a,o,s;return t.includes("api/utils/grammar-check")?null==e||null===(r=e.value)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.sentences:t.includes("api/utils/recommendation")?null==e||null===(i=e.value)||void 0===i?void 0:i.data:t.includes("api/utils/fluency-score")||t.includes("api/utils/clarity-score")||t.includes("api/utils/quality-score")?null==e||null===(a=e.value)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.scores:null==e||null===(s=e.value)||void 0===s?void 0:s.data})(t,e);if(dr(i))m=[...m,...h[n].map(((e,t)=>({[r]:e})))];else{let e=i.map(((e,t)=>e||{[r]:h[n][t]}));m=[...m,...e]}}}));let g=m;for(let n of g){let i=g.indexOf(n);if(yr(n,e)){let s,c={...a,[r]:o[u[i]]},d={...t,json:c};!0!==t.skipCacheStorage&&(s=await Rr(e,d,n)),l[u[i]]=s||n}else l[u[i]]=n}return{[s]:l}})(e,t,n);if(!0!==t.skipCacheCheck){let r=await Sr(e,t);if(r)return r}let i=await ie.request(e,t);return!0!==t.skipCacheStorage&&(r=await Rr(e,t,i)),r||i},delete:async(e,t)=>{let r=ce.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),{headers:n}=t;return r.fetch({url:e,options:{...t,method:"delete",headers:{...n,...await Ir()}}})},patch:async(e,t)=>{let r=ce.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),{headers:n}=t;return r.fetch({url:e,options:{...t,method:"patch",headers:{...await Ir(),...n}}})}};function Dr(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Nr{get modelId(){return this._modelId}get isSkipped(){return!!this._skipReason}get skipReason(){return this._skipReason}get apiResponse(){return this._apiResponse}get isCached(){return this._apiResponse._cached||!1}async _skipLoad(e,t){this._skipReason=e,t&&await t()}constructor(){Or(this,"_modelId",""),Or(this,"_skipReason",void 0),Or(this,"_apiResponse",{data:null,_cached:!1})}}function Mr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Lr extends Nr{static async getInstance(e,t){return await new Lr(e,t)._load()}get suggestions(){return this._suggestions}get usageLeft(){return this._usageLeft}get errorMessage(){return this._errorMessage}get statusCode(){return this._statusCode}get utilization(){return this._utilization}async _isShortCircuit(){var e;return"CUSTOM"===this._command&&(null===(e=this._customCommandInput)||void 0===e||!e.length)}_fallback(){this._errorMessage="Custom command input not found!"}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}truncateTextToMaxWords(e,t="end"){if(!e)return"";try{let r=e.trim().split(/\s+/);if("end"!==t)return r.slice(0,75).join(" ");{let e=Math.max(0,r.length-75);return r.slice(e).join(" ")}}catch(t){return e}}async _afterLoad(){var e,t,r,n;let i=null===(e=this._apiResponse)||void 0===e?void 0:e.data;this._modelId=null===(t=this._apiResponse)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.modelID,this._suggestions=(null==i?void 0:i.suggestions.map((e=>({id:Dr(),text:e.text||"\n"+e.list.map((({text:e},t)=>`${t+1}. ${e} \n`)).join("")}))))||[],this._usageLeft=(null==i||null===(n=i.featureUsageData)||void 0===n?void 0:n.usageLeft)||0,this._utilization=function(e){let t={};try{!function e(r,n=""){if(r&&"object"==typeof r)for(let i in r)if(Object.prototype.hasOwnProperty.call(r,i)){let a=n?`${n}.${i}`:i;"object"==typeof r[i]&&null!==r[i]?e(r[i],a):"number"==typeof r[i]&&(t[a]=r[i])}}(e)}catch(e){R.error(e)}return t}(null==i?void 0:i.utilization)}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{let e=re[this._command],{timeout:t,retry:r,cacheDuration:n}=te,i={preText:this.truncateTextToMaxWords(this._preText,"end"),selectedText:this._selectedText,postText:this.truncateTextToMaxWords(this._postText,"start"),command:this._command,customCommandInput:"CUSTOM"===this._command?this._customCommandInput:void 0,attemptCount:this._attemptCount,maxPrompts:this._maxPrompts};this._maxPrompts||delete this._maxPrompts,"EXTERNAL_GENERATIVE"===e&&(i.postText=""),"INTERNAL_PARAPHRASE"===e&&(i.preText="",i.postText=""),this._apiResponse=await Cr.post("api/write-assist/ai-command",{json:i,timeout:t,retry:r,cacheDuration:n,...this._metaData.signal&&{signal:this._metaData.signal}}),await this._afterLoad()}catch(r){var e,t;R.error(r),"number"==typeof(null==r||null===(e=r.data)||void 0===e?void 0:e.usageLeft)&&(this._usageLeft=(null==r||null===(t=r.data)||void 0===t?void 0:t.usageLeft)||0),this._statusCode=null==r?void 0:r.status,this._errorMessage=r.message||"Something went wrong!",this._skipLoad("apiError")}return this}constructor({preText:e,postText:t,command:r,selectedText:n,customCommandInput:i,attemptCount:a,maxPrompts:o},s){super(),Mr(this,"_preText",void 0),Mr(this,"_postText",void 0),Mr(this,"_command",void 0),Mr(this,"_selectedText",void 0),Mr(this,"_attemptCount",void 0),Mr(this,"_customCommandInput",void 0),Mr(this,"_suggestions",[]),Mr(this,"_usageLeft",null),Mr(this,"_maxPrompts",void 0),Mr(this,"_errorMessage",void 0),Mr(this,"_statusCode",200),Mr(this,"_utilization",{}),Mr(this,"_metaData",{}),this._preText=e,this._postText=t,this._command=r,this._selectedText=n,this._customCommandInput=i,this._attemptCount=a,this._metaData=s,this._maxPrompts=o}}let Fr=new Map;Fr.set("PLATFORM_TYPE",""),Fr.set("PLATFORM_VERSION",""),Fr.set("IS_PREMIUM_USER",""),Fr.set("USER_ID_TOKEN",""),Fr.set("INPUT_LANGUAGE",""),Fr.set("REGIONAL_LANGUAGE",""),Fr.set("DEVICE_ID",""),Fr.set("GC_BATCH","4"),Fr.set("SS_BATCH","4"),Fr.set("PERSONALISATION_UPDATED_AT",""),Fr.set("PERSONALIZATION",""),Fr.set("VALID_START_SENTENCE_REGEX",""),Fr.set("VALID_END_SENTENCE_REGEX",""),Fr.set("GC_RESPONSE_POST_PROCESS",""),Fr.set("RECOMMENDATION_DISABLED_CATEGORIES",""),Fr.set("RECOMMENDATION_PRE_VALIDATE_CHECK",""),Fr.set("RECOMMENDATION_SENTENCES_PER_BATCH","5"),Fr.set("RECOMMENDATION_MIN_TEXT_LENGTH","10"),Fr.set("MAX_RECOMMENDATION_CONCURRENT_REQUESTS","6"),Fr.set("ENABLE_RECOMMENDATION_CONTEXT","false"),Fr.set("DISABLE_GC_AFTER_FIX_ERROR","false"),Fr.set("ON_DEVICE_LANGUAGE_CONFIG","");class $r{static get(e){return Fr.get(e)}static set(e,t){return Fr.set(e,t)}constructor(){}}function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ur extends Nr{static async getInstance(e,t){return await new Ur(e,t)._load()}get correctedSentences(){return this._correctedSentences}get isFallback(){return this._isFallback}_fallback(){this._isFallback=!1}_isShortCircuit(){var e;return 0===(null===(e=this._option.text)||void 0===e?void 0:e.length)}_beforeLoad(){let{cleanedText:e,mapRestoreInfo:t}=function(e){var t;let r=new Map,n=null==e||null===(t=e.text)||void 0===t?void 0:t.map((e=>{let t=function(e){let t=[],r=[],n=[],i="",a=!1;for(let o=0;o<e.length;o++){let s=e[o];if("\u2063"!==s)!a||" "!==s&&"\xa0"!==s?i+=s:a=!1;else{t.push(o);let s=" "===e[o-1]||"\xa0"===e[o-1],l=" "===e[o+1]||"\xa0"===e[o+1],c=!s&&!l;s&&l?(r.push({position:i.length,count:1}),a=!0):c&&(i+=" ",n.push({position:i.length,count:1}))}}return{original:e,cleaned:i,invisibleCharIndices:t,removedSpaces:r,addedSpaces:n}}(e.text);return r.set(t.cleaned,t),{...e,text:t.cleaned}}));return{cleanedText:n,mapRestoreInfo:r}}(this._option);this._option.text=e,this._mapRestoreInfo=t,this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _afterLoad(){var e,t,r,n,i;let a=function(e,t){try{var r;let n=null==e||null===(r=e.sentences)||void 0===r?void 0:r.map((e=>{let r=t.get(e.text);if(!r)return e;{let t=function(e,t){let r=null==e?void 0:e.map((e=>{var r;let{startIndex:n,endIndex:i}=function(e,t){let{invisibleCharIndices:r,removedSpaces:n,addedSpaces:i}=e,a=t.startIndex,o=t.endIndex;return n.forEach((({position:e})=>{e<=a&&a++,e<=o&&o++})),r.forEach((e=>{e<=a&&a++,e<=o&&o++})),i.forEach((({position:e})=>{e<=a&&a--,e<=o&&o--})),{startIndex:a,endIndex:o}}(t,{startIndex:e.startIndex,endIndex:e.endIndex});return{...e,startIndex:n,endIndex:i,sentenceSourceWordIndexes:{start:n,end:i},explainers:null==e||null===(r=e.explainers)||void 0===r?void 0:r.map((e=>({...e,original_substring_char_start:n,original_substring_char_end:i,source_word_indexes:{start:n,end:i}})))}}));return r||e}(e.contentToReplace,r),{fixedText:n,newContentToReplace:i}=function(e,t){let r=e,n=0,i=null==t?void 0:t.map((e=>{var t;let i=e.startIndex+n,a=e.endIndex+n+1;r=r.slice(0,i)+e.replacementWord+r.slice(a);let o=e.replacementWord.length;n=n+o-(a-i);let s=i+o;return{...e,sentenceTargetWordIndexes:{start:i,end:s},explainers:null==e||null===(t=e.explainers)||void 0===t?void 0:t.map((e=>({...e,replacement_substring_char_start:i,replacement_substring_char_end:s,target_word_indexes:{start:i,end:s}})))}}));return{fixedText:r,newContentToReplace:i||[]}}(r.original,t);return{...e,fixed:n,text:r.original,contentToReplace:i}}}));return n}catch(t){return(null==e?void 0:e.sentences)||[]}}(this._apiResponse.sentences?this._apiResponse:null===(e=this._apiResponse)||void 0===e?void 0:e.data,this._mapRestoreInfo);this._apiResponse.sentences=a,(null===(t=this._apiResponse)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.sentences)&&(this._apiResponse.data.sentences=a),this._correctedSentences=null===(n=this._apiResponse)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.sentences}async _load(){if(this._beforeLoad(),this.isSkipped)return this;let{timeout:e,retry:t,cacheDuration:r}=K,{batch:n}=K;this._metaData.batch&&(n=this._metaData.batch);try{var i;this._apiResponse=await Cr.post("api/utils/grammar-check",{json:{...this._option},headers:(null===(i=this._metaData)||void 0===i?void 0:i.headers)||{},batchKey:"text",timeout:e,retry:t,cacheDuration:r,batch:n,maxConcurrentRequests:"true"===await $r.get("IS_PREMIUM_USER")?10:8,cacheSuffix:await $r.get("PERSONALISATION_UPDATED_AT"),requestId:this._metaData.requestId,...this._metaData.signal&&{signal:this._metaData.signal}}),this._afterLoad()}catch(e){R.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e,t){super(),jr(this,"_option",void 0),jr(this,"_correctedSentences",[]),jr(this,"_isFallback",!1),jr(this,"_metaData",{batch:1,headers:{}}),jr(this,"_mapRestoreInfo",new Map),this._option=e,this._metaData=t}}function Gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Br extends Nr{static async getInstance(e,t,r){return await new Br(e,t,r)._load()}get sentences(){return this._sentences}get isFallback(){return this._isFallback}_fallback(){this._sentences=[{text:this._text,start:0,end:this._text.length-1}],this._isFallback=!1}_isShortCircuit(){return 1===this._text.split(" ").length}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _load(){var e,t;if(this._beforeLoad(),this.isSkipped)return this;let{retry:r,timeout:n,cacheDuration:i}=X;try{this._apiResponse=await Cr.post("api/utils/sentence-spiltter",{json:{fallback:!0,text:this._text,language:this._language},headers:(null===(e=this._metaData)||void 0===e?void 0:e.headers)||{},retry:r,timeout:n,cacheDuration:i,maxConcurrentRequests:this._metaData.ssBatch||2,...this._metaData.signal&&{signal:this._metaData.signal}}),this._sentences=this._apiResponse.data.sentences,this._isFallback=this._apiResponse.data.fallback||!1,this._modelId=this._apiResponse.data.id}catch(e){if(this._skipLoad("apiError",this._fallback.bind(this)),null===(t=this._metaData.signal)||void 0===t?void 0:t.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}}return this}constructor(e,t,r){super(),Gr(this,"_text",void 0),Gr(this,"_sentences",[]),Gr(this,"_metaData",void 0),Gr(this,"_isFallback",!1),Gr(this,"_language","EN"),this._text=e,this._metaData=t,this._language=r}}function Wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class zr extends Nr{static async getInstance(e,t){return await new zr(e,t)._load()}get unlocked(){return this._unlocked}get isFallback(){return this._isFallback}_fallback(){this._isFallback=!1}_isShortCircuit(){return""===this._option.lockId}async _getCachedRecommendationWithUnlockedValue(e,t){let r=await G(e);if(r){if(null==r?void 0:r.recommendations)for(let e of r.recommendations)if(null==e?void 0:e.phrases)for(let r of e.phrases)if(r.text===this._option.lockId){r.text=t,r.isLocked=!1;break}return r}}async _beforeLoad(){var e;if(this._isShortCircuit())return this._skipLoad("shortCircuit",this._fallback.bind(this)),this;let t=await F(this._option.lockId),r=null==t||null===(e=t.data)||void 0===e?void 0:e.recommendationCacheKey;return r&&await G(r)?void 0:(this._skipLoad("shortCircuit",this._fallback.bind(this)),this)}async _afterLoad(){var e,t,r,n,i,a,o,s;let l=await F(this._option.lockId);if(!l)return this;let c=null==l||null===(e=l.data)||void 0===e?void 0:e.recommendationCacheKey;if(c){let e=await this._getCachedRecommendationWithUnlockedValue(c,null===(t=this._apiResponse)||void 0===t||null===(r=t.data)||void 0===r||null===(n=r.recommendation)||void 0===n||null===(i=n.unlockedData)||void 0===i?void 0:i.value);if(e){let t="true"===await $r.get("IS_PREMIUM_USER"),r=xr(e,t);e&&(e.type=r),await W(c),await B(c,e,864e6),this._unlocked={...this._unlocked,recommendation:e,quota:null===(a=this._apiResponse)||void 0===a||null===(o=a.data)||void 0===o||null===(s=o.recommendation)||void 0===s?void 0:s.quota}}}}async _load(){var e,t;if(await this._beforeLoad(),this.isSkipped)return this;let{retry:r,timeout:n,cacheDuration:i}=ee;try{this._apiResponse=await Cr.post("sneak-peek/unlock",{json:{...this._option,featureId:this._featureId},headers:{...(null===(e=this._metaData)||void 0===e?void 0:e.headers)||{}},retry:r,timeout:n,cacheDuration:i,maxConcurrentRequests:1,...this._metaData.signal&&{signal:this._metaData.signal},skipCacheStorage:!0}),await this._afterLoad()}catch(e){if(this._skipLoad("apiError",this._fallback.bind(this)),null===(t=this._metaData.signal)||void 0===t?void 0:t.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}throw e}return this}constructor(e,t){super(),Wr(this,"_option",void 0),Wr(this,"_unlocked",void 0),Wr(this,"_metaData",void 0),Wr(this,"_featureId","recommendation"),Wr(this,"_isFallback",!1),this._option=e,this._metaData=t}}let Hr=e=>$r.get(e),Vr=(e,t)=>{$r.set(e,t)};function qr(){}function Kr(e,t,r,n,i){for(var a,o=[];t;)o.push(t),a=t.previousComponent,delete t.previousComponent,t=a;o.reverse();for(var s=0,l=o.length,c=0,u=0;s<l;s++){var d=o[s];if(d.removed){if(d.value=e.join(n.slice(u,u+d.count)),u+=d.count,s&&o[s-1].added){var h=o[s-1];o[s-1]=o[s],o[s]=h}}else{if(!d.added&&i){var f=r.slice(c,c+d.count);f=f.map((function(e,t){var r=n[u+t];return r.length>e.length?r:e})),d.value=e.join(f)}else d.value=e.join(r.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=o[l-1];return l>1&&"string"==typeof p.value&&(p.added||p.removed)&&e.equals("",p.value)&&(o[l-2].value+=p.value,o.pop()),o}qr.prototype={diff:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.callback;"function"==typeof n&&(i=n,n={}),this.options=n;var a=this;function o(e){return i?(setTimeout((function(){i(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var s=(t=this.removeEmpty(this.tokenize(t))).length,l=e.length,c=1,u=s+l;n.maxEditLength&&(u=Math.min(u,n.maxEditLength));var d=null!==(r=n.timeout)&&void 0!==r?r:1/0,h=Date.now()+d,f=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(f[0],t,e,0);if(f[0].oldPos+1>=l&&p+1>=s)return o([{value:this.join(t),count:t.length}]);var m=-1/0,g=1/0;function _(){for(var r=Math.max(m,-c);r<=Math.min(g,c);r+=2){var n,i=f[r-1],u=f[r+1];i&&(f[r-1]=void 0);var d=!1;if(u){var h=u.oldPos-r;d=u&&0<=h&&h<s}var _=i&&i.oldPos+1<l;if(d||_){if(n=!_||d&&i.oldPos+1<u.oldPos?a.addToPath(u,!0,void 0,0):a.addToPath(i,void 0,!0,1),p=a.extractCommon(n,t,e,r),n.oldPos+1>=l&&p+1>=s)return o(Kr(a,n.lastComponent,t,e,a.useLongestToken));f[r]=n,n.oldPos+1>=l&&(g=Math.min(g,r-1)),p+1>=s&&(m=Math.max(m,r+1))}else f[r]=void 0}c++}if(i)!function e(){setTimeout((function(){if(c>u||Date.now()>h)return i();_()||e()}),0)}();else for(;c<=u&&Date.now()<=h;){var v=_();if(v)return v}},addToPath:function(e,t,r,n){var i=e.lastComponent;return i&&i.added===t&&i.removed===r?{oldPos:e.oldPos+n,lastComponent:{count:i.count+1,added:t,removed:r,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+n,lastComponent:{count:1,added:t,removed:r,previousComponent:i}}},extractCommon:function(e,t,r,n){for(var i=t.length,a=r.length,o=e.oldPos,s=o-n,l=0;s+1<i&&o+1<a&&this.equals(t[s+1],r[o+1]);)s++,o++,l++;return l&&(e.lastComponent={count:l,previousComponent:e.lastComponent}),e.oldPos=o,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var Xr=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Yr=/\S/,Jr=new qr;function Qr(e,t,r){return r=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(r,{ignoreWhitespace:!0}),Jr.diff(e,t,r)}Jr.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Yr.test(e)&&!Yr.test(t)},Jr.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&Xr.test(t[r])&&Xr.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var Zr=new qr;function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Zr.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t},(new qr).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new qr).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var tn=Object.prototype.toString,rn=new qr;function nn(e,t,r,n,i){for(t=t||[],r=r||[],n&&(e=n(i,e)),a=0;a<t.length;a+=1)if(t[a]===e)return r[a];if("[object Array]"===tn.call(e)){for(t.push(e),o=Array(e.length),r.push(o),a=0;a<e.length;a+=1)o[a]=nn(e[a],t,r,n,i);return t.pop(),r.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),"object"===en(e)&&null!==e){t.push(e),o={},r.push(o);var a,o,s,l=[];for(s in e)e.hasOwnProperty(s)&&l.push(s);for(l.sort(),a=0;a<l.length;a+=1)o[s=l[a]]=nn(e[s],t,r,n,s);t.pop(),r.pop()}else o=e;return o}rn.useLongestToken=!0,rn.tokenize=Zr.tokenize,rn.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,i=void 0===n?function(e,t){return void 0===t?r:t}:n;return"string"==typeof e?e:JSON.stringify(nn(e,null,null,i),i,"  ")},rn.equals=function(e,t){return qr.prototype.equals.call(rn,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var an=new qr;an.tokenize=function(e){return e.slice()},an.join=an.removeEmpty=function(e){return e};let on={_:"Underscore",",":"Comma",";":"Semicolon",":":"Colon","!":"Exclamation Mark","?":"Question Mark",".":"Period","'":"Apostrophe"},sn=e=>{let{textDiffs:t}=cn(e.originalWord,e.replacementWord),[r]=e.explainers||[],n=(null==r?void 0:r.five_word_title)||"Replace with";return{...e,explainers:[{...r,category:n,textDiffs:t}]}},ln=e=>{try{let t=e.map((e=>{let t=e.sentences.map((e=>{var t;let r=((null==e||null===(t=e.grammarResponse)||void 0===t?void 0:t.contentToReplace)||[]).map(sn);return{...e,grammarResponse:{...e.grammarResponse,contentToReplace:r}}}));return{...e,sentences:t}}));return t}catch(t){return e}},cn=(e,t)=>{let r=[],n=un(e,t),{isAddedCase:i,isRemovedCase:a,diffArray:o}=n,s=" "===t;return 0===t.length||s||(a?r=o:t in on||i&&(r=o)),{textDiffs:r}},un=(e,t)=>{let r=dn(e,t),n=[],i=[],a=!1,o=!1;for(let e of r)e.added&&(n.push(e),a=!0),e.removed&&(i.push(e),o=!0);return{addedObj:n,diffArray:r,isAddedCase:a&&0===i.length,isRemovedCase:o&&0===n.length,removedObj:i}},dn=(e,t)=>Qr(e,t),hn=async(e,t,r,n,i,a=null,o=!1,s=-1,l=!1,c=!1,u="",d={})=>{var h,f;let p={gcBatch:+await $r.get("GC_BATCH"),ssBatch:+await $r.get("SS_BATCH"),...a&&{signal:a},headers:{"X-Regional-Language":await Hr("REGIONAL_LANGUAGE")||"",...d}};try{let a="true"===await $r.get("GC_RESPONSE_POST_PROCESS");if(null===e){let{grammarResponse:e,currentParagraphs:d}=await fn(t.paragraphsState,r,p,n,i,o,s,l,c,u),f=d;if(a&&(f=ln(d)),t.paragraphsState=f,null===(h=p.signal)||void 0===h?void 0:h.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}return{grammarResponse:e,currentTextState:t}}{let{changedParagraphs:a,updatedParagraphState:o,newIndexOffsetForExistingParas:s}=((e,t)=>{let r=[],n={},i={};return t.forEach((t=>{let a=e.find((e=>e.text===t.text&&e.id===t.id&&e.startIndex===t.startIndex));if(a&&a.sentences.length>0){n[t.paraID]={...t,sentences:a.sentences};let e=t.startIndex-a.startIndex;i[t.paraID]=e}else r.push(t),n[t.paraID]=t,e.find((e=>e.paraID===t.paraID))})),{changedParagraphs:r,updatedParagraphState:n,newIndexOffsetForExistingParas:i}})(e.paragraphsState,t.paragraphsState),{grammarResponse:l}=await fn(a,r,p,n,i);return{grammarResponse:l,currentTextState:t,updatedParagraphState:o,newIndexOffsetForExistingParas:s}}}catch(e){if(null===(f=p.signal)||void 0===f?void 0:f.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}throw e}},fn=async(e,t,r,n,i,a=!1,o=-1,s=!1,l=!1,c="")=>{let u={modelID:"NA",timedOut:!1,sentences:[]},d=[],h=[],f=await $r.get("VALID_START_SENTENCE_REGEX"),p=await $r.get("VALID_END_SENTENCE_REGEX"),m=async e=>{e.forEach((e=>{if("fulfilled"===e.status){let{paraState:t,gcResponse:r,sentences:n}=e.value;u.sentences.push(...r.sentences),gr(n,t,u,f,p)}}))};for(let u=0;u<e.length;u++){let f=e[u];d.push(pn(f,t,r,n,i,a,o,s,h,l,c));let p=d.length===r.ssBatch,g=u===e.length-1;if(p||g){let e=await Promise.allSettled(d);await Promise.allSettled(h),await m(e),d=[]}}return _r(u),{grammarResponse:u,currentParagraphs:e}},pn=(e,t,r,n,i,a=!1,o=0,s=!1,l,c=!1,u="")=>new Promise((d=>{(async()=>{let{sentences:h}=await(async e=>{let{sentences:t}=await Br.getInstance(e.text,e.metaData,e.language);return{sentences:t}})({text:e.text,language:t.language,metaData:r}),f=await $r.get("VALID_START_SENTENCE_REGEX"),p=await $r.get("VALID_END_SENTENCE_REGEX"),m="false"!==await $r.get("DISABLE_GC_AFTER_FIX_ERROR"),g=a&&m,_=a&&o===(null==h?void 0:h.length);if(g||_||c){let t=function(e){return{modelID:"NA",timedOut:!1,sentences:e.map((e=>({fixed:e.text,text:e.text,timedOut:!1,modelID:"NA",isFluencyModeRequired:!1,isSentenceFragmented:!1,isSentencePassive:!1,isSentenceCliche:!1,isSentenceUnclear:!1,isFluencyEdits:!1,isSentenceVerbose:!1,isSentenceInformal:!1,isSentenceComplex:!1,isSentenceNominalized:!1,isSentenceBland:!1,isRepeatedWords:!1,isSentenceLevelFluencyEdits:!1,fluencyEdits:null,verbosity:null,nominalizedVerbs:null,blandWords:null,contentToReplace:[],repetitiveWordSuggestion:[]})))}}(h);return e=gr(h,e,t,f,p),c&&fr(e,h,t,s,n,i,r,l,f,p,u),void d({paraState:e,gcResponse:t,sentences:h})}let v=((e,t)=>{try{if(e){let r=((e,t)=>{if(!t||!e)return t;let r=null==t?void 0:t.map((e=>({...e,type:"GENERIC"})));return r})(e,t);if(r&&(null==r?void 0:r.length))return r}return t}catch(e){return t}})(null==e?void 0:e.rteMap,h),y=[],w=t.checkForClarity||t.checkForCliche||t.checkForFragment,E=!(!f||!p);t.text=v.map(((e,t)=>{var r,n,i,a;let o={text:e.text,type:e.type||"GENERIC",isLast:t===h.length-1,...w?{left:null!==(i=null===(r=h[t-1])||void 0===r?void 0:r.text)&&void 0!==i?i:""}:null,...w?{right:null!==(a=null===(n=h[t+1])||void 0===n?void 0:n.text)&&void 0!==a?a:""}:null};if(!E)return o;let[s,l]=hr(e.text,f,p),c=e.text.length-l;return y.push({start:s,end:c}),{...o,text:e.text.substring(s,c)}}));let b={...r,batch:r.gcBatch,...r.signal&&{signal:r.signal}},T=await mn(t,b),S=T.sentences.map(((e,t)=>{var r;if(0===y.length)return e;let{start:n}=(null==y?void 0:y[t])||{start:0},i=null==e||null===(r=e.contentToReplace)||void 0===r?void 0:r.map((e=>({...e,startIndex:e.startIndex+n,endIndex:e.endIndex+n})));return{...e,contentToReplace:i}}));if(T.sentences=S,n){e=gr(h,e,T,f,p);let t="true"===await $r.get("GC_RESPONSE_POST_PROCESS"),r=e;var x;if(t)r=null===(x=ln([e]))||void 0===x?void 0:x[0];n(r)}fr(e,h,T,s,n,i,r,l,f,p,u),d({paraState:e,gcResponse:T,sentences:h})})()})),mn=async(e,t)=>{let r=(await Ur.getInstance(e,t))._apiResponse;return"true"===await $r.get("PERSONALIZATION")&&(r=(e=>{try{return e.sentences=e.sentences.map((e=>(e.contentToReplace=e.contentToReplace.filter((e=>!e.isSuppressed)),e))),e}catch(t){return e}})(r)),r},gn={logEvent:()=>{}},_n=async e=>{let{logEvent:t}=e;gn.logEvent=t};function vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let yn=!1;class wn extends Nr{static async getInstance(e){return await new wn(e)._load()}_isShortCircuit(){return yn}getTimeStamp(){return this.timeStamp}async _fallback(){var e;this.timeStamp=null!==(e=await Hr("PERSONALISATION_UPDATED_AT"))&&void 0!==e?e:""}async _beforeLoad(){this.forced&&(yn=!1,this.forced=!1),this._isShortCircuit()&&await this._skipLoad("shortCircuit",this._fallback.bind(this)),yn||(yn=!0,setTimeout((()=>{yn=!1}),3e5))}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;if(!await Hr("USER_ID_TOKEN"))return this._fallback.bind(this),this;try{this._apiResponse=await Cr.get("api/config/lang",{searchParams:{langauge:"default",product:"default"}}),this.timeStamp=this._apiResponse.data[0].updated_at}catch(e){this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e){super(),vn(this,"forced",!1),vn(this,"timeStamp",""),this.forced=e}}let En=async(e=!1)=>{let t=await(async e=>(await wn.getInstance(e)).timeStamp)(e),r=await Hr("PERSONALISATION_UPDATED_AT")||"";return t.toString()!==r&&Vr("PERSONALISATION_UPDATED_AT",t.toString()),t};function bn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Tn extends Nr{static async getInstance(e){return await new Tn(e)._load()}get aiContentScore(){return this._aiContentScore}async _isShortCircuit(){return this._text.length<480}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit")}async _afterLoad(){var e,t,r,n;this._modelId=null===(e=this._apiResponse)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.modelID,this._aiContentScore=Math.floor(100*(null===(r=this._apiResponse.data)||void 0===r||null===(n=r.value)||void 0===n?void 0:n.text_score))}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await Cr.post("api/ai-detector",{json:{text:this._text.trim().slice(0,12001)},...J}),await this._afterLoad()}catch(e){R.error(e),this._skipLoad("apiError")}return this}constructor(e){super(),bn(this,"_text",void 0),bn(this,"_aiContentScore",null),this._text=e}}let Sn=async e=>({ai_score:(await Tn.getInstance(e.text)).aiContentScore});function xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Pn extends Nr{get recommendation(){return this._recommendation}static async getInstance(e,t){return await new Pn(e,t)._load()}get isFallback(){return this._isFallback}_fallback(){this._isFallback=!1}_isShortCircuit(){var e;return 0===(null===(e=this._option.texts)||void 0===e?void 0:e.length)}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _setLanguage(){let{language:e}=this._option,[t,r]=e.split("-"),n=`${t}`;r&&(n=`${n}-${{uk:"gb"}[r]||r}`),this._option.language=n}_processTexts(e,t,r){let n=[];return[this._option.texts.map((i=>{let a={...i,pre:i.pre||"",post:i.post||""};if(!e)return a;let[o,s]=hr(i.text,t,r),l=i.text.length-s;return n.push({start:o,end:l}),{...a,text:i.text.substring(o,l)}})),n]}getCorrectedOffSetRecommendation(e){var t;if(0===e.length)return this._recommendation;let r=null===(t=this._recommendation)||void 0===t?void 0:t.map((t=>{var r;return{...t,recommendations:(null==t||null===(r=t.recommendations)||void 0===r?void 0:r.map(((t,r)=>{var n;let{start:i}=(null==e?void 0:e[r])||{start:0},a=null==t||null===(n=t.phrases)||void 0===n?void 0:n.map((e=>{var t;return e.phraseDiff=(null==e?void 0:e.phraseDiff)?null==e||null===(t=e.phraseDiff)||void 0===t?void 0:t.map((e=>({...e,sourceStart:e.sourceStart+i,sourceEnd:e.sourceEnd+i,targetStart:e.targetStart+i,targetEnd:e.targetEnd+i}))):[],{...e,start:e.start+i,end:e.end+i}}));return{...t,phrases:a}})))||this._recommendation}}));return r}async _filterTexts(e){let t=[],r=[];for(let n=0;n<this._option.texts.length;n++){let i=this._option.texts[n];await this.isSentenceInIgnoreCache(i)||i.text.length<e?t.push({index:n,value:i}):r.push(i)}return{filteredTexts:r,removedTexts:t}}async isSentenceInIgnoreCache(e){let t=await vr(e.text.trim()),r=void 0!==await D(t);if(r){let e=await N();gn.logEvent("recommendation/system/sentenceInIgnoreCache",{count:e})}return r}_handleNoValidTexts(e){return e.map((e=>({...e.value,recommendations:[],model_id:""})))}async _load(){var e,t,r,n;if(this._beforeLoad(),this.isSkipped)return this;let{timeout:i,retry:a,cacheDuration:o}=Q,s=await $r.get("VALID_START_SENTENCE_REGEX"),l=await $r.get("VALID_END_SENTENCE_REGEX"),[c,u]=this._processTexts(!(!s||!l),s,l);this._option.texts=c;let d=+await $r.get("RECOMMENDATION_MIN_TEXT_LENGTH")||10;this._setLanguage();let h=JSON.parse(JSON.stringify(this._option.texts)),{filteredTexts:f,removedTexts:p}=await this._filterTexts(d);if(0===f.length)return this._recommendation=this._handleNoValidTexts(p),this;this._option.texts=f;let m="true"===await $r.get("ENABLE_RECOMMENDATION_CONTEXT"),g=((e,t=!1)=>e.map((e=>({text:e.text,pre:t&&e.pre||"",post:t&&e.post||""}))))(this._option.texts,m),_=+await $r.get("MAX_RECOMMENDATION_CONCURRENT_REQUESTS"),v="true"===await $r.get("IS_PREMIUM_USER")?_:5,y=+await $r.get("RECOMMENDATION_SENTENCES_PER_BATCH");this._option&&""===this._option.writingGoal&&delete this._option.writingGoal;try{this._apiResponse=await Cr.post("api/utils/recommendation?v2=true",{json:{...this._option,texts:g},headers:(null===(e=this._metaData)||void 0===e?void 0:e.headers)||{},batchKey:"texts",batch:y,timeout:i,retry:a,cacheDuration:o,maxConcurrentRequests:v,skipCacheCheck:this._metaData.skipCacheCheck,...this._metaData.signal&&{signal:this._metaData.signal}}),(null==p?void 0:p.length)>0&&p.forEach((e=>{var t,r;null===(t=this._apiResponse)||void 0===t||null===(r=t.data)||void 0===r||r.splice(e.index,0,{...e.value,recommendations:[]})})),Array.isArray(this._apiResponse.data)&&0!==(null===(t=this._apiResponse.data)||void 0===t?void 0:t.length)?(this._recommendation=function(e,t){let r=(e=>null==e?void 0:e.map((e=>{var t;let r=null==e?void 0:e.text,n=null==e||null===(t=e.recommendations)||void 0===t?void 0:t.map((e=>{var t;let n=null==e||null===(t=e.phrases)||void 0===t?void 0:t.map((e=>{let t=r.substring(e.start,e.end);return{...e,originalText:t}}));return{...e,phrases:n}}));return{...e,recommendations:n}})))(e),n=((e,t)=>null==e?void 0:e.map(((e,r)=>({...t[r],paraId:null==e?void 0:e.paraId,sentenceId:null==e?void 0:e.sentenceId,offset:(null==e?void 0:e.offset)||0}))))(t,r);return(e=>null==e?void 0:e.map((e=>{var t;let r=null==e||null===(t=e.recommendations)||void 0===t?void 0:t.map((t=>{var r;let n=null==t||null===(r=t.phrases)||void 0===r?void 0:r.map((t=>{var r;return t.phraseDiff=(null==t?void 0:t.phraseDiff)?null==t||null===(r=t.phraseDiff)||void 0===r?void 0:r.map((t=>({...t,sourceStart:t.sourceStart+((null==e?void 0:e.offset)||0),sourceEnd:t.sourceEnd+((null==e?void 0:e.offset)||0),targetStart:t.targetStart+((null==e?void 0:e.offset)||0),targetEnd:t.targetEnd+((null==e?void 0:e.offset)||0)}))):[],{...t,start:t.start+((null==e?void 0:e.offset)||0),end:t.end+((null==e?void 0:e.offset)||0)}}));return{...t,phrases:n}}));return{...e,recommendations:r}})))(n)}(this._apiResponse.data,h),this._recommendation=this.getCorrectedOffSetRecommendation(u)):this._recommendation=h.map((e=>({...e,model_id:"",recommendations:[]}))),this._recommendation=null===(r=this._recommendation)||void 0===r?void 0:r.map((e=>{var t;return{...e,recommendations:null===(t=e.recommendations)||void 0===t?void 0:t.map((e=>{var t;return{...e,phrases:null===(t=e.phrases)||void 0===t?void 0:t.map((e=>{let t=Qr(e.originalText,e.text);return{...e,textDiffs:t}}))}}))}}))}catch(e){if(null===(n=this._metaData.signal)||void 0===n?void 0:n.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}this._recommendation=h.map((e=>({...e,model_id:"",recommendations:[]}))),R.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e,t){super(),xn(this,"_option",void 0),xn(this,"_isFallback",!1),xn(this,"_metaData",{signal:void 0,headers:{},skipCacheCheck:!1}),xn(this,"_recommendation",[]),this._option=e,this._metaData=t}}let Rn=async(e,t={})=>{let{recommendation:r}=await Pn.getInstance(e,t);return r},An=async e=>{try{return(await Cr.post("utils/recommendations-list",{json:{language:e},retry:{limit:0}})).data}catch(e){return[]}},kn=async e=>{if(e.text.length>0){let t=e.text.trim(),r=await vr(t);await O(r,"",2592e5)}},In=e=>{let t=[65279,160],r=0;if(0===e.length)return r;for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);t.includes(i)||(r=(r<<5)-r+i,r&=r)}return r},Cn={"en-us":"English (US)","de-de":"German (Germany)","pt-br":"Portuguese (Brazil)","ca-es":"Catalan (Spain)"},Dn=(e,t)=>{let r=On(e,t);return Cn[r]||"English (US)"},On=(e,t)=>t?`${(e||"en").toLowerCase()}-${t.toLowerCase()}`:e,Nn={English:"EN",German:"DE",French:"FR",Spanish:"ES",Portuguese:"PT",Swiss_German:"DE-CH",Dutch:"NL"},Mn=[{code:Nn.Dutch,name:"Dutch"},{code:Nn.English,name:"English"},{code:Nn.French,name:"French"},{code:Nn.German,name:"German"},{code:Nn.Swiss_German,name:"German (Swiss)"},{code:Nn.Portuguese,name:"Portuguese (Brazilian)"},{code:Nn.Spanish,name:"Spanish"}],Ln={"\xa0":" ","'":"'","\u2019":"'","\u201c":'"',"\u201d":'"',"\u2018":"'"};function Fn(e){let t="";for(let r=0;r<e.length;r++)e[r]in Ln?t+=Ln[e[r]]:t+=e[r];return t}function $n(e){try{let t=new URL(e);if(e.startsWith("https://docs.google.com/")){let r=function(e){let t=e.split("/"),r=t.length>3&&"docs.google.com"===t[2];if(r){let e=t[3];return null!=e?e:""}return""}(e);return r?t.origin+"/"+r:t.origin}return t.origin}catch(t){return e}}class jn{_defaultLTResponse(){return{language:{name:"",code:"",detectedLanguage:{name:"",code:"",confidence:0,source:""}},matches:[],sentenceRanges:[],extendedSentenceRanges:[]}}_createLanguageObject(e,t,r){return{name:e,code:t,detectedLanguage:{name:e,code:t,confidence:r,source:""}}}_createSentenceRanges(e){return e.sentences.map((e=>[e.start,e.end]))}_createExtendedSentenceRanges(e,t,r){return e.sentences.map((e=>{let n={from:e.start,to:e.end,detectedLanguages:[{language:t,rate:0}]};return r&&(n.checkStatus=r(e)),n}))}_getGrammarMatches(e,t){var r;let n=[];return null==e||null===(r=e.sentences)||void 0===r||r.forEach((e=>{var r,i,a;let o=(null==e||null===(r=e.grammarResponse)||void 0===r?void 0:r.modelID)||"";null==e||null===(i=e.grammarResponse)||void 0===i||null===(a=i.contentToReplace)||void 0===a||a.forEach((e=>{if(this._isReplacementInvalid(e)||e.isSuppressed)return;let r=this._createLTMatch(e,t,o);n.push(r)}))})),n}_isReplacementInvalid(e){let t=""===(null==e?void 0:e.replacementWord),r=""===(null==e?void 0:e.originalWord),n=Fn(null==e?void 0:e.replacementWord)===Fn(null==e?void 0:e.originalWord);return t&&r||n}_createLTMatch(e,t,r){var n,i,a,o;let s=(null===(n=e.explainers)||void 0===n?void 0:n[0])||{},l=(null===(i=s.multiple_spelling_suggestion)||void 0===i?void 0:i.filter((t=>t!==e.originalWord)))||[],c=this._getIssueType(e,s),u=this._getRuleType(e,c),d=[];return d="style"===c?(null==e||null===(a=e.suggestedWords)||void 0===a?void 0:a.suggestions.map((e=>({value:e||"",shortDescription:""}))))||[]:[{value:(null==e?void 0:e.replacementWord)||"",shortDescription:""},...l.map((e=>({value:e||"",shortDescription:""})))],{message:s.user_explanation||"",shortMessage:s.category||"",goodExample:s.good_example||"",badExample:s.bad_example||"",replacements:d,offset:null==e?void 0:e.startIndex,length:(null==e?void 0:e.endIndex)-(null==e?void 0:e.startIndex)+1,type:{typeName:(null==s?void 0:s.type)||""},rule:{id:u,description:s.example_summary||"",issueType:c,urls:[{value:""}],category:{id:null!==(o=s.error_type_id)&&void 0!==o?o:"",name:s.title||""},isPremium:t,confidence:0,operation:s.operation||"",modelId:r||"",textDiffs:s.textDiffs||[]},ignoreForIncompleteSentence:!1,contextForSureMatch:0}}_getIssueType(e,t){return t.error_type_name?t.error_type_name:e.isSuggestedWord?"style":""}_getRuleType(e,t){return e.isSpellingSuggestion?"SPELLING_RULE":t||e.originalWord+"/"+e.replacementWord}_convertToSingleSentenceArray(e){for(let t=e.length-1;t>0;t--){let r=e[t-1],n=e[t];r.sentences.push(...n.sentences),e.splice(t,1)}return e}}class Un extends jn{static getInstance(){return Un.instance||(Un.instance=new Un),Un.instance}transform(e){var t;let{paragraphState:r,langData:n,isPremium:i=!1}=e,{language:a,confidence:o,region:s}=n,l=null===(t=this._convertToSingleSentenceArray(r))||void 0===t?void 0:t[0],c=function(e){let t=new Set,r=new Set;try{for(let o of e.sentences){var n,i,a;null==o||null===(n=o.grammarResponse)||void 0===n||null===(i=n.contentToReplace)||void 0===i||i.forEach((e=>{e.modelID&&""!==e.modelID.trim()&&"NA"!==e.modelID.trim()&&t.add(e.modelID)})),(null==o||null===(a=o.grammarResponse)||void 0===a?void 0:a.modelID)&&""!==o.grammarResponse.modelID.trim()&&"NA"!==o.grammarResponse.modelID.trim()&&r.add(o.grammarResponse.modelID)}return t.size>0?[...t]:[...r]}catch(e){return[]}}(l),u=Dn(a,s),d=On(a,s),h=this._defaultLTResponse();return h.language=this._createLanguageObject(u,d,o),h.sentenceRanges=this._createSentenceRanges(l),h.extendedSentenceRanges=this._createExtendedSentenceRanges(l,a,(e=>{var t;return(null==e||null===(t=e.grammarResponse)||void 0===t?void 0:t.timedOut)?"failure":"success"})),h.matches=this._getGrammarMatches(l,i),h.metaData={textErrors:{errorModelId:c}},h}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Un,"instance",void 0);let Gn=Un.getInstance();class Bn extends jn{static getInstance(){return Bn.instance||(Bn.instance=new Bn),Bn.instance}transform(e){var t;let{paragraphState:r,langData:n,isPremium:i=!1}=e,{language:a,confidence:o,region:s}=n,l=null===(t=this._convertToSingleSentenceArray(r))||void 0===t?void 0:t[0],c=function(e){let t=new Set,r=new Set;try{for(let s of e.sentences){var n,i,a,o;null==s||null===(n=s.recommendationResponse)||void 0===n||null===(i=n.recommendations)||void 0===i||i.forEach((e=>{e.modelId&&""!==e.modelId.trim()&&t.add(e.modelId)})),(null==s||null===(a=s.recommendationResponse)||void 0===a?void 0:a.model_id)&&""!==s.recommendationResponse.model_id.trim()&&r.add(null===(o=s.recommendationResponse)||void 0===o?void 0:o.model_id)}return t.size>0?[...t]:[...r]}catch(e){return[]}}(l),u=Dn(a,s),d=On(a,s),h=this._defaultLTResponse();return h.language=this._createLanguageObject(u,d,o),h.sentenceRanges=this._createSentenceRanges(l),h.extendedSentenceRanges=this._createExtendedSentenceRanges(l,a),h.matches=this._getRecommendationMatches(l,i),h.metaData={textErrors:{recommendationModelId:c}},h}_getRecommendationMatches(e,t){var r;let n=[];return null==e||null===(r=e.sentences)||void 0===r||r.forEach((e=>{if(null==e?void 0:e.recommendationResponse){let r=this._getRecommendationLTMatches(null==e?void 0:e.recommendationResponse,t);n.push(...r)}})),n}_getRecommendationIssueType(e){return e.isPhraseLevel?"PHRASAL_RECOMMENDATION":"RECOMMENDATION"}getTitle(e,t){var r;return t||!0===e.isLocked||!1===e.isLocked||void 0===e.isLocked&&(null==e||null===(r=e.text)||void 0===r?void 0:r.length)>0?e.cardName:e.upsellCardName}_getRecommendationLTMatches(e,t){var r;let n=[];return null==e||null===(r=e.recommendations)||void 0===r||r.forEach((r=>{var i;null==r||null===(i=r.phrases)||void 0===i||i.map((i=>{var a;let o=r.type,s=i.originalText||"",l=(null==i?void 0:i.text)||"";this._isReplacementInvalid({originalWord:s,replacementWord:l})||s.trim()===l.trim()||t&&0===(null==i||null===(a=i.text)||void 0===a?void 0:a.length)||n.push({message:i.toolTip||"",shortMessage:this.getTitle(i,t),goodExample:"",badExample:"",replacements:[{value:i.text||"",shortDescription:""}],offset:i.start,length:i.end-i.start,type:{typeName:""},rule:{id:o,description:"",issueType:this._getRecommendationIssueType(r),urls:[{value:""}],category:{id:i.internalErrorCategory||"",name:i.category||""},isPremium:t,confidence:0,operation:"",modelId:e.model_id||"",textDiffs:(null==i?void 0:i.textDiffs)||[],isPhrase:r.isPhraseLevel,phraseDiff:i.phraseDiff||[]},isLocked:i.isLocked,ignoreForIncompleteSentence:!1,contextForSureMatch:0})}))})),n}transformForceRecommendation(e){var t,r,n,i;let{recommendation:a,langData:o,isPremium:s=!1}=e,{language:l,confidence:c,region:u}=o,d=Dn(l,u),h=On(l,u),f=this._defaultLTResponse();f.language=this._createLanguageObject(d,h,c),f.sentenceRanges=a.map((e=>[null!==(t=e.offset)&&void 0!==t?t:0,e.text.length+(null!==(r=e.offset)&&void 0!==r?r:0)])),f.extendedSentenceRanges=a.map((e=>({from:null!==(n=e.offset)&&void 0!==n?n:0,to:e.text.length+(null!==(i=e.offset)&&void 0!==i?i:0),detectedLanguages:[{language:l,rate:0}]})));let p=[];null==a||a.forEach((e=>{let t=this._getRecommendationLTMatches(e,s);t&&p.push(...t)})),f.matches=p;let m=null==a?void 0:a.flatMap((e=>{var t;return null===(t=e.recommendations)||void 0===t?void 0:t.map((e=>e.modelId))})),g=a.map((e=>e.model_id));return f.metaData={textErrors:{recommendationModelId:m.length>0?m:g}},f}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Bn,"instance",void 0);let Wn=Bn.getInstance(),zn=null;function Hn(e){zn=e}function Vn({eventName:e,data:t}){zn&&zn({eventName:e,data:t})}function qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Kn{static getInstance(){return Kn._instance||(Kn._instance=new Kn),Kn._instance}constructor(){qn(this,"_hasSpamChecked",!1),qn(this,"_GC_SUPPORTED_LANGUAGES",Mn),qn(this,"_PLATFORM_TYPE","chrome-active"),qn(this,"_PLATFORM_VERSION",""),qn(this,"setGCCoreConfig",(async e=>{let{GC_SUPPORTED_LANGUAGES:t,...r}=e;t&&(this._GC_SUPPORTED_LANGUAGES=t),e.PLATFORM_TYPE&&(this._PLATFORM_TYPE=e.PLATFORM_TYPE),e.PLATFORM_VERSION&&(this._PLATFORM_VERSION=e.PLATFORM_VERSION);let n=["GC_SUPPORTED_LANGUAGES"];for(let[e,t]of Object.entries(r))n.includes(e)||void 0===t||await Vr(e,t)})),qn(this,"transformRequest",(e=>{let t=(e=>{let t=[];for(let r=0;r<(null==e?void 0:e.length);r++){let n=e[r],i={paraID:`${In((n.text||"")+r)}`,id:"gc-editor",text:n.text,startIndex:n.offset,endIndex:n.offset+n.text.length-1,paraType:"text",fontSize:"14px",sentences:[],rteMap:null==n?void 0:n.rteMap};t.push(i)}return t})(e);return{currTextState:{text:"",paragraphsState:t}}})),qn(this,"_inProgressLangDetectRequests",new Map),qn(this,"_spamCheck",(async()=>{await Cr.get("auth/spam-check",{})})),qn(this,"_detectLanguageIfNeeded",(async(e="",t,r)=>{var n;let[i]=e.split("-")||[];if(i)return{language:i,confidence:1};if(this._inProgressLangDetectRequests.size>1&&this._inProgressLangDetectRequests.clear(),(null==t?void 0:t.length)<15)return{language:Nn.English.toLowerCase(),confidence:1};let a=(null==t?void 0:t.slice(0,1e3))||"";if(this._inProgressLangDetectRequests.has(a)){let e=await this._inProgressLangDetectRequests.get(a);return{language:e.language,confidence:e.score}}let o=hi(a,{...r,signal:null!==(n=null==r?void 0:r.signal)&&void 0!==n?n:void 0});this._inProgressLangDetectRequests.set(a,o);let s=await o;return{language:s.language,confidence:s.score}})),qn(this,"_getRegion",((e,t)=>{var r;if(!t)return"";let[n,i]=t.split("-");return i||(null===(r=null==e?void 0:e.find((e=>e.startsWith(n))))||void 0===r?void 0:r.split("-")[1])||""})),qn(this,"_ensureSpamChecked",(async()=>{this._hasSpamChecked||(this._hasSpamChecked=!0,await this._spamCheck())})),qn(this,"unsupportedLanguageResponse",(e=>{let t=On(e.language,e.region),r=Gn._defaultLTResponse();return r.language=Gn._createLanguageObject("NoopLanguage",t,e.confidence),r})),qn(this,"isSupportedLanguage",(e=>this._GC_SUPPORTED_LANGUAGES.some((({code:t})=>t===e.toUpperCase())))),qn(this,"_convertRecommendationSentenceIndexToParagraphRelative",((e,t)=>{if(0===(null==e?void 0:e.length))return[];let r=JSON.parse(JSON.stringify(t));if(null==r||r.forEach((t=>{t.sentences.forEach((r=>{let n=null==e?void 0:e.find((e=>(null==r?void 0:r.sentenceId)===(null==e?void 0:e.sentenceId)&&(null==t?void 0:t.paraID)===(null==e?void 0:e.paraId)));n&&(r.recommendationResponse=n)}))})),1===r.length)return r[0].sentences[r[0].sentences.length-1].end=r[0].sentences[r[0].sentences.length-1].end+1,r;let n=0;return r.forEach((e=>{var t,r;let i=null==e||null===(t=e.sentences)||void 0===t?void 0:t.length;null==e||null===(r=e.sentences)||void 0===r||r.map(((e,t)=>{var r,a;e.start=e.start+n,e.end=t===i-1?e.end+n+1:e.end+n,null==e||null===(r=e.recommendationResponse)||void 0===r||null===(a=r.recommendations)||void 0===a||a.forEach(((t,r)=>{t.phrases.forEach(((t,i)=>{var a;let o={...t,start:t.start+n,end:t.end+n};(null==e||null===(a=e.recommendationResponse)||void 0===a?void 0:a.recommendations)&&(e.recommendationResponse.recommendations[r].phrases[i]=o),t.phraseDiff&&t.phraseDiff.length>0&&t.phraseDiff.forEach(((t,a)=>{var o,s,l,c,u,d;let h={...t,sourceStart:t.sourceStart+n,sourceEnd:t.sourceEnd+n,targetStart:t.targetStart+n,targetEnd:t.targetEnd+n};(null==e||null===(o=e.recommendationResponse)||void 0===o||null===(s=o.recommendations)||void 0===s||null===(l=s[r])||void 0===l||null===(c=l.phrases)||void 0===c||null===(u=c[i])||void 0===u||null===(d=u.phraseDiff)||void 0===d?void 0:d[a])&&(e.recommendationResponse.recommendations[r].phrases[i].phraseDiff[a]=h)}))}))}))})),n=n+e.text.length+2})),r})),qn(this,"_convertSentenceIndexToParagraphRelative",(e=>{if(1===e.length)return e[0].sentences.forEach((e=>{let t=e.text.trimEnd().length,r=e.start+t;e.end=r})),e[0].sentences[e[0].sentences.length-1].end=e[0].sentences[e[0].sentences.length-1].end+1,e;let t=[],r=0;return e.forEach((e=>{let n=e.sentences.length,i=e.sentences.map(((e,t)=>{var i;let a=e.text.trimEnd().length,o=e.start+a;e.start=e.start+r,e.end=t===n-1?o+r+1:o+r;let s=null===(i=e.grammarResponse)||void 0===i?void 0:i.contentToReplace.map((e=>({...e,startIndex:e.startIndex+r,endIndex:e.endIndex+r})));return{...e,grammarResponse:{...e.grammarResponse,contentToReplace:s}}}));r=r+e.text.length+2,t.push({...e,sentences:i})})),t})),qn(this,"trackRecommendationAnalytics",((e,t,r)=>{try{var n,i;let a={cache:0,api:0};e.map((e=>{e._cached?a.cache++:e.text&&a.api++}));let o=t.matches.map((e=>({category:e.rule.category.name,modelID:null==e?void 0:e.rule.modelId,isRecommendation:!0})));Vn({eventName:"gc_model_stats",data:{hostUrl:null===(n=r.metaData)||void 0===n?void 0:n.hostUrl,editorID:null===(i=r.metaData)||void 0===i?void 0:i.instanceId,errors:o,numberOfSentencesProcessedForGC:0,numberOfSentencesProcessedForReco:a.api+a.cache}})}catch(e){}})),qn(this,"getRecommendations",(async(e,t={})=>{var r,n,i;let a={"x-website-origin":((null==e||null===(r=e.metaData)||void 0===r?void 0:r.hostUrl)?$n(null==e||null===(n=e.metaData)||void 0===n?void 0:n.hostUrl):"")||"","x-website-url":(null==e||null===(i=e.metaData)||void 0===i?void 0:i.hostUrl)||"","platform-type":this._PLATFORM_TYPE,"platform-version":this._PLATFORM_VERSION},o=await Rn(e.input,{...t,headers:{...t.headers,...a}}),s="true"===await Hr("IS_PREMIUM_USER"),l=await Hr("INPUT_LANGUAGE"),c=await Hr("REGIONAL_LANGUAGE"),u=Wn.transformForceRecommendation({recommendation:o,langData:{language:l,region:c,confidence:0},isPremium:s});return this.trackRecommendationAnalytics(o,u,e),u})),qn(this,"unlockRecommendations",(async(e,t)=>{try{var r,n,i;let a={"x-website-origin":((null==e||null===(r=e.metaData)||void 0===r?void 0:r.hostUrl)?$n(null==e||null===(n=e.metaData)||void 0===n?void 0:n.hostUrl):"")||"","x-website-url":(null==e||null===(i=e.metaData)||void 0===i?void 0:i.hostUrl)||"","platform-type":this._PLATFORM_TYPE,"platform-version":this._PLATFORM_VERSION},o={...t,headers:{...t.headers,...a}},s=await pi(e,o),l="true"===await Hr("IS_PREMIUM_USER"),c=await Hr("INPUT_LANGUAGE"),u=await Hr("REGIONAL_LANGUAGE");if(null==s||!s.recommendation)return;return{recommendation:Wn.transformForceRecommendation({recommendation:[null==s?void 0:s.recommendation],langData:{language:c,region:u,confidence:0},isPremium:l}),quota:null==s?void 0:s.quota}}catch(e){throw e}})),qn(this,"_getGrammarErrors",((e,t,r)=>hn(e.prevState,e.currentState,e.gcParams,t,r,e.signal,e.hasUserAcceptedSuggestion,e.changedParagraphsSentencesLength,e.shouldCallRecommendation,e.appliedFixAll,e.writingGoal,e.header))),qn(this,"reportGrammarAnalysisResults",((e,t,r,n,i)=>{try{var a,o;let s=(e=>{try{let r=0,n=0,i=e.flatMap((e=>null==e?void 0:e.sentences));for(let e of i){var t;!0===(null===(t=e.grammarResponse)||void 0===t?void 0:t._cached)?r++:e.grammarResponse&&""!==e.text&&n++}return{cache:r,api:n,total:r+n}}catch(e){return{cache:0,api:0,total:0}}})(e),l=t.map((e=>({category:null==e?void 0:e.rule.category.name,modelID:null==e?void 0:e.rule.modelId,isRecommendation:!0}))),c=r.matches.map((e=>({category:"",modelID:null==e?void 0:e.rule.modelId,isRecommendation:!1})));Vn({eventName:"gc_model_stats",data:{hostUrl:null===(a=i.metaData)||void 0===a?void 0:a.hostUrl,editorID:null===(o=i.metaData)||void 0===o?void 0:o.instanceId,errors:[...l,...c],numberOfSentencesProcessedForGC:s.total,numberOfSentencesProcessedForReco:n.api+n.cache}})}catch(e){}})),qn(this,"getGrammarErrors",(async e=>{var t,r,n;try{let{input:n,gcParams:i,gcDoneCallback:a,recommendationResponseCallback:o,signal:s=null,metaData:l}=e,c="true"===await Hr("IS_PREMIUM_USER"),u={"x-website-origin":$n((null==l?void 0:l.hostUrl)||"")||"","x-website-url":(null==l?void 0:l.hostUrl)||"","platform-type":this._PLATFORM_TYPE,"platform-version":this._PLATFORM_VERSION,"qb-Product":"GRAMMAR_CHECKER"};await this._ensureSpamChecked();let{currTextState:d}=this.transformRequest(n.paragraphs),{language:h,confidence:f}=await this._detectLanguageIfNeeded(n.language,n.editorCompleteText,{signal:s,headers:u}),p=this._getRegion(n.preferredVariants,n.language||h);if(!this.isSupportedLanguage(h))return this.unsupportedLanguageResponse({language:h,region:p,confidence:f});await Vr("INPUT_LANGUAGE",h),await Vr("REGIONAL_LANGUAGE",p);let m=e=>{null==a||a(Gn.transform({paragraphState:[e],langData:{language:h,region:p,confidence:f},isPremium:c}))},g=[],_=!1,v={cache:0,api:0},y=e=>{let t=this._convertRecommendationSentenceIndexToParagraphRelative(e,d.paragraphsState),r=Wn.transform({paragraphState:t,langData:{language:h,region:p,confidence:f},isPremium:c});_?null==o||o(r):g.push(r)},w=i?{...i,language:null==h?void 0:h.toUpperCase()}:{language:null==h?void 0:h.toUpperCase()},E=On(h,p);u["qb-dialect"]=E;let b={prevState:null,currentState:d,gcParams:w,header:u,hasUserAcceptedSuggestion:n.hasUserAppliedFix,changedParagraphsSentencesLength:n.changedParagraphsSentencesLength,shouldCallRecommendation:!n.disableRecommendations,appliedFixAll:n.appliedFixAll,writingGoal:n.writingGoal,...s&&{signal:s}},{currentTextState:{paragraphsState:T}}=await this._getGrammarErrors(b,m,y);_=!0;let S=this._convertSentenceIndexToParagraphRelative(T),x=Gn.transform({paragraphState:S,langData:{language:h,region:p,confidence:f},isPremium:c}),P=null==g?void 0:g.flatMap((e=>null==e?void 0:e.matches)),R=[...new Set(g.flatMap((e=>{var t,r;return null==e||null===(t=e.metaData)||void 0===t||null===(r=t.textErrors)||void 0===r?void 0:r.recommendationModelId})))],A={...x,matches:[...x.matches,...P],metaData:{textErrors:{errorModelId:null==x||null===(t=x.metaData)||void 0===t||null===(r=t.textErrors)||void 0===r?void 0:r.errorModelId,recommendationModelId:R}}};return this.reportGrammarAnalysisResults(T,P,x,v,e),A}catch(r){if(null===(n=e.signal)||void 0===n?void 0:n.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}throw Error("PROCESSING_ERROR").reason="PROCESSING_ERROR",r}}))}}qn(Kn,"_instance",void 0);let Xn=null==Kn?void 0:Kn.getInstance(),Yn=Xn.setGCCoreConfig,Jn=Xn.getGrammarErrors,Qn=Xn.getRecommendations;Xn.unlockRecommendations;let Zn=()=>Cr.get("config/lang/dictionary",{headers:{}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[0]})),ei=e=>Cr.post("config/lang/dictionary",{json:{word:e}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[0]})),ti=e=>Cr.delete("config/lang/dictionary",{json:{word:e}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[0]})),ri=()=>Cr.get("config/lang/gc-preferences",{headers:{}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[0]})),ni=e=>Cr.patch("config/lang/gc-preferences",{json:{rulesMap:e}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[0]})),ii=async e=>{let{timeout:t,retry:r,cacheDuration:n}=Z;return Cr.post("api/utils/quality-score",{json:{text:e},batchKey:"text",timeout:t,retry:r,cacheDuration:n,maxConcurrentRequests:4,batch:8}).then((e=>e))};function ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class oi extends Nr{static async getInstance(e,t){return await new oi(e,t)._load()}get language(){return this._language}get response(){return this._response}get isFallback(){return this._isFallback}_fallback(){this._language="",this._isFallback=!1}_isShortCircuit(){return 0===this._text.length}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async cacheKey(){return await vr(this._text)}async _load(){var e,t;if(this._beforeLoad(),this.isSkipped)return this;let{retry:r,timeout:n,cacheDuration:i}=Y,a=await this.cacheKey();try{this._apiResponse=await Cr.post("utils/detect-language",{json:{text:this._text},headers:(null===(e=this._metaData)||void 0===e?void 0:e.headers)||{},retry:r,timeout:n,cacheDuration:i,maxConcurrentRequests:1,cacheKey:a,...this._metaData.signal&&{signal:this._metaData.signal}}),this._language=this._apiResponse.data.language,this._response=this._apiResponse.data}catch(e){if(this._skipLoad("apiError",this._fallback.bind(this)),null===(t=this._metaData.signal)||void 0===t?void 0:t.aborted){let e=Error("AbortError");throw e.reason="AbortError",e}}return this}constructor(e,t){super(),ai(this,"_text",void 0),ai(this,"_language",""),ai(this,"_metaData",void 0),ai(this,"_response",{language:"",score:0,languagePreferenceByCountry:[]}),ai(this,"_isFallback",!1),this._text=e,this._metaData=t}}function si(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let li=null;class ci{static getInstance(){return ci.instance||(ci.instance=new ci),ci.instance}async initialize(){if(this.isLoading&&this.isLoadedSuccessfully)return this.isLoading;try{let e=await(async()=>(li||(li=await Promise.resolve().then((function(){return xi}))),li))(),t=$r.get("ON_DEVICE_LANGUAGE_CONFIG"),r=(null==t?void 0:t.modelPath)||"",n=(null==t?void 0:t.wasmPath)||"";return this.fastTextInstance||(this.fastTextInstance=(new e.FastText).loadModel(r,n)),this.isLoading=this.fastTextInstance.then((e=>(this.langDetectModel=e,this.isLoadedSuccessfully=!0,!0))).catch((()=>{throw this.isLoadedSuccessfully=!1,this.fastTextInstance=null,!1})),this.isLoading}catch(e){throw this.isLoadedSuccessfully=!1,this.fastTextInstance=null,e}}getModel(){return this.langDetectModel}constructor(){si(this,"langDetectModel",void 0),si(this,"isLoading",null),si(this,"isLoadedSuccessfully",!1),si(this,"fastTextInstance",null)}}function ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}si(ci,"instance",void 0);class di extends Nr{static async getInstance(e){return await new di(e)._load()}get result(){return this._result}static async initialize(){return await ci.getInstance().initialize()}_beforeLoad(){this._text||this._skipLoad("shortCircuit",(()=>{}))}async identifyLanguage(e,t){try{let r=this.fastTextManager.getModel(),[n,i]=r.predict(this._text).get(0),a=performance.now()-t,o=i.replace(/^__label__/,""),s=n.toFixed(2);return(null==e?void 0:e.slowThreshold)&&a>(e.slowThreshold||this.SLOW_THRESHOLD)&&this.handleSlowDetection(e,a,o),Vn({eventName:"on_device_lang_detect_complete",data:{language:o,timeTaken:a,textLength:this._text.length}}),{language:o,score:s}}catch(e){return Vn({eventName:"on_device_lang_detect_error",data:{error:e.message,textLength:this._text.length}}),null}}handleSlowDetection(e,t,r){Vn({eventName:"on_device_model_toggle",data:{service:"languageDetect",value:!1,language:r,timeTaken:t,reason:"slowThreshold"}}),$r.set("ON_DEVICE_LANGUAGE_CONFIG",{...e,enabled:!1})}async _load(){var e;if(this._beforeLoad(),this.isSkipped)return this;let t=await vr(this._text),r=await G(t);if(r)return this._result={language:r.data.language,score:r.data.score},this;if(await di.initialize(),!(null===(e=this.fastTextManager.getModel())||void 0===e?void 0:e.predict))return this;let n=$r.get("ON_DEVICE_LANGUAGE_CONFIG"),i=new Promise((e=>setTimeout((()=>e(null)),n.fallbackThreshold||this.FALLBACK_THRESHOLD))),a=performance.now();return this._result=await Promise.race([this.identifyLanguage(n,a),i]),this._result?await B(t,{data:{...this._result,languagePreferenceByCountry:[],status:200},type:"detect-language:on-device"},864e5):Vn({eventName:"on_device_lang_detect_timeout",data:{textLength:this._text.length}}),this}constructor(e){super(),ui(this,"_text",void 0),ui(this,"_result",null),ui(this,"fastTextManager",void 0),ui(this,"SLOW_THRESHOLD",150),ui(this,"FALLBACK_THRESHOLD",400);let t=e.replace(/(\r\n|\n|\r)/gm," ");this._text=t,this.fastTextManager=ci.getInstance()}}let hi=async(e,t={})=>{let r=$r.get("ON_DEVICE_LANGUAGE_CONFIG");if(null==r?void 0:r.enabled)try{let t=await di.getInstance(e);if(t.result){return{language:t.result.language,score:t.result.score,isOnDevice:!0,languagePreferenceByCountry:[]}}}catch(e){}return(null==t?void 0:t.skipHttpRequest)?{language:"",score:0,languagePreferenceByCountry:[]}:(await oi.getInstance(e,t)).response},fi=async(e,t)=>{let r=await Lr.getInstance(e,t);return{suggestions:r.suggestions,usageLeft:r.usageLeft,statusCode:r.statusCode,errorMessage:r.errorMessage,isCached:r.isCached,utilization:r.utilization}},pi=async(e,t={})=>{let{unlocked:r}=await zr.getInstance(e,t);return r};function mi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let gi=async function(e={}){let t,r,n,i,a,o,s,l,c,u,d,h,f,p,m,g,_,v,y,w=e,E=new Promise(((e,n)=>{t=e,r=n})),b="object"==typeof window,T="undefined"!=typeof WorkerGlobalScope,S="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&"renderer"!=process.type,x=!b&&!S&&!T,P={...w},R="./this.program",A="";if(S);else if(x){if("object"==typeof process&&"function"==typeof require||"object"==typeof window||"undefined"!=typeof WorkerGlobalScope)throw Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else{if(!b&&!T)throw Error("environment detection error");if(T?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),A=A.startsWith("blob:")?"":A.slice(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),"object"!=typeof window&&"undefined"==typeof WorkerGlobalScope)throw Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");T&&(i=e=>{let t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),n=async e=>{if(L(e))return new Promise(((t,r)=>{let n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r(n.status)},n.onerror=r,n.send(null)}));let t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)}}let k=w.print||function(){}.bind(),I=w.printErr||function(){}.bind();Object.assign(w,P),P=null,Object.getOwnPropertyDescriptor(w,M="fetchSettings")&&Z(`\`Module.${M}\` was supplied but \`${M}\` not included in INCOMING_MODULE_JS_API`),w.arguments&&w.arguments,U("arguments","arguments_"),w.thisProgram&&(R=w.thisProgram),U("thisProgram","thisProgram"),O(void 0===w.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),O(void 0===w.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),O(void 0===w.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),O(void 0===w.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),O(void 0===w.read,"Module.read option was removed"),O(void 0===w.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),O(void 0===w.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),O(void 0===w.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),O(void 0===w.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),U("asm","wasmExports"),U("readAsync","readAsync"),U("readBinary","readBinary"),U("setWindowTitle","setWindowTitle"),O(!x,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");let C=w.wasmBinary;U("wasmBinary","wasmBinary"),"object"!=typeof WebAssembly&&I("no native wasm support detected");let D=!1;function O(e,t){e||Z("Assertion failed"+(t?": "+t:""))}let N=!1;var M,L=e=>e.startsWith("file://");function F(){if(D)return;let e=Er();0==e&&(e+=4);let t=d[e>>2],r=d[e+4>>2];(34821223!=t||2310721022!=r)&&Z(`Stack overflow! Stack cookie has been overwritten at ${le(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${le(r)} ${le(t)}`),1668509029!=d[0]&&Z("Runtime error: The application has corrupted its heap memory area (address zero)!")}class $ extends Error{}class j extends ${constructor(e){super(e),this.excPtr=e;let t=cr(e);this.name=t[0],this.message=t[1]}}if((()=>{let e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),w.ENVIRONMENT)throw Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function U(e,t,r=!0){Object.getOwnPropertyDescriptor(w,e)||Object.defineProperty(w,e,{configurable:!0,get(){Z(`\`Module.${e}\` has been replaced by \`${t}\``+(r?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function G(e){Object.getOwnPropertyDescriptor(w,e)||Object.defineProperty(w,e,{configurable:!0,set(){Z(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function B(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function W(e,t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){t()}})}function z(e,t){W(e,(()=>{de(`\`${e}\` is not longer defined by emscripten. ${t}`)}))}function H(e){Object.getOwnPropertyDescriptor(w,e)||Object.defineProperty(w,e,{configurable:!0,get(){let t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;B(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Z(t)}})}function V(){let e=a.buffer;w.HEAP8=o=new Int8Array(e),w.HEAP16=l=new Int16Array(e),w.HEAPU8=s=new Uint8Array(e),w.HEAPU16=c=new Uint16Array(e),w.HEAP32=u=new Int32Array(e),w.HEAPU32=d=new Uint32Array(e),w.HEAPF32=h=new Float32Array(e),w.HEAPF64=m=new Float64Array(e),w.HEAP64=f=new BigInt64Array(e),w.HEAPU64=p=new BigUint64Array(e)}z("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),z("asm","Please use wasmExports instead"),O(!w.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),O("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),O(!w.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),O(!w.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");let q=0,K=null,X={},Y=null;function J(e){var t;q++,null===(t=w.monitorRunDependencies)||void 0===t||t.call(w,q),e?(O(!X[e]),X[e]=1,null===Y&&"undefined"!=typeof setInterval&&(Y=setInterval((()=>{if(D)return clearInterval(Y),void(Y=null);let e=!1;for(let t in X)e||(e=!0,I("still waiting on run dependencies:")),I(`dependency: ${t}`);e&&I("(end of list)")}),1e4))):I("warning: run dependency added without ID")}function Q(e){var t;if(q--,null===(t=w.monitorRunDependencies)||void 0===t||t.call(w,q),e?(O(X[e]),delete X[e]):I("warning: run dependency removed without ID"),0==q&&(null!==Y&&(clearInterval(Y),Y=null),K)){let e=K;K=null,e()}}function Z(e){var t;null===(t=w.onAbort)||void 0===t||t.call(w,e),I(e="Aborted("+e+")"),D=!0;let n=new WebAssembly.RuntimeError(e);throw r(n),n}function ee(e,t){return(...r)=>{O(N,`native function \`${e}\` called before runtime initialization`);let n=dr[e];return O(n,`exported native function \`${e}\` not found`),O(r.length<=t,`native function \`${e}\` called with ${r.length} args but expects ${t}`),n(...r)}}async function te(e){if(!C)try{let t=await n(e);return new Uint8Array(t)}catch(e){}return function(e){if(e==g&&C)return new Uint8Array(C);if(i)return i(e);throw"both async and sync fetching of the wasm failed"}(e)}async function re(e,t){try{let r=await te(e);return await WebAssembly.instantiate(r,t)}catch(e){I(`failed to asynchronously prepare wasm: ${e}`),L(g)&&I(`warning: Loading from a file URI (${g}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),Z(e)}}var ne=e=>{for(;e.length>0;)e.shift()(w)},ie=[],ae=e=>ie.unshift(e),oe=[],se=e=>oe.unshift(e);w.noExitRuntime;var le=e=>(O("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0"));let ce=e=>br(e),ue=()=>Sr();var de=e=>{var t;(t=de).shown||(t.shown={}),de.shown[e]||(de.shown[e]=1,S&&(e="warning: "+e),I(e))};let he="undefined"!=typeof TextDecoder?new TextDecoder:void 0,fe=(e,t=0,r=NaN)=>{let n=t+r,i=t;for(;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&he)return he.decode(e.subarray(t,i));let a="";for(;t<i;){let r=e[t++];if(!(128&r)){a+=String.fromCharCode(r);continue}let n=63&e[t++];if(192==(224&r)){a+=String.fromCharCode((31&r)<<6|n);continue}let i=63&e[t++];if(224==(240&r)?r=(15&r)<<12|n<<6|i:(240!=(248&r)&&de("Invalid UTF-8 leading byte "+le(r)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),r=(7&r)<<18|n<<12|i<<6|63&e[t++]),r<65536)a+=String.fromCharCode(r);else{let e=r-65536;a+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return a},pe=(e,t)=>(O("number"==typeof e,`UTF8ToString expects a number (got ${typeof e})`),e?fe(s,e,t):""),me=[],ge=0,_e=0;class ve{set_type(e){d[this.ptr+4>>2]=e}get_type(){return d[this.ptr+4>>2]}set_destructor(e){d[this.ptr+8>>2]=e}get_destructor(){return d[this.ptr+8>>2]}set_caught(e){e=e?1:0,o[this.ptr+12]=e}get_caught(){return 0!=o[this.ptr+12]}set_rethrown(e){e=e?1:0,o[this.ptr+13]=e}get_rethrown(){return 0!=o[this.ptr+13]}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){d[this.ptr+16>>2]=e}get_adjusted_ptr(){return d[this.ptr+16>>2]}constructor(e){this.excPtr=e,this.ptr=e-24}}let ye=e=>yr(e),we=e=>{let t=null==_e?void 0:_e.excPtr;if(!t)return ye(0),0;let r=new ve(t);r.set_adjusted_ptr(t);let n=r.get_type();if(!n)return ye(0),t;for(let i of(le(t),e)){if(0===i||i===n)break;let e=r.ptr+16;if(Ar(i,n,e))return le(r.get_adjusted_ptr()),ye(i),t}return ye(n),t},Ee=()=>{let e=me.pop();e||Z("no exception to throw");let t=e.excPtr;throw!e.get_rethrown()&&(me.push(e),e.set_rethrown(!0),e.set_caught(!1),ge++),le(t),_e=new j(t)},be=()=>{O(null!=Ue.varargs);let e=u[+Ue.varargs>>2];return Ue.varargs+=4,e};var Te={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{let r=0;for(let t=e.length-1;t>=0;t--){let n=e[t];"."===n?e.splice(t,1):".."===n?(e.splice(t,1),r++):r&&(e.splice(t,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{let t=Te.isAbs(e),r="/"===e.slice(-1);return(e=Te.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{let t=Te.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.slice(0,-1)),r+n):"."},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>Te.normalize(e.join("/")),join2:(e,t)=>Te.normalize(e+"/"+t)};var Se=e=>{(Se=(()=>{if(S){let e=require("crypto");return t=>e.randomFillSync(t)}return e=>crypto.getRandomValues(e)})())(e)},xe={resolve:(...e)=>{let t="",r=!1;for(let n=e.length-1;n>=-1&&!r;n--){let i=n>=0?e[n]:je.cwd();if("string"!=typeof i)throw TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,r=Te.isAbs(i)}return t=Te.normalizeArray(t.split("/").filter((e=>!!e)),!r).join("/"),(r?"/":"")+t||"."},relative:(e,t)=>{function r(e){let t=0;for(;t<e.length&&""===e[t];t++);let r=e.length-1;for(;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=xe.resolve(e).slice(1),t=xe.resolve(t).slice(1);let n=r(e.split("/")),i=r(t.split("/")),a=Math.min(n.length,i.length),o=a;for(var s=0;s<a;s++)if(n[s]!==i[s]){o=s;break}let l=[];for(s=o;s<n.length;s++)l.push("..");return(l=l.concat(i.slice(o))).join("/")}};let Pe=[],Re=e=>{let t=0;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Ae=(e,t,r,n)=>{if(O("string"==typeof e,`stringToUTF8Array expects a string (got ${typeof e})`),!(n>0))return 0;let i=r,a=r+n-1;for(let n=0;n<e.length;++n){let i=e.charCodeAt(n);if(i>=55296&&i<=57343){i=65536+((1023&i)<<10)|1023&e.charCodeAt(++n)}if(i<=127){if(r>=a)break;t[r++]=i}else if(i<=2047){if(r+1>=a)break;t[r++]=192|i>>6,t[r++]=128|63&i}else if(i<=65535){if(r+2>=a)break;t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|63&i}else{if(r+3>=a)break;i>1114111&&de("Invalid Unicode code point "+le(i)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|63&i}}return t[r]=0,r-i},ke=(e,t,r)=>{let n=r>0?r:Re(e)+1,i=Array(n),a=Ae(e,i,0,i.length);return t&&(i.length=a),i};var Ie={ttys:[],init(){},shutdown(){},register(e,t){Ie.ttys[e]={input:[],output:[],ops:t},je.registerDevice(e,Ie.stream_ops)},stream_ops:{open(e){let t=Ie.ttys[e.node.rdev];if(!t)throw new je.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,r,n,i){if(!e.tty||!e.tty.ops.get_char)throw new je.ErrnoError(60);let a=0;for(let i=0;i<n;i++){var o;try{o=e.tty.ops.get_char(e.tty)}catch(e){throw new je.ErrnoError(29)}if(void 0===o&&0===a)throw new je.ErrnoError(6);if(null==o)break;a++,t[r+i]=o}return a&&(e.node.atime=Date.now()),a},write(e,t,r,n,i){if(!e.tty||!e.tty.ops.put_char)throw new je.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,t[r+a])}catch(e){throw new je.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),a}},default_tty_ops:{get_char:e=>(()=>{if(!Pe.length){let e=null;if(S){let t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=fs.readSync(n,t,0,256)}catch(e){if(!e.toString().includes("EOF"))throw e;r=0}r>0&&(e=t.slice(0,r).toString("utf-8"))}else"undefined"!=typeof window&&"function"==typeof window.prompt&&null!==(e=window.prompt("Input: "))&&(e+="\n");if(!e)return null;Pe=ke(e,!0)}return Pe.shift()})(),put_char(e,t){null===t||10===t?(k(fe(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){var t;(null===(t=e.output)||void 0===t?void 0:t.length)>0&&(k(fe(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,r)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){null===t||10===t?(I(fe(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){var t;(null===(t=e.output)||void 0===t?void 0:t.length)>0&&(I(fe(e.output)),e.output=[])}}};let Ce=e=>{Z("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")};var De={ops_table:null,mount:e=>De.createNode(null,"/",16895,0),createNode(e,t,r,n){var i;if(je.isBlkdev(r)||je.isFIFO(r))throw new je.ErrnoError(63);(i=De).ops_table||(i.ops_table={dir:{node:{getattr:De.node_ops.getattr,setattr:De.node_ops.setattr,lookup:De.node_ops.lookup,mknod:De.node_ops.mknod,rename:De.node_ops.rename,unlink:De.node_ops.unlink,rmdir:De.node_ops.rmdir,readdir:De.node_ops.readdir,symlink:De.node_ops.symlink},stream:{llseek:De.stream_ops.llseek}},file:{node:{getattr:De.node_ops.getattr,setattr:De.node_ops.setattr},stream:{llseek:De.stream_ops.llseek,read:De.stream_ops.read,write:De.stream_ops.write,mmap:De.stream_ops.mmap,msync:De.stream_ops.msync}},link:{node:{getattr:De.node_ops.getattr,setattr:De.node_ops.setattr,readlink:De.node_ops.readlink},stream:{}},chrdev:{node:{getattr:De.node_ops.getattr,setattr:De.node_ops.setattr},stream:je.chrdev_stream_ops}});let a=je.createNode(e,t,r,n);return je.isDir(a.mode)?(a.node_ops=De.ops_table.dir.node,a.stream_ops=De.ops_table.dir.stream,a.contents={}):je.isFile(a.mode)?(a.node_ops=De.ops_table.file.node,a.stream_ops=De.ops_table.file.stream,a.usedBytes=0,a.contents=null):je.isLink(a.mode)?(a.node_ops=De.ops_table.link.node,a.stream_ops=De.ops_table.link.stream):je.isChrdev(a.mode)&&(a.node_ops=De.ops_table.chrdev.node,a.stream_ops=De.ops_table.chrdev.stream),a.atime=a.mtime=a.ctime=Date.now(),e&&(e.contents[t]=a,e.atime=e.mtime=e.ctime=a.atime),a},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){let r=e.contents?e.contents.length:0;if(r>=t)return;t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));let n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{let r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){let t={};return t.dev=je.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,je.isDir(e.mode)?t.size=4096:je.isFile(e.mode)?t.size=e.usedBytes:je.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(let r of["mode","atime","mtime","ctime"])null!=t[r]&&(e[r]=t[r]);void 0!==t.size&&De.resizeFileStorage(e,t.size)},lookup(e,t){throw new je.ErrnoError(44)},mknod:(e,t,r,n)=>De.createNode(e,t,r,n),rename(e,t,r){let n;try{n=je.lookupNode(t,r)}catch(e){}if(n){if(je.isDir(e.mode))for(let e in n.contents)throw new je.ErrnoError(55);je.hashRemoveNode(n)}delete e.parent.contents[e.name],t.contents[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){let r=je.lookupNode(e,t);for(let e in r.contents)throw new je.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir:e=>[".","..",...Object.keys(e.contents)],symlink(e,t,r){let n=De.createNode(e,t,41471,0);return n.link=r,n},readlink(e){if(!je.isLink(e.mode))throw new je.ErrnoError(28);return e.link}},stream_ops:{read(e,t,r,n,i){let a=e.node.contents;if(i>=e.node.usedBytes)return 0;let o=Math.min(e.node.usedBytes-i,n);if(O(o>=0),o>8&&a.subarray)t.set(a.subarray(i,i+o),r);else for(let e=0;e<o;e++)t[r+e]=a[i+e];return o},write(e,t,r,n,i,a){if(O(!(t instanceof ArrayBuffer)),t.buffer===o.buffer&&(a=!1),!n)return 0;let s=e.node;if(s.mtime=s.ctime=Date.now(),t.subarray&&(!s.contents||s.contents.subarray)){if(a)return O(0===i,"canOwn must imply no weird position inside the file"),s.contents=t.subarray(r,r+n),s.usedBytes=n,n;if(0===s.usedBytes&&0===i)return s.contents=t.slice(r,r+n),s.usedBytes=n,n;if(i+n<=s.usedBytes)return s.contents.set(t.subarray(r,r+n),i),n}if(De.expandFileStorage(s,i+n),s.contents.subarray&&t.subarray)s.contents.set(t.subarray(r,r+n),i);else for(let e=0;e<n;e++)s.contents[i+e]=t[r+e];return s.usedBytes=Math.max(s.usedBytes,i+n),n},llseek(e,t,r){let n=t;if(1===r?n+=e.position:2===r&&je.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new je.ErrnoError(28);return n},mmap(e,t,r,n,i){let a,s;if(!je.isFile(e.node.mode))throw new je.ErrnoError(43);let l=e.node.contents;if(2&i||!l||l.buffer!==o.buffer){if(s=!0,!(a=Ce()))throw new je.ErrnoError(48);l&&((r>0||r+t<l.length)&&(l=l.subarray?l.subarray(r,r+t):Array.prototype.slice.call(l,r,r+t)),o.set(l,a))}else s=!1,a=l.byteOffset;return{ptr:a,allocated:s}},msync:(e,t,r,n,i)=>(De.stream_ops.write(e,t,0,n,r,!1),0)}};let Oe=async e=>{let t=await n(e);return O(t,`Loading data file "${e}" failed (no arrayBuffer).`),new Uint8Array(t)},Ne=(e,t,r,n,i,a)=>{je.createDataFile(e,t,r,n,i,a)},Me=w.preloadPlugins||[],Le=(e,t,r,n,i,a,o,s,l,c)=>{let u=t?xe.resolve(Te.join2(e,t)):e,d=function(e){let t=e;for(;;){if(!X[e])return e;e=t+Math.random()}}(`cp ${u}`);function h(r){function h(r){null==c||c(),s||Ne(e,t,r,n,i,l),null==a||a(),Q(d)}((e,t,r,n)=>{"undefined"!=typeof Browser&&Browser.init();let i=!1;return Me.forEach((a=>{!i&&a.canHandle(t)&&(a.handle(e,t,r,n),i=!0)})),i})(r,u,h,(()=>{null==o||o(),Q(d)}))||h(r)}J(d),"string"==typeof r?Oe(r).then(h,o):h(r)},Fe=(e,t)=>{let r=0;return e&&(r|=365),t&&(r|=146),r},$e={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};var je={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class extends Error{constructor(e){for(let t in super(N?(e=>pe(_r(e)))(e):""),mi(this,"name","ErrnoError"),this.errno=e,$e)if($e[t]===e){this.code=t;break}}},FSStream:class{get object(){return this.node}set object(e){this.node=e}get isRead(){return 1!=(2097155&this.flags)}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}constructor(){mi(this,"shared",{})}},FSNode:class{get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return je.isDir(this.mode)}get isDevice(){return je.isChrdev(this.mode)}constructor(e,t,r,n){mi(this,"node_ops",{}),mi(this,"stream_ops",{}),mi(this,"readMode",365),mi(this,"writeMode",146),mi(this,"mounted",null),e||(e=this),this.parent=e,this.mount=e.mount,this.id=je.nextInode++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}},lookupPath(e,t={}){var r,n;if(!e)throw new je.ErrnoError(44);null!==(n=(r=t).follow_mount)&&void 0!==n||(r.follow_mount=!0),Te.isAbs(e)||(e=je.cwd()+"/"+e);e:for(let r=0;r<40;r++){let r=e.split("/").filter((e=>!!e)),n=je.root,i="/";for(let a=0;a<r.length;a++){let o=a===r.length-1;if(o&&t.parent)break;if("."!==r[a]){if(".."===r[a]){i=Te.dirname(i),n=n.parent;continue}i=Te.join2(i,r[a]);try{n=je.lookupNode(n,r[a])}catch(e){if(44===(null==e?void 0:e.errno)&&o&&t.noent_okay)return{path:i};throw e}if(je.isMountpoint(n)&&(!o||t.follow_mount)&&(n=n.mounted.root),je.isLink(n.mode)&&(!o||t.follow)){if(!n.node_ops.readlink)throw new je.ErrnoError(52);let t=n.node_ops.readlink(n);Te.isAbs(t)||(t=Te.dirname(i)+"/"+t),e=t+"/"+r.slice(a+1).join("/");continue e}}}return{path:i,node:n}}throw new je.ErrnoError(32)},getPath(e){let t;for(;;){if(je.isRoot(e)){let r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?`${r}/${t}`:r+t:r}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e)|0;return(e+r>>>0)%je.nameTable.length},hashAddNode(e){let t=je.hashName(e.parent.id,e.name);e.name_next=je.nameTable[t],je.nameTable[t]=e},hashRemoveNode(e){let t=je.hashName(e.parent.id,e.name);if(je.nameTable[t]===e)je.nameTable[t]=e.name_next;else{let r=je.nameTable[t];for(;r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}}},lookupNode(e,t){let r=je.mayLookup(e);if(r)throw new je.ErrnoError(r);let n=je.hashName(e.id,t);for(let r=je.nameTable[n];r;r=r.name_next){let n=r.name;if(r.parent.id===e.id&&n===t)return r}return je.lookup(e,t)},createNode(e,t,r,n){O("object"==typeof e);let i=new je.FSNode(e,t,r,n);return je.hashAddNode(i),i},destroyNode(e){je.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagsToPermissionString(e){let t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>je.ignorePermissions?0:t.includes("r")&&!(292&e.mode)||t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0,mayLookup(e){if(!je.isDir(e.mode))return 54;return je.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate(e,t){if(!je.isDir(e.mode))return 54;try{return je.lookupNode(e,t),20}catch(e){}return je.nodePermissions(e,"wx")},mayDelete(e,t,r){let n;try{n=je.lookupNode(e,t)}catch(e){return e.errno}let i=je.nodePermissions(e,"wx");if(i)return i;if(r){if(!je.isDir(n.mode))return 54;if(je.isRoot(n)||je.getPath(n)===je.cwd())return 10}else if(je.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?je.isLink(e.mode)?32:je.isDir(e.mode)&&("r"!==je.flagsToPermissionString(t)||576&t)?31:je.nodePermissions(e,je.flagsToPermissionString(t)):44,checkOpExists(e,t){if(!e)throw new je.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(let e=0;e<=je.MAX_OPEN_FDS;e++)if(!je.streams[e])return e;throw new je.ErrnoError(33)},getStreamChecked(e){let t=je.getStream(e);if(!t)throw new je.ErrnoError(8);return t},getStream:e=>je.streams[e],createStream:(e,t=-1)=>(O(t>=-1),e=Object.assign(new je.FSStream,e),-1==t&&(t=je.nextfd()),e.fd=t,je.streams[t]=e,e),closeStream(e){je.streams[e]=null},dupStream(e,t=-1){var r,n;let i=je.createStream(e,t);return null===(r=i.stream_ops)||void 0===r||null===(n=r.dup)||void 0===n||n.call(r,i),i},doSetAttr(e,t,r){let n=null==e?void 0:e.stream_ops.setattr,i=n?e:t;null!=n||(n=t.node_ops.setattr),je.checkOpExists(n,63),n(i,r)},chrdev_stream_ops:{open(e){var t,r;let n=je.getDevice(e.node.rdev);e.stream_ops=n.stream_ops,null===(r=(t=e.stream_ops).open)||void 0===r||r.call(t,e)},llseek(){throw new je.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){je.devices[e]={stream_ops:t}},getDevice:e=>je.devices[e],getMounts(e){let t=[],r=[e];for(;r.length;){let e=r.pop();t.push(e),r.push(...e.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),je.syncFSRequests++,je.syncFSRequests>1&&I(`warning: ${je.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);let r=je.getMounts(je.root.mount),n=0;function i(e){return O(je.syncFSRequests>0),je.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++n>=r.length&&i(null)}r.forEach((t=>{if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount(e,t,r){let n;if("string"==typeof e)throw e;let i="/"===r,a=!r;if(i&&je.root)throw new je.ErrnoError(10);if(!i&&!a){let e=je.lookupPath(r,{follow_mount:!1});if(r=e.path,n=e.node,je.isMountpoint(n))throw new je.ErrnoError(10);if(!je.isDir(n.mode))throw new je.ErrnoError(54)}let o={type:e,opts:t,mountpoint:r,mounts:[]},s=e.mount(o);return s.mount=o,o.root=s,i?je.root=s:n&&(n.mounted=o,n.mount&&n.mount.mounts.push(o)),s},unmount(e){let t=je.lookupPath(e,{follow_mount:!1});if(!je.isMountpoint(t.node))throw new je.ErrnoError(28);let r=t.node,n=r.mounted,i=je.getMounts(n);Object.keys(je.nameTable).forEach((e=>{let t=je.nameTable[e];for(;t;){let e=t.name_next;i.includes(t.mount)&&je.destroyNode(t),t=e}})),r.mounted=null;let a=r.mount.mounts.indexOf(n);O(-1!==a),r.mount.mounts.splice(a,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,r){let n=je.lookupPath(e,{parent:!0}).node,i=Te.basename(e);if(!i)throw new je.ErrnoError(28);if("."===i||".."===i)throw new je.ErrnoError(20);let a=je.mayCreate(n,i);if(a)throw new je.ErrnoError(a);if(!n.node_ops.mknod)throw new je.ErrnoError(63);return n.node_ops.mknod(n,i,t,r)},statfs:e=>je.statfsNode(je.lookupPath(e,{follow:!0}).node),statfsStream:e=>je.statfsNode(e.node),statfsNode(e){let t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:je.nextInode,ffree:je.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create:(e,t=438)=>(t&=4095,t|=32768,je.mknod(e,t,0)),mkdir:(e,t=511)=>(t&=1023,t|=16384,je.mknod(e,t,0)),mkdirTree(e,t){let r=e.split("/"),n="";for(let i of r)if(i){(n||Te.isAbs(e))&&(n+="/"),n+=i;try{je.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,je.mknod(e,t,r)),symlink(e,t){if(!xe.resolve(e))throw new je.ErrnoError(44);let r=je.lookupPath(t,{parent:!0}).node;if(!r)throw new je.ErrnoError(44);let n=Te.basename(t),i=je.mayCreate(r,n);if(i)throw new je.ErrnoError(i);if(!r.node_ops.symlink)throw new je.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename(e,t){let r,n,i,a=Te.dirname(e),o=Te.dirname(t),s=Te.basename(e),l=Te.basename(t);if(r=je.lookupPath(e,{parent:!0}).node,n=je.lookupPath(t,{parent:!0}).node,!r||!n)throw new je.ErrnoError(44);if(r.mount!==n.mount)throw new je.ErrnoError(75);let c=je.lookupNode(r,s),u=xe.relative(e,o);if("."!==u.charAt(0))throw new je.ErrnoError(28);if("."!==(u=xe.relative(t,a)).charAt(0))throw new je.ErrnoError(55);try{i=je.lookupNode(n,l)}catch(e){}if(c===i)return;let d=je.isDir(c.mode),h=je.mayDelete(r,s,d);if(h||(h=i?je.mayDelete(n,l,d):je.mayCreate(n,l)))throw new je.ErrnoError(h);if(!r.node_ops.rename)throw new je.ErrnoError(63);if(je.isMountpoint(c)||i&&je.isMountpoint(i))throw new je.ErrnoError(10);if(n!==r&&(h=je.nodePermissions(r,"w")))throw new je.ErrnoError(h);je.hashRemoveNode(c);try{r.node_ops.rename(c,n,l),c.parent=n}catch(e){throw e}finally{je.hashAddNode(c)}},rmdir(e){let t=je.lookupPath(e,{parent:!0}).node,r=Te.basename(e),n=je.lookupNode(t,r),i=je.mayDelete(t,r,!0);if(i)throw new je.ErrnoError(i);if(!t.node_ops.rmdir)throw new je.ErrnoError(63);if(je.isMountpoint(n))throw new je.ErrnoError(10);t.node_ops.rmdir(t,r),je.destroyNode(n)},readdir(e){let t=je.lookupPath(e,{follow:!0}).node;return je.checkOpExists(t.node_ops.readdir,54)(t)},unlink(e){let t=je.lookupPath(e,{parent:!0}).node;if(!t)throw new je.ErrnoError(44);let r=Te.basename(e),n=je.lookupNode(t,r),i=je.mayDelete(t,r,!1);if(i)throw new je.ErrnoError(i);if(!t.node_ops.unlink)throw new je.ErrnoError(63);if(je.isMountpoint(n))throw new je.ErrnoError(10);t.node_ops.unlink(t,r),je.destroyNode(n)},readlink(e){let t=je.lookupPath(e).node;if(!t)throw new je.ErrnoError(44);if(!t.node_ops.readlink)throw new je.ErrnoError(28);return t.node_ops.readlink(t)},stat(e,t){let r=je.lookupPath(e,{follow:!t}).node;return je.checkOpExists(r.node_ops.getattr,63)(r)},fstat(e){let t=je.getStreamChecked(e),r=t.node,n=t.stream_ops.getattr,i=n?t:r;return null!=n||(n=r.node_ops.getattr),je.checkOpExists(n,63),n(i)},lstat:e=>je.stat(e,!0),doChmod(e,t,r,n){je.doSetAttr(e,t,{mode:4095&r|-4096&t.mode,ctime:Date.now(),dontFollow:n})},chmod(e,t,r){let n;if("string"==typeof e){n=je.lookupPath(e,{follow:!r}).node}else n=e;je.doChmod(null,n,t,r)},lchmod(e,t){je.chmod(e,t,!0)},fchmod(e,t){let r=je.getStreamChecked(e);je.doChmod(r,r.node,t,!1)},doChown(e,t,r){je.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:r})},chown(e,t,r,n){let i;if("string"==typeof e){i=je.lookupPath(e,{follow:!n}).node}else i=e;je.doChown(null,i,n)},lchown(e,t,r){je.chown(e,t,r,!0)},fchown(e,t,r){let n=je.getStreamChecked(e);je.doChown(n,n.node,!1)},doTruncate(e,t,r){if(je.isDir(t.mode))throw new je.ErrnoError(31);if(!je.isFile(t.mode))throw new je.ErrnoError(28);let n=je.nodePermissions(t,"w");if(n)throw new je.ErrnoError(n);je.doSetAttr(e,t,{size:r,timestamp:Date.now()})},truncate(e,t){let r;if(t<0)throw new je.ErrnoError(28);if("string"==typeof e){r=je.lookupPath(e,{follow:!0}).node}else r=e;je.doTruncate(null,r,t)},ftruncate(e,t){let r=je.getStreamChecked(e);if(t<0||!(2097155&r.flags))throw new je.ErrnoError(28);je.doTruncate(r,r.node,t)},utime(e,t,r){let n=je.lookupPath(e,{follow:!0}).node;je.checkOpExists(n.node_ops.setattr,63)(n,{atime:t,mtime:r})},open(e,t,r=438){let n,i;if(""===e)throw new je.ErrnoError(44);if(r=64&(t="string"==typeof t?(e=>{let t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw Error(`Unknown file open mode: ${e}`);return t})(t):t)?4095&r|32768:0,"object"==typeof e)n=e;else{i=e.endsWith("/");let r=je.lookupPath(e,{follow:!(131072&t),noent_okay:!0});n=r.node,e=r.path}let a=!1;if(64&t)if(n){if(128&t)throw new je.ErrnoError(20)}else{if(i)throw new je.ErrnoError(31);n=je.mknod(e,511|r,0),a=!0}if(!n)throw new je.ErrnoError(44);if(je.isChrdev(n.mode)&&(t&=-513),65536&t&&!je.isDir(n.mode))throw new je.ErrnoError(54);if(!a){let e=je.mayOpen(n,t);if(e)throw new je.ErrnoError(e)}512&t&&!a&&je.truncate(n,0),t&=-131713;let o=je.createStream({node:n,path:je.getPath(n),flags:t,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return o.stream_ops.open&&o.stream_ops.open(o),a&&je.chmod(n,511&r),!w.logReadFiles||1&t||e in je.readFiles||(je.readFiles[e]=1),o},close(e){if(je.isClosed(e))throw new je.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{je.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,r){if(je.isClosed(e))throw new je.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new je.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new je.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read(e,t,r,n,i){if(O(r>=0),n<0||i<0)throw new je.ErrnoError(28);if(je.isClosed(e)||1==(2097155&e.flags))throw new je.ErrnoError(8);if(je.isDir(e.node.mode))throw new je.ErrnoError(31);if(!e.stream_ops.read)throw new je.ErrnoError(28);let a=void 0!==i;if(a){if(!e.seekable)throw new je.ErrnoError(70)}else i=e.position;let o=e.stream_ops.read(e,t,r,n,i);return a||(e.position+=o),o},write(e,t,r,n,i,a){if(O(r>=0),n<0||i<0)throw new je.ErrnoError(28);if(je.isClosed(e)||!(2097155&e.flags))throw new je.ErrnoError(8);if(je.isDir(e.node.mode))throw new je.ErrnoError(31);if(!e.stream_ops.write)throw new je.ErrnoError(28);e.seekable&&1024&e.flags&&je.llseek(e,0,2);let o=void 0!==i;if(o){if(!e.seekable)throw new je.ErrnoError(70)}else i=e.position;let s=e.stream_ops.write(e,t,r,n,i,a);return o||(e.position+=s),s},mmap(e,t,r,n,i){if(2&n&&!(2&i)&&2!=(2097155&e.flags)||1==(2097155&e.flags))throw new je.ErrnoError(2);if(!e.stream_ops.mmap)throw new je.ErrnoError(43);if(!t)throw new je.ErrnoError(28);return e.stream_ops.mmap(e,t,r,n,i)},msync:(e,t,r,n,i)=>(O(r>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,i):0),ioctl(e,t,r){if(!e.stream_ops.ioctl)throw new je.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile(e,t={}){let r;if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw Error(`Invalid encoding type "${t.encoding}"`);let n=je.open(e,t.flags),i=je.stat(e).size,a=new Uint8Array(i);return je.read(n,a,0,i,0),"utf8"===t.encoding?r=fe(a):"binary"===t.encoding&&(r=a),je.close(n),r},writeFile(e,t,r={}){r.flags=r.flags||577;let n=je.open(e,r.flags,r.mode);if("string"==typeof t){let e=new Uint8Array(Re(t)+1),i=Ae(t,e,0,e.length);je.write(n,e,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw Error("Unsupported data type");je.write(n,t,0,t.byteLength,void 0,r.canOwn)}je.close(n)},cwd:()=>je.currentPath,chdir(e){let t=je.lookupPath(e,{follow:!0});if(null===t.node)throw new je.ErrnoError(44);if(!je.isDir(t.node.mode))throw new je.ErrnoError(54);let r=je.nodePermissions(t.node,"x");if(r)throw new je.ErrnoError(r);je.currentPath=t.path},createDefaultDirectories(){je.mkdir("/tmp"),je.mkdir("/home"),je.mkdir("/home/web_user")},createDefaultDevices(){je.mkdir("/dev"),je.registerDevice(je.makedev(1,3),{read:()=>0,write:(e,t,r,n,i)=>n,llseek:()=>0}),je.mkdev("/dev/null",je.makedev(1,3)),Ie.register(je.makedev(5,0),Ie.default_tty_ops),Ie.register(je.makedev(6,0),Ie.default_tty1_ops),je.mkdev("/dev/tty",je.makedev(5,0)),je.mkdev("/dev/tty1",je.makedev(6,0));let e=new Uint8Array(1024),t=0,r=()=>(0===t&&(Se(e),t=e.byteLength),e[--t]);je.createDevice("/dev","random",r),je.createDevice("/dev","urandom",r),je.mkdir("/dev/shm"),je.mkdir("/dev/shm/tmp")},createSpecialDirectories(){je.mkdir("/proc");let e=je.mkdir("/proc/self");je.mkdir("/proc/self/fd"),je.mount({mount(){let t=je.createNode(e,"fd",16895,73);return t.stream_ops={llseek:De.stream_ops.llseek},t.node_ops={lookup(e,t){let r=+t,n=je.getStreamChecked(r),i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path},id:r+1};return i.parent=i,i},readdir:()=>Array.from(je.streams.entries()).filter((([e,t])=>t)).map((([e,t])=>e.toString()))},t}},{},"/proc/self/fd")},createStandardStreams(e,t,r){e?je.createDevice("/dev","stdin",e):je.symlink("/dev/tty","/dev/stdin"),t?je.createDevice("/dev","stdout",null,t):je.symlink("/dev/tty","/dev/stdout"),r?je.createDevice("/dev","stderr",null,r):je.symlink("/dev/tty1","/dev/stderr");let n=je.open("/dev/stdin",0),i=je.open("/dev/stdout",1),a=je.open("/dev/stderr",1);O(0===n.fd,`invalid handle for stdin (${n.fd})`),O(1===i.fd,`invalid handle for stdout (${i.fd})`),O(2===a.fd,`invalid handle for stderr (${a.fd})`)},staticInit(){je.nameTable=Array(4096),je.mount(De,{},"/"),je.createDefaultDirectories(),je.createDefaultDevices(),je.createSpecialDirectories(),je.filesystems={MEMFS:De}},init(e,t,r){O(!je.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),je.initialized=!0,null!=e||(e=w.stdin),null!=t||(t=w.stdout),null!=r||(r=w.stderr),je.createStandardStreams(e,t,r)},quit(){for(let e of(je.initialized=!1,gr(0),je.streams))e&&je.close(e)},findObject(e,t){let r=je.analyzePath(e,t);return r.exists?r.object:null},analyzePath(e,t){try{e=(n=je.lookupPath(e,{follow:!t})).path}catch(e){}let r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=je.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=Te.basename(e),n=je.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath(e,t,r,n){e="string"==typeof e?e:je.getPath(e);let i=t.split("/").reverse();for(;i.length;){let t=i.pop();if(t){var a=Te.join2(e,t);try{je.mkdir(a)}catch(e){if(20!=e.errno)throw e}e=a}}return a},createFile(e,t,r,n,i){let a=Te.join2("string"==typeof e?e:je.getPath(e),t),o=Fe(n,i);return je.create(a,o)},createDataFile(e,t,r,n,i,a){let o=t;e&&(e="string"==typeof e?e:je.getPath(e),o=t?Te.join2(e,t):e);let s=Fe(n,i),l=je.create(o,s);if(r){if("string"==typeof r){let e=Array(r.length);for(let t=0,n=r.length;t<n;++t)e[t]=r.charCodeAt(t);r=e}je.chmod(l,146|s);let e=je.open(l,577);je.write(e,r,0,r.length,0,a),je.close(e),je.chmod(l,s)}},createDevice(e,t,r,n){var i,a;let o=Te.join2("string"==typeof e?e:je.getPath(e),t),s=Fe(!!r,!!n);null!==(a=(i=je.createDevice).major)&&void 0!==a||(i.major=64);let l=je.makedev(je.createDevice.major++,0);return je.registerDevice(l,{open(e){e.seekable=!1},close(e){var t;(null==n||null===(t=n.buffer)||void 0===t?void 0:t.length)&&n(10)},read(e,t,n,i,a){let o=0;for(let a=0;a<i;a++){var s;try{s=r()}catch(e){throw new je.ErrnoError(29)}if(void 0===s&&0===o)throw new je.ErrnoError(6);if(null==s)break;o++,t[n+a]=s}return o&&(e.node.atime=Date.now()),o},write(e,t,r,i,a){for(var o=0;o<i;o++)try{n(t[r+o])}catch(e){throw new je.ErrnoError(29)}return i&&(e.node.mtime=e.node.ctime=Date.now()),o}}),je.mkdev(o,s,l)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=i(e.url),e.usedBytes=e.contents.length}catch(e){throw new je.ErrnoError(29)}},createLazyFile(e,t,r,n,i){if("undefined"!=typeof XMLHttpRequest){if(!T)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";let e=new class{get(e){if(e>this.length-1||e<0)return;let t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}setDataGetter(e){this.getter=e}cacheLength(){let e,t=new XMLHttpRequest;if(t.open("HEAD",r,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw Error("Couldn't load "+r+". Status: "+t.status);let n=Number(t.getResponseHeader("Content-length")),i=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,a=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,o=1048576;i||(o=n);let s=(e,t)=>{if(e>t)throw Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw Error("only "+n+" bytes available! programmer error!");let i=new XMLHttpRequest;if(i.open("GET",r,!1),n!==o&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw Error("Couldn't load "+r+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):ke(i.responseText||"",!0)},l=this;l.setDataGetter((e=>{let t=e*o,r=(e+1)*o-1;if(r=Math.min(r,n-1),void 0===l.chunks[e]&&(l.chunks[e]=s(t,r)),void 0===l.chunks[e])throw Error("doXHR failed!");return l.chunks[e]})),(a||!n)&&(o=n=1,o=n=this.getter(0).length,k("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=o,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}constructor(){mi(this,"lengthKnown",!1),mi(this,"chunks",[])}};var a={isDevice:!1,contents:e}}else a={isDevice:!1,url:r};let s=je.createFile(e,t,a,n,i);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});let l={};function c(e,t,r,n,i){let a=e.node.contents;if(i>=a.length)return 0;let o=Math.min(a.length-i,n);if(O(o>=0),a.slice)for(var s=0;s<o;s++)t[r+s]=a[i+s];else for(s=0;s<o;s++)t[r+s]=a.get(i+s);return o}return Object.keys(s.stream_ops).forEach((e=>{let t=s.stream_ops[e];l[e]=(...e)=>(je.forceLoadFile(s),t(...e))})),l.read=(e,t,r,n,i)=>(je.forceLoadFile(s),c(e,t,r,n,i)),l.mmap=(e,t,r,n,i)=>{je.forceLoadFile(s);let a=Ce();if(!a)throw new je.ErrnoError(48);return c(e,o,a,t,r),{ptr:a,allocated:!0}},s.stream_ops=l,s},absolutePath(){Z("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){Z("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){Z("FS.createLink has been removed; use FS.symlink instead")},joinPath(){Z("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){Z("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){Z("FS.standardizePath has been removed; use PATH.normalize instead")}},Ue={DEFAULT_POLLMASK:5,calculateAt(e,t,r){let n;if(Te.isAbs(t))return t;if(-100===e)n=je.cwd();else{n=Ue.getStreamFromFD(e).path}if(0==t.length){if(!r)throw new je.ErrnoError(44);return n}return n+"/"+t},writeStat(e,t){u[e>>2]=t.dev,u[e+4>>2]=t.mode,d[e+8>>2]=t.nlink,u[e+12>>2]=t.uid,u[e+16>>2]=t.gid,u[e+20>>2]=t.rdev,f[e+24>>3]=BigInt(t.size),u[e+32>>2]=4096,u[e+36>>2]=t.blocks;let r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return f[e+40>>3]=BigInt(Math.floor(r/1e3)),d[e+48>>2]=r%1e3*1e6,f[e+56>>3]=BigInt(Math.floor(n/1e3)),d[e+64>>2]=n%1e3*1e6,f[e+72>>3]=BigInt(Math.floor(i/1e3)),d[e+80>>2]=i%1e3*1e6,f[e+88>>3]=BigInt(t.ino),0},writeStatFs(e,t){u[e+4>>2]=t.bsize,u[e+40>>2]=t.bsize,u[e+8>>2]=t.blocks,u[e+12>>2]=t.bfree,u[e+16>>2]=t.bavail,u[e+20>>2]=t.files,u[e+24>>2]=t.ffree,u[e+28>>2]=t.fsid,u[e+44>>2]=t.flags,u[e+36>>2]=t.namelen},doMsync(e,t,r,n,i){if(!je.isFile(t.node.mode))throw new je.ErrnoError(43);if(2&n)return 0;let a=s.slice(e,e+r);je.msync(t,a,i,r,n)},getStreamFromFD:e=>je.getStreamChecked(e),varargs:void 0,getStr:e=>pe(e)};let Ge={},Be=e=>{for(;e.length;){let t=e.pop();e.pop()(t)}};function We(e){return this.fromWireType(d[e>>2])}let ze={},He={},Ve={},qe=w.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Ke=e=>{throw new qe(e)},Xe=(e,t,r)=>{function n(t){let n=r(t);n.length!==e.length&&Ke("Mismatched type converter count");for(let t=0;t<e.length;++t)tt(e[t],n[t])}e.forEach((e=>Ve[e]=t));let i=Array(t.length),a=[],o=0;t.forEach(((e,t)=>{He.hasOwnProperty(e)?i[t]=He[e]:(a.push(e),ze.hasOwnProperty(e)||(ze[e]=[]),ze[e].push((()=>{i[t]=He[e],++o===a.length&&n(i)})))})),0===a.length&&n(i)},Ye={},Je=e=>{if(null===e)return"null";let t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e},Qe=e=>{let t="",r=e;for(;s[r];)t+=_[s[r++]];return t},Ze=w.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},et=e=>{throw new Ze(e)};function tt(e,t,r={}){if(void 0===t.argPackAdvance)throw TypeError("registerType registeredInstance requires argPackAdvance");return function(e,t,r={}){let n=t.name;if(e||et(`type "${n}" must have a positive integer typeid pointer`),He.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;et(`Cannot register type '${n}' twice`)}if(He[e]=t,delete Ve[e],ze.hasOwnProperty(e)){let t=ze[e];delete ze[e],t.forEach((e=>e()))}}(e,t,r)}let rt=(e,t,r)=>{switch(t){case 1:return r?e=>o[e]:e=>s[e];case 2:return r?e=>l[e>>1]:e=>c[e>>1];case 4:return r?e=>u[e>>2]:e=>d[e>>2];case 8:return r?e=>f[e>>3]:e=>p[e>>3];default:throw TypeError(`invalid integer width (${t}): ${e}`)}};var nt=8;let it=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),at=e=>{et(e.$$.ptrType.registeredClass.name+" instance already deleted")},ot=!1,st=e=>{},lt=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)};var ct=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;let n=ct(e,t,r.baseClass);return null===n?null:r.downcast(n)};let ut={},dt={},ht=(e,t)=>dt[t=((e,t)=>{for(void 0===t&&et("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t)],ft=(e,t)=>(t.ptrType&&t.ptr||Ke("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&Ke("Both smartPtrType and smartPtr must be specified"),t.count={value:1},mt(Object.create(e,{$$:{value:t,writable:!0}})));function pt(e){let t,r=this.getPointee(e);if(!r)return this.destructor(e),null;let n=ht(this.registeredClass,r);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=r,n.$$.smartPtr=e,n.clone();{let t=n.clone();return this.destructor(e),t}}function i(){return this.isSmartPointer?ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}let a=this.registeredClass.getActualType(r),o=ut[a];if(!o)return i.call(this);t=this.isConst?o.constPointerType:o.pointerType;let s=ct(r,this.registeredClass,t.registeredClass);return null===s?i.call(this):this.isSmartPointer?ft(t.registeredClass.instancePrototype,{ptrType:t,ptr:s,smartPtrType:this,smartPtr:e}):ft(t.registeredClass.instancePrototype,{ptrType:t,ptr:s})}var mt=e=>"undefined"==typeof FinalizationRegistry?(mt=e=>e,e):(ot=new FinalizationRegistry((e=>{lt(e.$$)})),mt=e=>{let t=e.$$;if(!!t.smartPtr){let r={$$:t},n=t.ptrType.registeredClass,i=Error(`Embind found a leaked C++ instance ${n.name} <${le(t.ptr)}>.\nWe'll free it automatically in this case, but this functionality is not reliable across various environments.\nMake sure to invoke .delete() manually once you're done with the instance instead.\nOriginally allocated`);"captureStackTrace"in Error&&Error.captureStackTrace(i,pt),r.leakWarning=i.stack.replace(/^Error: /,""),ot.register(e,r,e)}return e},st=e=>ot.unregister(e),mt(e));let gt=[];function _t(){}let vt=(e,t)=>Object.defineProperty(t,"name",{value:e}),yt=(e,t,r)=>{if(void 0===e[t].overloadTable){let n=e[t];e[t]=function(...n){return e[t].overloadTable.hasOwnProperty(n.length)||et(`Function '${r}' called with an invalid number of arguments (${n.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[n.length].apply(this,n)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},wt=(e,t,r)=>{w.hasOwnProperty(e)?((void 0===r||void 0!==w[e].overloadTable&&void 0!==w[e].overloadTable[r])&&et(`Cannot register public name '${e}' twice`),yt(w,e,e),w[e].overloadTable.hasOwnProperty(r)&&et(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),w[e].overloadTable[r]=t):(w[e]=t,w[e].argCount=r)};function Et(e,t,r,n,i,a,o,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=a,this.upcast=o,this.downcast=s,this.pureVirtualFunctions=[]}let bt=(e,t,r)=>{for(;t!==r;)t.upcast||et(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Tt(e,t){if(null===t)return this.isReference&&et(`null is not a valid ${this.name}`),0;t.$$||et(`Cannot pass "${Je(t)}" as a ${this.name}`),t.$$.ptr||et(`Cannot pass deleted object as a pointer of type ${this.name}`);let r=t.$$.ptrType.registeredClass;return bt(t.$$.ptr,r,this.registeredClass)}function St(e,t){let r;if(null===t)return this.isReference&&et(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t&&t.$$||et(`Cannot pass "${Je(t)}" as a ${this.name}`),t.$$.ptr||et(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&et(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);let n=t.$$.ptrType.registeredClass;if(r=bt(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&et("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:et(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{let n=t.clone();r=this.rawShare(r,jt.toHandle((()=>n.delete()))),null!==e&&e.push(this.rawDestructor,r)}break;default:et("Unsupporting sharing policy")}return r}function xt(e,t){if(null===t)return this.isReference&&et(`null is not a valid ${this.name}`),0;t.$$||et(`Cannot pass "${Je(t)}" as a ${this.name}`),t.$$.ptr||et(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&et(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);let r=t.$$.ptrType.registeredClass;return bt(t.$$.ptr,r,this.registeredClass)}function Pt(e,t,r,n,i,a,o,s,l,c,u){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=o,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=St:n?(this.toWireType=Tt,this.destructorFunction=null):(this.toWireType=xt,this.destructorFunction=null)}let Rt=[],At=e=>{let t=Rt[e];return t||(Rt[e]=t=v.get(e)),O(v.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},kt=(e,t,r=!1)=>{O(!r,"Async bindings are only supported with JSPI."),e=Qe(e);let n=At(t);return"function"!=typeof n&&et(`unknown function pointer with signature ${e}: ${t}`),n};class It extends Error{}let Ct=e=>{let t=hr(e),r=Qe(t);return pr(t),r},Dt=(e,t)=>{let r=[],n={};throw t.forEach((function e(t){if(!n[t]&&!He[t]){if(Ve[t])return void Ve[t].forEach(e);r.push(t),n[t]=!0}})),new It(`${e}: `+r.map(Ct).join([", "]))},Ot=(e,t)=>{let r=[];for(let n=0;n<e;n++)r.push(d[t+4*n>>2]);return r};function Nt(e,t,r,n,i,a){let o=t.length;o<2&&et("argTypes array size mismatch! Must at least get return value and 'this' types!"),O(!a,"Async bindings are only supported with JSPI.");let s=null!==t[1]&&null!==r,l=function(e){for(let t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}(t),c="void"!==t[0].name,u=o-2,d=function(e){let t=e.length-2;for(let r=e.length-1;r>=2&&e[r].optional;--r)t--;return t}(t),h=Array(u),f=[],p=[];return vt(e,(function(...r){let a;(function(e,t,r,n,i){if(e<t||e>r){i(`function ${n} called with ${e} arguments, expected ${t==r?t:`${t} to ${r}`}`)}})(r.length,d,u,e,et),p.length=0,f.length=s?2:1,f[0]=i,s&&(a=t[1].toWireType(p,this),f[1]=a);for(let e=0;e<u;++e)h[e]=t[e+2].toWireType(p,r[e]),f.push(h[e]);return function(e){if(l)Be(p);else for(let e=s?1:2;e<t.length;e++){let r=1===e?a:h[e-2];null!==t[e].destructorFunction&&t[e].destructorFunction(r)}if(c)return t[0].fromWireType(e)}(n(...f))}))}let Mt=(e,t,r)=>(e instanceof Object||et(`${r} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||et(`${r} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||et(`cannot call emscripten binding method ${r} on deleted object`),bt(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)),Lt=[],Ft=[],$t=e=>{e>9&&0==--Ft[e+1]&&(O(void 0!==Ft[e],"Decref for unallocated handle."),Ft[e]=void 0,Lt.push(e))};var jt={toValue:e=>(e||et(`Cannot use deleted val. handle = ${e}`),O(2===e||void 0!==Ft[e]&&e%2==0,`invalid handle: ${e}`),Ft[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{let t=Lt.pop()||Ft.length;return Ft[t]=e,Ft[t+1]=1,t}}}};let Ut={name:"emscripten::val",fromWireType:e=>{let t=jt.toValue(e);return $t(e),t},toWireType:(e,t)=>jt.toHandle(t),argPackAdvance:nt,readValueFromPointer:We,destructorFunction:null},Gt=(e,t,r)=>{switch(t){case 1:return r?function(e){return this.fromWireType(o[e])}:function(e){return this.fromWireType(s[e])};case 2:return r?function(e){return this.fromWireType(l[e>>1])}:function(e){return this.fromWireType(c[e>>1])};case 4:return r?function(e){return this.fromWireType(u[e>>2])}:function(e){return this.fromWireType(d[e>>2])};default:throw TypeError(`invalid integer width (${t}): ${e}`)}},Bt=(e,t)=>{let r=He[e];return void 0===r&&et(`${t} has unknown type ${Ct(e)}`),r},Wt=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(h[e>>2])};case 8:return function(e){return this.fromWireType(m[e>>3])};default:throw TypeError(`invalid float width (${t}): ${e}`)}},zt=(e,t,r)=>(O("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Ae(e,s,t,r)),Ht="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Vt=(e,t)=>{O(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");let r=e,n=r>>1,i=n+t/2;for(;!(n>=i)&&c[n];)++n;if((r=n<<1)-e>32&&Ht)return Ht.decode(s.subarray(e,r));let a="";for(let r=0;!(r>=t/2);++r){let t=l[e+2*r>>1];if(0==t)break;a+=String.fromCharCode(t)}return a},qt=(e,t,r)=>{if(O(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),O("number"==typeof r,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),null!=r||(r=2147483647),r<2)return 0;let n=t,i=(r-=2)<2*e.length?r/2:e.length;for(let r=0;r<i;++r){let n=e.charCodeAt(r);l[t>>1]=n,t+=2}return l[t>>1]=0,t-n},Kt=e=>2*e.length,Xt=(e,t)=>{O(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");let r=0,n="";for(;!(r>=t/4);){let t=u[e+4*r>>2];if(0==t)break;if(++r,t>=65536){let e=t-65536;n+=String.fromCharCode(55296|e>>10,56320|1023&e)}else n+=String.fromCharCode(t)}return n},Yt=(e,t,r)=>{if(O(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),O("number"==typeof r,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),null!=r||(r=2147483647),r<4)return 0;let n=t,i=n+r-4;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n>=55296&&n<=57343){n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)}if(u[t>>2]=n,(t+=4)+4>i)break}return u[t>>2]=0,t-n},Jt=e=>{let t=0;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},Qt=[],Zt=Reflect.construct,er=()=>performance.now(),tr=(e,t)=>(O(t,"alignment argument is required"),Math.ceil(e/t)*t),rr=e=>{let t=a.buffer,r=(e-t.byteLength+65535)/65536|0;t.byteLength;try{return a.grow(r),V(),1}catch(r){I(`growMemory: Attempted to grow heap from ${t.byteLength} bytes to ${e} bytes, but got error: ${r}`)}},nr={};var ir=()=>{if(!ir.strings){let t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:R||"./this.program"};for(var e in nr)void 0===nr[e]?delete t[e]:t[e]=nr[e];let r=[];for(var e in t)r.push(`${e}=${t[e]}`);ir.strings=r}return ir.strings};let ar=je.createPath,or=je.createLazyFile,sr=je.createDevice;w.incrementExceptionRefcount=e=>Pr(e);w.decrementExceptionRefcount=e=>xr(e);let lr=e=>Tr(e);var cr=e=>(e=>{let t,r=ue(),n=lr(4),i=lr(4);Rr(e,n,i);let a=d[n>>2],o=d[i>>2],s=pe(a);return pr(a),o&&(t=pe(o),pr(o)),ce(r),[s,t]})(e);w.getExceptionMessage=cr,je.createPreloadedFile=Le,je.staticInit(),w.FS_createPath=je.createPath,w.FS_createDataFile=je.createDataFile,w.FS_createPreloadedFile=je.createPreloadedFile,w.FS_unlink=je.unlink,w.FS_createLazyFile=je.createLazyFile,w.FS_createDevice=je.createDevice,(()=>{let e=Array(256);for(let t=0;t<256;++t)e[t]=String.fromCharCode(t);_=e})(),(()=>{let e=_t.prototype;Object.assign(e,{isAliasOf(e){if(!(this instanceof _t&&e instanceof _t))return!1;let t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,i=e.$$.ptr;for(;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i},clone(){if(this.$$.ptr||at(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;{let e=mt(Object.create(Object.getPrototypeOf(this),{$$:{value:it(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}},delete(){this.$$.ptr||at(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&et("Object already scheduled for deletion"),st(this),lt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||at(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&et("Object already scheduled for deletion"),gt.push(this),gt.length,this.$$.deleteScheduled=!0,this}});let t=Symbol.dispose;t&&(e[t]=e.delete)})(),Object.assign(Pt.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null===(t=this.rawDestructor)||void 0===t||t.call(this,e)},argPackAdvance:nt,readValueFromPointer:We,fromWireType:pt}),Ft.push(0,1,void 0,1,null,1,!0,1,!1,1),O(10===Ft.length),w.count_emval_handles=()=>Ft.length/2-5-Lt.length;var ur={__assert_fail:(e,t,r,n)=>Z(`Assertion failed: ${pe(e)}, at: `+[t?pe(t):"unknown filename",r,n?pe(n):"unknown function"]),__cxa_begin_catch:e=>{let t=new ve(e);return!t.get_caught()&&(t.set_caught(!0),ge--),t.set_rethrown(!1),me.push(t),le(e),Pr(e),fr(e)},__cxa_current_primary_exception:()=>{if(!me.length)return 0;let e=me[me.length-1];return Pr(e.excPtr),e.excPtr},__cxa_end_catch:()=>{vr(0,0),O(me.length>0);let e=me.pop();xr(e.excPtr),_e=0},__cxa_find_matching_catch_2:()=>we([]),__cxa_find_matching_catch_3:e=>we([e]),__cxa_rethrow:Ee,__cxa_rethrow_primary_exception:e=>{if(!e)return;let t=new ve(e);me.push(t),t.set_rethrown(!0),Ee()},__cxa_throw:(e,t,r)=>{throw le(e),le(r),new ve(e).init(t,r),_e=new j(e),ge++,_e},__cxa_uncaught_exceptions:()=>ge,__resumeException:e=>{throw le(e),_e||(_e=new j(e)),_e},__syscall_fcntl64:function(e,t,r){Ue.varargs=r;try{let r=Ue.getStreamFromFD(e);switch(t){case 0:if((n=be())<0)break;for(;je.streams[n];)n++;return je.dupStream(r,n).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var n=be();return r.flags|=n,0;case 12:n=be();return l[n+0>>1]=2,0}return-28}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ioctl:function(e,t,r){Ue.varargs=r;try{let r=Ue.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return r.tty?0:-59;case 21505:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){let e=r.tty.ops.ioctl_tcgets(r);var n=be();u[n>>2]=e.c_iflag||0,u[n+4>>2]=e.c_oflag||0,u[n+8>>2]=e.c_cflag||0,u[n+12>>2]=e.c_lflag||0;for(var i=0;i<32;i++)o[n+i+17]=e.c_cc[i]||0}return 0;case 21506:case 21507:case 21508:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){n=be();let e=u[n>>2],a=u[n+4>>2],s=u[n+8>>2],l=u[n+12>>2],c=[];for(i=0;i<32;i++)c.push(o[n+i+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:e,c_oflag:a,c_cflag:s,c_lflag:l,c_cc:c})}return 0;case 21519:if(!r.tty)return-59;n=be();return u[n>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:n=be();return je.ioctl(r,t,n);case 21523:if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){let e=r.tty.ops.ioctl_tiocgwinsz(r.tty);n=be();l[n>>1]=e[0],l[n+2>>1]=e[1]}return 0;default:return-28}}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_openat:function(e,t,r,n){Ue.varargs=n;try{t=Ue.getStr(t),t=Ue.calculateAt(e,t);let i=n?be():0;return je.open(t,r,i).fd}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return-e.errno}},_abort_js:()=>Z("native code called abort()"),_embind_finalize_value_array:e=>{let t=Ge[e];delete Ge[e];let r=t.elements,n=r.length,i=r.map((e=>e.getterReturnType)).concat(r.map((e=>e.setterArgumentType))),a=t.rawConstructor,o=t.rawDestructor;Xe([e],i,(e=>(r.forEach(((t,r)=>{let i=e[r],a=t.getter,o=t.getterContext,s=e[r+n],l=t.setter,c=t.setterContext;t.read=e=>i.fromWireType(a(o,e)),t.write=(e,t)=>{let r=[];l(c,e,s.toWireType(r,t)),Be(r)}})),[{name:t.name,fromWireType:e=>{let t=Array(n);for(let i=0;i<n;++i)t[i]=r[i].read(e);return o(e),t},toWireType:(e,i)=>{if(n!==i.length)throw TypeError(`Incorrect number of tuple elements for ${t.name}: expected=${n}, actual=${i.length}`);let s=a();for(let e=0;e<n;++e)r[e].write(s,i[e]);return null!==e&&e.push(o,s),s},argPackAdvance:nt,readValueFromPointer:We,destructorFunction:o}])))},_embind_finalize_value_object:e=>{let t=Ye[e];delete Ye[e];let r=t.rawConstructor,n=t.rawDestructor,i=t.fields,a=i.map((e=>e.getterReturnType)).concat(i.map((e=>e.setterArgumentType)));Xe([e],a,(e=>{let a={};return i.forEach(((t,r)=>{let n=t.fieldName,o=e[r],s=e[r].optional,l=t.getter,c=t.getterContext,u=e[r+i.length],d=t.setter,h=t.setterContext;a[n]={read:e=>o.fromWireType(l(c,e)),write:(e,t)=>{let r=[];d(h,e,u.toWireType(r,t)),Be(r)},optional:s}})),[{name:t.name,fromWireType:e=>{let t={};for(let r in a)t[r]=a[r].read(e);return n(e),t},toWireType:(e,t)=>{for(var i in a)if(!(i in t)&&!a[i].optional)throw TypeError(`Missing field: "${i}"`);let o=r();for(i in a)a[i].write(o,t[i]);return null!==e&&e.push(n,o),o},argPackAdvance:nt,readValueFromPointer:We,destructorFunction:n}]}))},_embind_register_bigint:(e,t,r,n,i)=>{let a=-1!=(t=Qe(t)).indexOf("u");a&&(i=(1n<<64n)-1n),tt(e,{name:t,fromWireType:e=>e,toWireType:function(e,r){if("bigint"!=typeof r&&"number"!=typeof r)throw TypeError(`Cannot convert "${Je(r)}" to ${this.name}`);if("number"==typeof r&&(r=BigInt(r)),r<n||r>i)throw TypeError(`Passing a number "${Je(r)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${n}, ${i}]!`);return r},argPackAdvance:nt,readValueFromPointer:rt(t,r,!a),destructorFunction:null})},_embind_register_bool:(e,t,r,n)=>{tt(e,{name:t=Qe(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:n},argPackAdvance:nt,readValueFromPointer:function(e){return this.fromWireType(s[e])},destructorFunction:null})},_embind_register_class:(e,t,r,n,i,a,o,s,l,c,u,d,h)=>{u=Qe(u),a=kt(i,a),s&&(s=kt(o,s)),c&&(c=kt(l,c)),h=kt(d,h);let f=(e=>{O("string"==typeof e);let t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(u);wt(f,(function(){Dt(`Cannot construct ${u} due to unbound types`,[n])})),Xe([e,t,r],n?[n]:[],(t=>{let r,i;t=t[0],i=n?(r=t.registeredClass).instancePrototype:_t.prototype;let o=vt(u,(function(...e){if(Object.getPrototypeOf(this)!==p)throw new Ze(`Use 'new' to construct ${u}`);if(void 0===m.constructor_body)throw new Ze(`${u} has no accessible constructor`);let t=m.constructor_body[e.length];if(void 0===t)throw new Ze(`Tried to invoke ctor of ${u} with invalid number of parameters (${e.length}) - expected (${Object.keys(m.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)}));var l,d,p=Object.create(i,{constructor:{value:o}});o.prototype=p;var m=new Et(u,o,p,h,r,a,s,c);m.baseClass&&(null!==(d=(l=m.baseClass).__derivedClasses)&&void 0!==d||(l.__derivedClasses=[]),m.baseClass.__derivedClasses.push(m));let g=new Pt(u,m,!0,!1,!1),_=new Pt(u+"*",m,!1,!1,!1),v=new Pt(u+" const*",m,!1,!0,!1);return ut[e]={pointerType:_,constPointerType:v},((e,t,r)=>{w.hasOwnProperty(e)||Ke("Replacing nonexistent public symbol"),void 0!==w[e].overloadTable&&void 0!==r?w[e].overloadTable[r]=t:(w[e]=t,w[e].argCount=r)})(f,o),[g,_,v]}))},_embind_register_class_constructor:(e,t,r,n,i,a)=>{O(t>0);let o=Ot(t,r);i=kt(n,i),Xe([],[e],(e=>{let r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Ze(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{Dt(`Cannot construct ${e.name} due to unbound types`,o)},Xe([],o,(n=>(n.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Nt(r,n,null,i,a),[]))),[]}))},_embind_register_class_function:(e,t,r,n,i,a,o,s,l,c)=>{let u=Ot(r,n);t=(e=>{let t=(e=e.trim()).indexOf("(");return-1===t?e:(O(e.endsWith(")"),"Parentheses for argument names should match."),e.slice(0,t))})(t=Qe(t)),a=kt(i,a,l),Xe([],[e],(e=>{let n=`${(e=e[0]).name}.${t}`;function i(){Dt(`Cannot call ${n} due to unbound types`,u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);let c=e.registeredClass.instancePrototype,d=c[t];return void 0===d||void 0===d.overloadTable&&d.className!==e.name&&d.argCount===r-2?(i.argCount=r-2,i.className=e.name,c[t]=i):(yt(c,t,n),c[t].overloadTable[r-2]=i),Xe([],u,(i=>{let s=Nt(n,i,e,a,o,l);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))},_embind_register_class_property:(e,t,r,n,i,a,o,s,l,c)=>{t=Qe(t),i=kt(n,i),Xe([],[e],(e=>{let n=`${(e=e[0]).name}.${t}`,u={get(){Dt(`Cannot access ${n} due to unbound types`,[r,o])},enumerable:!0,configurable:!0};return u.set=l?()=>Dt(`Cannot access ${n} due to unbound types`,[r,o]):e=>et(n+" is a read-only property"),Object.defineProperty(e.registeredClass.instancePrototype,t,u),Xe([],l?[r,o]:[r],(r=>{let o=r[0],u={get(){let t=Mt(this,e,n+" getter");return o.fromWireType(i(a,t))},enumerable:!0};if(l){l=kt(s,l);let t=r[1];u.set=function(r){let i=Mt(this,e,n+" setter"),a=[];l(c,i,t.toWireType(a,r)),Be(a)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,u),[]})),[]}))},_embind_register_emval:e=>tt(e,Ut),_embind_register_enum:(e,t,r,n)=>{function i(){}t=Qe(t),i.values={},tt(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:(e,t)=>t.value,argPackAdvance:nt,readValueFromPointer:Gt(t,r,n),destructorFunction:null}),wt(t,i)},_embind_register_enum_value:(e,t,r)=>{let n=Bt(e,"enum");t=Qe(t);let i=n.constructor,a=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:vt(`${n.name}_${t}`,(function(){}))}});i.values[r]=a,i[t]=a},_embind_register_float:(e,t,r)=>{tt(e,{name:t=Qe(t),fromWireType:e=>e,toWireType:(e,t)=>{if("number"!=typeof t&&"boolean"!=typeof t)throw TypeError(`Cannot convert ${Je(t)} to ${this.name}`);return t},argPackAdvance:nt,readValueFromPointer:Wt(t,r),destructorFunction:null})},_embind_register_integer:(e,t,r,n,i)=>{t=Qe(t),-1===i&&(i=4294967295);let a=e=>e;if(0===n){let e=32-8*r;a=t=>t<<e>>>e}let o=t.includes("unsigned"),s=(e,r)=>{if("number"!=typeof e&&"boolean"!=typeof e)throw TypeError(`Cannot convert "${Je(e)}" to ${r}`);if(e<n||e>i)throw TypeError(`Passing a number "${Je(e)}" from JS side to C/C++ side to an argument of type "${t}", which is outside the valid range [${n}, ${i}]!`)};tt(e,{name:t,fromWireType:a,toWireType:o?function(e,t){return s(t,this.name),t>>>0}:function(e,t){return s(t,this.name),t},argPackAdvance:nt,readValueFromPointer:rt(t,r,0!==n),destructorFunction:null})},_embind_register_memory_view:(e,t,r)=>{let n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];function i(e){let t=d[e>>2],r=d[e+4>>2];return new n(o.buffer,r,t)}tt(e,{name:r=Qe(r),fromWireType:i,argPackAdvance:nt,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(e,t)=>{tt(e,{name:t=Qe(t),fromWireType(e){let t,r=d[e>>2],n=e+4;{let e=n;for(var i=0;i<=r;++i){let a=n+i;if(i==r||0==s[a]){let r=pe(e,a-e);void 0===t?t=r:t+="\0"+r,e=a+1}}}return pr(e),t},toWireType(e,t){let r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));let n="string"==typeof t;n||ArrayBuffer.isView(t)&&1==t.BYTES_PER_ELEMENT||et("Cannot pass non-string to std::string"),r=n?Re(t):t.length;let i=mr(4+r+1),a=i+4;return d[i>>2]=r,n?zt(t,a,r+1):s.set(t,a),null!==e&&e.push(pr,i),i},argPackAdvance:nt,readValueFromPointer:We,destructorFunction(e){pr(e)}})},_embind_register_std_wstring:(e,t,r)=>{let n,i,a,o;r=Qe(r),2===t?(n=Vt,i=qt,o=Kt,a=e=>c[e>>1]):4===t&&(n=Xt,i=Yt,o=Jt,a=e=>d[e>>2]),tt(e,{name:r,fromWireType:e=>{let r,i=d[e>>2],o=e+4;for(let s=0;s<=i;++s){let l=e+4+s*t;if(s==i||0==a(l)){let e=n(o,l-o);void 0===r?r=e:r+="\0"+e,o=l+t}}return pr(e),r},toWireType:(e,n)=>{"string"!=typeof n&&et(`Cannot pass non-string to C++ string type ${r}`);let a=o(n),s=mr(4+a+t);return d[s>>2]=a/t,i(n,s+4,a+t),null!==e&&e.push(pr,s),s},argPackAdvance:nt,readValueFromPointer:We,destructorFunction(e){pr(e)}})},_embind_register_value_array:(e,t,r,n,i,a)=>{Ge[e]={name:Qe(t),rawConstructor:kt(r,n),rawDestructor:kt(i,a),elements:[]}},_embind_register_value_array_element:(e,t,r,n,i,a,o,s,l)=>{Ge[e].elements.push({getterReturnType:t,getter:kt(r,n),getterContext:i,setterArgumentType:a,setter:kt(o,s),setterContext:l})},_embind_register_value_object:(e,t,r,n,i,a)=>{Ye[e]={name:Qe(t),rawConstructor:kt(r,n),rawDestructor:kt(i,a),fields:[]}},_embind_register_value_object_field:(e,t,r,n,i,a,o,s,l,c)=>{Ye[e].fields.push({fieldName:Qe(t),getterReturnType:r,getter:kt(n,i),getterContext:a,setterArgumentType:o,setter:kt(s,l),setterContext:c})},_embind_register_void:(e,t)=>{tt(e,{isVoid:!0,name:t=Qe(t),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,t)=>{}})},_emval_call:(e,t,r,n)=>(e=Qt[e])(null,t=jt.toValue(t),r,n),_emval_decref:$t,_emval_get_method_caller:(e,t,r)=>{let n=((e,t)=>{let r=Array(e);for(let n=0;n<e;++n)r[n]=Bt(d[t+4*n>>2],`parameter ${n}`);return r})(e,t),i=n.shift();e--;let a=Array(e),o=`methodCaller<(${n.map((e=>e.name)).join(", ")}) => ${i.name}>`;return(e=>{let t=Qt.length;return Qt.push(e),t})(vt(o,((t,o,s,l)=>{let c=0;for(let t=0;t<e;++t)a[t]=n[t].readValueFromPointer(l+c),c+=n[t].argPackAdvance;let u=1===r?Zt(o,a):o.apply(t,a);return((e,t,r)=>{let n=[],i=e.toWireType(n,r);return n.length&&(d[t>>2]=jt.toHandle(n)),i})(i,s,u)})))},_emval_incref:e=>{e>9&&(Ft[e+1]+=1)},_emval_run_destructors:e=>{let t=jt.toValue(e);Be(t),$t(e)},_emval_take_value:(e,t)=>{let r=(e=Bt(e,"_emval_take_value")).readValueFromPointer(t);return jt.toHandle(r)},_tzset_js:(e,t,r,n)=>{let i=(new Date).getFullYear(),a=new Date(i,0,1),o=new Date(i,6,1),s=a.getTimezoneOffset(),l=o.getTimezoneOffset();d[e>>2]=60*Math.max(s,l),u[t>>2]=Number(s!=l);let c=e=>{let t=Math.abs(e);return`UTC${e>=0?"-":"+"}${String(Math.floor(t/60)).padStart(2,"0")}${String(t%60).padStart(2,"0")}`},h=c(s),f=c(l);O(h),O(f),O(16>=Re(h),`timezone name truncated to fit in TZNAME_MAX (${h})`),O(16>=Re(f),`timezone name truncated to fit in TZNAME_MAX (${f})`),l<s?(zt(h,r,17),zt(f,n,17)):(zt(h,n,17),zt(f,r,17))},clock_time_get:function(e,t,r){let n;return(e=>e>=0&&e<=3)(e)?(n=0===e?Date.now():er(),f[r>>3]=BigInt(Math.round(1e6*n)),0):28},emscripten_get_now:er,emscripten_resize_heap:e=>{let t=s.length;O((e>>>=0)>t);let r=2147483648;if(e>r)return I(`Cannot enlarge memory, requested ${e} bytes, but the limit is ${r} bytes!`),!1;for(let i=1;i<=4;i*=2){let a=t*(1+.2/i);a=Math.min(a,e+100663296);var n=Math.min(r,tr(Math.max(e,a),65536));if(rr(n))return!0}return I(`Failed to grow the heap from ${t} bytes to ${n} bytes, not enough memory!`),!1},environ_get:(e,t)=>{let r=0;return ir().forEach(((n,i)=>{let a=t+r;d[e+4*i>>2]=a,((e,t)=>{for(let r=0;r<e.length;++r)O(e.charCodeAt(r)===(255&e.charCodeAt(r))),o[t++]=e.charCodeAt(r);o[t]=0})(n,a),r+=n.length+1})),0},environ_sizes_get:(e,t)=>{let r=ir();d[e>>2]=r.length;let n=0;return r.forEach((e=>n+=e.length+1)),d[t>>2]=n,0},fd_close:function(e){try{let t=Ue.getStreamFromFD(e);return je.close(t),0}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return e.errno}},fd_read:function(e,t,r,n){try{let i=((e,t,r,n)=>{let i=0;for(let a=0;a<r;a++){let r=d[t>>2],a=d[t+4>>2];t+=8;let s=je.read(e,o,r,a,n);if(s<0)return-1;if(i+=s,s<a)break;void 0!==n&&(n+=s)}return i})(Ue.getStreamFromFD(e),t,r);return d[n>>2]=i,0}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return e.errno}},fd_seek:function(e,t,r,n){t=(e=>e<-9007199254740992||e>9007199254740992?NaN:Number(e))(t);try{if(isNaN(t))return 61;let i=Ue.getStreamFromFD(e);return je.llseek(i,t,r),f[n>>3]=BigInt(i.position),i.getdents&&0===t&&0===r&&(i.getdents=null),0}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return e.errno}},fd_write:function(e,t,r,n){try{let i=((e,t,r,n)=>{let i=0;for(let a=0;a<r;a++){let r=d[t>>2],a=d[t+4>>2];t+=8;let s=je.write(e,o,r,a,n);if(s<0)return-1;if(i+=s,s<a)break;void 0!==n&&(n+=s)}return i})(Ue.getStreamFromFD(e),t,r);return d[n>>2]=i,0}catch(e){if(void 0===je||"ErrnoError"!==e.name)throw e;return e.errno}},invoke_dii:function(e,t,r){let n=ue();try{return At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_diii:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_fi:function(e,t){let r=ue();try{return At(e)(t)}catch(e){if(ce(r),!(e instanceof $))throw e;vr(1,0)}},invoke_fiii:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_fiij:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_i:function(e){let t=ue();try{return At(e)()}catch(e){if(ce(t),!(e instanceof $))throw e;vr(1,0)}},invoke_ii:function(e,t){let r=ue();try{return At(e)(t)}catch(e){if(ce(r),!(e instanceof $))throw e;vr(1,0)}},invoke_iii:function(e,t,r){let n=ue();try{return At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_iiif:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_iiii:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiii:function(e,t,r,n,i){let a=ue();try{return At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiid:function(e,t,r,n,i,a){let o=ue();try{return At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiif:function(e,t,r,n,i,a){let o=ue();try{return At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiii:function(e,t,r,n,i,a){let o=ue();try{return At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiiii:function(e,t,r,n,i,a,o){let s=ue();try{return At(e)(t,r,n,i,a,o)}catch(e){if(ce(s),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiiiii:function(e,t,r,n,i,a,o,s){let l=ue();try{return At(e)(t,r,n,i,a,o,s)}catch(e){if(ce(l),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiiiiiiii:function(e,t,r,n,i,a,o,s,l,c,u){let d=ue();try{return At(e)(t,r,n,i,a,o,s,l,c,u)}catch(e){if(ce(d),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiiiiiiiii:function(e,t,r,n,i,a,o,s,l,c,u,d){let h=ue();try{return At(e)(t,r,n,i,a,o,s,l,c,u,d)}catch(e){if(ce(h),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiiiiiiiiii:function(e,t,r,n,i,a,o,s,l,c,u,d,h){let f=ue();try{return At(e)(t,r,n,i,a,o,s,l,c,u,d,h)}catch(e){if(ce(f),!(e instanceof $))throw e;vr(1,0)}},invoke_iiiiij:function(e,t,r,n,i,a){let o=ue();try{return At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_iij:function(e,t,r){let n=ue();try{return At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_iiji:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_iijj:function(e,t,r,n){let i=ue();try{return At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_j:function(e){let t=ue();try{return At(e)()}catch(e){if(ce(t),!(e instanceof $))throw e;return vr(1,0),0n}},invoke_ji:function(e,t){let r=ue();try{return At(e)(t)}catch(e){if(ce(r),!(e instanceof $))throw e;return vr(1,0),0n}},invoke_jiiii:function(e,t,r,n,i){let a=ue();try{return At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;return vr(1,0),0n}},invoke_jij:function(e,t,r){let n=ue();try{return At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;return vr(1,0),0n}},invoke_v:function(e){let t=ue();try{At(e)()}catch(e){if(ce(t),!(e instanceof $))throw e;vr(1,0)}},invoke_vi:function(e,t){let r=ue();try{At(e)(t)}catch(e){if(ce(r),!(e instanceof $))throw e;vr(1,0)}},invoke_vid:function(e,t,r){let n=ue();try{At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_vif:function(e,t,r){let n=ue();try{At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_viffddj:function(e,t,r,n,i,a,o){let s=ue();try{At(e)(t,r,n,i,a,o)}catch(e){if(ce(s),!(e instanceof $))throw e;vr(1,0)}},invoke_viffi:function(e,t,r,n,i){let a=ue();try{At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;vr(1,0)}},invoke_vifii:function(e,t,r,n,i){let a=ue();try{At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;vr(1,0)}},invoke_vii:function(e,t,r){let n=ue();try{At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_viif:function(e,t,r,n){let i=ue();try{At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_viifi:function(e,t,r,n,i){let a=ue();try{At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;vr(1,0)}},invoke_viifii:function(e,t,r,n,i,a){let o=ue();try{At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_viii:function(e,t,r,n){let i=ue();try{At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},invoke_viiifi:function(e,t,r,n,i,a){let o=ue();try{At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_viiifii:function(e,t,r,n,i,a,o){let s=ue();try{At(e)(t,r,n,i,a,o)}catch(e){if(ce(s),!(e instanceof $))throw e;vr(1,0)}},invoke_viiii:function(e,t,r,n,i){let a=ue();try{At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiid:function(e,t,r,n,i,a){let o=ue();try{At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiif:function(e,t,r,n,i,a){let o=ue();try{At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiifi:function(e,t,r,n,i,a,o){let s=ue();try{At(e)(t,r,n,i,a,o)}catch(e){if(ce(s),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiii:function(e,t,r,n,i,a){let o=ue();try{At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiiii:function(e,t,r,n,i,a,o){let s=ue();try{At(e)(t,r,n,i,a,o)}catch(e){if(ce(s),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiiiii:function(e,t,r,n,i,a,o,s){let l=ue();try{At(e)(t,r,n,i,a,o,s)}catch(e){if(ce(l),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiiiiiiii:function(e,t,r,n,i,a,o,s,l,c,u){let d=ue();try{At(e)(t,r,n,i,a,o,s,l,c,u)}catch(e){if(ce(d),!(e instanceof $))throw e;vr(1,0)}},invoke_viiiiiiiiiiiiiii:function(e,t,r,n,i,a,o,s,l,c,u,d,h,f,p,m){let g=ue();try{At(e)(t,r,n,i,a,o,s,l,c,u,d,h,f,p,m)}catch(e){if(ce(g),!(e instanceof $))throw e;vr(1,0)}},invoke_viijf:function(e,t,r,n,i){let a=ue();try{At(e)(t,r,n,i)}catch(e){if(ce(a),!(e instanceof $))throw e;vr(1,0)}},invoke_viijii:function(e,t,r,n,i,a){let o=ue();try{At(e)(t,r,n,i,a)}catch(e){if(ce(o),!(e instanceof $))throw e;vr(1,0)}},invoke_vij:function(e,t,r){let n=ue();try{At(e)(t,r)}catch(e){if(ce(n),!(e instanceof $))throw e;vr(1,0)}},invoke_vijj:function(e,t,r,n){let i=ue();try{At(e)(t,r,n)}catch(e){if(ce(i),!(e instanceof $))throw e;vr(1,0)}},llvm_eh_typeid_for:e=>e},dr=await async function(){function e(e,t){return O(a=(dr=e.exports).memory,"memory not found in wasm exports"),V(),O(v=dr.__indirect_function_table,"table not found in wasm exports"),Q("wasm-instantiate"),dr}J("wasm-instantiate");let t=w,n={env:ur,wasi_snapshot_preview1:ur};if(w.instantiateWasm)return new Promise(((t,r)=>{try{w.instantiateWasm(n,((r,n)=>{e(r),t(r.exports)}))}catch(e){I(`Module.instantiateWasm callback failed with error: ${e}`),r(e)}}));null!=g||(g=function(){var e;return w.locateFile?(e="fasttext_wasm.wasm",w.locateFile?w.locateFile(e,A):A+e):""}());try{let r=await async function(e,t,r){if(!e&&"function"==typeof WebAssembly.instantiateStreaming&&!L(t)&&!S)try{let e=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(e,r)}catch(e){I(`wasm streaming compile failed: ${e}`),I("falling back to ArrayBuffer instantiation")}return re(t,r)}(C,g,n);return O(w===t,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),t=null,e(r.instance)}catch(e){return r(e),Promise.reject(e)}}(),hr=ee("__getTypeName",1),fr=ee("__cxa_get_exception_ptr",1),pr=ee("free",1),mr=ee("malloc",1),gr=ee("fflush",1),_r=ee("strerror",1),vr=ee("setThrew",2),yr=ee("_emscripten_tempret_set",1);let wr=dr.emscripten_stack_init;dr.emscripten_stack_get_free,dr.emscripten_stack_get_base;var Er=dr.emscripten_stack_get_end,br=dr._emscripten_stack_restore,Tr=dr._emscripten_stack_alloc,Sr=dr.emscripten_stack_get_current,xr=ee("__cxa_decrement_exception_refcount",1),Pr=ee("__cxa_increment_exception_refcount",1),Rr=ee("__get_exception_message",3),Ar=ee("__cxa_can_catch",3);if(w.addRunDependency=J,w.removeRunDependency=Q,w.addOnPostRun=ae,w.FS_createPreloadedFile=Le,w.FS_unlink=e=>je.unlink(e),w.FS_createPath=ar,w.FS_createDevice=sr,w.FS=je,w.FS_createDataFile=Ne,w.FS_createLazyFile=or,["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","zeroMemory","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","demangle","stackTrace","getFunctionArgsName","createJsInvokerSignature","createJsInvoker","PureVirtualError","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","setDelayFunction","getStringOrSymbol","emval_get_global"].forEach((function(e){W(e,(()=>{let t=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,r=e;r.startsWith("_")||(r="$"+e),t+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${r}')`,B(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),de(t)})),H(e)})),["run","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","prettyPrint","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","setTempRet0","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","addOnPreRun","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","checkWasiClock","doReadv","doWritev","initRandomFill","randomFill","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_readFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","checkArgCount","getRequiredArgCount","UnboundTypeError","GenericWireTypeSize","EmValType","EmValOptionalType","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","registeredPointers","registerType","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","readPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_freelist","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_returnValue","emval_lookupTypes","emval_methodCallers","emval_addMethodCaller","reflectConstruct"].forEach(H),w.preInit)for("function"==typeof w.preInit&&(w.preInit=[w.preInit]);w.preInit.length>0;)w.preInit.pop()();for(let r of(G("preInit"),function e(){let r;function n(){var e;O(!y),y=!0,w.calledRun=!0,D||(O(!N),N=!0,F(),w.noFSInit||je.initialized||je.init(),dr.__wasm_call_ctors(),je.ignorePermissions=!1,t(w),null===(e=w.onRuntimeInitialized)||void 0===e||e.call(w),G("onRuntimeInitialized"),O(!w._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(F(),w.postRun)for("function"==typeof w.postRun&&(w.postRun=[w.postRun]);w.postRun.length;)ae(w.postRun.shift());G("postRun"),ne(ie)}())}q>0||(wr(),le(r=Er()),O(!(3&r)),0==r&&(r+=4),d[r>>2]=34821223,d[r+4>>2]=2310721022,d[0]=1668509029,function(){if(w.preRun)for("function"==typeof w.preRun&&(w.preRun=[w.preRun]);w.preRun.length;)se(w.preRun.shift());G("preRun"),ne(oe)}(),q>0)?K=e:(w.setStatus?(w.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>w.setStatus("")),1),n()}),1)):n(),F())}(),Object.keys(w)))r in e||Object.defineProperty(e,r,{configurable:!0,get(){Z(`Access to module property ('${r}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return E};function _i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let vi=null,yi="train.txt",wi="test.txt",Ei="model.bin";let bi=function(e){let t=e*Float32Array.BYTES_PER_ELEMENT,r=this._malloc(t),n=new Uint8Array(this.HEAPU8.buffer,r,t);return{ptr:n.byteOffset,size:e,buffer:n.buffer}},Ti=e=>new Float32Array(e.buffer,e.ptr,e.size);class Si{isQuant(){return this.f.isQuant}getDimension(){return this.f.args.dim}getWordVector(e){let t=bi.call(this,this.getDimension());return this.f.getWordVector(t,e),Ti(t)}getSentenceVector(e){if(e.includes("\n"))throw Error("sentence vector processes one line at a time (remove '\\n')");e+="\n";let t=bi.call(this,this.getDimension());return this.f.getSentenceVector(t,e),Ti(t)}getNearestNeighbors(e,t=10){return this.f.getNN(e,t)}getAnalogies(e,t,r,n){return this.f.getAnalogies(n,e,t,r)}getWordId(e){return this.f.getWordId(e)}getSubwordId(e){return this.f.getSubwordId(e)}getSubwords(e){return this.f.getSubwords(e)}getInputVector(e){let t=bi.call(this,this.getDimension());return this.f.getInputVector(t,e),Ti(t)}predict(e,t=1,r=0){return this.f.predict(e,t,r)}getInputMatrix(){if(this.isQuant())throw Error("Can't get quantized Matrix");return this.f.getInputMatrix()}getOutputMatrix(){if(this.isQuant())throw Error("Can't get quantized Matrix");return this.f.getOutputMatrix()}getWords(){return this.f.getWords()}getLabels(){return this.f.getLabels()}getLine(e){return this.f.getLine(e)}saveModel(){this.f.saveModel(Ei);let e=fastTextModule.FS.readFile(Ei,{encoding:"binary"});return new Blob([new Uint8Array(e,e.byteOffset,e.length)],{type:" application/octet-stream"})}test(e,t,r){let n=(null==globalThis?void 0:globalThis.fetch)||fetch,i=this.f;return new Promise(((a,o)=>{n(e).then((e=>e.arrayBuffer())).then((e=>{let t=new Uint8Array(e);fastTextModule.FS.writeFile(wi,t)})).then((()=>{let e=i.test(wi,t,r);a(e)})).catch((e=>{o(e)}))}))}constructor(e){_i(this,"f",void 0),this.f=e}}var xi=Object.freeze({__proto__:null,FastText:class{async init(e){this.initialized||(this.fastTextModule=await gi({locateFile:t=>t.endsWith(".wasm")?e:t}),vi&&this.fastTextModule.addOnPostRun(vi),this.f=new this.fastTextModule.FastText,this.initialized=!0)}_malloc(e){return this.fastTextModule._malloc(e)}get HEAPU8(){return this.fastTextModule.HEAPU8}get FS(){return this.fastTextModule.FS}async loadModel(e,t){this.initialized||await this.init(t);let r=this.f;return new Promise(((t,n)=>{fetch(e).then((e=>e.arrayBuffer())).then((e=>{let t=new Uint8Array(e);this.fastTextModule.FS.writeFile("model.bin",t)})).then((()=>{r.loadModel("model.bin"),t(new Si(r))})).catch((e=>{n(e)}))}))}async _train(e,t,r={},n=null){this.initialized||await this.init();let i=(null==globalThis?void 0:globalThis.fetch)||fetch,a=this.f;return new Promise(((o,s)=>{i(e).then((e=>e.arrayBuffer())).then((e=>{let t=new Uint8Array(e);fastTextModule.FS.writeFile(yi,t)})).then((()=>{let e=new fastTextModule.Args;["lr","lrUpdateRate","dim","ws","epoch","minCount","minCountLabel","neg","wordNgrams","loss","model","bucket","minn","maxn","t","label","verbose","pretrainedVectors","saveOutput","seed","qout","retrain","qnorm","cutoff","dsub","qnorm","autotuneValidationFile","autotuneMetric","autotunePredictions","autotuneDuration","autotuneModelSize"].forEach((t=>{t in r&&(e[t]=r[t])})),e.model=fastTextModule.ModelName[t],e.loss="loss"in r?fastTextModule.LossName[r.loss]:"hs",e.thread=1,e.input=yi,a.train(e,n),o(new Si(a))})).catch((e=>{s(e)}))}))}trainSupervised(e,t={},r){return this._train(e,"supervised",t,r).then((e=>e)).catch((e=>{throw e}))}trainUnsupervised(e,t,r={},n){return this._train(e,t,r,n).then((e=>e)).catch((e=>{throw e}))}constructor(){_i(this,"f",void 0),_i(this,"fastTextModule",void 0),_i(this,"initialized",void 0),this.f=null,this.fastTextModule=null,this.initialized=!1}},addOnPostRun:function(e){vi=e}});!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="582ca6ca-d0c2-505d-a204-2916f095f4c3")}catch(e){}}()}}]);
//# sourceMappingURL=sourceMap/3958.js.map