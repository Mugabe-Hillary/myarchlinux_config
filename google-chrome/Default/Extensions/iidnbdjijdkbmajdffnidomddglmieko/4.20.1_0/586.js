try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b0aabbd8-ba35-4a4e-a4b3-f67ae430bb1a",e._sentryDebugIdIdentifier="sentry-dbid-b0aabbd8-ba35-4a4e-a4b3-f67ae430bb1a")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.20.1"};(self.webpackChunk=self.webpackChunk||[]).push([[586],{10586:(e,t,a)=>{let s,n;var i;a.r(t),a.d(t,{GenerativeAIType:()=>h,ModesCodeMapping:()=>r,PARAPHRASER_MODES:()=>c,deleteAllHistory:()=>ds,deleteHistoryDetails:()=>cs,getAIResponse:()=>vs,getAllHistory:()=>hs,getAllParaphrasedTexts:()=>Ka,getConfig:()=>Va,getContextAwareCustomModeNames:()=>ws,getCustomModeSuggestions:()=>ss,getDefinitions:()=>is,getHistoryDataFromStorage:()=>ps,getHistoryDetails:()=>us,getHistorySentenceDataFromStorage:()=>ms,getIsEditorText:()=>V,getModeAwarePhrasalParaphraser:()=>ts,getModeSuggestions:()=>as,getNonCustomModeSuggestions:()=>ns,getParaphrasedText:()=>qa,getRecommendedWords:()=>_s,getRefinedCustomModeName:()=>za,getSegments:()=>$a,getSplitSentences:()=>Qa,getTextToSpeech:()=>ys,getThesaurus:()=>es,reportText:()=>rs,setConfig:()=>Ha,setHTTPClient:()=>te,setLoggerClient:()=>_,setParaphraseCompleteData:()=>gs,setParaphraseOutputEditData:()=>fs,setStorageClient:()=>X,setTrackerClient:()=>Y,unReportText:()=>os,updateSegments:()=>Ja}),(i=l||(l={})).US="us",i.UK="uk",i.CA="ca",i.AU="au",function(e){e.WRITE_EMAIL_FOR_KEYWORDS="WRITE_EMAIL_FOR_KEYWORDS",e.WRITE_EMAIL_FOR_SUBJECT="WRITE_EMAIL_FOR_SUBJECT",e.MODIFY_WITH_KEYWORDS="MODIFY_WITH_KEYWORDS",e.REGENERATE="REGENERATE",e.AUTOCOMPLETE_EMAIL="AUTOCOMPLETE_EMAIL",e.AUTOGENERATE_REPLY="AUTOGENERATE_REPLY",e.AUTOCOMPLETE_REPLY="AUTOCOMPLETE_REPLY",e.AUTOGENERATE_REPLY_FOR_KEYWORDS="AUTOGENERATE_REPLY_FOR_KEYWORDS",e.REQUEST_A_MEETING="REQUEST_A_MEETING",e.POLITELY_DECLINE="POLITELY_DECLINE",e.BUY_TIME="BUY_TIME",e.MODIFY_BE_CONCISE="MODIFY_BE_CONCISE",e.AUTOCOMPLETE_REPLY_BE_CONCISE="AUTOCOMPLETE_REPLY_BE_CONCISE",e.ADD_A_QUOTE="ADD_A_QUOTE",e.AUTOCOMPLETE_REPLY_ADD_QUOTE="AUTOCOMPLETE_REPLY_ADD_QUOTE",e.ADD_DETAILS="ADD_DETAILS",e.AUTOCOMPLETE_REPLY_ADD_DETAILS="AUTOCOMPLETE_REPLY_ADD_DETAILS",e.SOUND_ENCOURAGING="SOUND_ENCOURAGING",e.AUTOCOMPLETE_REPLY_SOUND_ENCOURAGING="AUTOCOMPLETE_REPLY_SOUND_ENCOURAGING",e.SOUND_CASUAL="SOUND_CASUAL",e.AUTOCOMPLETE_REPLY_SOUND_CASUAL="AUTOCOMPLETE_REPLY_SOUND_CASUAL",e.SOUND_FORMAL="SOUND_FORMAL",e.AUTOCOMPLETE_REPLY_SOUND_FORMAL="AUTOCOMPLETE_REPLY_SOUND_FORMAL",e.SOUND_URGENT="SOUND_URGENT",e.AUTOCOMPLETE_REPLY_SOUND_URGENT="AUTOCOMPLETE_REPLY_SOUND_URGENT",e.SOUND_APPRECIATIVE="SOUND_APPRECIATIVE",e.AUTOCOMPLETE_REPLY_SOUND_APPRECIATIVE="AUTOCOMPLETE_REPLY_SOUND_APPRECIATIVE",e.GENERATE_SUBJECT_LINE="GENERATE_SUBJECT_LINE",e.REGENERATE_SUBJECT_LINE="REGENERATE_SUBJECT_LINE",e.EXPAND="EXPAND",e.REQUEST_A_MEETING_V2="REQUEST_A_MEETING_V2",e.ASK_FOR_TASK_UPDATE="ASK_FOR_TASK_UPDATE"}(h||(h={})),function(e){e[e.standard=2]="standard",e[e.fluency=0]="fluency",e[e.formal=9]="formal",e[e.simple=10]="simple",e[e.creative=6]="creative",e[e.expand=8]="expand",e[e.shorten=7]="shorten",e[e.academic=99]="academic",e[e.custom=100]="custom",e[e.custom_voice=101]="custom_voice",e[e.natural=12]="natural",e[e.basic=13]="basic"}(u||(u={})),function(e){e[e.level0=0]="level0",e[e.level1=9]="level1",e[e.level2=7]="level2",e[e.level3=4]="level3"}(d||(d={})),function(e){e.FLUENCY="FLUENCY",e.STANDARD="STANDARD",e.CREATIVE="CREATIVE",e.SHORTEN="SHORTEN",e.EXPAND="EXPAND",e.FORMAL="FORMAL",e.SIMPLE="SIMPLE",e.ORIGINAL="ORIGINAL",e.ACADEMIC="ACADEMIC",e.CUSTOM_MODE="CUSTOM_MODE",e.CUSTOM_VOICE="CUSTOM_VOICE",e.NATURAL="NATURAL",e.BASIC="BASIC"}(c||(c={}));let r={[u.fluency]:c.FLUENCY,[u.standard]:c.STANDARD,[u.creative]:c.CREATIVE,[u.shorten]:c.SHORTEN,[u.expand]:c.EXPAND,[u.formal]:c.FORMAL,[u.simple]:c.SIMPLE,[u.academic]:c.ACADEMIC,[u.natural]:c.NATURAL,[u.custom]:c.CUSTOM_MODE,[u.custom_voice]:c.CUSTOM_VOICE,[u.basic]:c.BASIC},o={log:console.log,info:console.info,warn:console.warn,error:console.error},_=async e=>{let{log:t,info:a,warn:s,error:n}=e;o.log=t,o.info=a,o.warn=s,o.error=n};var l,h,u,d,c,p={\u0391:"A",\u0392:"B",\u0395:"E",\u0396:"Z",\u0397:"H",\u0399:"I",\u039a:"K",\u039c:"M",\u039d:"N",\u03bd:"v",\u039f:"O",\u03bf:"o",\u03a1:"P",\u03a4:"T",\u03a5:"Y",\u03a7:"X","\u0342":"~","\u0343":"\u2019","\u037e":";",\u0410:"A",\u0430:"a",\u0412:"B",\u0421:"C",\u0415:"E",\u0435:"e",\u041d:"H",\u04cf:"I",\u04c0:"I",\u0406:"I",\u0408:"J",\u041a:"K",\u041c:"M",\u041e:"O",\u043e:"o",\u0420:"P",\u0440:"p",\u0441:"c",\u0405:"S",\u0422:"T",\u0445:"x",\u0425:"X",\u04ae:"Y",\u04af:"y",\u0443:"y",\u0423:"Y"," \u0486":"\u2019",\u0456:"i",\u0455:"s",\u051b:"q",\u00e6:"ae",\u0153:"oe",\ufb00:"ff",\ufb01:"fi",\ufb02:"fl",\ufb03:"ffi",\ufb04:"ffl"},m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},g={exports:{}};function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}(function(){var e,t,a=[].slice;e={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\xa3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{\u00ed:{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},\u00c1:{_:"an"},\u00e1:{";":{_:"an"}},\u00e0:{_:"an"},\u00c4:{_:"an"},\u0101:{_:"an"},\u00c5:{_:"an"},\u00e6:{_:"an"},\u00c6:{n:{_:"a"},_:"an"},D:{\u00fa:{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},\u00e9:{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},_:"a"},_:"an"},\u00c9:{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},\u03c3:{_:"an"}},G:{h:{a:{e:{_:"an"},i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\xa3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},\u0130:{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\xb2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\xd7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},\u00d3:{_:"an"},\u00d6:{_:"an"},\u00f6:{_:"an"},\u014c:{_:"an"},\u014d:{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},\u00e0:{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},\u00fc:{_:"an"},\u00dc:{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},\u03b1:{_:"an"},\u03b5:{_:"an"},\u03c9:{_:"an"}},t=function(a,s,n){var i;return null==s&&(s=e),null==n&&(n="a"),null==a?n:(s=s[i=a.slice(0,1)],null!=i&&null!=s?t(a.slice(1),s,s._||n):n)},g.exports={find:t,articlize:function(){var e,s,n;return s=1<=arguments.length?a.call(arguments,0):[],n=function(){var a,n,i;for(a=0,i=[],n=s.length;a<n;a++)null!=(e=s[a])&&i.push(t(e)+" "+e);return i}(),1===s.length?n[0]:n}}}).call(m);let y=/[\r\n ]+$/,w=/\([a-zA-Z0-9,.\[\]\"\;\-\-\:\& ]*[0-9]*[a-zA-Z0-9,.\[\]\"\;\-\u2013\:\& ]*\)[.,]*$/,v=/\.[\[[a-zA-Z0-9]+\]]*$/;class b{static parseNewline(e){var t;let{pre:a,text:s,post:n}=e;return{pre:a,text:s.replace(y,""),post:((null===(t=y.exec(s))||void 0===t?void 0:t.join())||"")+n}}static parseCitation({pre:e,text:t,post:a}){var s;return this.parseNewline({pre:e,text:t.replace(w,""),post:((null===(s=w.exec(t))||void 0===s?void 0:s.join())||"")+a})}static parseWIKICitations({pre:e,text:t,post:a}){var s;return this.parseNewline({pre:e,text:t.replace(v,""),post:((null===(s=v.exec(t))||void 0===s?void 0:s.join())||"")+a})}static replaceWordAtPosition(e,t,a,s){let n=0;return e.replace(RegExp(t,"g"),(e=>++n===s?a:e))}static anFix(e,t){try{if(t>=1){let a=e[t-1],s=a.displayText.split(" ").slice(-1)[0],n=-1!==["a","e","i","o","u"].indexOf(e[t].displayText[0].toLowerCase());n&&"a"===s?a.displayText=a.displayText.split(" ").slice(0,-1).concat("an").join(" "):n||"an"!==s||(a.displayText=a.displayText.split(" ").slice(0,-1).concat("a").join(" "))}}catch(e){o.error("crashed on the a/an fix",e)}}static async profaneWordCheck(e){return!1}static textToPhrases({inputText:e,text:t}){let a=b.getEachWordProperties(e,t);return a.map(((e,t)=>({text:e.word,displayText:e.word,pre:"",post:"",whitespace:t===a.length-1?"":" ",types:[{under:null==e?void 0:e.under,different:null==e?void 0:e.different,inLongestSubstr:null==e?void 0:e.inLongestSubstr}]})))}constructor(){}}f(b,"preProcessTextSanitisation",(e=>e)),f(b,"splitWordAndPostWord",(e=>{var t;let a=/[a-z,0-9]*/i;return{mainWord:(null===(t=a.exec(e))||void 0===t?void 0:t.join())||"",postWord:e.replace(a,"")}})),f(b,"postProcessTextSanitisation",(async e=>("en"===await E.get("INPUT_LANGUAGE")&&(e=b.handleArticles(e)),e))),f(b,"handleArticles",(e=>{let t=e.split(" "),a="";for(let e=0;e<t.length-1;e+=1){let s=t[e];if("a"===s||"an"===s){let s=t[e+1];a+=`${g.exports.articlize(s).split(" ")[0]} `}else a+=`${s} `}return a+t[t.length-1]})),f(b,"checkCyrillicCharacters",(e=>{let t=e;for(let a=0;a<e.length;a++)p&&p[e[a]]&&(t=e.replace(e[a],p[e[a]]));return t})),f(b,"chunkSubstr",((e,t)=>{let a=Math.ceil(e.length/t),s=Array(a);for(let n=0,i=0;n<a;n+=1,i+=t)s[n]=e.substr(i,t);return s})),f(b,"longestCommonSubstring",((e,t)=>{let a,s,n,i=[],r=0,o=-1;for(a=0;a<e.length;a+=1)for(s=0,i[a]=[];s<t.length;s+=1)e.charAt(a)===t.charAt(s)?i[a][s]=a>0&&s>0?i[a-1][s-1]+1:1:i[a][s]=0,i[a][s]>r&&(r=i[a][s],o=a);return r>0?(n=o-r+1,e.substr(n,r)):""})),f(b,"checkNumberOfWords",((e,t)=>{let a=t;for(;a<e.length&&e[a].inLongestSubstr;a++);return a-t})),f(b,"markLongestSubString",((e,t)=>{e=e.toLowerCase();let a=t.map((e=>e.word.toLowerCase())).join(" "),s=a.slice(),n=e.slice(),i="";if(e.length>2500){let t=b.chunkSubstr(e,1e3),s=b.chunkSubstr(a,1e3),n="";for(let e=0;e<Math.min(t.length,s.length);e++){let a=t[e],r=s[e];(i=b.longestCommonSubstring(a,r).trim()).length>n.length&&(n=i)}i=n}else i=b.longestCommonSubstring(e,a).trim();e=n,a=s;let r=a.indexOf(i),o=r+i.length;if(-1===r)return t;let _=0;t.forEach((e=>{let t=e.word.length,a=_,s=_+t;(_+=t)>=r&&_-t<=o&&(e.inLongestSubstr=!0,r>a&&(e.inLongestSubstr=!1),o<s&&(e.inLongestSubstr=!1)),_+=1}));let l=-1;for(let e=0;e<t.length;e++)l>0?(l-=1,t[e].inLongestSubstr=!1):t[e].inLongestSubstr&&(b.checkNumberOfWords(t,e)>=4?e+=b.checkNumberOfWords(t,e):(l=b.checkNumberOfWords(t,e),t[e].inLongestSubstr=!1,l-=1));return t})),f(b,"makeUnderlines",((e,t)=>{let a=["a","the","of","on","is","to","with","if","and","by","it","be","are","at","from","as"],s=e.replace(/([.?,*+^$[\]\\(){}|-])/g," $1").split(" ").map((e=>e.toLowerCase())),n=[],i={};s.forEach((e=>{i[e]=0}));for(let e=0;e<t.length;e++){let a=t[e].word.toLowerCase(),r=-1;i[a]?s.slice(i[a]).includes(a)&&(r=s.indexOf(a,i[a])):s.includes(a)&&(r=s.indexOf(a)),n.push(r),i[a]=Math.max(r+1,0)}let r=[],o=0,_=t.length,l=0;for(;_>0&&!((l+=1)>2e4);){let e=n[o],a=[e,e];if(1!==e){let e=n[o];for(let s=o+1;s<t.length;s++){let t=n[s];if(-1!==t){if(t!==e+1)break;a[1]=n[s],e=t}}}let s=a[1]-a[0];o+=s+1,_-=s+1,r.push(a)}let h=-1,u=-1,d=[],c=0;for(r.forEach((e=>{let s=e[0],i=e[1];if(-1===s)return;if(s>h)return h=s,void(u=i);if(i-s==0&&u-s>10)return;let o=n.indexOf(h),_=n.indexOf(i);if(i-s==0&&a.includes(t[_].word))return;let l=0;for(;-1===r[c+1][0]&&!((l+=1)>2e4);)_+=1,c+=1;d.push([o,_]),c+=1})),o=0;o<t.length;o++){let e=!1;for(let t=0;t<d.length;t++){let a=d[t];o>=a[0]&&o<=a[1]&&(e=!0)}t[o].under=e}return t})),f(b,"markDifferent",((e,t)=>{let a=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return t.forEach((e=>{let t=e.word;t=(t=t.replace("'s","")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase();let s=!a.includes(t);e.different=s})),t})),f(b,"maskPlaceholders",(e=>{let t={},a=e.replace(/\[[\w\d\s'/,]+\]/g,(e=>{let a=`__PLACEHOLDER__${Object.keys(t).length}__`;return t[a]=e,a}));return{maskedText:a,placeholders:t}})),f(b,"unMaskPlaceholders",((e,t)=>{let a=e.match(/__PLACEHOLDER__(\d+)__/g);return a&&(e=e.replace(a[0],t[a[0]])),{unMaskedWord:e,hadPlaceholder:!!a}})),f(b,"getEachWordProperties",((e,t,a)=>{let{preservePlaceholder:s}=a||{},n=t,i={};s&&({maskedText:n,placeholders:i}=b.maskPlaceholders(t));let r=n.split(" ").map(((e,t)=>{let a=!1;return s&&({unMaskedWord:e,hadPlaceholder:a}=b.unMaskPlaceholders(e,i)),{word:e,index:t,placeholder:a}}));return r=b.markLongestSubString(e,r),r=b.makeUnderlines(e,r),b.markDifferent(e,r)}));let x=new Map;x.set("IS_PREMIUM_USER","false"),x.set("REGIONAL_LANGUAGE",""),x.set("INPUT_LANGUAGE","en"),x.set("PARAPHRASE_QUOTATION","true"),x.set("USE_CONTRACTION","false"),x.set("PREFER_ACTIVE_VOICE","false"),x.set("SENTENCE_SPLIT_LEVEL","sentence");class E{static async get(e){return x.get(e)}static async set(e,t){return x.set(e,t)}constructor(){}}let S=new WeakMap,T=new WeakMap,I=new WeakMap,A=new WeakMap,R=new WeakMap;let C={get(e,t,a){if(e instanceof IDBTransaction){if("done"===t)return T.get(e);if("objectStoreNames"===t)return e.objectStoreNames||I.get(e);if("store"===t)return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return O(e[t])},set:(e,t,a)=>(e[t]=a,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function P(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(N(this),t),O(S.get(this))}:function(...t){return O(e.apply(N(this),t))}:function(t,...a){let s=e.call(N(this),t,...a);return I.set(s,t.sort?t.sort():[t]),O(s)}}function L(e){return"function"==typeof e?P(e):(e instanceof IDBTransaction&&function(e){if(T.has(e))return;let t=new Promise(((t,a)=>{let s=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",i),e.removeEventListener("abort",i)},n=()=>{t(),s()},i=()=>{a(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",n),e.addEventListener("error",i),e.addEventListener("abort",i)}));T.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,C):e)}function O(e){if(e instanceof IDBRequest)return function(e){let t=new Promise(((t,a)=>{let s=()=>{e.removeEventListener("success",n),e.removeEventListener("error",i)},n=()=>{t(O(e.result)),s()},i=()=>{a(e.error),s()};e.addEventListener("success",n),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&S.set(t,e)})).catch((()=>{})),R.set(t,e),t}(e);if(A.has(e))return A.get(e);let t=L(e);return t!==e&&(A.set(e,t),R.set(t,e)),t}let N=e=>R.get(e);let k=["get","getKey","getAll","getAllKeys","count"],D=["put","add","delete","clear"],M=new Map;function U(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(M.get(t))return M.get(t);let a=t.replace(/FromIndex$/,""),s=t!==a,n=D.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!n&&!k.includes(a))return;let i=async function(e,...t){let i=this.transaction(e,n?"readwrite":"readonly"),r=i.store;return s&&(r=r.index(t.shift())),(await Promise.all([r[a](...t),n&&i.done]))[0]};return M.set(t,i),i}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){C=e(C)}((e=>({...e,get:(t,a,s)=>U(t,a)||e.get(t,a,s),has:(t,a)=>!!U(t,a)||e.has(t,a)})));class F{async get(e){var t;return null===(t=await this.dbPromise)||void 0===t?void 0:t.get("cache",e).then((e=>null==e?void 0:e.data))}async set(e,t){var a;await(null===(a=await this.dbPromise)||void 0===a?void 0:a.put("cache",{data:t,date:+(new Date).setHours(0,0,0,0)},e))}async delete(e){var t;await(null===(t=await this.dbPromise)||void 0===t?void 0:t.delete("cache",e))}async deleteOldData(){try{var e,t;let a=+(new Date).setDate((new Date).getDate()-10),s=null===(e=await this.dbPromise)||void 0===e?void 0:e.transaction("cache"),n=null==s?void 0:s.store,i=null==n?void 0:n.index("date"),r=IDBKeyRange.upperBound(a),o=await(null==i?void 0:i.openKeyCursor(r));for(;o;)null===(t=await this.dbPromise)||void 0===t||t.delete("cache",o.primaryKey),o=await o.continue()}catch(e){}}async clear(){var e;await(null===(e=await this.dbPromise)||void 0===e?void 0:e.clear("cache"))}constructor(){j(this,"dbPromise",void 0),j(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=function(e,t,{blocked:a,upgrade:s,blocking:n,terminated:i}={}){let r=indexedDB.open(e,t),o=O(r);return s&&r.addEventListener("upgradeneeded",(e=>{s(O(r.result),e.oldVersion,e.newVersion,O(r.transaction))})),a&&r.addEventListener("blocked",(()=>a())),o.then((e=>{i&&e.addEventListener("close",(()=>i())),n&&e.addEventListener("versionchange",(()=>n()))})).catch((()=>{})),o}("product-pphr",1,{upgrade(e){e.createObjectStore("cache").createIndex("date","date")}}):this.dbPromise=Promise.resolve(null)}}let W=new Map;class B{async get(e){return W.get(e)}async set(e,t){await W.set(e,t)}async delete(e){await W.delete(e)}async clear(){await W.clear()}async deleteOldData(){}constructor(){!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"isAvailable",!0)}}let G=(e,t,a)=>{if("number"!=typeof a||a<=0)throw Error(`timedPromise: Encountered invalid timeout value. Got ${a}`);return new Promise(((s,n)=>{let i=setTimeout((()=>{s({timedOut:!0,value:t})}),a);e.then((e=>{clearTimeout(i),s({timedOut:!1,value:e})})).catch((e=>{clearTimeout(i),n(e)}))}))},V=e=>{let{sentences:t,inputText:a}=e;return(null==a?void 0:a.trim().length)>0||t.length>0},H={logEvent:()=>{}},Y=async e=>{let{logEvent:t}=e;H.logEvent=t},z=new B,q=!1,K="";(async()=>{try{let e=new F,t=e.dbPromise,a=await G(t,null,3e3);e.isAvailable&&a?(e.deleteOldData(),z=e):(q=!0,K=a?"dbNA":"timedOut")}catch(e){q=!0,K="error",z=new B}})();let $=()=>{q&&(H.logEvent("db_connection_timedout",{errorType:K}),q=!1)},J=async e=>{try{$();let t=await z.get(e);if(!t)return;let{value:a,expireAt:s}=JSON.parse(t);return s&&(new Date).getTime()>new Date(s).getTime()?void await z.delete(e):a}catch(e){return void o.error(e)}},Q=async(e,t,a)=>{try{$();let s=a?new Date((new Date).getTime()+a).toISOString():void 0;await z.set(e,JSON.stringify({expireAt:s,value:t}))}catch(e){o.error(e)}},X=async e=>{(z=e).deleteOldData()},Z=e=>async(t,a)=>{var s;let n=(null==a||null===(s=a.retry)||void 0===s?void 0:s.limit)||0,i=0,r=null;for(;i<=n;){try{return i>0&&(a.headers=a.headers||{},a.headers["qb-retry"]=i.toString()),await e(t,a)}catch(e){r=e,o.error(`Attempt ${i+1} failed: `,e)}i++}throw r},ee={request:Z((async(e,t)=>{throw Error("HTTP Client is not set")}))},te=async e=>{ee.request=Z(e)},ae=async(e,t)=>{let a="true"===await E.get("IS_PREMIUM_USER")?"premium":"";return e+t.method+a+JSON.stringify(t)},se=async(e,t)=>{let a=await(async(e,t)=>{let a=await J(await ae(e,t));if(a)return JSON.parse(a)})(e,t);if(a)return a;let s=await ee.request(e,t),n=await(async(e,t,a)=>{let s=(null==t?void 0:t.cacheDuration)||0;if(s&&["get","post"].includes((null==t?void 0:t.method)||"")){let n=await ae(e,t);if(!await J(n)){let e={...a,_cached:!0};await Q(n,JSON.stringify(e),s)}}})(e,t,s);return n||s};function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ie={},re={};class oe{static getInstance(e,t){return ie[e]=ie[e]||new oe,ie[e]._maxConcurrentRequests=t,ie[e]}async fetch(e){return new Promise(((t,a)=>{this._queue.push({params:e,resolve:t,reject:a}),this._processQueue()}))}_processQueue(){for(;this._inFlight<this._maxConcurrentRequests&&this._queue.length>0;){let{params:e,resolve:t,reject:a}=this._queue.shift(),{url:s,options:n}=e;this._inFlight++;let i=JSON.stringify({url:s,options:n});re[i]||(re[i]=se(s,n)),re[i].then((e=>{this._inFlight--,t(e),this._processQueue()})).catch((e=>{this._inFlight--,a(e),this._processQueue()})).finally((()=>{delete re[i]}))}}constructor(){ne(this,"_maxConcurrentRequests",3),ne(this,"_inFlight",0),ne(this,"_queue",[])}}let _e=async()=>`${(await E.get("INPUT_LANGUAGE")||"en").toLowerCase()}-${(await E.get("REGIONAL_LANGUAGE")||"us").toLowerCase()}`,le=async(e,t)=>oe.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||15).fetch({url:e,options:{...t,method:"post",headers:{"qb-dialect":await _e()}}}),he=async(e,t)=>oe.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||15).fetch({url:e,options:{...t,method:"get",headers:{"qb-dialect":await _e()}}}),ue=async(e,t)=>oe.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||15).fetch({url:e,options:{...t,method:"delete",headers:{"qb-dialect":await _e()}}});var de={"ain't":"am not","aimn't":"am not","aren't":"are not","can't":"can not","could've":"could have","couldn't":"could not","couldn't've":"could not have","didn't":"did not","doesn't":"does not","don't":"do not",gonna:"going to","hadn't":"had not","hadn't've":"had not have","hasn't":"has not","haven't":"have not","he'd":"he would","he'd've":"he would have","he'll":"he will","he's":"he is","he'sn't":"he is not","how'd":"how did","how'll":"how will","how's":"how is","i'd":"i would","i'd've":"i would have","i'll":"i will","i'm":"i am","i've":"i have","i'ven't":"i have not","isn't":"is not","it'd":"it would","it'd've":"it would have","it'll":"it will","it's":"it is","it'sn't":"it is not","let's":"let us","ma'am":"madam","mightn't":"might not","mightn't've":"might not have","might've":"might have","mustn't":"must not","must've":"must have","needn't":"need not","not've":"not have","o'clock":"of the clock","ol'":"old","oughtn't":"ought not","shan't":"shall not","she'd":"she would","she'd've":"she would have","she'll":"she will","she's":"she is","she'sn't":"she is not","should've":"should have","shouldn't":"should not","shouldn't've":"should not have","somebody'd":"somebody would","somebody'd've":"somebody would have","somebody'dn't've":"somebody would not have","somebody'll":"somebody will","somebody's":"somebody is","someone'd":"someone would","someone'd've":"someone would have","someone'll":"someone will","someone's":"someone is","something'd":"something would","something'd've":"something would have","something'll":"something will","something's":"something is"," sup":"what is up","that'll":"that will","that's":"that is","there'd":"there would","there'd've":"there would have","there're":"there are","there's":"there is","they'd":"they would","they'dn't":"they would not","they'dn't've":"they would not have","they'd've":"they would have","they'd'ven't":"they would have not","they'll":"they will","they'lln't've":"they will not have","they'll'ven't":"they will have not","they're":"they are","they've":"they have","they'ven't":"they have not","'tis":"it is","'twas":"it was",wanna:"want to","wasn't":"was not","we'd":"we would","we'd've":"we would have","we'dn't've":"we would not have","we'll":"we will","we'lln't've":"we will not have","we're":"we are","we've":"we have","weren't":"were not","what'll":"what will","what're":"what are","what's":"what is","what've":"what have","when's":"when is","where'd":"where did","where's":"where is","where've":"where have","who'd":"who would","who'd've":"who would have","who'll":"who will","who're":"who are","who's":"who is","who've":"who have","why'll":"why will","why're":"why are","why's":"why is","won't":"will not","won't've":"will not have","would've":"would have","wouldn't":"would not","wouldn't've":"would not have","y'all":"you all","y'all'd've":"you all would have","y'all'dn't've":"you all would not have","y'all'll":"you all will","y'all'lln't":"you all will not","y'all'll've":"you all will have","y'all'll'ven't":"you all will have not","you'd":"you would","you'd've":"you would have","you'll":"you will","you're":"you are","you'ren't":"you are not","you've":"you have","you'ven't":"you have not"};function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pe{static getInstance(){return pe.instance||(pe.instance=new pe),pe.instance}sortKeys(e){let t=Object.keys(e);return t.sort(((t,a)=>{let s=a.length-t.length;return 0!==s&&(s=e[a].length-e[t].length),s})),t}generateSpacedContractions(){let e={};return Object.keys(de).forEach((t=>{e[`${t} `]=`${de[t]} `})),e}generateReverseLookups(){let e={};return Object.keys(this.contractions).forEach((t=>{e[this.contractions[t]]=t})),e}convert(e,t,a){return e.replace(a,(e=>{let a=t[e.toLowerCase()],s="'"===e.charAt(0)?e.charCodeAt(1):e.charCodeAt(0);return s>=65&&s<=90&&(a="'"===a.charAt(0)?`'${a.charAt(1).toUpperCase()}${a.slice(2)}`:a.charAt(0).toUpperCase()+a.slice(1)),a}))}async expand(e){return"true"===await E.get("USE_CONTRACTION")?this.convert(e,this.expandLookup,this.expandRegex):e}contract(e){return this.convert(e,this.contractLookup,this.contractRegex)}constructor(){ce(this,"contractions",void 0),ce(this,"expandLookup",void 0),ce(this,"contractLookup",void 0),ce(this,"expandRegex",void 0),ce(this,"contractRegex",void 0),this.contractions=this.generateSpacedContractions(),this.expandLookup=this.contractions,this.expandRegex=RegExp(this.sortKeys(this.expandLookup).join("|"),"gi"),this.contractLookup=this.generateReverseLookups(),this.contractRegex=RegExp(this.sortKeys(this.contractLookup).join("|"),"gi")}}ce(pe,"instance",void 0);let me=pe.getInstance(),ge={timeout:1e4,retry:{limit:0},cacheDuration:864e6},fe=["en","de","es","fr","nl","id","no","tr","pl","zh","ja","it","tl","da","sv","ru","vi","ro","ms","af","uk","hi","pt"],ye=["de","es","fr","pt"];function we(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ve{get modelId(){return this._modelId}get isSkipped(){return!!this._skipReason}get skipReason(){return this._skipReason}get apiResponse(){return this._apiResponse}get isCached(){return this._apiResponse._cached||!1}_skipLoad(e,t){this._skipReason=e,t&&t()}constructor(){we(this,"_modelId",""),we(this,"_skipReason",void 0),we(this,"_apiResponse",{data:null,_cached:!1})}}function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.values(u).filter((e=>isNaN(Number(e))));class xe extends ve{static async getInstance({inputText:e,mode:t,frozenWords:a,customModeName:s,forceShortCircuitSingleParaphrase:n,customVoiceInstruction:i,prevSentence:r,nextSentence:o}){return await new xe({inputText:e,mode:t,frozenWords:a,customModeName:s,forceShortCircuitSingleParaphrase:n,customVoiceInstruction:i,prevSentence:r,nextSentence:o})._load()}get enableSentenceContext(){return!!this._enableSentenceContext[this._mode]}async getPreferActive(){return!this._unsupportPreferActive[this._mode]&&"true"===await E.get("PREFER_ACTIVE_VOICE")}async getFreezeQuotes(){return!this._unsupportFreezeQuotes[this._mode]&&"false"===await E.get("PARAPHRASE_QUOTATION")}get inputText(){return this._disableTextFormatting[this._mode]?this._inputText:this._inputText.trim()}get beams(){return this._beams}beamIndex(e=0){return e%this._beams.length}beam(e=0){let t=this.beamIndex(e);return this._beams[t]}async _isShortCircuit(){let e="paragraph"===await E.get("SENTENCE_SPLIT_LEVEL"),t=isNaN(u[this._mode]),a=e?this._inputText.length>3e3:this._inputText.length>1e3;return this._shortCircuit||a||t}_fallback(){this._beams.push(this._inputText)}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;let e={fthresh:-1,autoflip:!1,wikify:!1,inputLang:await E.get("INPUT_LANGUAGE")||"en",strength:u[this._mode],quoteIndex:-1,text:this.inputText,frozenWords:this._frozenWords,nBeams:4,freezeQuotes:await this.getFreezeQuotes(),preferActive:await this.getPreferActive(),dialect:(await E.get("REGIONAL_LANGUAGE")||"us").toUpperCase()};this.enableSentenceContext&&(e.prevSentence=this._prevSentence||"",e.nextSentence=this._nextSentence||"");let t=await E.get("SINGLE_PARA_PROMPT_VERSION");t&&(e.promptVersion=t);let a=await E.get("MULTILINGUAL_MODEL_VERSION");a&&(e.multilingualModelVersion=a);let s={json:e,...ge,maxConcurrentRequests:"true"===await E.get("IS_PREMIUM_USER")?15:2},n="true"===await E.get("DISABLE_CACHING");u[this._mode]===u.custom&&this._customModeName&&(n=!0),n&&(e.__key=Math.random().toString()+Date.now().toString(),e.customModeName=this._customModeName,s.cacheDuration=0),u[this._mode]===u.academic&&(e.__key=Math.random().toString()+Date.now().toString(),s.cacheDuration=0),u[this._mode]===u.custom_voice&&(e.__key=Math.random().toString()+Date.now().toString(),e.customVoiceInstruction=this._customVoiceInstruction,s.cacheDuration=0);try{this._apiResponse=await le(`api/paraphraser/single-paraphrase/${u[this._mode]}`,s);let e=this._apiResponse.data[0][`paras_${u[this._mode]+1}`];for(let t of(this._modelId=this._apiResponse.data[0].modelID,e)){let e=t.alt;e=await me.expand(e),this._beams.push(await b.postProcessTextSanitisation(e))}}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e){let{inputText:t,mode:a,frozenWords:s=[],customModeName:n,forceShortCircuitSingleParaphrase:i=!1,customVoiceInstruction:r,nextSentence:o,prevSentence:_}=e;super(),be(this,"_inputText",void 0),be(this,"_prevSentence",void 0),be(this,"_nextSentence",void 0),be(this,"_mode",void 0),be(this,"_beams",[]),be(this,"_frozenWords",[]),be(this,"_customModeName",void 0),be(this,"_customVoiceInstruction",void 0),be(this,"_shortCircuit",!1),be(this,"_enableSentenceContext",{natural:!0,academic:!0,basic:!0}),be(this,"_unsupportFreezeQuotes",{natural:!0}),be(this,"_unsupportPreferActive",{natural:!0}),be(this,"_disableTextFormatting",{natural:!0}),this._inputText=t,this._prevSentence=_,this._nextSentence=o,this._mode=a,this._frozenWords=s,this._customModeName=n,this._shortCircuit=i,this._customVoiceInstruction=r}}let Ee=(()=>{let e={chunker:!1,getAlts:!1,getDefinitions:!1,paraphrasePhrase:!1,paraphraseThesarus:!1,recommendedWords:!1,singleFlip:!1,modeAwarePhrasalParaphraser:!1,multilingualThesaurus:!1};return fe.reduce(((t,a)=>("en"===a?t[a]={chunker:!0,getAlts:!0,getDefinitions:!0,paraphrasePhrase:!0,paraphraseThesarus:!0,recommendedWords:!0,singleFlip:!0,modeAwarePhrasalParaphraser:!0,multilingualThesaurus:!1}:ye.includes(a)?t[a]={...e,multilingualThesaurus:!0}:t[a]=e,t)),{})})(),Se=async e=>{let t=await E.get("INPUT_LANGUAGE");return!(t&&fe.includes(t))||Ee[t][e]};function Te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ie extends ve{static async getInstance(e,t,a,s,n,i){return await new Ie(e,t,a,s,n,i)._load()}alts(e){let t=[];for(let[s,n]of Object.entries(this._walts)){var a;if(s.split("~")[0]===(null==e?void 0:e.toLowerCase())){let a=n;e[0]===e[0].toUpperCase()&&(a=n.map((e=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+e.slice(1)}))),t=a}else if(1===e.split(" ").length&&(null===(a=this.WORD_REGEX.exec(e))||void 0===a?void 0:a.join().toLowerCase())===s.split("~")[0]){let a=n.map((t=>t+e.replace(this.WORD_REGEX,"")));e[0]===e[0].toUpperCase()&&(a=a.map((e=>e[0].toUpperCase()+e.slice(1)))),t=a}}return t}async flippedBeam(){let e=this._flips.filter((e=>e[2]>=d[this._flip]&&0!==d[this._flip])),t=['"',"\u275d","\u275e","\u201c","\u201c","\u201d","\u201f"],a=this._beam.match(/\w+|\s+|[^\s\w]|"|\u275d|\u275e|\u201c|\u201c|\u201d|\u201f+/g)||[],s=this._beam.split('"'),n=!1,i="true"===await E.get("PARAPHRASE_QUOTATION"),r=!1;s.length%2==0||(r=!0);let o={},_=a.map((a=>{var s;if(o[a]=o[a]?o[a]+1:1,t.includes(a)&&r)return n=!n,a;if(n&&!i)return a;let _=null===(s=this._frozenWords)||void 0===s?void 0:s.reduce(((e,t)=>[...e,...(null==t?void 0:t.split(" "))||[]]),[]);if((null==_?void 0:_.length)&&_.includes(a.toLowerCase()))return a;for(let t of e){let[e,s]=t[0].split("~");if(e===a.toLowerCase()&&parseInt(s)===o[a])return t[1]}return a}));return await b.postProcessTextSanitisation(_.join(""))}textToPhrases(e,t){let{preservePlaceholder:a=!1}=t||{},s=b.getEachWordProperties(this._inputText,e,{preservePlaceholder:a});return s.map(((e,t)=>{var a;return{text:e.word,displayText:e.word,pre:"",post:"",whitespace:t===s.length-1?"":" ",placeholder:null!==(a=e.placeholder)&&void 0!==a&&a,types:[{under:null==e?void 0:e.under,different:null==e?void 0:e.different,inLongestSubstr:null==e?void 0:e.inLongestSubstr}]}}))}async _isShortCircuit(){var e,t;let a="true"===await E.get("IS_PREMIUM_USER");return this._shortCircuit||!await Se("singleFlip")||this._inputText.length>300||isNaN(u[this._mode])||"custom"===this._mode||"level0"===this._flip&&!a||0===(null===(e=this._inputText)||void 0===e?void 0:e.length)||0===(null===(t=this._beam)||void 0===t?void 0:t.length)}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit")}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("api/paraphraser/single-flip",{json:{text:this._inputText.trim(),alt:this._beam,fthresh:9,mode:u[this._mode]},...ge}),this._flips=this._apiResponse.data.flips,this._modelId=this._apiResponse.data.modelID,this._walts=this._apiResponse.data.walts}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e,t,a,s,n=[],i=!1){super(),Te(this,"_inputText",void 0),Te(this,"_beam",void 0),Te(this,"_flips",[]),Te(this,"_walts",{}),Te(this,"_mode",void 0),Te(this,"_flip",void 0),Te(this,"WORD_REGEX",/[a-z,0-9]*/i),Te(this,"_frozenWords",[]),Te(this,"_shortCircuit",!1),this._inputText=e,this._beam=t,this._mode=a,this._flip=s,this._frozenWords=n,this._shortCircuit=i}}function Ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Re extends ve{static async getInstance(e,t=!1){return await new Re(e,{preservePlaceholder:t})._load()}get phrases(){return this._phrases}_fallback(){let e=this._text.split(" ");for(let t=0;t<e.length;t++)this._phrases.push({text:e[t],span:[t],displayText:e[t],pre:"",post:"",whitespace:t===e.length-1?"":" "})}async _isShortCircuit(){return!await Se("chunker")||this._text.length>1e3}async _beforeLoad(){if(await this._isShortCircuit())this._skipLoad("shortCircuit",this._fallback.bind(this));else if(this._preservePlaceholder){let{maskedText:e,placeholders:t}=b.maskPlaceholders(this._text);this._maskingMetadata.maskedText=e,this._maskingMetadata.placeholders=t}}async _afterLoad(){this._modelId=this._apiResponse.data.model;let e="";for(let t=0;t<this._apiResponse.data.segments.phrases.length;t++){let{indices:a,phrase:s}=this._apiResponse.data.segments.phrases[t],n={phrase:s,hadPlaceholder:!1};this._preservePlaceholder&&({unMaskedWord:n.phrase,hadPlaceholder:n.hadPlaceholder}=b.unMaskPlaceholders(n.phrase,this._maskingMetadata.placeholders)),e+=`${n.phrase} `,this._phrases.push({text:n.phrase,span:a,displayText:n.phrase,pre:"",post:"",whitespace:t===this._apiResponse.data.segments.phrases.length-1?"":" ",placeholder:n.hadPlaceholder})}this._text!==e.trim()&&(this._phrases=[],this._skipLoad("apiError",this._fallback.bind(this)))}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("api/paraphraser/chunker",{json:{text:this._preservePlaceholder?this._maskingMetadata.maskedText:this._text},...ge}),await this._afterLoad()}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e,t){super(),Ae(this,"_text",void 0),Ae(this,"_phrases",[]),Ae(this,"_preservePlaceholder",void 0),Ae(this,"_maskingMetadata",void 0);let{preservePlaceholder:a}=t||{};this._text=e,this._preservePlaceholder=a,this._maskingMetadata={maskedText:e,placeholders:{}}}}class Ce extends ve{static async getInstance(e){return await new Ce(e)._load()}get allPhrasesAlts(){return this._phrases.reduce(((e,t)=>({...e,[t.text]:t.alts})),{})}phraseAlts(e){var t;return(null===(t=this._phrases.find((t=>t.text===e)))||void 0===t?void 0:t.alts)||[]}async _isShortCircuit(){return!await Se("paraphraseThesarus")||0===this._phrases.filter((e=>e.text.length)).length}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("empty")}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;let e=this._phrases.filter((e=>e.text.length&&e.text.length<=60)).map((e=>e.text));try{e.length&&(this._apiResponse=await le("api/paraphraser/paraphrase-thesaurus",{json:{phrases:e},...ge}),this._modelId=this._apiResponse.data.model||"paraphrase-thesaurus",this._phrases=this._phrases.map((e=>(e.alts=this._apiResponse.data.suggestions[e.text]||[],e))))}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"_phrases",[]),this._phrases=e.map((e=>({text:e,alts:[]})))}}function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Le extends ve{static async getInstance(e,t){return await new Le(e,t)._load()}get allPhrasesAlts(){return this._phrases.reduce(((e,t)=>({...e,[t.text]:t.alts})),{})}phraseAlts(e){var t;return(null===(t=this._phrases.find((t=>t.text===e)))||void 0===t?void 0:t.alts)||[]}async _isShortCircuit(){return!await Se("paraphrasePhrase")||0===this._filteredPhrases.length}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit")}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("api/utils/paraphrase-phrase",{json:{phrases:this._filteredPhrases.map((e=>e.text)),text:this._text,w1:.6,w2:.4},...ge}),this._modelId=this._apiResponse.data.modelID,this._phrases=this._phrases.map((e=>(e.alts=this._apiResponse.data.suggestions[e.text]||[],e)))}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e,t){super(),Pe(this,"_text",void 0),Pe(this,"_phrases",[]),Pe(this,"_filteredPhrases",[]),this._phrases=t.map((e=>({text:e,alts:[]}))),this._text=e,this._filteredPhrases=this._phrases.filter((e=>e.text.split(" ").length>=2))}}function Oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Ne=/[a-zA-Z0-9]/;class ke extends ve{static async getInstance(e,t,a,s){return await new ke(e,t,a)._load(s)}async _isShortCircuit(){return!await Se("modeAwarePhrasalParaphraser")}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit")}get suggestions(){return this._suggestions}async _load(e){if(await this._beforeLoad(),this.isSkipped)return this;let{minWordsInPhrase:t}=e||{},a=this._phrases.filter((e=>{var t;return(null===(t=e.text)||void 0===t?void 0:t.length)&&Ne.test(e.text)}));t&&t>1&&(a=a.filter((e=>{var a;return(null===(a=e.text)||void 0===a?void 0:a.split(" ").length)>=t})));try{var s,n,i,r;this._apiResponse=await le("api/paraphraser/mode-aware-phrasal-paraphraser",{json:{phrases:a.map((e=>e.text)),text:this._text,indices:a.map((e=>e.startIndex)).filter((e=>void 0!==e&&e>-1)),mode:u[this._mode]},...ge}),this._suggestions=(null===(s=this._apiResponse)||void 0===s||null===(n=s.data)||void 0===n||null===(i=n.data)||void 0===i||null===(r=i.value)||void 0===r?void 0:r.suggestions)||{},this._modelId=this._apiResponse.data.MODEL_ID}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e,t,a){super(),Oe(this,"_text",void 0),Oe(this,"_phrases",[]),Oe(this,"_mode",void 0),Oe(this,"_suggestions",void 0),this._phrases=t,this._text=e,this._mode=a,this._suggestions={}}}function De(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Me extends ve{static async getInstance(e){return await new Me(e)._load()}get sentences(){return this._sentences}get isFallback(){return this._isFallback}_fallback(){this._sentences=[{text:this._text,pre:"",post:"",start:0,end:this._text.length}],this._isFallback=!1}async _isShortCircuit(){let e=await E.get("INPUT_LANGUAGE")||"en";return"zh"!==e&&"ja"!==e&&1===this._text.split(" ").length}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _load(){if(this._beforeLoad(),this.isSkipped)return this;let{retry:e,timeout:t}=ge;try{this._apiResponse=await le("api/utils/sentence-spiltter",{json:{fallback:!0,text:this._text},retry:e,timeout:t,cacheDuration:864e5});let a=0,s="",n=await E.get("SENTENCE_SPLIT_LEVEL"),i=[],r=this._apiResponse.data.sentences.map(((e,t)=>{let r={pre:"",post:"",text:e.text};r=b.parseNewline(r),a++,s+=r.text;let o=r.post&&" "!==r.post,_=5===a,l=s.length>2500,h=this._apiResponse.data.sentences.length===t+1;return"paragraph"===n&&(o||_||l||h)?(i.push({...r,text:s}),a=0,s=""):s+=r.post,{...r,start:e.start,end:e.end}}));this._sentences="paragraph"===n?i:r,this._isFallback=this._apiResponse.data.fallback||!1,this._modelId=this._apiResponse.data.id}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e){super(),De(this,"_text",void 0),De(this,"_sentences",[]),De(this,"_isFallback",!1),this._text=b.checkCyrillicCharacters(e)}}function Ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class je extends ve{get definitions(){return this._definitions}static async getInstance(e){return await new je(e)._load()}async _isShortCircuit(){return!await Se("getDefinitions")||this._text.split(" ").length>1}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit")}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await he("api/paraphraser/get-definition",{searchParams:{phrase:this._text},...ge}),this._definitions=this._apiResponse.data.defs}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e){super(),Ue(this,"_text",void 0),Ue(this,"_definitions",{}),this._text=e}}function Fe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class We{static async getInstance(e){return await new We(e)._load()}async reportText(e){this._reportedTexts.includes(e)||(this._reportedTexts.push(e),await this._save())}async unReportText(e){this._reportedTexts=this._reportedTexts.filter((t=>t!==e)),await this._save()}get reportedTexts(){return this._reportedTexts}isTextReported(e){return this._reportedTexts.includes(e)}async _save(){await Q(this._referenceText,JSON.stringify(this._reportedTexts))}async _load(){let e=await J(this._referenceText);return e&&(this._reportedTexts=JSON.parse(e)),this}constructor(e){Fe(this,"_referenceText",void 0),Fe(this,"_reportedTexts",void 0),this._referenceText=e,this._reportedTexts=[]}}function Be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ge extends ve{static async getInstance(e){return await new Ge(e)._load()}get recommendedWords(){return this._recommendedWords}_fallback(){this._recommendedWords=[]}async _isShortCircuit(){return 1===this._text.split(" ").length}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("api/utils/keyword",{json:{text:this._text},...ge}),this._recommendedWords=this._apiResponse.data.data,this._modelId=this._apiResponse.data.id||""}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e){super(),Be(this,"_text",void 0),Be(this,"_recommendedWords",[]),this._text=e}}class Ve extends ve{static async getInstance(){return await(new Ve)._load()}get allHistoryData(){return this._historySummary}_beforeLoad(){}async _load(){if(this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await he("api/paraphraser/history",{timeout:ge.timeout}),this._modelId=this._apiResponse.data.model||"paraphrase-history",this._historySummary=this._apiResponse.data}catch(e){o.error(e),this._skipLoad("apiError")}return this}async deleteAllHistory(){await ue("api/paraphraser/history",{timeout:ge.timeout}),this._modelId="",this._historySummary={summary:[]}}constructor(){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"_historySummary",{summary:[]})}}function He(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Ye={id:"",mode:2,synonym_value:2,_data:{},created_at:"",updated_at:"",customModeName:"",customVoiceInstruction:{formality:"",vocabulary:"",personality:[]},inputLanguage:"en"};class ze extends ve{static async getInstance({id:e}){return await new ze(e)._load()}get historyItemData(){return this._historyItem}_beforeLoad(){}async _load(){if(this._beforeLoad(),this.isSkipped)return this;try{var e;this._apiResponse=await he(`api/paraphraser/history/${this._id}`,{timeout:ge.timeout}),this._modelId=this._apiResponse.data.model||"paraphrase-history-id";let t=null===(e=this._apiResponse.data)||void 0===e?void 0:e.history;Object.keys(t.items).forEach((e=>{let a={pre:"",post:t.items[e].post||"",text:t.items[e].input};a=b.parseNewline(a),t.items[e]={...t.items[e],input:a.text,post:a.post,output:t.items[e].output.trim()}})),this._historyItem={history:{mode:t.mode,synonym_value:t.synonym_value,id:this._id,_data:t.items,created_at:t.created_at,updated_at:t.updated_at,customModeName:t.custom_mode_name,customVoiceInstruction:t.custom_voice_instruction,inputLanguage:t.input_language||"en",dialect:t.input_lang_dialect}}}catch(e){o.error(e),this._skipLoad("apiError")}return this}async deleteHistory(){await ue(`api/paraphraser/history/${this._id}`,{timeout:ge.timeout}),this._modelId="",this._historyItem={history:{...Ye}}}constructor(e){super(),He(this,"_historyItem",{history:{...Ye}}),He(this,"_id",void 0),this._id=e}}function qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ke extends ve{static async getInstance(e,t){return await new Ke(e,t)._load()}get audio(){return this._audio}_isShortCircuit(){return!1}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit")}async _load(){if(this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("utils/text-to-speech",{json:{text:this._text,dialect:this._dialect},...ge}),this._audio=this._apiResponse.data.speechSynthesizerResult.data}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e,t){super(),qe(this,"_text",void 0),qe(this,"_dialect",void 0),qe(this,"_audio",new ArrayBuffer(0)),this._text=e,this._dialect=t}}var $e=function(e,t){var a=-1,s=e.length;for(t||(t=Array(s));++a<s;)t[a]=e[a];return t},Je=Math.floor,Qe=Math.random;var Xe=function(e,t){return e+Je(Qe()*(t-e+1))},Ze=Xe;var et=function(e,t){var a=-1,s=e.length,n=s-1;for(t=void 0===t?s:t;++a<t;){var i=Ze(a,n),r=e[i];e[i]=e[a],e[a]=r}return e.length=t,e},tt=$e,at=et;var st=function(e){return at(tt(e))};var nt=function(e,t){for(var a=-1,s=null==e?0:e.length,n=Array(s);++a<s;)n[a]=t(e[a],a,e);return n},it=nt;var rt=function(e,t){return it(t,(function(t){return e[t]}))};var ot=function(e,t){for(var a=-1,s=Array(e);++a<e;)s[a]=t(a);return s},_t="object"==typeof m&&m&&m.Object===Object&&m,lt=_t,ht="object"==typeof self&&self&&self.Object===Object&&self,ut=lt||ht||Function("return this")(),dt=ut.Symbol,ct=dt,pt=Object.prototype,mt=pt.hasOwnProperty,gt=pt.toString,ft=ct?ct.toStringTag:void 0;var yt=function(e){var t=mt.call(e,ft),a=e[ft];try{e[ft]=void 0;var s=!0}catch(e){}var n=gt.call(e);return s&&(t?e[ft]=a:delete e[ft]),n},wt=Object.prototype.toString;var vt=function(e){return wt.call(e)},bt=yt,xt=vt,Et=dt?dt.toStringTag:void 0;var St=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Et&&Et in Object(e)?bt(e):xt(e)};var Tt=function(e){return null!=e&&"object"==typeof e},It=St,At=Tt;var Rt=function(e){return At(e)&&"[object Arguments]"==It(e)},Ct=Rt,Pt=Tt,Lt=Object.prototype,Ot=Lt.hasOwnProperty,Nt=Lt.propertyIsEnumerable,kt=Ct(function(){return arguments}())?Ct:function(e){return Pt(e)&&Ot.call(e,"callee")&&!Nt.call(e,"callee")},Dt=kt,Mt=Array.isArray,Ut={exports:{}};var jt=function(){return!1};!function(e,t){var a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,n=s&&s.exports===a?ut.Buffer:void 0,i=n?n.isBuffer:void 0;e.exports=i||jt}(Ut,Ut.exports);var Ft=/^(?:0|[1-9]\d*)$/;var Wt=function(e,t){var a=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==a||"symbol"!=a&&Ft.test(e))&&e>-1&&e%1==0&&e<t};var Bt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Gt=St,Vt=Bt,Ht=Tt,Yt={};Yt["[object Float32Array]"]=Yt["[object Float64Array]"]=Yt["[object Int8Array]"]=Yt["[object Int16Array]"]=Yt["[object Int32Array]"]=Yt["[object Uint8Array]"]=Yt["[object Uint8ClampedArray]"]=Yt["[object Uint16Array]"]=Yt["[object Uint32Array]"]=!0,Yt["[object Arguments]"]=Yt["[object Array]"]=Yt["[object ArrayBuffer]"]=Yt["[object Boolean]"]=Yt["[object DataView]"]=Yt["[object Date]"]=Yt["[object Error]"]=Yt["[object Function]"]=Yt["[object Map]"]=Yt["[object Number]"]=Yt["[object Object]"]=Yt["[object RegExp]"]=Yt["[object Set]"]=Yt["[object String]"]=Yt["[object WeakMap]"]=!1;var zt=function(e){return Ht(e)&&Vt(e.length)&&!!Yt[Gt(e)]};var qt=function(e){return function(t){return e(t)}},Kt={exports:{}};!function(e,t){var a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,n=s&&s.exports===a&&_t.process,i=function(){try{var e=s&&s.require&&s.require("util").types;return e||n&&n.binding&&n.binding("util")}catch(e){}}();e.exports=i}(Kt,Kt.exports);var $t=zt,Jt=qt,Qt=Kt.exports,Xt=Qt&&Qt.isTypedArray,Zt=Xt?Jt(Xt):$t,ea=ot,ta=Dt,aa=Mt,sa=Ut.exports,na=Wt,ia=Zt,ra=Object.prototype.hasOwnProperty;var oa=function(e,t){var a=aa(e),s=!a&&ta(e),n=!a&&!s&&sa(e),i=!a&&!s&&!n&&ia(e),r=a||s||n||i,o=r?ea(e.length,String):[],_=o.length;for(var l in e)(t||ra.call(e,l))&&(!r||!("length"==l||n&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||na(l,_)))&&o.push(l);return o},_a=Object.prototype;var la=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_a)};var ha=function(e,t){return function(a){return e(t(a))}},ua=ha(Object.keys,Object),da=la,ca=ua,pa=Object.prototype.hasOwnProperty;var ma=function(e){if(!da(e))return ca(e);var t=[];for(var a in Object(e))pa.call(e,a)&&"constructor"!=a&&t.push(a);return t};var ga=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},fa=St,ya=ga;var wa=function(e){if(!ya(e))return!1;var t=fa(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},va=wa,ba=Bt;var xa=function(e){return null!=e&&ba(e.length)&&!va(e)},Ea=oa,Sa=ma,Ta=xa;var Ia=function(e){return Ta(e)?Ea(e):Sa(e)},Aa=rt,Ra=Ia;var Ca=function(e){return null==e?[]:Aa(e,Ra(e))},Pa=et,La=Ca;var Oa=function(e){return Pa(La(e))},Na=st,ka=Oa,Da=Mt;var Ma=function(e){return(Da(e)?Na:ka)(e)};function Ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ja extends ve{static async getInstance(e,t){return await new ja(e,t)._load()}_isShortCircuit(){return!this._inputText.length}get customModeNames(){return this._customModeNames}_fallback(){return[]}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _load(){if(this._beforeLoad(),this.isSkipped)return this;try{let e=this._inputText.split(" ").length>500?this._inputText.split(" ").slice(0,500).join(" "):this._inputText;this._apiResponse=await le("api/paraphraser/context-custom-modes",{json:{inputText:e,disable_static_suggestions:this._disableStaticSuggestions},...ge});let t=Ma([...this._apiResponse.data.personas].map((e=>(e=>`${e[0].toUpperCase()}${e.slice(1)}`)(e))));this._customModeNames=t}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e,t=!1){super(),Ua(this,"_inputText",void 0),Ua(this,"_disableStaticSuggestions",void 0),Ua(this,"_customModeNames",void 0),this._inputText=e,this._disableStaticSuggestions=t,this._customModeNames=[]}}function Fa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Wa extends ve{static async getInstance(e){return await new Wa(e)._load()}get predictions(){return this._predictions}get serverValues(){return this._serverValues}get usage(){return this._usage}get timedout(){return this._timedout}get quotaExhausted(){return this._quotaExhausted}_fallback(e){"TimeoutError"===e?this._timedout=!0:"Quota exhausted"===e&&(this._quotaExhausted=!0)}_beforeLoad(){}async _load(){let{timeout:e}=ge;try{this._apiResponse=await le("api/utils/generative-ai",{json:{systemPromptText:this._systemPromptText,userPromptText:this._userPromptText,type:this._type,ct:0===this._cost?0:void 0,stripSignature:this._stripSignature},timeout:e}),this._predictions=this._apiResponse.data.predictions,this._serverValues=this._apiResponse.data.serverValues,this._usage=this._apiResponse.data.usage}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this,e.name))}return this}constructor(e){super(),Fa(this,"_systemPromptText",void 0),Fa(this,"_userPromptText",void 0),Fa(this,"_type",void 0),Fa(this,"_cost",void 0),Fa(this,"_stripSignature",void 0),Fa(this,"_predictions",[]),Fa(this,"_serverValues",void 0),Fa(this,"_usage",{}),Fa(this,"_timedout",void 0),Fa(this,"_quotaExhausted",void 0);let{systemPromptText:t,userPromptText:a,type:s,cost:n,stripSignature:i}=e||{};this._systemPromptText=b.checkCyrillicCharacters(t),this._userPromptText=b.checkCyrillicCharacters(a),this._type=s,this._cost=null!=n?n:1,this._stripSignature=null!=i&&i,this._timedout=!1,this._quotaExhausted=!1}}function Ba(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ga extends ve{get apiResponse(){return this._apiResponse}static async getInstance(e){return await new Ga(e)._load()}get modeSuggestions(){return this._modeSuggestions}get modeCustomModeSuggestions(){return this._customModeSuggestions}get modeNonCustomModeSuggestions(){return this._normalModeSuggestions}_isShortCircuit(){return!1}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit")}fetchModeSuggestions(){return le("api/paraphraser/mode-suggestions",{json:{text:this._text},...ge})}processSuggestedModes(e){return e.map((e=>{let{modeName:t,subModeName:a,score:s,label:n}=e;return{modeName:r[t],subModeName:a,score:s,label:n}}))}getModeSuggestions(e){return e.filter((e=>e.score>=.05))}async _load(){if(this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await this.fetchModeSuggestions();let{data:e}=this._apiResponse,{suggestedModes:t=[]}=e||{},a=this.processSuggestedModes(t);this._modeSuggestions=this.getModeSuggestions(a),this._customModeSuggestions=this._modeSuggestions.filter((e=>e.modeName===c.CUSTOM_MODE)),this._normalModeSuggestions=this._modeSuggestions.filter((e=>e.modeName!==c.CUSTOM_MODE))}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e){super(),Ba(this,"_modeSuggestions",[]),Ba(this,"_customModeSuggestions",[]),Ba(this,"_normalModeSuggestions",[]),Ba(this,"_text",void 0),Ba(this,"_apiResponse",{data:null,_cached:!1}),this._text=e}}let Va=async e=>E.get(e),Ha=async(e,t)=>{E.set(e,t)};class Ya extends ve{static async getInstance(e){return await new Ya(e)._load()}_isShortCircuit(){return!1}get customModeName(){return this._customModeName}_fallback(){return this._customModeName}_beforeLoad(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}async _load(){if(this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("api/paraphraser/refined-custom-mode",{json:{customModeName:this._customModeName},...ge}),this._customModeName=this._apiResponse.data.refinedCustomMode||""}catch(e){o.error(e),this._skipLoad("apiError",this._fallback.bind(this))}return this}constructor(e){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"_customModeName",void 0),this._customModeName=e}}let za=async e=>{let{customModeName:t}=e;return{refinedCustomMode:(await Ya.getInstance(t)).customModeName}},qa=async e=>{let{text:t,mode:a,flip:s,rephrase:n,frozenWords:i,customModeName:r,options:o,customVoiceInstruction:_,prevSentence:l,nextSentence:h}=e,{forceShortCircuitSingleParaphrase:u,forceShortCircuitSingleFlip:d,preservePlaceholder:c}=o||{},p=r,m=await E.get("SINGLE_PARA_PROMPT_VERSION");if(!["v2","v3"].includes(m)&&r){p=(await za({customModeName:r})).refinedCustomMode||r}let g=await xe.getInstance({inputText:t,mode:a,frozenWords:i,customModeName:p,forceShortCircuitSingleParaphrase:u,customVoiceInstruction:_,prevSentence:l,nextSentence:h}),f=g.beam(n),y=await Ie.getInstance(t,f,a,s,i,u||d),w=await y.flippedBeam(),v=y.textToPhrases(w,{preservePlaceholder:c});return{flippedBeam:w,beam:f,isFlippedBeamReported:(await We.getInstance(t)).isTextReported(w),beamIndex:g.beamIndex(n),paraphraserModelId:g.modelId,flipperModelId:y.modelId,phrases:v,singleParaphraseSkipReason:g.skipReason,singleFlipSkipReason:y.skipReason,isSingleParaResponseCached:g.isCached,isSingleFlipResponseCached:y.isCached}},Ka=async e=>{let{text:t,mode:a,flip:s,frozenWords:n,options:i,prevSentence:r,nextSentence:o}=e,{forceShortCircuitSingleParaphrase:_,preservePlaceholder:l,forceShortCircuitSingleFlip:h}=i||{},u=await xe.getInstance({inputText:t,mode:a,frozenWords:n,forceShortCircuitSingleParaphrase:_,prevSentence:r,nextSentence:o}),d=await Promise.all(u.beams.map((async(e,i)=>{let r=await Ie.getInstance(t,e,a,s,n,h),o=await r.flippedBeam(),_=r.textToPhrases(o,{preservePlaceholder:l});return{beam:e,flippedBeam:o,isFlippedBeamReported:(await We.getInstance(t)).isTextReported(o),beamIndex:i,paraphraserModelId:u.modelId,flipperModelId:r.modelId,phrases:_,singleParaphraseSkipReason:u.skipReason,singleFlipSkipReason:r.skipReason,isSingleParaResponseCached:u.isCached,isSingleFlipResponseCached:r.isCached}})));return{beams:d}},$a=async({text:e,options:t,inputText:a})=>{let{preloadPhrasalAlts:s,preservePlaceholder:n}=t||{},i=await Re.getInstance(e,n),r=await i.phrases,o=b.getEachWordProperties(a,e,{preservePlaceholder:null!=n&&n}),_=0,l=r.map((({displayText:e})=>e));Ce.getInstance(l);let h={modelId:i.modelId,text:e,isCached:i.isCached,phrases:r.map((({pre:e,post:t,text:a,whitespace:s,displayText:n,placeholder:i})=>{let r=[];return n.split(" ").forEach((()=>{r.push({...o[_]}),_+=1})),{pre:e,post:t,text:a,whitespace:s,displayText:n,placeholder:i,types:r}}))};return s&&await Le.getInstance(e,h.phrases.map((e=>e.text))),h},Ja=async({phrases:e,inputSentence:t})=>{let a=[];e.forEach(((e,t)=>{var s,n;let i;switch(e.action){case"edited":i=null===(s=e.metaData)||void 0===s?void 0:s.text,e.displayText=i||"",delete e.action,delete e.metaData,a.push({...e});break;case"selected":i=null===(n=e.metaData)||void 0===n?void 0:n.text,e.displayText=i||"",delete e.action,delete e.metaData,a.push({...e}),b.anFix(a,a.length-1);break;case"split":let t=e.displayText.split(" "),r=e.text.split(" ");t.forEach(((s,n)=>{let i={text:r[n]?r[n]:"",displayText:s,pre:0===n?e.pre:"",post:n===t.length-1?e.post:"",whitespace:n===t.length-1?e.whitespace:" "};a.push({...i})}));break;default:a.push({...e})}}));let s="";for(let e of a)s+=e.displayText+e.whitespace;let n=((e,t)=>b.getEachWordProperties(e,t))(t,s),i=0;return{phrases:a.map((({pre:e,post:t,text:a,whitespace:s,displayText:r})=>{let o=[];return r.split(" ").forEach((()=>{o.push({...n[i]}),i+=1})),{pre:e,post:t,text:a,whitespace:s,displayText:r,types:o}}))}},Qa=async e=>{let{isFallback:t,modelId:a,sentences:s,isCached:n}=await Me.getInstance(e.text);return{sentences:s,isFallback:t,sentenceSplitterModelId:a,isCached:n}};function Xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Za extends ve{static async getInstance(e,t){return await new Za(e,t)._load()}async _isShortCircuit(){return!await Se("multilingualThesaurus")||0===this._inputText.length}async _beforeLoad(){await this._isShortCircuit()&&this._skipLoad("empty")}get allPhrasesAlts(){return this._phrases.reduce(((e,t)=>({...e,[t.text]:t.alts})),{})}async _load(){if(await this._beforeLoad(),this.isSkipped)return this;try{this._apiResponse=await le("api/paraphraser/multilingual-thesaurus",{json:{inputText:this._inputText,inputLang:this._inputLang},...ge}),this._modelId=this._apiResponse.data.modelID||"paraphrase-thesaurus",this._phrases=this._apiResponse.data.thesaurus.map((e=>{let t={text:e.text,alts:[]};return t.alts=e.suggestions||[],t}))}catch(e){o.error(e),this._skipLoad("apiError")}return this}constructor(e,t){super(),Xa(this,"_inputText",""),Xa(this,"_inputLang","en"),Xa(this,"_phrases",[]),this._inputText=e,this._inputLang=t}}let es=async e=>{var t,a;let{texts:s,sources:n,searchText:i,modeLabel:r}=e,o={sources:{},alts:[]};if((null==n?void 0:n.flipper)&&(null==n?void 0:n.isMultilingualThesaurus)){let{beam:e,inputLanguage:a}=n.flipper,s=await Za.getInstance(e,a);{let e=(null===(t=s.allPhrasesAlts[i])||void 0===t?void 0:t.map((e=>({text:e,source:"paraphraseThesaurus"}))))||[];o.alts.push(...e),o.sources.flipper={modelId:s.modelId,skipReason:s.skipReason,isCached:s.isCached}}}if(null==n?void 0:n.flipper){let{inputSentence:e,beam:t,mode:a,flip:s,forceShortCircuitSingleFlip:r=!1}=n.flipper,_=await Ie.getInstance(e,t,a,s,[],r);{let e=_.alts(i).map((e=>({text:e,source:"flipper"})));o.alts.push(...e),o.sources.flipper={modelId:_.modelId,skipReason:_.skipReason,isCached:_.isCached}}}let _=(null==n?void 0:n.modeAwareParaphrasePhrase)&&(null==r?void 0:r.length);if(_){let{flippedBeam:e,waitTimeout:t=500,minWordsInPhrase:_}=n.modeAwareParaphrasePhrase,l={text:e,phrases:s.map((e=>({text:e}))),mode:r},h=(await G(ke.getInstance(l.text,l.phrases,l.mode,{minWordsInPhrase:_}),null,t)).value;if(h&&h instanceof ke){let e=(null===(a=h.suggestions[i])||void 0===a?void 0:a.map((e=>({text:e,source:"mapp"}))))||[],t=h.isSkipped,s=h.skipReason;t||0!==e.length||(s="empty"),o.alts.push(...e),o.sources.modeAwareParaphrasePhrase={modelId:h.modelId,skipReason:s,isCached:h.isCached}}}if((null==n?void 0:n.paraphrasePhrase)&&!_){let{flippedBeam:e,waitTimeout:t=500}=n.paraphrasePhrase,a=(await G(Le.getInstance(e,s),null,t)).value;if(a&&a instanceof Le){let e=a.allPhrasesAlts[i].map((e=>({text:e,source:"paraphrasePhrase"}))),t=a.isSkipped,s=a.skipReason;t||0!==e.length||(s="empty"),o.alts.push(...e),o.sources.paraphrasePhrase={modelId:a.modelId,skipReason:s,isCached:a.isCached}}}if(null==n?void 0:n.phrasalThesaurus){let e=(await G(Ce.getInstance(s),null,500)).value;if(e&&e instanceof Ce){let t=e.allPhrasesAlts[i].map((e=>({text:e,source:"paraphraseThesaurus"})));{o.alts.push(...t);let a=e.isSkipped,s=e.skipReason;a||0!==t.length||(s="empty"),o.sources.paraphraseThesaurus={modelId:e.modelId,skipReason:s,isCached:e.isCached}}}}let l=new Set,h=[];for(let t of o.alts)if(t.text===e.selectedAltText&&(t.text=e.searchText,t.source="inputValue"),!l.has(t.text)){l.add(t.text);let e=await We.getInstance(i);t.isReported=e.isTextReported(t.text),h.push(t)}return o.alts=h,o},ts=async e=>{let{text:t,phrases:a,mode:s}=e,n={suggestions:{},text:t,phrases:a,mode:s},{suggestions:i,skipReason:r}=await ke.getInstance(t,a,s);return n.suggestions=i||{},r&&(n.skipReason=r),n},as=async e=>{let{inputText:t}=e;return(await Ga.getInstance(t)).modeSuggestions},ss=async e=>{let{inputText:t}=e;return(await Ga.getInstance(t)).modeCustomModeSuggestions},ns=async e=>{let{inputText:t}=e;return(await Ga.getInstance(t)).modeNonCustomModeSuggestions},is=async({text:e})=>{let{definitions:t,isCached:a}=await je.getInstance(e);return{definitions:t,isCached:a}},rs=async({referenceText:e,text:t})=>{let a=await We.getInstance(e);return await a.reportText(t),{reportedTexts:a.reportedTexts}},os=async({referenceText:e,text:t})=>{let a=await We.getInstance(e);return await a.unReportText(t),{reportedTexts:a.reportedTexts}},_s=async e=>{let{text:t}=e,{recommendedWords:a,isCached:s}=await Ge.getInstance(t);return{words:a,isCached:s}};class ls extends ve{static async getInstance(){return await(new ls)._load()}async setHistoryToStorage(e){e.id&&(Object.keys(e._data).forEach((t=>{let a={pre:"",post:e._data[t].post||"",text:e._data[t].input};a=b.parseNewline(a),e._data[t]={...e._data[t],input:a.text,post:a.post,output:e._data[t].output.trim()}})),await Q("historyData",JSON.stringify(e)))}async getHistoryFromStorage(){let e=await J("historyData");return e&&(this._historyData=JSON.parse(e)),this._historyData}async getSentenceHistoryFromStorage(e){let t=await J("historyData");return t&&(this._historyData=JSON.parse(t)),this._historyData._data[e]}async setHistorySentence(e){var t,a;return await this.getHistoryFromStorage(),e.id&&e.sentence_id&&(null===(t=this._historyData)||void 0===t?void 0:t.id)===e.id&&(Object.keys(null===(a=this._historyData)||void 0===a?void 0:a._data)||[]).includes(e.sentence_id)&&(this._historyData._data[e.sentence_id].output=e._sentence_text,this._historyData.mode=e.mode,this._historyData.synonym_value=e.synonym_value,this._historyData.customModeName=e.customModeName,this._historyData.customVoiceInstruction=e.customVoiceInstruction,this._historyData.inputLanguage=e.inputLanguage,this._historyData.dialect=e.dialect,this.setHistoryToStorage(this._historyData)),this._historyData}_beforeLoad(){}async _load(){return this}constructor(){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"_historyData",{id:"",mode:0,synonym_value:1,_data:{},created_at:"",updated_at:"",customModeName:"",customVoiceInstruction:{formality:"",vocabulary:"",personality:[]},inputLanguage:"en"})}}let hs=async()=>(await Ve.getInstance()).allHistoryData,us=async e=>{var t;return null===(t=(await ze.getInstance({id:e})).historyItemData)||void 0===t?void 0:t.history},ds=async()=>(await Ve.getInstance()).deleteAllHistory(),cs=async e=>(await ze.getInstance({id:e})).deleteHistory(),ps=async()=>(await ls.getInstance()).getHistoryFromStorage(),ms=async e=>{let t=await ls.getInstance(),a=await t.getSentenceHistoryFromStorage(e),s=await We.getInstance(a.input.trim());return{flippedBeam:a.output,beam:a.output,isFlippedBeamReported:s.isTextReported(a.output),beamIndex:0,paraphraserModelId:"history-data",flipperModelId:"history-data",phrases:b.textToPhrases({inputText:a.input,text:a.output}),isSingleParaResponseCached:!0,isSingleFlipResponseCached:!0}},gs=async e=>{(await ls.getInstance()).setHistoryToStorage(e)},fs=async e=>{(await ls.getInstance()).setHistorySentence(e)},ys=async e=>{let{text:t,dialect:a}=e,{audio:s}=await Ke.getInstance(t,a);return{audio:s}},ws=async e=>{let{inputText:t,disableStaticSuggestions:a}=e;return(await ja.getInstance(t,a)).customModeNames},vs=async e=>{let{systemPromptText:t,userPromptText:a,type:s,ct:n,stripSignature:i}=e,{predictions:r,usage:o,serverValues:_,skipReason:l,timedout:h,quotaExhausted:u}=await Wa.getInstance({systemPromptText:null!=t?t:"",userPromptText:a,type:s,cost:n,stripSignature:i});return{predictions:r,usage:o,serverValues:_,skipReason:l,timedout:h,quotaExhausted:u}};!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8fbb82a0-d562-516a-bfad-28a07b8893d8")}catch(e){}}()}}]);
//# sourceMappingURL=sourceMap/586.js.map