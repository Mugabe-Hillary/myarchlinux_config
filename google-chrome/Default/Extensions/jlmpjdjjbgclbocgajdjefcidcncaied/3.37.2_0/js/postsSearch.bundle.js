"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9152],{84178:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(98093),a=n(89338),l=n(2827),o=n.n(l),i=n(22155),u=n(36797),s=n.n(u),c=n(14243),d=n(30395),f=n.n(d),p=n(79887);var v=n(34229),h=n(4394),y=n(56638),m=n(42104),b=n(36899),g=n(15360),x=n(55551),I=i.createElement,w=s()((function(){return n.e(7286).then(n.bind(n,84746))}),{ssr:!1,loadableGenerated:{webpack:function(){return[84746]}}}),k={searchPostSuggestions:h.cy,searchBookmarksSuggestions:y.tC,searchReadingHistorySuggestions:m.P4};function S(e){var t=e.initialQuery,n=e.autoFocus,l=void 0===n||n,u=e.placeholder,s=e.onSubmitQuery,d=e.className,y=e.suggestionType,m=void 0===y?"searchPostSuggestions":y,S=e.onFocus,A=e.onClearQuery,C=(0,i.useRef)(),F=(0,i.useState)(),N=F[0],O=F[1],E=(0,i.useState)(),P=E[0],z=E[1],B=(0,i.useState)(null),q=B[0],T=B[1],R=(0,i.useState)([]),M=R[0],L=R[1],j=(0,g.G)({feature:x.N4.searchVersion,shouldEvaluate:!!P&&"searchPostSuggestions"===m}).value,K=k[m],D=(0,c.I)({queryKey:[m,P],queryFn:function(){return b.e.request(K,{query:P,version:j})},enabled:!!P}),G=D.data,Q=D.isPending;(0,i.useEffect)((function(){N||O(t)}),[t]);var H=function(){return T(null)},X=function(){if(!q){var e=C.current.getBoundingClientRect(),t=e.left,n=e.bottom,r=e.width;T({x:t,y:n+window.scrollY,width:r})}};(0,i.useEffect)((function(){var e,t,n;Q||(null!=M&&M.length||null==G||null===(e=G[m])||void 0===e||!e.hits.length||X(),L(null!==(t=null==G||null===(n=G[m])||void 0===n?void 0:n.hits.map((function(e){return e.title})))&&void 0!==t?t:[]))}),[G,Q]);var J=function(){var e=(0,a.A)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==t||null===(n=t.replace)||void 0===n?void 0:n.call(t,h.F,""),e.next=3,s(r||P);case 3:r&&O(r),H();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){var n=(0,i.useState)(-1),r=n[0],a=n[1];return(0,i.useEffect)((function(){a(-1)}),[e]),{selectedItemIndex:r,onKeyDown:function(n){if(40===n.keyCode||38===n.keyCode){n.preventDefault();var l=e.length+1;if(r>-1){var o=40===n.keyCode?1:-1;a(((r+o)%l+l)%l)}else a(40===n.keyCode?0:l-1)}else 13===n.keyCode&&t(r>-1&&e[r])}}}(M,J),Y=W.selectedItemIndex,$=W.onKeyDown,V=(0,v.A)((function(e){return z(e)}),100),Z=(0,r.A)(V,1)[0];(0,i.useEffect)((function(){var e;l&&(null===(e=C.current)||void 0===e||e.querySelector("input").focus())}),[C,l]);var U=!!q&&!!M.length;return I(i.Fragment,null,I(p.L,{className:f()("compact flex-1",d),inputId:"posts-search",fieldSize:"medium",placeholder:null!=u?u:"Find posts",ref:C,value:N,valueChanged:function(e){if(!e.length)return H(),z(""),void(null==A||A());e&&e!==t&&Z(e),null===q&&X()},onKeyDown:$,onBlur:function(){null!=P&&P.length&&H()},onFocus:function(e){null==S||S(e),null!=M&&M.length&&X()},"aria-haspopup":"true","aria-expanded":U}),I(w,{placement:q,items:M,focusedItemIndex:Y,onItemClick:J,isOpen:U}))}},77501:(e,t,n)=>{n.d(t,{Ay:()=>f,Q0:()=>c,mi:()=>u,pJ:()=>s});var r=n(30395),a=n.n(r),l=n(22155),o=n(86548),i=l.createElement,u=function(e){var t=e.readOnly,n=e.isLocked,r=e.hasInput,a=e.disabled,l=e.focused,o=e.isPrimaryField;return t||n||r&&!l||o&&r?"text-text-tertiary":a?"text-text-disabled":"text-text-primary"},s=function(e){var t=e.readOnly,n=e.isLocked,r=e.disabled,a=e.focused,l=e.hasInput,o=e.hasActionIcon;return t&&o||l?"text-text-primary":t||n?"text-text-quaternary":r?"text-text-disabled":a?"text-text-quaternary":"text-text-tertiary hover:text-text-primary"},c=function(e){var t=e.isSecondaryField,n=e.isTertiaryField,r=e.placeholder,a=e.focused,l=e.label;return n?a?r:l:a||t?null!=r?r:"":l};function d(e,t){var n=e.className,r=void 0===n?{}:n,l=e.fieldType,s=void 0===l?"primary":l,c=e.readOnly,d=e.isLocked,f=e.hasInput,p=e.disabled,v=e.focused,h=e.inputId,y=e.label,m=e.children,b=e.invalid,g=e.hint,x=e.hintIcon,I=e.saveHintSpace,w=e.focusInput,k="secondary"===s;return i("div",{ref:t,className:a()("flex flex-col",r.container)},k&&i("label",{className:a()("mb-1 px-2 font-bold typo-caption1",r.outerLabel,u({readOnly:c,isLocked:d,hasInput:f,disabled:p,focused:v})),htmlFor:h},y),i(o.s,{"data-testid":"field",onClick:w,className:a()("relative flex",k?"rounded-10":"rounded-14",r.baseField,{readOnly:c,focused:v,invalid:b})},m),((null==g?void 0:g.length)||I)&&i("div",{role:b?"alert":void 0,className:a()("mt-1 flex items-center gap-1 px-2 typo-caption1",I&&"h-4",b?"text-status-error":"text-text-quaternary",r.hint)},x||void 0,g))}const f=(0,l.forwardRef)(d)},79887:(e,t,n)=>{n.d(t,{L:()=>x});var r=n(7527),a=n(75087),l=n(22155),o=n(30395),i=n.n(o),u=n(95098),s=n(86548),c=n(67371),d=n(13879),f=n(96044),p=n(53823),v=n(83448),h=n(77501),y=["isPrimary"],m=["inputId","name","value","valueChanged","placeholder","fieldSize","readOnly","fieldType","className","autoFocus","type","disabled","rightButtonProps","aria-describedby","aria-label","onBlur","onFocus","showIcon"],b=l.createElement,g=function(e){var t=e.isPrimary,n=(0,a.A)(e,y);return t?b(c.d,n):b(d.HK,(0,r.A)({},n,{className:"rotate-90"}))},x=(0,l.forwardRef)((function(e,t){var n=e.inputId,l=e.name,o=e.value,d=e.valueChanged,y=e.placeholder,x=void 0===y?"Search":y,I=e.fieldSize,w=void 0===I?"large":I,k=e.readOnly,S=e.fieldType,A=void 0===S?"primary":S,C=e.className,F=e.autoFocus,N=e.type,O=e.disabled,E=e.rightButtonProps,P=void 0===E?{type:"button"}:E,z=e["aria-describedby"],B=e["aria-label"],q=e.onBlur,T=e.onFocus,R=e.showIcon,M=void 0===R||R,L=(0,a.A)(e,m),j=(0,u.G)(o,d),K=j.inputRef,D=j.focused,G=j.hasInput,Q=j.onFocus,H=j.onBlur,X=j.onInput,J=j.focusInput,W=j.setInput,Y=function(e){e.stopPropagation(),W(null)},$="primary"===A,V="secondary"===A,Z="medium"===w?"h-10 rounded-12":"h-12 rounded-14";return b(s.s,(0,r.A)({},L,{className:i()("items-center !border !border-border-subtlest-tertiary !bg-background-default",Z,C,{focused:D}),onClick:J,"data-testid":"searchField",ref:t}),!!M&&(V&&G?b(p.$n,{"aria-label":"Clear input text",className:"mr-2",size:v.Mp.XSmall,variant:v.Ak.Tertiary,title:"Clear query",onClick:Y,icon:b(c.d,{className:"icon text-lg group-hover:text-text-primary"}),disabled:!G}):b(f.W,{"aria-hidden":!0,className:"icon mr-2 text-2xl",role:"presentation",secondary:D,style:{color:D||G?"var(--theme-text-primary)":"var(--field-placeholder-color)"}})),b(s.T,{"aria-label":B,disabled:O,placeholder:x,name:l,id:n,ref:K,onFocus:function(e){Q(),null==T||T(e)},onBlur:function(e){H(),null==q||q(e)},onInput:X,autoFocus:F,type:N,"aria-describedby":z,autoComplete:"off",className:i()("flex-1",Z,(0,h.pJ)({readOnly:k,disabled:O,hasInput:G,focused:D})),required:!0}),(G&&$||V)&&!!P&&b(p.$n,(0,r.A)({},P,{variant:V?v.Ak.Primary:v.Ak.Tertiary,size:P.size||v.Mp.XSmall,title:P.title||"Clear query",onClick:"submit"!==P.type?Y:P.onClick,icon:b(g,{"aria-hidden":!0,role:"presentation",isPrimary:$}),disabled:(null==P?void 0:P.disabled)||!G})))}))},86548:(e,t,n)=>{n.d(t,{T:()=>l,s:()=>o});var r=n(63423),a=n(94992),l=(0,r.A)("input","min-w-0 bg-transparent typo-body caret-text-link focus:outline-none"),o=(0,r.A)("div","flex px-4 overflow-hidden bg-surface-float border border-transparent cursor-text",a.A.field)},96044:(e,t,n)=>{n.d(t,{W:()=>h});var r,a=n(7527),l=n(75087),o=n(22155),i=n(97838);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}const s=function(e){return o.createElement("svg",u({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=o.createElement("path",{d:"M10 3a7 7 0 016.068 10.492 2.813 2.813 0 012.076.67l.157.147 1.872 1.871a2.823 2.823 0 01-3.852 4.125l-.14-.132-1.872-1.872a2.817 2.817 0 01-.818-2.234A7 7 0 1110 3zm7.24 12.37a1.323 1.323 0 00-1.967 1.763l.096.108 1.872 1.871c.241.242.552.37.868.386h.135l.135-.014a1.324 1.324 0 00.83-2.136l-.097-.107-1.871-1.872zM10 4.5a5.5 5.5 0 00-.221 10.996L10 15.5l.221-.004A5.5 5.5 0 0010 4.5z",fill:"currentcolor",fillRule:"evenodd"})))};var c;function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}const f=function(e){return o.createElement("svg",d({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),c||(c=o.createElement("path",{d:"M15.394 15.394a2.052 2.052 0 012.763-.126l.138.126 2.127 2.128.128.144a2.052 2.052 0 01-1.123 3.278l-.192.038-.208.018h-.181a2.045 2.045 0 01-1.205-.47l-.141-.129-2.127-2.128-.128-.144a2.052 2.052 0 01.025-2.6l.124-.135zM9.75 3a6.75 6.75 0 01.511 13.482l-.251.014-.271.005-.26-.005A6.75 6.75 0 019.75 3z",fill:"currentcolor",fillRule:"evenodd"})))};var p=["size"],v=o.createElement,h=function(e){var t=e.size,n=(0,l.A)(e,p);return v(i.Ay,(0,a.A)({},n,{size:t,IconPrimary:s,IconSecondary:f}))}},95098:(e,t,n)=>{n.d(t,{G:()=>a});var r=n(22155);function a(e,t){var n=(0,r.useRef)(null),a=(0,r.useState)(!1),l=a[0],o=a[1],i=(0,r.useState)(!1),u=i[0],s=i[1],c=function(e){n.current.value=e,n.current.dispatchEvent(new Event("input",{bubbles:!0}))};(0,r.useEffect)((function(){var t;void 0!==e&&(c((null==e?void 0:e.toString())||""),s(!(null==n||null===(t=n.current)||void 0===t||null===(t=t.value)||void 0===t||!t.length)))}),[e]);return{inputRef:n,focused:l,hasInput:u,onFocus:function(){return o(!0)},onBlur:function(){return o(!1)},onInput:function(e){t&&t(e.currentTarget.value);var n=e.currentTarget.value.length;!u&&n?s(!0):u&&!n&&s(!1)},focusInput:function(){n.current.focus()},setInput:c}}},94992:(e,t,n)=>{n.d(t,{A:()=>r});const r={field:"OSaZMMeM+axN9uO6jYIrXA=="}}}]);