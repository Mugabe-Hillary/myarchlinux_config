(self.webpackChunkextension=self.webpackChunkextension||[]).push([[6073],{20573:(e,n,t)=>{"use strict";t.d(n,{P5:()=>a,Qv:()=>i,Tg:()=>o});var r=t(22155),i=(0,r.createContext)(void 0),a=function(){var e=(0,r.useContext)(i);if(void 0===e)throw new Error("usePaymentContext must be used within a PaymentContextProvider");return e},u=(0,r.createContext)({pricing:null}),o=function(){return(0,r.useContext)(u)}},86073:(e,n,t)=>{"use strict";t.d(n,{P:()=>T});var r=t(75087),i=t(22155),a=t(36797),u=t.n(a),o=t(68390),c=t(89334),l=t(20573),s=t(83362),d=t(16354),p=t(7941),v=t(80244),g=i.createElement,y=function(e){var n,t=e.children,r=e.openCheckout,a=e.isPaddleReady,u=(0,v.Z2)().isValidRegion,o=(null!==(n=(0,l.Tg)())&&void 0!==n?n:{}).pricing,c=(0,p.t)({type:s.Ey.Plus,enabled:!o}),y=c.data,f=c.isPending,m=null!=o?o:y,h=(0,i.useMemo)((function(){return null==m?void 0:m.find((function(e){return e.metadata.appsId===d.lL.GiftOneYear}))}),[m]),b=(0,i.useMemo)((function(){var e;return{openCheckout:r,productOptions:null!==(e=null==m?void 0:m.filter((function(e){return e.priceId!==(null==h?void 0:h.priceId)})))&&void 0!==e?e:[],isPlusAvailable:u,giftOneYear:h,isPricesPending:f,isPaddleReady:a}}),[r,m,h,u,f,a]);return g(l.Qv.Provider,{value:b},t)},f=t(57952),m=i.createElement,h=function(e){var n=e.children,t=e.successCallback,r=(0,c.W)({successCallback:t,targetType:f.yK.Plus}),i=r.openCheckout,a=r.isPaddleReady;return m(y,{openCheckout:i,isPaddleReady:a},n)},b=t(9487),P=t(54883),C=i.createElement,k=function(e){var n=e.children,t=(0,b.useRouter)();return C(y,{openCheckout:function(e){var n=e.priceId,r=e.giftToUserId,i=e.discountId,a=new URLSearchParams({priceId:n});r&&a.append("giftToUserId",r),i&&a.append("discountId",i);var u=new URL("".concat(P.ZO,"plus/payment?").concat(a.toString()));t.push(u.toString())}},n)},E=t(63815),_=["children"],I=i.createElement,O=u()((function(){return t.e(4281).then(t.bind(t,74281)).then((function(e){return e.StoreKitSubProvider}))}),{loadableGenerated:{webpack:function(){return[74281]}}}),T=function(e){var n=e.children,t=(0,r.A)(e,_);return(0,E.B6)()?I(O,t,n):(0,o.oX)()?I(k,t,n):I(h,t,n)}},83362:(e,n,t)=>{"use strict";t.d(n,{Ey:()=>v,Ju:()=>f,U8:()=>h,_Q:()=>b});var r,i,a,u,o=t(89338),c=t(91591),l=t(2827),s=t.n(l),d=t(2972),p=t(36899),v=function(e){return e.Plus="plus",e.Cores="cores",e}({}),g=(0,d.gql)(r||(r=(0,c.A)(["\n  fragment PricingMetadataFragment on ProductPricingMetadata {\n    appsId\n    title\n    caption {\n      copy\n      color\n    }\n    idMap {\n      paddle\n      ios\n    }\n    coresValue\n  }\n"]))),y=(0,d.gql)(i||(i=(0,c.A)(["\n  query PricingPreview($type: PricingType, $locale: String) {\n    pricingPreview(type: $type, locale: $locale) {\n      metadata {\n        ...PricingMetadataFragment\n      }\n      priceId\n      price {\n        amount\n        formatted\n        monthly {\n          amount\n          formatted\n        }\n        daily {\n          amount\n          formatted\n        }\n      }\n      currency {\n        code\n        symbol\n      }\n      duration\n    }\n  }\n  ","\n"])),g),f=function(){var e=(0,o.A)(s().mark((function e(n){var t,r,i,a,u,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:null!==(t=null===globalThis||void 0===globalThis||null===(r=globalThis.navigator)||void 0===r?void 0:r.language)&&void 0!==t?t:"en-US",e.next=3,p.e.request(y,{type:n,locale:i});case 3:return a=e.sent,u=a.pricingPreview,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=((0,d.gql)(a||(a=(0,c.A)(["\n  query PricingPreviewByIds($ids: [String]!, $locale: String) {\n    pricingPreviewByIds(ids: $ids, locale: $locale) {\n      priceId\n      price {\n        amount\n        formatted\n        monthly {\n          amount\n          formatted\n        }\n        daily {\n          amount\n          formatted\n        }\n      }\n      currency {\n        code\n        symbol\n      }\n      duration\n      trialPeriod {\n        interval\n        frequency\n      }\n    }\n  }\n"]))),(0,d.gql)(u||(u=(0,c.A)(["\n  query PricingMetadata($type: PricingType) {\n    pricingMetadata(type: $type) {\n      ...PricingMetadataFragment\n    }\n  }\n  ","\n"])),g)),h=function(){var e=(0,o.A)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.e.request(m,{type:n});case 2:return t=e.sent,r=t.pricingMetadata,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(e){return e.Success="success",e.Help="help",e}({})},89334:(e,n,t)=>{"use strict";t.d(n,{W:()=>g});var r=t(50122),i=t(22155),a=t(15132),u=t(9487),o=t(80244),c=t(61663),l=t(57952),s=t(54883),d=t(68390);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=function(e){var n=e.successCallback,t=e.disabledEvents,r=e.targetType,p=e.getProductQuantity,g=(0,u.useRouter)(),y=(0,c.DX)().logEvent,f=(0,o.Z2)(),m=f.user,h=f.geo,b=(0,i.useState)(),P=b[0],C=b[1],k=(0,i.useRef)(!1),E=(0,i.useRef)();E.current=y;var _=(0,i.useRef)(n);_.current=n;var I=(0,i.useRef)(p);I.current=p,(0,i.useEffect)((function(){(0,d.oX)()||(k.current=!1,(0,a.initializePaddle)({environment:"MISSING_ENV_VAR".NEXT_PUBLIC_PADDLE_ENVIRONMENT||"production",token:"topsecret",eventCallback:function(e){var n,i,u,o,c,d,p;if(null==t||!t.includes(null==e?void 0:e.name)){var v=(null==e||null===(n=e.data)||void 0===n?void 0:n.custom_data)||{};switch(null==e?void 0:e.name){case a.CheckoutEventNames.CHECKOUT_PAYMENT_INITIATED:E.current({target_type:r,event_name:l.VB.InitiatePayment,target_id:null==e||null===(i=e.data)||void 0===i?void 0:i.payment.method_details.type});break;case a.CheckoutEventNames.CHECKOUT_LOADED:k.current=!0,E.current({target_type:r,event_name:l.VB.InitiateCheckout,target_id:null==e||null===(u=e.data)||void 0===u?void 0:u.payment.method_details.type});break;case a.CheckoutEventNames.CHECKOUT_PAYMENT_SELECTED:E.current({target_type:r,event_name:l.VB.SelectCheckoutPayment,target_id:null==e||null===(o=e.data)||void 0===o?void 0:o.payment.method_details.type});break;case a.CheckoutEventNames.CHECKOUT_COMPLETED:k.current=!1,E.current({target_type:r,event_name:l.VB.CompleteCheckout,extra:JSON.stringify({user_id:"gifter_id"in v&&"user_id"in v?v.user_id:void 0,quantity:null===(c=I.current)||void 0===c?void 0:c.call(I,e),localCost:null==e?void 0:e.data.totals.total,localCurrency:null==e?void 0:e.data.currency_code,payment:null==e?void 0:e.data.payment.method_details.type,cycle:null!==(d=null==e||null===(p=e.data.items)||void 0===p||null===(p=p[0])||void 0===p||null===(p=p.billing_cycle)||void 0===p?void 0:p.interval)&&void 0!==d?d:"one-off"})}),_.current?_.current(e):g.push(s.j$);break;case"checkout.warning":E.current({target_type:r,event_name:l.VB.WarningCheckout});break;case a.CheckoutEventNames.CHECKOUT_ERROR:E.current({target_type:r,event_name:l.VB.ErrorCheckout});break;case a.CheckoutEventNames.CHECKOUT_CLOSED:k.current=!1}}},checkout:{settings:{displayMode:"inline",frameTarget:"checkout-container",frameInitialHeight:500,frameStyle:"width: 100%; background-color: transparent; border: none;",theme:"dark",variant:"one-page"}}}).then((function(e){e&&C(e)})))}),[g,t,r]);var O=(0,i.useCallback)((function(e){var n=e.priceId,t=e.giftToUserId,r=e.discountId,i=[{priceId:n,quantity:1}],a=v(v({},null!=m&&m.email?{email:null==m?void 0:m.email}:{id:"anonymous"}),(null==h?void 0:h.region)&&{address:{countryCode:null==h?void 0:h.region}}),u=v({user_id:null!=t?t:null==m?void 0:m.id},!!t&&{gifter_id:null==m?void 0:m.id});k.current?null==P||P.Checkout.updateItems(i):null==P||P.Checkout.open({items:i,customer:a,customData:u,discountId:r})}),[null==P?void 0:P.Checkout,null==m?void 0:m.email,null==m?void 0:m.id,null==h?void 0:h.region]);return{paddle:P,openCheckout:O,isPaddleReady:!!P}}},7941:(e,n,t)=>{"use strict";t.d(n,{t:()=>o});var r=t(14243),i=t(80244),a=t(83362),u=t(30530),o=function(e){var n=e.type,t=e.locale,o=e.enabled,c=void 0===o||o,l=(0,i.Z2)(),s=l.user,d=l.isValidRegion;return(0,r.I)({queryKey:(0,u.$h)(u.jZ.PricePreview,s,n,t),queryFn:function(){return(0,a.Ju)(n,t)},enabled:c&&d,staleTime:u.b2.Default})}},63815:(e,n,t)=>{"use strict";t.d(n,{B6:()=>u,Ks:()=>o,NB:()=>i,QD:()=>a});var r=t(68390),i=function(e){return e.NativeAuth="native-auth",e.UpdateUserId="update-user-id",e.TrackEvent="track-event",e.PushState="push-state",e.PushUserId="push-user-id",e.PushSubscribe="push-subscribe",e.PushUnsubscribe="push-unsubscribe",e.IAPProductList="iap-product-list",e.IAPSubscriptionManage="iap-subscription-manage",e.IAPSubscriptionRequest="iap-subscription-request",e.IAPSetAppAccountToken="iap-set-app-account-token",e}({}),a=function(e){var n;return(0,r.Ji)()&&!(null===globalThis||void 0===globalThis||null===(n=globalThis.webkit)||void 0===n||null===(n=n.messageHandlers)||void 0===n||!n[e])},u=function(){return(0,r.Ji)()&&a(i.IAPSubscriptionRequest)},o=function(e,n){if(!(0,r.Ji)())throw new Error("sendMessage is only available on iOS");if(!a(e))throw new Error("Message handler ".concat(e," does not exist"));globalThis.webkit.messageHandlers[e].postMessage(n)}},15132:()=>{}}]);