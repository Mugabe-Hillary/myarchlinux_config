"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9736],{71444:(e,t,r)=>{r.d(t,{_:()=>p});var n,o=r(7527),a=r(22155),i=r(97838);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}const l=function(e){return a.createElement("svg",c({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),n||(n=a.createElement("path",{d:"M4.87 20.001l-.234-.016-.108-.012c-.783-.122-1.395-.743-1.51-1.567l-.016-.147L3 18.143l.001-.3.005-.22c.097-2.215 1.478-4.174 3.636-5.143.166-.064.333-.121.5-.173l-.015-.007a3.958 3.958 0 014.005-6.825l.018-.023a4.222 4.222 0 017.409 2.77c0 1.392-.68 2.668-1.819 3.469l-.156.103.27.088.268.098.093.04.227.108c2.03 1.014 3.375 2.948 3.545 5.154l.013.237.004.236v.313L21 18.17l-.007.092-.012.103a1.926 1.926 0 01-1.633 1.61l-.15.014-.188.012H4.87zm4.823-6.803l-.053.05a4.865 4.865 0 00-.389-.015c-.72 0-1.44.138-2.162.414-1.601.72-2.673 2.175-2.82 3.83l-.014.2-.004.194-.001.275.002.081.012.085a.558.558 0 00.375.407l.082.02.056.003H7.8l-.042-.123a2.085 2.085 0 01-.07-.32l-.016-.157-.003-.123.001-.32.006-.235c.071-1.64.804-3.15 2.016-4.266zm4.645-.416c-.769 0-1.537.147-2.306.442-1.709.768-2.852 2.32-3.01 4.085l-.013.213-.005.207v.293l.002.087.013.09c.046.206.2.371.4.434l.087.02.059.005h9.549l.092-.012c.209-.046.374-.2.437-.4l.02-.087.008-.092v-.313l-.004-.21-.013-.215c-.138-1.633-1.121-3.084-2.61-3.905l-.197-.103-.203-.096-.288-.104a6.314 6.314 0 00-2.018-.339zM9.25 6.25a2.708 2.708 0 101.123 5.174l.167-.084.162-.095.138-.095c.092-.066.179-.138.261-.215a4.212 4.212 0 01-.987-2.713c0-.613.131-1.195.366-1.721l-.016.037A2.676 2.676 0 009.25 6.25zm5.087-.917a2.889 2.889 0 101.197 5.52l.18-.09.171-.102.148-.1a2.889 2.889 0 00-1.696-5.227z",fill:"currentcolor",fillRule:"evenodd"})))};var u;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}const m=function(e){return a.createElement("svg",s({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),u||(u=a.createElement("path",{d:"M14.775 13.195c.785 0 1.57.132 2.355.395l.337.121.236.112.23.121c1.738.958 2.886 2.652 3.047 4.558l.016.25.001.09-.006.079-.024.102a.692.692 0 01-.51.466l-.108.015-11.145-.001-.07-.005-.101-.024a.694.694 0 01-.467-.506l-.015-.099.003-.142.017-.249c.184-2.06 1.518-3.871 3.512-4.768a7.473 7.473 0 012.692-.515zm-7.783 5.462l.001.177.001-.029.02.18c.009.064.02.127.034.19l.048.182.049.144h-3.53l-.065-.005-.096-.022a.651.651 0 01-.437-.475l-.014-.093.003-.098.015-.233c.172-1.932 1.424-3.63 3.293-4.47a7.006 7.006 0 012.524-.484c.151 0 .303.006.453.018l-.181.176C7.84 15.09 7.078 16.757 7 18.559l-.006.235-.002-.137zM8.836 5.47a3.161 3.161 0 101.31 6.04l.196-.099.189-.111.161-.11c.107-.078.209-.162.305-.252a4.916 4.916 0 01-1.152-3.166c0-.613.112-1.2.317-1.742l.09-.224a3.124 3.124 0 00-1.416-.336zm5.938-.97a3.372 3.372 0 101.397 6.442l.21-.105.2-.119.172-.117a3.372 3.372 0 00-1.98-6.101z",fill:"currentcolor",fillRule:"evenodd"})))};var d=a.createElement,p=function(e){return d(i.Ay,(0,o.A)({},e,{IconPrimary:l,IconSecondary:m}))}},59134:(e,t,r)=>{r.r(t),r.d(t,{SquadMemberModal:()=>Ae,default:()=>Se});var n,o=r(7527),a=r(50122),i=r(98093),c=r(75087),l=r(22155),u=r(94198),s=r(87822),m=r(47734),d=r(59645),p=r(97900),b=r(92203),f=r(89338),y=r(2827),v=r.n(y),g=r(80244),O=r(54883),h=r(97838),P=r(18356),w=r(9711),k=r(17631),j=r(71444),M=r(22354),A=r(68714),S=r(27840),q=r(96878),x=r(62859),D=r(68392),T=r(92315),K=r(48389),E=r(19505),N=r(83448),B=r(81668),C=r(77955),_=r(89883),z=r(57952),F=l.createElement;function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=function(e){return e.PromoteToAdmin="Make admin",e.PromoteToModerator="Promote to moderator",e.DemoteToModerator="Demote to moderator",e.DemoteToMember="Demote to member",e.BlockMember="Block member",e}(Q||{}),I=(0,a.A)({},Q.BlockMember,"Yes, block member"),R=(n={},(0,a.A)(n,Q.PromoteToAdmin,(function(e,t){return"".concat(e," will get the same permissions as you have. Making someone an admin will not replace you as the admin of ").concat(t,". You can reverse this decision later.")})),(0,a.A)(n,Q.PromoteToModerator,(function(e){return"".concat(e," will now get moderator permissions and be able to remove posts and members from your Squad. You can reverse this decision later.")})),(0,a.A)(n,Q.DemoteToModerator,(function(e){return"".concat(e," will no longer have admin permissions. You can always reverse this decision later.")})),(0,a.A)(n,Q.DemoteToMember,(function(e){return"".concat(e," will lose the moderator permissions and become a regular member.")})),(0,a.A)(n,Q.BlockMember,(function(e,t){return"".concat(e," will be blocked and will no longer have access to ").concat(t,". They will not be able to rejoin unless you unblock them.")})),n),Z=(0,a.A)({},Q.BlockMember,E.h.Ketchup),W=(0,a.A)({},Q.BlockMember,"Member has been blocked"),$=function(e,t){var r={label:Q.PromoteToAdmin,icon:F(P.G,{size:h.lK.Small}),action:t(s._h.Admin,Q.PromoteToAdmin)},n={label:Q.PromoteToModerator,icon:F(w.n,{size:h.lK.Small}),action:t(s._h.Moderator,Q.PromoteToModerator)},o={label:Q.DemoteToModerator,icon:F(k.t,{size:h.lK.Small}),action:t(s._h.Moderator,Q.DemoteToModerator)},a={label:Q.DemoteToMember,icon:F(j._,{size:h.lK.Small}),action:t(s._h.Member,Q.DemoteToMember)};return e.role===s._h.Admin?[o,a]:e.role===s._h.Moderator?[r,a]:[r,n]};function G(e){var t=e.squad,r=e.member,n=e.onUpdateRole,o=e.isOpen,a=(0,_.d)().openModal,i=(0,l.useContext)(g.Ay).user,c=(0,S.k)().showPrompt,u=(0,D.mu)().displayToast,m=(0,g.Z2)().isValidRegion,d=(0,T.L)().logSubscriptionEvent,p=function(){var e=(0,f.A)(v().mark((function e(o,a){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({title:"".concat(a,"?"),description:R[a](r.user.name,t.name),okButton:L({title:I[a]||a,variant:N.Ak.Primary},Z[a]&&{color:Z[a]}),content:F(q.u,{user:r.user,disableTooltip:!0,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n({sourceId:t.id,memberId:r.user.id,role:o});case 7:W[a]&&u(W[a]);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=(0,l.useMemo)((function(){if(!r||!i)return[];var e=function(e,t){return function(){return p(e,t)}},n=[],o=(0,K.pZ)(t,s.Wk.MemberRoleUpdate);if(o){var c=$(r,e);n.push.apply(n,(0,b.A)(c))}return n.push({label:"Report member",icon:F(M.i,{size:h.lK.Small}),anchorProps:{href:"".concat(O.h,"#user_id=").concat(i.id,"&reportee_id=").concat(null==r?void 0:r.user.id,"&squad_id=").concat(t.id),className:"flex items-center w-full",rel:"noopener noreferrer",target:"_blank"}}),(o||(0,K.pZ)(t,s.Wk.MemberRemove)&&r.role===s._h.Member)&&n.push({label:Q.BlockMember,icon:F(k.t,{size:h.lK.Small}),action:e(s._h.Blocked,Q.BlockMember)}),!r.user.isPlus&&m&&n.push({label:"Gift daily.dev Plus",action:function(){d({event_name:z.VB.GiftSubscription,target_id:z.TB.Squad}),a({type:C.K2.GiftPlus,props:{preselected:r.user}})},icon:F(A.o,null)}),n}),[r]);return F(x.default,{options:y,isOpen:o,id:B.t.SquadMemberContext})}var V=r(26540),X=r(98235),H=r(61663),Y=r(9495),J=r(71623),ee=r(16714),te=r(69918),re=r(5947),ne=r(15819),oe=r(30530),ae=r(16971),ie=r(93526),ce=r(36899);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ue=function(e){var t=e.squad,r=e.query,n=e.membersQueryParams,o=void 0===n?{}:n,i=e.membersQueryEnabled,c=(0,l.useContext)(ie.c).queryKey,u=(0,g.Z2)().user,s=(0,te.jE)(),m=(0,oe.$h)(oe.jZ.SquadMembers,null,o,null==t?void 0:t.id,r),d=(0,re.n)({mutationFn:K.Mt,onSuccess:function(){return s.invalidateQueries({queryKey:m})}}).mutateAsync,p=(0,re.n)({mutationFn:K.jd,onSuccess:function(){return s.invalidateQueries({queryKey:m})}}).mutateAsync,b=(0,re.n)({mutationFn:K.Fh,onSuccess:function(){s.invalidateQueries({queryKey:c}),(0,ae.T)(s,t,u,{collapsePinnedPosts:!0})}}).mutateAsync,f=(0,re.n)({mutationFn:K.oG,onSuccess:function(){s.invalidateQueries({queryKey:c}),(0,ae.T)(s,t,u,{collapsePinnedPosts:!1})}}).mutateAsync,y=(0,ne.q)({queryKey:m,queryFn:function(e){var n=e.pageParam;return ce.e.request(K.UC,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:null==t?void 0:t.id,after:"string"==typeof n?n:void 0,query:r},o))},initialPageParam:"",enabled:!(null==t||!t.id)&&i,getNextPageParam:function(e){var t=e.sourceMembers;return(0,oe.iP)(null==t?void 0:t.pageInfo)}});return(0,l.useMemo)((function(){var e,t;return{onUnblock:p,onUpdateRole:d,collapseSquadPinnedPosts:b,expandSquadPinnedPosts:f,membersQueryResult:y,members:null!==(e=null===(t=y.data)||void 0===t?void 0:t.pages.map((function(e){return e.sourceMembers.edges.map((function(e){return e.node}))})).flat())&&void 0!==e?e:[],membersQueryKey:m}}),[p,d,b,f,y,m])},se=r(34229),me=r(68390),de=l.createElement;function pe(){return de("div",{className:"flex flex-1 flex-col items-center justify-center py-10"},de(k.t,{secondary:!0,size:h.lK.XXXLarge}),de("p",{className:"text-text-secondary typo-body"},"No blocked members found"))}var be=r(53823),fe=r(60471),ye=r(36599),ve=l.createElement;const ge=function(e){var t=e.member,r=e.onUnblock,n=e.onOptionsClick,o=(0,S.k)().showPrompt,a=(0,D.mu)().displayToast,i=(0,g.Z2)().user,c=t.role,l=t.user,u=function(){var e=(0,f.A)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:"Unblock member?",description:"".concat(l.name," will now have access to join your Squad and can then post, upvote and comment"),okButton:{title:"Unblock",variant:N.Ak.Primary},content:ve(q.u,{disableTooltip:!0,user:l,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}},e.next=4,o(n);case 4:if(!e.sent){e.next=7;break}r(t),a("Member is now unblocked");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(c===s._h.Blocked)return ve(ye.S,{content:"Unblock"},ve(be.$n,{className:"my-auto ml-2",variant:N.Ak.Tertiary,icon:ve(k.t,null),onClick:u}));var m=ve(ye.S,{content:"Member options"},ve(be.$n,{size:N.Mp.Small,variant:N.Ak.Tertiary,className:"z-1 m-auto ml-2 mr-0",onClick:n,icon:ve(fe.Z,null)}));return i&&i.id===l.id||!i?null:m};var Oe=r(13767),he=["squad"],Pe=l.createElement;function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=function(e){return e.AllMembers="Squad members",e.BlockedMembers="Blocked members",e}(je||{}),Me=function(e){var t=e.squad,r=function(e){var t=e.squad,r=e.origin,n=(0,H.DX)().logEvent,o=(0,Y.d)().completeAction,a=t.referralUrl,c=(0,X.L)((function(){return a})),l=(0,i.A)(c,2),u=l[0],s=l[1];return{invitation:a,copying:u,logAndCopyLink:function(){return n({event_name:z.VB.ShareSquadInvitation,extra:JSON.stringify({origin:r,squad:null==t?void 0:t.id})}),o(J.X2.SquadInvite),s()}}}({squad:t,origin:z.$e.SquadMembersList}),n=r.copying,o=r.logAndCopyLink;return(0,K.pZ)(t,s.Wk.Invite)?Pe("button",{type:"button",disabled:n,className:"flex items-center justify-start px-6 py-3 hover:bg-surface-hover",onClick:function(){o()}},Pe(ee.Wt,{className:"mr-4 h-12 w-12 rounded-10 bg-surface-float"},Pe(V.q,{size:h.lK.Large,className:"text-raw-salt-90"})),Pe("p",{className:"text-raw-salt-90 typo-callout"},"Copy invitation link")):null};function Ae(e){var t,r=e.squad,n=(0,c.A)(e,he),a=(0,l.useState)(null),b=a[0],f=a[1],y=(0,l.useState)(null),v=y[0],g=y[1],O=(0,p.A)({id:B.t.SquadMemberContext}),h=O.onMenuClick,P=O.onHide,w=O.isOpen,k=(0,l.useState)(""),j=k[0],M=k[1],A=(0,se.A)((function(e){return M(e)}),me.n$),S=(0,i.A)(A,1)[0],q=ue({squad:r,query:null!=j&&null!==(t=j.trim)&&void 0!==t&&null!==(t=t.call(j))&&void 0!==t&&t.length?j:void 0,membersQueryParams:{role:b},membersQueryEnabled:!0}),x=q.members,D=q.membersQueryResult,T=q.onUnblock,E=q.onUpdateRole,N=q.membersQueryKey;(0,Oe.A)({queryKey:N,queryProp:"sourceMembers"});var C=(0,K.pZ)(r,s.Wk.ViewBlockedMembers);return Pe(l.Fragment,null,Pe(m.A,(0,o.A)({},n,{kind:u.aF.Kind.FixedCenter,title:"Squad members",tabs:C?Object.values(je):void 0,defaultView:C?je.AllMembers:void 0,header:C?Pe(u.aF.Header.Tabs,{onTabClick:function(e){return f(e===je.BlockedMembers?s._h.Blocked:null)}}):null,scrollingProps:{isFetchingNextPage:D.isFetchingNextPage,canFetchMore:(0,d.c)(D),fetchNextPage:D.fetchNextPage,onScroll:P},userListProps:{afterContent:function(e,t){return Pe(ge,{key:"squad_option_".concat(e.id),member:x[t],onUnblock:function(){return T({sourceId:r.id,memberId:e.id})},onOptionsClick:function(e){e.preventDefault(),function(e,t){g(t),h(e)}(e,x[t])}})},emptyPlaceholder:j?Pe(ee.Wt,{className:"p-10 text-text-tertiary typo-callout"},"No user found"):Pe(pe,null),isLoading:D.isPending,initialItem:b===s._h.Blocked||null!=j&&j.length?void 0:Pe(Me,{squad:r})},users:null==x?void 0:x.map((function(e){var t=e.user,r=e.role;return ke(ke({},t),{},{role:r})})),onSearch:S,origin:z.$e.SquadMembersList})),Pe(G,{squad:r,member:v,onUpdateRole:E,isOpen:w}))}const Se=Ae},13767:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(50122),o=r(98093),a=r(87053),i=r(30530),c=r(84295);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e){var t=e.queryKey,r=e.queryProp;return(0,a.K)({matcher:c.cI,callback:function(e){var a=e.mutation,l=e.variables,s=e.queryClient,m=s.getQueryData(t),d=a.options.mutationKey,p=(0,o.A)(d,1)[0];if(m){var b=c.WK[p],f=l,y=f.id,v=f.entity;s.setQueryData(t,(function(e){var t;return u(u({},e),{},{pages:null===(t=e.pages)||void 0===t?void 0:t.map((function(e){var t;return(0,n.A)({},r,u(u({},e[r]),{},{edges:null===(t=e[r].edges)||void 0===t?void 0:t.map((function(e){var t;return(null===(t=e.node.user)||void 0===t?void 0:t.id)===y?u(u({},e),{},{node:u(u({},e.node),{},{user:u(u({},e.node.user),(0,i.$$)({data:e.node.user,entity:v,status:b}))})}):e}))}))}))})}))}}})}},73855:(e,t,r)=>{r.d(t,{PK:()=>i,rZ:()=>l,vv:()=>c});var n=r(50122),o=r(81602);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i=function(e){return"string"==typeof e&&"true"===e.toLowerCase()},c=function(e,t){return"number"!=typeof e?"":e.toLocaleString(["en-US"],function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({minimumFractionDigits:2,maximumFractionDigits:2},t))},l=function(e){return e>1e5?(0,o.Kt)(e):c(e,{minimumFractionDigits:0})}}}]);