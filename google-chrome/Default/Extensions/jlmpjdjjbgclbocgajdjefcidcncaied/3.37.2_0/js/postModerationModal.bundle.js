"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7344],{26391:(e,t,r)=>{r.r(t),r.d(t,{default:()=>oe});var n=r(7527),o=r(75087),a=r(22155),l=r(38166),s=r.n(l),i=r(94198),c=r(67380),u=r(48389),d=r(53823),m=r(83448),p=r(17631),f=r(36780),v=a.createElement;function h(e){var t=e.onApprove,r=e.onReject,n=e.isLoading;return v("div",{className:"flex w-full flex-row gap-4"},v(d.$n,{size:m.Mp.Small,className:"flex-1",disabled:n,variant:m.Ak.Float,icon:v(p.t,null),onClick:r},"Decline"),v(d.$n,{size:m.Mp.Small,className:"flex-1",disabled:n,variant:m.Ak.Primary,icon:v(f.w,{secondary:!0}),onClick:t},"Approve"))}var b=r(56697),g=r(23879),y=r(97894),P=r(87822),x=r(57952),N=r(76179),w=r(61231),k=r(37774),A=r(84682),O=r(74689),S=r(89338),j=r(2827),D=r.n(j),C=r(9487),E=r(28277),F=r(62859),R=r(15860),q=r(75472),T=r(97900),M=r(27840),z=a.createElement,I=function(e){var t=e.id,r=e.onDelete,n=(0,a.useId)(),o=(0,T.A)({id:n}),l=o.isOpen,s=o.onMenuClick,i=(0,M.k)().showPrompt,c=(0,C.useRouter)(),u=function(){var e=(0,S.A)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({title:"Delete post",description:"Are you sure you want to delete this post?"});case 2:e.sent&&r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return z(a.Fragment,null,z(E.A,{onClick:s,className:"z-1 !my-0",tooltipPlacement:"right",size:m.Mp.Medium}),z(F.default,{options:[{label:"Edit post",action:function(){return c.push("/posts/".concat(t,"/edit?moderation=true"))},icon:z(R.q,{"aria-hidden":!0})},{label:"Delete post",action:u,icon:z(q.u,{"aria-hidden":!0})}],id:n,isOpen:l}))},L=r(50122),H=r(69918),Q=r(5947),W=r(89883),B=r(77955),V=r(68392),$=r(30530),_=r(61663),G=r(11924),K=r(80244);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,L.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=[{value:u.tP.OffTopic,label:"Off-topic post unrelated to the Squad"},{value:u.tP.Violation,label:"Violates the Squadâ€™s code of conduct"},{value:u.tP.Promotional,label:"Too promotional without adding value"},{value:u.tP.Duplicate,label:"Duplicate or similar content already posted"},{value:u.tP.LowQuality,label:"Lacks quality or clarity"},{value:u.tP.NSFW,label:"Inappropriate, NSFW or offensive post"},{value:u.tP.Spam,label:"Post is spam or scam"},{value:u.tP.Misinformation,label:"Contains misleading or false information"},{value:u.tP.Copyright,label:"Copyright or privacy violation"},{value:u.tP.Other,label:"Other"}],U=function(e){return e.map((function(e){return{id:e.id,source:e.source,type:e.type,image:e.image,commentsPermalink:"",author:e.createdBy,createdAt:e.createdAt}}))},J=r(38638),ee=r(27504),te=r(76800),re=["onApprove","onReject","data","squad"],ne=a.createElement;const oe=function(e){var t=e.onApprove,r=e.onReject,l=e.data,d=e.squad,m=(0,o.A)(e,re),p=l.id,f=l.post,v=l.createdAt,j=l.createdBy,C=l.image,E=l.title,F=l.titleHtml,R=l.content,q=l.contentHtml,T=l.sharedPost,z=l.source,L=l.externalLink,Z=(0,N.a)({origin:x.$e.ArticleModal,post:T}),oe=(0,u.pZ)(d,P.Wk.ModeratePost),ae=function(e){var t=e.squad,r=(0,W.d)(),n=r.openModal,o=r.closeModal,l=(0,V.mu)().displayToast,s=(0,M.k)().showPrompt,i=(0,_.DX)().logEvent,c=(0,K.Z2)().user,d=(0,H.jE)(),m=(0,$.$h)($.jZ.SquadPostRequests,c,null==t?void 0:t.id),p=(0,$.$h)($.jZ.Squad,c,null==t?void 0:t.handle),f=(0,a.useCallback)((function(e){var t=d.getQueryData(m),r=d.getQueryData(p);return r&&d.setQueryData(p,(function(t){return X(X({},t),{},{moderationPostCount:r.moderationPostCount-e.postIds.length})})),d.setQueryData(m,(function(t){return t?X(X({},t),{},{pages:t.pages.map((function(t){return X(X({},t),{},{edges:t.edges.filter((function(t){return!e.postIds.includes(t.node.id)}))})}))}):t})),{currentData:t,currentSquad:r}}),[d,m,p]),v=(0,Q.n)({mutationFn:function(e){var t=e.postIds;return(0,u.Nu)(t)},onMutate:function(e){return f(e)},onSuccess:function(e){l("Post(s) approved successfully"),U(e).forEach((function(e){i((0,G.P5)(x.VB.ApprovePost,e))}))},onError:function(e,t,r){t.postIds.length>50?l("Failed to approve post(s). Please approve maximum 50 posts at a time"):(d.setQueryData(m,null==r?void 0:r.currentData),d.setQueryData(p,null==r?void 0:r.currentSquad),l("Failed to approve post(s)"))}}),h=v.mutateAsync,b=v.isPending,g=v.isSuccess,y=(0,a.useCallback)(function(){var e=(0,S.A)(D().mark((function e(t,r){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.length){e.next=4;break}return e.next=3,h({postIds:t,sourceId:r});case 3:return e.abrupt("return");case 4:return e.next=6,s({title:"Approve all ".concat(t.length," posts?"),description:"This action cannot be undone.",okButton:{title:"Yes, Approve all"}});case 6:if(!e.sent){e.next=10;break}return e.next=10,h({postIds:t,sourceId:r});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[h,s]),P=(0,Q.n)({mutationFn:function(e){return(0,u.NU)(e)},onMutate:function(e){return f(e)},onSuccess:function(e){l("Post(s) declined successfully"),U(e).forEach((function(e){i((0,G.P5)(x.VB.RejectPost,e))}))},onError:function(e,t,r){d.setQueryData(m,r.currentData),d.setQueryData(p,r.currentSquad)}}),N=P.mutateAsync,w=P.isPending,k=P.isSuccess;return{isSuccess:g||k,isPending:b||w,onApprove:y,onReject:(0,a.useCallback)((function(e,t){n({type:B.K2.ReasonSelection,props:{onReport:function(r,n,a){return N({postIds:[e],sourceId:t,reason:n,note:a}).then(o)},reasons:Y,heading:"Select a reason for declining"}})}),[o,N,n]),onDelete:(0,Q.n)({mutationFn:function(e){return(0,u.gT)(e)},onSuccess:function(){l("Post deleted successfully")}}).mutateAsync}}({squad:d}).onDelete;return ne(i.aF,(0,n.A)({},m,{size:i.aF.Size.Large,kind:i.aF.Kind.FlexibleTop,className:"tablet:max-h-[calc(100vh-5rem)]"}),ne(i.aF.Body,{className:"gap-6 !p-6"},oe&&ne(h,{onReject:function(){return r([p],z.id)},onApprove:function(){return t([p],z.id)}}),ne("div",{className:"flex flex-row items-center justify-between"},ne(c.o5,{bold:!0,className:"flex-1",tag:c.UL.H3,truncate:!0,type:c.kR.Title3},"Post preview"),!oe&&ne(I,{id:p,onDelete:function(e){return ae(e).then((function(){return m.onRequestClose(null)}))}}),ne(O.O,{className:"!flex",onClick:m.onRequestClose,position:"relative",right:"0"})),ne(b.A,{source:d,size:J.Ov.Small}),ne(g.A,{author:j,date:v}),ne(w.W,{title:E||(null==f?void 0:f.title),titleHtml:F||(null==f?void 0:f.titleHtml)}),!T&&(C||(null==f?void 0:f.image))&&ne(ee.A,{condition:!!L,wrapper:function(e){return ne(s(),{href:L,target:"_blank",rel:te.O8},e)}},ne(A.$,{imgSrc:C||(null==f?void 0:f.image)})),!(null==q||!q.length)&&ne(k.A,{className:"!mt-0",content:q}),!(null!=q&&q.length)&&!(null==R||!R.length)&&ne(c.o5,{type:c.kR.Body},R),T&&ne("div",{className:"-mt-8"},ne(y.a,{source:d,sharedPost:T,onReadArticle:Z}))))}},84682:(e,t,r)=>{r.d(t,{$:()=>f,A:()=>v});var n=r(22155),o=r(30395),a=r.n(o),l=r(95974),s=r(55059),i=r(37774),c=r(71992),u=r(16763),d=r(39762),m=r(47375),p=n.createElement,f=function(e){var t=e.imgSrc,r=e.className;return p("div",{className:a()("block h-fit max-w-sm cursor-pointer overflow-hidden rounded-16",r)},p(c.o,{imgSrc:t,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:u.uC}))};const v=function(e){var t,r=e.post,o=(0,d.Z)(r).title,a=!(null===(t=r.flags)||void 0===t||!t.coverVideo);return p(n.Fragment,null,p("div",{className:"my-6"},p("h1",{className:"whitespace-pre-line font-bold typo-title2"},o),r.clickbaitTitleDetected&&p(m.O,{post:r})),r.type===s.xj.Freeform&&p(n.Fragment,null,!a&&!!r.image&&p(l.A,{href:r.image},p("a",{target:"_blank",rel:"noopener noreferrer"},p(c.o,{eager:!1,fetchPriority:"low",ratio:"52%",imgSrc:r.image,imgAlt:"Post cover image",className:"mb-10 h-auto max-h-[62.5rem] w-full rounded-12 object-cover",fallbackSrc:u.uC}))),a&&p(c.Y,{eager:!0,ratio:"52%",videoSrc:r.flags.coverVideo,poster:r.image,className:"mb-10 h-auto max-h-[62.5rem] w-full rounded-12 object-cover"})),p(i.A,{content:r.contentHtml,className:r.type!==s.xj.Welcome&&"mb-5"}),r.type===s.xj.Welcome&&r.image&&p(f,{imgSrc:r.image,className:"mb-5 mt-8"}))}},56697:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(30395),o=r.n(n),a=r(22155),l=r(38166),s=r.n(l),i=r(63952),c=r(58392),u=r(38638),d=a.createElement;const m=function(e){var t=e.date,r=e.source,n=e.size,l=void 0===n?u.Ov.Medium:n,m=e.className,p="unknown"===r.id;return d("span",{className:o()("flex flex-row items-center text-text-tertiary typo-footnote",m)},!p&&d(a.Fragment,null,d(c.A,{source:r,size:l}),d(s(),{href:r.permalink,className:"ml-2 typo-callout"},r.handle)),!!t&&d(a.Fragment,null,!p&&d(i.wv,null),d("time",{dateTime:t},t)))}},97894:(e,t,r)=>{r.d(t,{A:()=>F,a:()=>E});var n=r(7527),o=r(22155),a=r(30395),l=r.n(a),s=r(56697),i=r(3957),c=r(55059),u=r(52045),d=r(12430),m=r(24122),p=r(14721),f=r(83448),v=r(9062),h=r(38638),b=r(16714),g=r(71992),y=r(16763),P=r(61231),x=r(17631),N=r(75570),w=r(67380),k=r(54883),A=r(97838),O=r(87822),S=o.createElement,j=function(){return S(o.Fragment,null,S(v._,{className:"mt-6 h-6 w-2/4 rounded-10"}),S("div",{className:"mb-5 mt-8 rounded-16 border border-border-subtlest-tertiary"},S("div",{className:"flex max-w-full flex-col p-4 pt-5 laptop:flex-row"},S("div",{className:"flex flex-1 flex-col gap-9"},S(v._,{className:"h-6 w-20 rounded-10"}),S(v._,{className:"h-6 w-20 rounded-10"})),S(v._,{className:"ml-2 h-36 w-70 rounded-16"}))))},D=function(){return S(m.N,{className:"mb-5 mt-8"},S("div",{className:"flex flex-row items-center gap-1 px-5 py-4"},S(x.t,null),S(w.o5,{className:"flex-1",type:w.kR.Subhead,color:w.X8.Secondary},"This post is no longer available. It might have been removed or the link has expired.")))},C=function(e){var t=e.post,r=e.openArticle;return S(m.N,{className:"mb-5 mt-8"},S("div",{className:"flex flex-row items-center gap-1 px-5 py-4"},S("div",{className:"flex size-6 items-center justify-center rounded-full bg-surface-secondary"},S(N.O,{size:A.lK.Size16})),S(w.o5,{className:"flex-1",type:w.kR.Subhead,color:w.X8.Secondary},"This post is in a private squad."),S(i.l,(0,n.A)({content:(0,c.KN)(t),className:"w-fit",href:t.commentsPermalink,variant:f.Ak.Secondary,title:"Go to post",rel:"noopener"},(0,d.t)(r)))))};function E(e){var t=e.sharedPost,r=e.source,a=e.onReadArticle,v=(0,u.Mp)().sidebarExpanded,P=(0,o.useContext)(u.Ay).openNewTab,x=function(e){e.stopPropagation(),a()};if(!t)return S(j,null);var N=(0,c.aH)({sharedPost:t})||(0,c.LJ)(t),w=t.id===k.HR,A=t.private,E=t.source.type;return w?S(D,null):A&&E===O.Y1.Squad?S(C,{post:t,openArticle:x}):S(m.N,{post:t,summary:t.summary,className:"mb-5 mt-8"},S("div",{className:l()("flex max-w-full flex-col gap-2 p-4 pt-5",v?"laptopL:flex-row":"laptop:flex-row")},S("div",{className:l()("mb-5 flex max-w-full flex-1 flex-col truncate",v?"laptopL:mb-0":"laptop:mb-0")},S(p.i,{source:r,sharedPost:t,onGoToLinkProps:(0,d.t)(x),className:"mb-4 mt-0 flex flex-wrap font-bold typo-body"},S(b.mE,null,t.title)),S(s.A,{date:t.readTime?"".concat(t.readTime,"m read time"):void 0,source:t.source,size:h.Ov.Small}),S(i.l,(0,n.A)({content:(0,c.KN)(t),className:"mt-5 w-fit",variant:f.Ak.Secondary,href:N?t.commentsPermalink:t.permalink,openNewTab:!N&&P,title:"Go to post",rel:"noopener"},(0,d.t)(x)))),S(p.i,{source:r,sharedPost:t,onGoToLinkProps:(0,d.t)(x),className:"mx-auto block h-fit w-70 cursor-pointer overflow-hidden rounded-16"},S(g.o,{imgSrc:t.image,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:y.uC,fetchPriority:"high"}))))}const F=function(e){var t=e.post,r=e.onReadArticle;return S(o.Fragment,null,S(P.W,{title:null==t?void 0:t.title,titleHtml:null==t?void 0:t.titleHtml}),S(E,{onReadArticle:r,source:t.source,sharedPost:t.sharedPost}))}},24122:(e,t,r)=>{r.d(t,{N:()=>i});var n=r(22155),o=r(30395),a=r.n(o),l=r(69366),s=n.createElement;function i(e){var t=e.children,r=e.post,n=e.summary,o=e.className,i=e.Wrapper,c=null!=r&&r.summary?s("div",{className:"px-4"},s(l.u,{post:r,isContainedView:!0})):null;return s("div",{className:a()("flex flex-col rounded-16 border border-border-subtlest-tertiary hover:border-border-subtlest-secondary",o)},t,i&&n?s(i,null,c):c)}},14721:(e,t,r)=>{r.d(t,{i:()=>d});var n=r(7527),o=r(50122),a=r(75087),l=r(22155),s=r(95974),i=["href","as"],c=l.createElement;function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var d=function(e){var t=e.sharedPost,r=e.source,l=e.className,d=e.children,m=e.onGoToLinkProps,p="unknown"===t.source.id?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({href:t.permalink,target:"_blank",rel:"noopener",as:void 0},m):{href:"".concat(t.commentsPermalink,"?squad=").concat(r.handle,"&n=").concat(r.name),as:t.commentsPermalink},f=p.href,v=p.as,h=(0,a.A)(p,i);return c(s.A,{href:f,as:v},c("a",(0,n.A)({},h,{className:l}),d))}},61231:(e,t,r)=>{r.d(t,{W:()=>l});var n=r(22155),o=r(37774),a=n.createElement;function l(e){var t=e.title,r=e.titleHtml;return t?r?a(o.A,{className:"mt-6",content:r}):a("p",{className:"mt-6 whitespace-pre-line typo-title3"},t):null}}}]);