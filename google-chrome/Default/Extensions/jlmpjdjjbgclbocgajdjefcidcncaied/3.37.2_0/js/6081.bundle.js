"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[6081],{68334:(e,t,n)=>{n.d(t,{d:()=>v});var r=n(7527),o=n(75087),a=n(22155),i=n(30395),s=n.n(i);const l="_5r2X27zKbL3K-0KuztabLA==",u="_9VJTarzDvJAPMOKQbzHeEQ==",c="+hRUmPa5hVn8ncwI9jw3WQ==",d="D5NR++a7+cgnxCM1YywMSg==";var p=["className","labelClassName","inputId","name","checked","children","onToggle","compact","defaultTypo","disabled"],f=a.createElement;function m(e,t){var n=e.className,a=e.labelClassName,i=e.inputId,m=e.name,v=e.checked,b=e.children,y=e.onToggle,h=e.compact,g=void 0===h||h,w=e.defaultTypo,P=void 0===w||w,S=e.disabled,O=(0,o.A)(e,p);return f("label",{className:s()(n,"group relative flex items-center",S?"pointer-events-none cursor-not-allowed opacity-32":"cursor-pointer",c),htmlFor:i,ref:t},f("input",(0,r.A)({},O,{disabled:S,id:i,name:m,type:"checkbox",checked:v,onChange:y,className:"absolute h-0 w-0 opacity-0"})),f("span",{className:s()("relative block",g?"h-4 w-8":"h-5 w-10")},f("span",{className:s()("absolute bottom-0 left-0 top-0 my-auto w-full bg-theme-overlay-quaternary",g?"h-2.5 rounded-3":"h-3 rounded-4",l)}),f("span",{className:s()("absolute left-0 top-0 bg-text-tertiary",g?"h-4 w-4 rounded-3":"h-5 w-5 rounded-6",u)})),b&&f("span",{className:s()("ml-3 font-bold text-text-tertiary",P&&"typo-footnote",d,a)},b))}var v=a.forwardRef(m)},92339:(e,t,n)=>{n.r(t),n.d(t,{CreateSharedPostModal:()=>k,default:()=>A});var r=n(7527),o=n(98093),a=n(75087),i=n(22155),s=n(94198),l=n(24481),u=n(63606),c=n(92975),d=n(78515),p=n(53823),f=n(83448),m=n(19505),v=n(99277),b=n(52303),y=n(16714),h=n(58392),g=n(17398),w=n(10663),P=n(57434),S=n(68334),O=n(38638),x=["preview","squad","onSharedSuccessfully","onRequestClose"],j=i.createElement;function k(e){var t,n,k,A=e.preview,N=e.squad,E=e.onSharedSuccessfully,C=e.onRequestClose,D=(0,a.A)(e,x),F=(0,i.useRef)(),I=(0,i.useState)(null!==(t=null!==(n=null==A?void 0:A.permalink)&&void 0!==n?n:null==A?void 0:A.url)&&void 0!==t?t:""),M=I[0],L=I[1],T=(0,P.$)(),q=T.shouldShowCta,_=T.isEnabled,z=T.onToggle,R=T.onSubmitted,U=function(){null==E||E(),R(),C(null)},X=(0,d.h)({initialPreview:A,onPostSuccess:U,onSourcePostModerationSuccess:U}),K=X.getLinkPreview,Y=X.isLoadingPreview,$=X.preview,G=X.isPosting,W=X.onSubmitPost,Q=[null==$?void 0:$.url,null==$?void 0:$.permalink],H=(0,w.U)(K,(function(e){return Q.every((function(t){return t!==e}))})),J=(0,o.A)(H,1)[0],B=j(i.Fragment,null,j(p.$n,{icon:j(v.X,null),size:f.Mp.Small,variant:f.Ak.Tertiary,onClick:null==F||null===(k=F.current)||void 0===k?void 0:k.onMentionCommand}),j(b.c,{vertical:!0}),j(h.A,{source:N,size:O.Ov.Small}),j("span",{className:"-ml-1 flex-1"},j("strong",null,N.name),j("span",{className:"ml-1 text-text-tertiary"},"@",N.handle))),V={color:m.h.Cabbage,variant:f.Ak.Primary,disabled:G,loading:G};return j(s.aF,(0,r.A)({kind:s.aF.Kind.FlexibleCenter,size:s.aF.Size.Medium,onRequestClose:C},D,{formProps:{form:"share_post",title:"New post",rightButtonProps:V,copy:{right:"Post"}}}),j(s.aF.Header,{title:"New post"}),j("form",{className:"flex w-full flex-col p-3",action:"#",onSubmit:function(e){e.preventDefault();var t=(0,g.Y)(e.currentTarget).commentary;return W(e,N,t)},id:"share_post"},j(l.A,{ref:F,showUserAvatar:!0,textareaProps:{rows:5,name:"commentary"},sourceId:null==N?void 0:N.id,allowPreview:!1,enabledCommand:{mention:!0},footer:Y?j(u.j,{link:M,className:"m-3 flex-col-reverse"}):j(c.A,{className:"m-3 !w-auto flex-col-reverse",preview:null!=$?$:A,link:M,onLinkChange:function(e){var t=e.currentTarget.value;L(t),J(t)}})}),q&&j(S.d,{"data-testid":"push_notification-switch",inputId:"push_notification-switch",name:"push_notification",labelClassName:"flex-1 font-normal",className:"py-3",compact:!1,checked:_,onToggle:z},"Receive updates whenever your Squad members engage with your post")),j("span",{className:"flex flex-row items-center gap-2 px-4 tablet:hidden"},B),j(s.aF.Footer,{className:"typo-caption1",justify:y.F1.Start},B,j(p.$n,(0,r.A)({},V,{className:"ml-auto",form:"share_post"}),"Post")))}const A=k},92975:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(22155),o=n(43660),a=n(26540),i=n(75240),s=n(69069),l=n(41536),u=n(75737),c=n(53823),d=n(83448),p=n(38638),f=r.createElement;function m(e){var t,n,r=e.link,m=e.preview,v=e.onLinkChange,b=e.className,y=e.isMinimized,h=e.showPreviewLink,g=void 0===h||h;return f(u.rA,{className:b},g&&f(o.A,{leftIcon:f(a.q,null),label:"URL",type:"url",name:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:r,onInput:v}),m.title&&m.image&&f(u.rP,{className:y&&"!px-3 !py-2"},f("div",{className:"flex flex-1 flex-col typo-footnote"},f("span",{className:"line-clamp-2 font-bold"},m.title),"unknown"!==(null===(t=m.source)||void 0===t?void 0:t.id)&&(y?f(s.J,{size:p.Ov.Small,source:m.source,className:"absolute right-24 mr-4 mt-1"}):f("span",{className:"mt-1 flex flex-row items-center"},f(s.J,{size:p.Ov.Small,source:m.source}),f("span",{className:"text-text-tertiary"},null===(n=m.source)||void 0===n?void 0:n.name)))),f(l._V,{className:u.Gs,src:m.image,alt:"".concat(m.title)}),!y&&f(c.$n,{icon:f(i.S,null),variant:d.Ak.Tertiary,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:r})))}},63606:(e,t,n)=>{n.d(t,{j:()=>p});var r=n(22155),o=n(43660),a=n(30794),i=n(9062),s=n(75240),l=n(75737),u=n(53823),c=n(83448),d=r.createElement;function p(e){var t=e.link,n=e.className;return d(l.rA,{className:n},d(o.A,{leftIcon:d(a.a,{className:"mr-2"}),label:"URL",type:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:t}),d(l.rP,null,d("span",{className:"absolute left-2 top-2 text-text-quaternary typo-caption1"},"Fetching preview, please hold..."),d("div",{className:"flex flex-1 flex-col typo-footnote"},d("div",{className:"flex-flex-col relative"},d(i._,{className:"h-2 w-5/6 rounded-12"}),d(i._,{className:"mt-3 h-2 w-1/2 rounded-12"}))),d("div",{className:l.Gs}),d(u.$n,{variant:c.Ak.Tertiary,icon:d(s.S,null),disabled:!0,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:t})))}},75737:(e,t,n)=>{n.d(t,{Gs:()=>a,rA:()=>i,rP:()=>s});var r=n(63423),o=n(16714),a="w-28 h-16 rounded-12 bg-text-disabled object-cover",i=(0,r.A)(o.wt,"rounded-16 border border-border-subtlest-tertiary"),s=(0,r.A)(o.Ye,"relative gap-3 items-center py-5 px-4")},7186:(e,t,n)=>{n.d(t,{$d:()=>b,D4:()=>g,Eh:()=>h,jG:()=>w,wF:()=>y});var r=n(50122),o=n(22155),a=n(63423),i=n(67380),s=n(16714),l=n(87822),u=n(48191),c=n(97838),d=n(77955),p=n(48389),f=o.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.children,n=e.className;return f(i.o5,{className:n,tag:i.UL.H1,type:i.kR.LargeTitle,bold:!0},t)},y=(0,a.A)("span","text-brand-default"),h=((0,a.A)(s.mf,"!p-0 laptop:min-h-page h-full !max-w-[42.5rem] !w-full",s.hC),(0,a.A)("div","flex flex-1 flex-col"),function(e){return(null==e?void 0:e.moderationRequired)&&!(0,p.pZ)(e,l.Wk.ModeratePost)}),g={title:"Your post has been submitted for review",description:"Your post is now waiting for the admin's approval. We'll notify you once it's been reviewed.",okButton:{title:"Got it",className:"tablet:w-full"},cancelButton:null,promptSize:d.rI.XSmall,icon:f(u.x,{size:c.lK.XXXLarge})},w=v(v({},g),{},{title:"Your edit has been submitted for review",description:"Your edit is now waiting for the admin’s approval. We’ll notify you once it’s been reviewed."})},10663:(e,t,n)=>{n.d(t,{U:()=>a});var r=n(34229),o=n(70591),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,r.A)((function(n){return(0,o.U8)(n)&&t(n)?e(n):null}),n)}},57434:(e,t,n)=>{n.d(t,{$:()=>u});var r=n(89338),o=n(2827),a=n.n(o),i=n(22155),s=n(57952),l=n(35393),u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).source,t=void 0===e?s.vH.SquadPostCommentary:e,n=(0,i.useState)(!0),o=n[0],u=n[1],c=(0,l.W)({source:t}),d=c.shouldShowCta,p=c.onEnable,f=c.onDismiss,m=function(){var e=(0,r.A)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return t=o?p:f,e.next=5,t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=(0,i.useCallback)((function(){return u((function(e){return!e}))}),[]);return{isEnabled:o,onToggle:v,shouldShowCta:d,onSubmitted:m}}},86735:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(89338),o=n(2827),a=n.n(o),i=n(5947),s=n(55059),l=n(27840),u=n(7186);const c=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.onSuccess,c=n.onError,d=n.onSettled,p=n.onMutate,f=(0,l.k)().showPrompt,m=(0,i.n)({mutationFn:s.o8,onSuccess:(e=(0,r.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t.post?u.jG:u.D4);case 2:null==o||o(t);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:c,onSettled:d,onMutate:p}),v=m.mutateAsync,b=m.isPending,y=m.isSuccess,h=(0,i.n)({mutationFn:s.$Y,onSuccess:(t=(0,r.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(u.jG);case 2:null==o||o(t);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onError:c,onSettled:d,onMutate:p}),g=h.mutateAsync,w=h.isPending,P=h.isSuccess;return{onCreatePostModeration:v,onUpdatePostModeration:g,isPending:b||w,isSuccess:y||P}}},78515:(e,t,n)=>{n.d(t,{h:()=>S});var r=n(89338),o=n(50122),a=n(2827),i=n.n(a),s=n(69918),l=n(5947),u=n(22155),c=n(55059),d=n(36899),p=n(68392),f=n(48389),m=n(71623),v=n(80244),b=n(9495),y=n(91201),h=n(86735),g=n(7186);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onPostSuccess,n=e.onMutate,o=e.onError,a=e.onExternalLinkSuccess,w=e.onSourcePostModerationSuccess,S=e.initialPreview,O=(0,p.mu)().displayToast,x=(0,v.Z2)().user,j=(0,s.jE)(),k=(0,b.d)().completeAction,A=(0,u.useState)(S),N=A[0],E=A[1],C=(0,y.D)().requestMethod,D=(0,l.n)({mutationFn:c.pD,onMutate:n,onError:o,onSuccess:t}),F=D.mutateAsync,I=D.isPending,M=D.isSuccess,L=(0,l.n)({mutationFn:c.lD,onMutate:n,onSuccess:t,onError:o}),T=L.mutateAsync,q=L.isPending,_=L.isSuccess,z=(0,l.n)({mutationFn:function(e){return(0,c.e_)(e,C)},onSuccess:function(e,t){E(P(P({},e),{},{url:t})),null==a||a(e,t)},onError:function(e){var t,n=(0,d.Pd)(e,d.hD.RateLimited),r=null!==(t=null==n?void 0:n.message)&&void 0!==t?t:d.XW;O(r),null==o||o(e)}}),R=z.mutateAsync,U=z.isPending,X=(0,h.A)({onSuccess:function(e){k(m.X2.SquadFirstPost),null==w||w(e)},onError:function(){O(d.XW)}}),K=X.onCreatePostModeration,Y=X.isSuccess,$=X.isPending,G=(0,u.useCallback)(function(){var e=(0,r.A)(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q&&!_){e.next=2;break}return e.abrupt("return",null);case 2:return(0,g.Eh)(n)?K(P(P({},t),{},{type:c.xj.Freeform,postId:t.id,sourceId:n.id})):T(t),e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[T,K,q,_]),W=function(){var e=(0,r.A)(i().mark((function e(){var t=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(t.length>0&&void 0!==t[0]&&t[0]?"The post has been updated":"This post has been shared to your squad"),e.next=4,j.invalidateQueries({queryKey:["sourceFeed",x.id]});case 4:k(m.X2.SquadFirstPost);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=(0,l.n)({mutationFn:(0,f.DC)(C),onSuccess:function(e){W(),t&&t(e,null==e?void 0:e.permalink)}}),H=Q.mutateAsync,J=Q.isPending,B=Q.isSuccess,V=(0,l.n)({mutationFn:(0,f.Qz)(C),onSuccess:function(e){W(!0),t&&t(e,null==e?void 0:e.permalink)}}),Z=V.mutateAsync,ee=V.isPending,te=V.isSuccess,ne=(0,l.n)({mutationFn:function(e){return(0,c.w)(e,C)},onSuccess:function(e,n){var r=n.url;W(),t&&t(null,r)}}),re=ne.mutateAsync,oe=ne.isPending,ae=ne.isSuccess,ie=J||oe||$||q||I,se=te||ee||$,le=Y||B||ae||M||_,ue=(0,u.useCallback)((function(e,t,n){if(null==e||e.preventDefault(),ie)return null;if(N.id)return(0,g.Eh)(t)?K({type:c.xj.Share,sourceId:t.id,sharedPostId:N.id,title:n}):H({id:N.id,sourceId:t.id,commentary:n});var r=N.title,o=N.image,a=N.url;return r?(0,g.Eh)(t)?K({externalLink:a,title:r,imageUrl:o,type:c.xj.Share,sourceId:t.id,content:n}):re({url:a,title:r,image:o,sourceId:t.id,commentary:n}):(O("Invalid link"),null)}),[N,O,re,H,ie,K]),ce=(0,u.useCallback)((function(e,t,n,r){return e.preventDefault(),se?null:(0,g.Eh)(r)?K({postId:t,type:c.xj.Share,sourceId:r.id,title:n}):Z({id:t,commentary:n})}),[Z,se,K]),de=(0,u.useCallback)((function(e,t){return(0,g.Eh)(t)?K(P(P({},e),{},{sourceId:t.id,type:c.xj.Freeform})):F(P(P({},e),{},{sourceId:t.id})),null}),[F,K]);return{isLoadingPreview:U,getLinkPreview:R,onSubmitPost:ue,onUpdateSharePost:ce,isPosting:ie,onEditFreeformPost:G,preview:N,isSuccess:le,onSubmitFreeformPost:de,onUpdatePreview:E}}},17398:(e,t,n)=>{n.d(t,{Y:()=>i});var r=n(50122);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){return Array.from(e.elements).reduce((function(e,t){return""===t.name?e:"checkbox"===t.type?a(a({},e),{},(0,r.A)({},t.name,t.checked)):"radio"!==t.type||t.checked?"file"===t.type?a(a({},e),{},(0,r.A)({},t.name,0===t.files.length?null:t.files)):a(a({},e),{},(0,r.A)({},t.name,t.value.length?t.value:null)):e}),t)}},73855:(e,t,n)=>{n.d(t,{PK:()=>i,rZ:()=>l,vv:()=>s});var r=n(50122),o=n(81602);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=function(e){return"string"==typeof e&&"true"===e.toLowerCase()},s=function(e,t){return"number"!=typeof e?"":e.toLocaleString(["en-US"],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({minimumFractionDigits:2,maximumFractionDigits:2},t))},l=function(e){return e>1e5?(0,o.Kt)(e):s(e,{minimumFractionDigits:0})}}}]);