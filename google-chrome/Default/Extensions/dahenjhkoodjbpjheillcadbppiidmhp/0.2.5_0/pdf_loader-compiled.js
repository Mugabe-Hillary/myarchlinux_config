(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var aa=this||self,k=function(a){var b=typeof a;return b!="object"?b:a?Array.isArray(a)?"array":b:"null"},ba=function(a){var b=typeof a;return b=="object"&&a!=null||b=="function"},ca=function(a,b){function c(){}c.prototype=b.prototype;a.S=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.O=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}};function n(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{const c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));b!==void 0&&(this.cause=b)}ca(n,Error);n.prototype.name="CustomError";function da(a,b){a=a.split("%s");let c="";const d=a.length-1;for(let e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");n.call(this,c+a[d])}ca(da,n);da.prototype.name="AssertionError";var ea=function(a,b){throw new da("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};function fa(a,b=new Set){if(b.has(a))return"(Recursive reference)";switch(typeof a){case "object":if(a){var c=Object.getPrototypeOf(a);switch(c){case Map.prototype:case Set.prototype:case Array.prototype:b.add(a);var d=`[${Array.from(a,e=>fa(e,b)).join(", ")}]`;b.delete(a);c!==Array.prototype&&(d=`${ha(c.constructor)}(${d})`);return d;case Object.prototype:return b.add(a),c=`{${Object.entries(a).map(([e,f])=>`${e}: ${fa(f,b)}`).join(", ")}}`,b.delete(a),c;default:return d="Object",c&&c.constructor&&
(d=ha(c.constructor)),typeof a.toString==="function"&&a.toString!==Object.prototype.toString?`${d}(${String(a)})`:`(object ${d})`}}break;case "function":return`function ${ha(a)}`;case "number":if(!Number.isFinite(a))return String(a);break;case "bigint":return`${a.toString(10)}n`;case "symbol":return a.toString()}return JSON.stringify(a)}
function ha(a){var b=a.displayName;return b&&typeof b==="string"||(b=a.name)&&typeof b==="string"?b:(a=/function\s+([^\(]+)/m.exec(String(a)))?a[1]:"(Anonymous)"};function ia(a,b){const c=ja,d=[];ka(b,a,d)||la(void 0,c,`Guard ${b.C().trim()} failed:`,...d.reverse())}function ma(a,b){a.P=!0;a.C=typeof b==="function"?b:()=>b;return a}function ka(a,b,c){const d=a(b,c);d||na(c,()=>{let e="";e.length>0&&(e+=": ");return`${e}Expected ${a.C().trim()}, got ${fa(b)}`});return d}function na(a,b){a==null||a.push((typeof b==="function"?b():b).trim())}let ja=void 0;function oa(a){return typeof a==="function"?a():a}
function la(...a){throw Error(a.map(oa).filter(Boolean).join("\n").trim().replace(/:$/,""));};var pa=ma(a=>typeof a==="string","string"),qa=ma(a=>typeof a==="bigint","bigint");var ra=typeof aa.BigInt==="function"&&typeof aa.BigInt(0)==="bigint";var xa=ma(a=>{if(ra)return ia(sa,qa),ia(ta,qa),a=BigInt(a),a>=sa&&a<=ta;ia(a,pa);return a[0]==="-"?ua(a,va):ua(a,wa)},"isSafeInt52");const va=Number.MIN_SAFE_INTEGER.toString(),sa=ra?BigInt(Number.MIN_SAFE_INTEGER):void 0,wa=Number.MAX_SAFE_INTEGER.toString(),ta=ra?BigInt(Number.MAX_SAFE_INTEGER):void 0;
function ua(a,b){if(a.length>b.length)return!1;if(a.length<b.length||a===b)return!0;for(var c=0;c<a.length;c++){const d=a[c],e=b[c];if(d>e)return!1;if(d<e)return!0}c=ja;la("Assertion fail:",`isInRange weird case. Value was: ${a}. Boundary was: ${b}.`||c)};var ya=function(a){ya[" "](a);return a};ya[" "]=function(){};function za(a){a=Error(a);a.__closure__error__context__984382||(a.__closure__error__context__984382={});a.__closure__error__context__984382.severity="warning";return a};var Aa=typeof Symbol==="function"&&typeof Symbol()==="symbol";function Ba(a,b,c=!1){return typeof Symbol==="function"&&typeof Symbol()==="symbol"?c&&Symbol.for&&a?Symbol.for(a):a!=null?Symbol(a):Symbol():b}var Ca=Ba("jas",void 0,!0),Fa=Ba("defaultInstance","0di"),Ga=Ba("m_m","R",!0),Ha=Ba("validPivotSelector","vps");const Ia={I:{value:0,configurable:!0,writable:!0,enumerable:!1}},Ja=Object.defineProperties,p=Aa?Ca:"I";var Ka;const La=[];r(La,55);Ka=Object.freeze(La);function Ma(a,b){Aa||p in a||Ja(a,Ia);a[p]|=b}function r(a,b){Aa||p in a||Ja(a,Ia);a[p]=b}function t(a){Ma(a,34);return a}function Na(a){Ma(a,32);return a}const Oa=Object.getOwnPropertyDescriptor(Array.prototype,"J");Object.defineProperties(Array.prototype,{J:{get(){const a=Pa(this);return Oa?Oa.get.call(this)+"|"+a:a},configurable:!0,enumerable:!1}});
function Pa(a){function b(e,f){e&c&&d.push(f)}const c=a[p]|0,d=[];b(1,"IS_REPEATED_FIELD");b(2,"IS_IMMUTABLE_ARRAY");b(4,"IS_API_FORMATTED");b(2048,"STRING_FORMATTED");b(4096,"GBIGINT_FORMATTED");b(4096,"BINARY");b(8,"ONLY_MUTABLE_VALUES");b(32,"MUTABLE_REFERENCES_ARE_OWNED");b(64,"CONSTRUCTED");b(128,"TRANSFERRED");b(256,"HAS_SPARSE_OBJECT");b(512,"HAS_MESSAGE_ID");b(1024,"FROZEN_ARRAY");b(8192,"DESERIALIZED_FROM_BINARY");b(16384,"HAS_WRAPPER");b(32768,"LEAKED_MUTABLE_SUBSTRUCTURES");a=c>>16&1023||
536870912;a!==536870912&&d.push(`pivot: ${a}`);return d.join(",")};const u=Aa&&Math.random()<.5,w=u?Symbol():void 0,Qa=typeof Ga==="symbol";var Ra={};function y(a){a=a[Ga];const b=a===Ra;if(Qa&&a&&!b)throw Error("multiple jspb runtimes detected");return b}function B(a,b){return b===void 0?a.g!==Sa&&!!(2&((u?a[w]:a.j)[p]|0)):!!(2&b)&&a.g!==Sa}const Sa={};function Ta(a){return a!==null&&typeof a==="object"&&!Array.isArray(a)&&a.constructor===Object}function Ua(){}
class Va{constructor(a,b,c){this.g=a;this.h=b;this.i=c}next(){const a=this.g.next();a.done||(a.value=this.h.call(this.i,a.value));return a}[Symbol.iterator](){return this}}function C(a){const b=a[p]|0;(b&8||b&16&&b&32)&&a.forEach(c=>{Array.isArray(c)||c&&y(c)});Wa(a)}function Wa(a){if(2048&(a[p]|0))for(let b=0;b<a.length;b++)typeof a[b]!=="string"&&ea(`Unexpected element of type ${typeof a[b]} in string formatted repeated 64-bit int field`)};function Xa(a){return a}Xa[Ha]={};function D(a){return Array.prototype.slice.call(a)};const Ya=Number.isFinite;function Za(a){if(typeof a!=="number")throw Error(`Value of float/double field must be a number, found ${typeof a}: ${a}`);return a}function $a(a){if(a==null||typeof a==="number")return a;if(a==="NaN"||a==="Infinity"||a==="-Infinity")return Number(a)}function ab(a){return`Expected int32 as finite number but got ${k(a)}: ${a}`}function bb(a){if(a==null)return a;if(typeof a==="string"&&a)a=+a;else if(typeof a!=="number")return;return Ya(a)?a|0:void 0}
function cb(a,b,c,d){if(a!=null&&typeof a==="object"&&y(a))return a;if(!Array.isArray(a))return c?d&2?((a=b[Fa])||(a=new b,t(u?a[w]:a.j),a=b[Fa]=a),b=a):b=new b:b=void 0,b;let e=c=a[p]|0;e===0&&(e|=d&32);e|=d&2;e!==c&&r(a,e);return new b(a)}function db(a,b,c){if(b){if(typeof a!=="string")throw Error(`Expected a string but got ${a} a ${k(a)}`);return a}let d;return(d=a==null||typeof a==="string"?a:void 0)!=null?d:c?"":void 0};const eb={};let fb=function(){try{return ya(new class extends Map{constructor(){super()}}),!1}catch(a){return!0}}();
class gb{constructor(){this.g=new Map}get(a){return this.g.get(a)}set(a,b){this.g.set(a,b);this.size=this.g.size;return this}delete(a){a=this.g.delete(a);this.size=this.g.size;return a}clear(){this.g.clear();this.size=this.g.size}has(a){return this.g.has(a)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(a,b){return this.g.forEach(a,b)}[Symbol.iterator](){return this.entries()}}
const hb=(()=>fb?(Object.setPrototypeOf(gb.prototype,Map.prototype),Object.defineProperties(gb.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),gb):class extends Map{constructor(){super()}})();function ib(a){return a}
var jb=function(a){if(a.u&2)throw Error("Cannot mutate an immutable Map");},E=class extends hb{constructor(a,b,c=ib,d=ib){super();let e=a[p]|0;e|=64;r(a,e);this.u=e;this.s=b;this.v=c;this.F=this.s?kb:d;for(let f=0;f<a.length;f++){const g=a[f],h=c(g[0],!1,!0);let l=g[1];b?l===void 0&&(l=null):l=d(g[1],!1,!0,void 0,void 0,e);super.set(h,l)}}M(){var a=lb;if(this.size!==0)return Array.from(super.entries(),a)}D(){return Array.from(super.entries())}clear(){jb(this);super.clear()}delete(a){jb(this);return super.delete(this.v(a,
!0,!1))}entries(){if(this.s){var a=super.keys();a=new Va(a,mb,this)}else a=super.entries();return a}values(){if(this.s){var a=super.keys();a=new Va(a,E.prototype.get,this)}else a=super.values();return a}forEach(a,b){this.s?super.forEach((c,d,e)=>{a.call(b,e.get(d),d,e)}):super.forEach(a,b)}set(a,b){jb(this);a=this.v(a,!0,!1);return a==null?this:b==null?(super.delete(a),this):super.set(a,this.F(b,!0,!0,this.s,!1,this.u))}has(a){return super.has(this.v(a,!1,!1))}get(a){a=this.v(a,!1,!1);const b=super.get(a);
if(b!==void 0){var c=this.s;return c?(c=this.F(b,!1,!0,c,this.G,this.u),c!==b&&super.set(a,c),c):b}}[Symbol.iterator](){return this.entries()}};E.prototype.toJSON=void 0;function kb(a,b,c,d,e,f){a=cb(a,d,c,f);e&&(a=nb(a));return a}function mb(a){return[a,this.get(a)]}let ob;function qb(){return ob||(ob=new E(t([]),void 0,void 0,void 0,eb))};function F(a,b,c,d,e){d=d?!!(b&32):void 0;const f=[];let g=a.length,h,l,m,v=!1;if(b&64){if(b&256?(g--,h=a[g],l=g):(l=4294967295,h=void 0),!(e||b&512)){v=!0;var q;m=((q=rb)!=null?q:Xa)(h?l- -1:b>>16&1023||536870912,-1,a,h);l=m+-1}}else l=4294967295,b&1||(h=g&&a[g-1],Ta(h)?(g--,l=g,m=0):h=void 0);q=void 0;for(let x=0;x<g;x++){let z=a[x];if(z!=null&&(z=c(z,d))!=null)if(x>=l){var A=void 0;((A=q)!=null?A:q={})[x- -1]=z}else f[x]=z}if(h)for(let x in h)if(a=h[x],a!=null&&(a=c(a,d))!=null)if(A=+x,A<m)f[A+
-1]=a;else{let z;((z=q)!=null?z:q={})[x]=a}q&&(v?f.push(q):f[l]=q);e&&r(f,b&67043905|(q!=null?290:34));return f}function lb(a){a[0]=sb(a[0]);a[1]=sb(a[1]);return a}function sb(a){switch(typeof a){case "number":return Number.isFinite(a)?a:""+a;case "bigint":return xa(a)?Number(a):""+a;case "boolean":return a?1:0;case "object":if(Array.isArray(a)){C(a);const b=a[p]|0;return a.length===0&&b&1?void 0:F(a,b,sb,!1,!1)}if(y(a))return G(a);if(a instanceof E)return a.M();return}return a}let rb;
function G(a){a=u?a[w]:a.j;return F(a,a[p]|0,sb,void 0,!1)};typeof Proxy!=="undefined"&&new Proxy({},{getPrototypeOf:H,setPrototypeOf:H,isExtensible:H,preventExtensions:H,getOwnPropertyDescriptor:H,defineProperty:H,has:H,get:H,set:H,deleteProperty:H,apply:H,construct:H});function H(){throw Error("this array or object is owned by JSPB and should not be reused, did you mean to copy it with copyJspbArray? See go/jspb-api-gotchas#construct_from_array");};function tb(){throw Error("Array passed to JSPB constructor already belongs to another JSPB proto instance");};function I(a,b){if(typeof a!=="object")return a;if(Array.isArray(a)){C(a);var c=a[p]|0;return a.length===0&&c&1?void 0:c&2?a:b&&(c===0||c&32&&!(c&64)&&c&16)?(Ma(a,34),c&4&&Object.freeze(a),a):F(a,c,I,b!==void 0,!0)}if(y(a))return ub(a);if(a instanceof E){c=a.u;if(c&2)return a;if(a.size){b=t(a.D());if(a.s)for(a=0;a<b.length;a++){const d=b[a];let e=d[1];if(e==null||typeof e!=="object")e=void 0;else if(y(e))e=ub(e);else if(Array.isArray(e)){const f=e[p]|0;c&32&&(f===0||f&32&&!(f&64)&&f&16)?Ma(e,34):
e=F(e,f,I,!0,!0)}else e=void 0;d[1]=e}return b}}}function ub(a){const b=u?a[w]:a.j,c=b[p]|0;return B(a,c)?a:F(b,c,I,!0,!0)}function nb(a){var b=u?a[w]:a.j;const c=b[p]|0;if(!B(a,c))return a;a=new a.constructor(F(b,c,I,!0,!0));b=u?a[w]:a.j;b[p]&=-3;return a}function vb(a){if(a.g!==Sa)return!1;var b=u?a[w]:a.j;b=F(b,b[p]|0,I,!0,!0);b[p]&=-3;u?a[w]=b:a.j=b;a.g=void 0;return!0}function wb(a){if(!vb(a)&&B(a,(u?a[w]:a.j)[p]|0))throw Error("Cannot mutate an immutable Message");};var J=function(a,b,c,d,e){if(c===-1)return null;d=c+(d?0:-1);const f=a.length-1;let g;if(d>=f&&(b!=null?b:a[p]|0)&256)b=a[f][c],g=!0;else if(d<=f)b=a[d];else return;if(e&&b!=null){e=e(b);if(e==null)return e;if(e!==b)return g?a[f][c]=e:a[d]=e,e}return b},L=function(a,b,c){wb(a);const d=u?a[w]:a.j;K(d,d[p]|0,b,c);return a};
function K(a,b,c,d){const e=c+-1;var f=a.length-1;let g;if(e>=f&&((g=b)!=null?g:b=a[p]|0)&256)return a[f][c]=d,b;if(e<=f)return a[e]=d,b;d!==void 0&&(f=b>>16&1023||536870912,c>=f?d!=null&&(a[f+-1]={[c]:d},b|=256,r(a,b)):a[e]=d);return b}function M(a){return!!(2&a)&&!!(4&a)||!!(1024&a)}
function xb(a,b,c,d,e,f){!d&&vb(a)&&(b=u?a[w]:a.j,c=b[p]|0);var g=J(b,c,e);a=!1;if(g==null){if(d)return qb();g=[]}else if(g.constructor===E)if(g.u&2&&!d)g=g.D();else return g;else Array.isArray(g)?a=!!((g[p]|0)&2):g=[];if(d){if(!g.length)return qb();a||(a=!0,t(g))}else if(a){a=!1;d=D(g);for(g=0;g<d.length;g++){const h=d[g]=D(d[g]);Array.isArray(h[1])&&(h[1]=t(h[1]))}g=d}a||((g[p]|0)&64?(a=g,a[p]&=-33):32&c&&Na(g));f=new E(g,f,db,void 0);K(b,c,e,f);return f}
function yb(a,b,c){const d=u?a[w]:a.j,e=d[p]|0;return xb(a,d,e,B(a,e),b,c)}function zb(a){var b=Ab;let c;const d=u?a[w]:a.j,e=d[p]|0;c=B(a,e);a=xb(a,d,e,c,2,b);!c&&b&&(a.G=!0);return a}var Bb=function(a,b,c){let d=u?a[w]:a.j;var e=d[p]|0,f=d;const g=J(f,e,c);b=cb(g,b,!1,e);b!==g&&b!=null&&K(f,e,c,b);f=b;if(f==null)return f;e=d[p]|0;B(a,e)||(b=nb(f),b!==f&&(vb(a)&&(d=u?a[w]:a.j,e=d[p]|0),f=b,K(d,e,c,f)));return f},Cb=function(a,b,c){c==null&&(c=void 0);L(a,b,c)};
function N(a,b){2&a&&(a|=16);a=(2&b?a|2:a&-3)|32;return a&=-1025}function O(a,b){32&b||(a&=-33);return a}
function Db(a,b,c,d){wb(a);var e=u?a[w]:a.j,f=e;e=e[p]|0;const g=B(a,e)?1:2;g===2&&vb(a)&&(f=u?a[w]:a.j,e=f[p]|0);a=J(f,e,b);a=Array.isArray(a)?a:Ka;var h=a[p]|0;const l=!!(4&h);if(!l){var m=h;m===0&&(m=N(m,e),m|=16);h=a;m|=1;var v=e;const q=!!(2&m);q&&(v|=2);let A=!q,x=!0,z=0,Da=0;for(;z<h.length;z++){const Ea=cb(h[z],c,!1,v);if(Ea instanceof c){if(!q){const pb=B(Ea);A&&(A=!pb);x&&(x=pb)}h[Da++]=Ea}}Da<z&&(h.length=Da);m|=4;m=x?m|16:m&-17;m=A?m|8:m&-9;r(h,m);q&&Object.freeze(h);h=m}g===1||g===4&&
32&h?M(h)||(b=h,f=!!(32&h),h|=!a.length||16&h&&(!l||f)?2:1024,h!==b&&r(a,h),Object.freeze(a)):(g===2&&M(h)&&(a=D(a),h=N(h,e),h=O(h,e),r(a,h),e=K(f,e,b,a)),M(h)||(b=h,h=O(h,e),h!==b&&r(a,h)));b=a;d=d!=null?d:new c;b.push(d);f=c=b[p]|0;B(d)?(c&=-9,b.length===1&&(c|=16)):c&=-17;c!==f&&r(b,c)}
var Eb=function(a,b){a=J(u?a[w]:a.j,void 0,b);a=a==null||typeof a==="boolean"?a:typeof a==="number"?!!a:void 0;return a!=null?a:!1},P=function(a,b){let c;return(c=bb(J(u?a[w]:a.j,void 0,b)))!=null?c:0},Fb=function(a){a=J(u?a[w]:a.j,void 0,1,void 0,$a);return a!=null?a:0},Gb=function(a,b){a=J(u?a[w]:a.j,void 0,b);a=a==null?a:Ya(a)?a|0:void 0;return a!=null?a:0},Q=function(a,b,c){if(c!=null&&typeof c!=="boolean")throw Error(`Expected boolean but got ${k(c)}: ${c}`);return L(a,b,c)},R=function(a,b,c){if(c!=
null){if(typeof c!=="number")throw za(ab(c));if(!Ya(c))throw za(ab(c));c|=0}return L(a,b,c)},S=function(a,b,c){return L(a,b,c==null?c:Za(c))},T=function(a,b,c){if(c!=null&&typeof c!=="string")throw Error(`Expected a string or null or undefined but got ${c} a ${k(c)}`);return L(a,b,c)},Hb=function(a,b,c){{wb(a);const h=u?a[w]:a.j;let l=h[p]|0;if(c==null)K(h,l,b);else{var d=c[p]|0,e=d,f=M(d),g=f||Object.isFrozen(c);f||(d=0);g||(c=D(c),e=0,d=N(d,l),d=O(d,l),g=!1);d|=21;for(f=0;f<c.length;f++){const m=
c[f],v=Za(m);Object.is(m,v)||(g&&(c=D(c),e=0,d=N(d,l),d=O(d,l),g=!1),c[f]=v)}d!==e&&(g&&(c=D(c),d=N(d,l),d=O(d,l)),r(c,d));C(c);K(h,l,b,c)}}return a};var U=class{constructor(a){this.preventPassingToStructuredClone=Ua;a:{if(a!=null)for(var b=0;b<a.length;b++){var c=a[b];Array.isArray(c)&&C(c)}if(a==null)c=96,a=[];else{if(!Array.isArray(a))throw Error(`data passed to JSPB constructors must be an Array, got '${JSON.stringify(a)}' a ${k(a)}`);c=a[p]|0;if(1&c)throw Error("Array passed to JSPB constructor is a repeated field array that belongs to another proto instance.");8192&c||!(64&c)||2&c||tb();if(Object.isFrozen(a)||!Object.isExtensible(a)||Object.isSealed(a))throw Error("data passed to JSPB constructors must be mutable");
if(c&1024)throw Error("farr");if(c&64){c&16384||r(a,c|16384);var d=a;break a}b=a;c|=64;var e=b.length;if(e){var f=e-1;e=b[f];if(Ta(e)){c|=256;const g=c&512?0:-1;f-=g;if(f>=1024)throw Error(`Found a message with a sparse object at fieldNumber ${f} is >= the limit ${1024}`);for(d in e){const h=+d;h<f&&(b[h+g]=e[d],delete e[d])}c=c&-67043329|(f&1023)<<16}}}r(a,c|16384);d=a}u?this[w]=d:this.j=d}toJSON(){return G(this)}clone(){var a=this,b=u?a[w]:a.j;a=new a.constructor(F(b,b[p]|0,I,!0,!0));b=u?a[w]:a.j;
b[p]&=-3;return a}};U.prototype[Ga]=Ra;U.prototype.toString=function(){return(u?this[w]:this.j).toString()};function Ib(a){if(a instanceof U)return a.constructor.g};(function(){const a=aa.jspbGetTypeName;aa.jspbGetTypeName=a?b=>a(b)||Ib(b):Ib})();/[?&]tc=([01])/.exec(location.search||"")||(navigator.userAgent||"").indexOf("Android")>=0||window.matchMedia&&window.matchMedia("(pointer)").matches&&window.matchMedia("(pointer:coarse)");var Jb=new class{constructor(a){this.g=a}}("A");var Kb=class extends U{};Kb.g="scholar.reader.PdfDestination";var Lb=class extends U{getDestination(){return Bb(this,Kb,8)}};Lb.g="scholar.reader.Annotation";var Mb=class extends U{};Mb.g="scholar.reader.FontInfo";var Nb=class extends U{};Nb.g="scholar.reader.FontMap";var Ob=class extends U{};Ob.g="scholar.reader.NamedDestinationMap";var Pb=class extends U{};Pb.g="scholar.reader.TextContentItem";var Ab=class extends U{};Ab.g="scholar.reader.TextStyle";var Qb=class extends U{};Qb.g="scholar.reader.TextContent";var Rb=class extends U{};Rb.g="scholar.reader.Viewport";var Sb=class extends U{getViewport(){return Bb(this,Rb,1)}};Sb.g="scholar.reader.LoadResult";var Ub=function(a){var b=new Tb;return R(b,1,a)},Vb=function(a,b){return R(a,2,b)},Tb=class extends U{};Tb.g="scholar.reader.PageSize";var Xb=function(a){var b=new Wb;return T(b,1,a)},Yb=function(a,b){return T(a,2,b)},Zb=function(a,b){return T(a,3,b)},$b=function(a,b){return T(a,4,b)},ac=function(a,b){return T(a,5,b)},bc=function(a,b){return T(a,6,b)},cc=function(a,b){return T(a,7,b)},dc=function(a,b){return T(a,8,b)},ec=function(a,b){return T(a,9,b)},fc=function(a,b){return T(a,10,b)},gc=function(a,b){return T(a,11,b)},hc=function(a,b){return R(a,12,b)},ic=function(a,b){Db(a,13,Tb,b)},jc=function(a,b){return Q(a,14,b)},kc=function(a,
b){return Q(a,15,b)},lc=function(a,b){return Q(a,16,b)},Wb=class extends U{};Wb.g="scholar.reader.PdfMetadata";var mc=class extends U{};mc.g="scholar.reader.RenderParams";var nc=96/72;function oc(){let a,b;return{promise:new Promise((c,d)=>{a=c;b=d}),resolve:a,reject:b}}function pc(a){return a?a.toLowerCase().endsWith(".pdf")?a:a+".pdf":""}function qc(a){a=a.split(/[#?]/)[0].split("/");let b=a=a[a.length-1];try{b=decodeURIComponent(a)}catch(c){}return(a=b)?pc(a):"document.pdf"};var rc=class{constructor(){this.i=this.annotations=this.text=this.h=this.l=this.m=this.viewport=this.g=null}transfer(){const a=[];var b=new Sb;if(this.viewport){var c=this.viewport;var d=new Rb;d=Hb(d,1,c.viewBox);d=S(d,2,c.rotation);d=S(d,3,c.offsetX);d=S(d,4,c.offsetY);d=S(d,5,c.width);d=S(d,6,c.height);d=S(d,7,c.scale);c=Hb(d,8,c.transform);Cb(b,1,c)}this.m&&R(b,6,this.m);this.l&&Cb(b,2,this.l);this.text&&Cb(b,3,this.text);if(this.annotations){{c=this.annotations;wb(b);const v=u?b[w]:b.j;let q=
v[p]|0;if(c==null)K(v,q,4);else{var e=d=c[p]|0,f=M(d),g=f||Object.isFrozen(c),h=!0,l=!0;for(let A=0;A<c.length;A++){var m=c[A];f||(m=B(m),h&&(h=!m),l&&(l=m))}f||(d=h?13:5,d=l?d|16:d&-17);g&&d===e||(c=D(c),e=0,d=N(d,q),d=O(d,q));d!==e&&r(c,d);C(c);K(v,q,4,c)}}}this.i&&Cb(b,5,this.i);b={p:JSON.stringify(G(b))};if(c=this.h&&this.h.transferToImageBitmap())b.c=c,a.push(c);return{L:b,N:a}}},sc=class{constructor(a){this.promise=a;this.g=!1}cancel(){this.g=!0}};var tc=class extends U{},uc=function(a){return b=>{if(b==null||b=="")b=new a;else{b=JSON.parse(b);if(!Array.isArray(b))throw Error("Expected to deserialize an Array but got "+k(b)+": "+b);b=new a(Na(b))}return b}}(tc);tc.g="scholar.reader.LoadRequest";function vc(){this.g=[];this.h=[]}var wc=function(a){a.g.length===0&&(a.g=a.h,a.g.reverse(),a.h=[]);return a.g.pop()},xc=function(a){return a.g.length===0&&a.h.length===0};vc.prototype.clear=function(){this.g=[];this.h=[]};function V(a){return typeof a==="string"?a:""}function yc(a){return(a=pdfjsLib.PDFDateString.toDateObject(a))?`${a.toLocaleDateString()}, ${a.toLocaleTimeString()}`:""}function zc(a,b,c){const d=a.getViewport({scale:b}).rotation;return a.getViewport({scale:b,rotation:(c+d)%360})}
function Ac(a){var b=new Kb,c=a[0];if(!c)return null;if(typeof c==="object"){c=c.num;if(typeof c!=="number")return null;R(b,1,c)}else if(typeof c==="number"&&Number.isInteger(c)&&c>=0)R(b,2,c);else return null;if(!a[1]||typeof a[1]!=="object")return null;c=a[1].name;if(typeof c!=="string")return null;T(b,3,c);let d,e;switch(c){case "XYZ":[,,d,a,c]=a;if(d!==null&&typeof d!=="number"||a!==null&&typeof a!=="number"||c!==null&&typeof c!=="number")return null;d!==null&&S(b,4,d);a!==null&&S(b,5,a);c!==
null&&S(b,8,c);return b;case "FitV":case "FitBV":return d=a[2],d===null?b:typeof d==="number"?S(b,4,d):null;case "FitH":case "FitBH":return a=a[2],a===null?b:typeof a==="number"?S(b,5,a):null;case "FitR":return[,,d,e,c,a]=a,typeof d!=="number"||typeof e!=="number"||typeof c!=="number"||typeof a!=="number"?b=null:(b=S(b,4,d),b=S(b,7,e),b=S(b,6,c),b=S(b,5,a)),b;default:return b}}
class Bc{constructor(a,b,c,d,e){this.type=a;this.o=b;this.h=c;this.m=!1;this.i=this.l=null;this.resolve=d;this.reject=e;this.g=new rc}cancel(){this.m=!0;this.l&&this.l.cancel()}}class Cc extends sc{constructor(a,b){super(a);this.h=b}cancel(){this.g=!0;this.h.cancel()}}
var Dc=function(a){return a.B.then(b=>b.promise)},W=function(a){a.o||(a.o=setTimeout(()=>{a.o=0;Ec(a)}))},X=function(a){a.g.resolve(a.g.g);a.g=null;a.h=null;W(a)},Y=function(a,b){a.g.reject(b);a.g=null;a.h=null;W(a)},Fc=function(a,b){return Dc(a).then(c=>c.getPage(b.o)).then(c=>{b.g.g=c;b.g.viewport=zc(c,nc*(Fb(b.h)||1),P(b.h,3)||0);b.g.m=b.g.g.ref.num})},Gc=function(a){const b=a.g.g.getTextContent().then(c=>{const d=a.g.text=new Qb;for(var e of c.items){var f=new Pb;f=T(f,1,e.str);f=Hb(f,2,e.transform);
f=S(f,3,e.width);f=S(f,4,e.height);f=T(f,5,e.dir);f=T(f,6,e.fontName);f=Q(f,7,e.hasEOL);Db(d,1,Pb,f)}for(const g in c.styles)e=c.styles[g],f=new Ab,f=S(f,1,e.ascent),f=S(f,2,e.descent),f=Q(f,3,e.vertical),f=T(f,4,e.fontFamily),e=g,yb(d,2,Ab).set(e,f)});return Eb(a.h,4)?b.then(()=>a.g.g.getOperatorList({intent:"getFonts"})).then(()=>{a.g.l=new Nb;const c=a.g.g.commonObjs;for(const f of zb(a.g.text).keys())if(c.has(f)){var d=c.get(f);var e=new Mb;e=T(e,1,d.name);e=Q(e,2,d.isBolded);d=f;yb(a.g.l,1,Mb).set(d,
e)}}):b},Hc=function(a){return a.g.g.getAnnotations().then(b=>{const c=a.g.annotations=[];if(b)for(const d of b){b=new Lb;b=T(b,1,d.subtype);b=Hb(b,2,d.rect);b=T(b,3,d.url);b=Q(b,4,d.newWindow);b=T(b,5,d.action);b=T(b,6,d.id);if(typeof d.dest==="string")T(b,7,d.dest);else if(d.dest instanceof Array){const e=Ac(d.dest);if(!e)continue;Cb(b,8,e)}c.push(b)}})},Ic=function(a,b){return Dc(a).then(c=>c.getDestinations()).then(c=>{const d=b.g.i=new Ob;for(const f in c){var e=c[f];e instanceof Array&&(e=Ac(e))&&
yb(d,1,Kb).set(f,e)}})},Jc=function(a,b){const c=b.g.g;var d=P(b.h,2)?P(b.h,2)/Math.max(c.view[2],c.view[3])/window.devicePixelRatio/nc:Fb(b.h)||1;const e=P(b.h,3)||0;d=zc(c,nc*d*window.devicePixelRatio,e);d={canvasContext:(b.g.h=new OffscreenCanvas(d.width,d.height)).getContext("2d",{alpha:!1}),viewport:d};b.l=c.render(d);let f=0;b.l.onContinue=g=>{f++;b.i=g;W(a)};return b.l.promise.then(()=>b.i=null).catch(g=>{if(!(g instanceof pdfjsLib.RenderingCancelledException))throw g;})},Ec=function(a){if(!a.g||
a.h!=1)if(!xc(a.m))a.g&&(a.i=a.g),a.g=wc(a.m),a.h=1;else if(!a.g)if(a.i)a.g=a.i,a.h=2,a.i=null;else{if(xc(a.l))return;a.g=wc(a.l);a.h=2}const b=a.g;if(b.m)X(a);else{switch(b.type){case 6:if(!b.g.g){Fc(a,b).then(()=>X(a)).catch(c=>Y(a,c));return}break;case 1:if(!b.g.g){Fc(a,b).then(()=>W(a)).catch(c=>Y(a,c));return}if(!b.g.text){Gc(b).then(()=>X(a)).catch(c=>Y(a,c));return}break;case 2:if(!b.g.g){Fc(a,b).then(()=>W(a)).catch(c=>Y(a,c));return}if(!b.g.annotations){Hc(b).then(()=>X(a)).catch(c=>Y(a,
c));return}break;case 3:if(!b.g.i){Ic(a,b).then(()=>X(a)).catch(c=>Y(a,c));return}break;case 4:if(!b.g.g){Fc(a,b).then(()=>W(a)).catch(c=>Y(a,c));return}if(!b.g.h){Jc(a,b).then(()=>X(a)).catch(c=>Y(a,c));return}if(b.i){b.i();return}break;case 5:if(!b.g.g){Fc(a,b).then(()=>W(a)).catch(c=>Y(a,c));return}if(!b.g.h){Jc(a,b).then(()=>W(a)).catch(c=>Y(a,c));return}if(b.i){b.i();return}if(!b.g.text){Gc(b).then(()=>W(a)).catch(c=>Y(a,c));return}if(!b.g.annotations){Hc(b).then(()=>X(a)).catch(c=>Y(a,c));return}}console.error("Unknown task type/state:",
a.g);Y(a,"Unknown task type/state");W(a)}},Kc=function(a,b){const c=!(a.g||a.i||!xc(a.m)||!xc(a.l)),d=Gb(b,3)===1?a.m:a.l,{promise:e,resolve:f,reject:g}=oc();b=new Bc(Gb(b,2),P(b,4),Bb(b,mc,5)||new mc,f,g);d.h.push(b);c&&W(a);return new Cc(e,b)};class Lc{constructor(a){this.B=a;this.m=new vc;this.l=new vc;this.i=this.h=this.g=null;this.o=0}}
var Mc=async function(a,b){if(!a.i&&b&&typeof b==="string"){a.i=b;try{const {H:c,A:d}=await a.B(a.i);a.o(c);c.onPassword=(f,g)=>{a.m=f;Z(5,g)};c.onProgress=f=>{Z(2,f)};Z(1,d);const e=await c.promise;Z(3,e.numPages)}catch(c){Z(4)}}},Nc=function(a,b){if(b&&typeof b==="string"){b=uc(b);var c=P(b,1),d=Kc(a.K,b);a.l.set(c,d);d.promise.then(e=>{if(!d.g){a.l.delete(c);var {L:f,N:g}=e.transfer();Z(6,{id:c,result:f},g)}})}},Oc=async function(a,b){typeof b==="number"&&(a=await a.getMetadata(),Z(7,{id:b,metadata:JSON.stringify(G(a))}))},
Pc=async function(a,b){typeof b==="number"&&(a=await (await (await a.g).promise).getData(),Z(8,{id:b,buffer:a.buffer},[a.buffer]))},Qc=async function(a,b){if(typeof b==="string"&&(a=await (await (await a.g).promise).getData(),window.origin==="null")){var c=URL.createObjectURL(new Blob([a.buffer],{type:"application/pdf"})),d=document.createElement(Jb.g);d.href=c;d.download=b;document.body.appendChild(d);d.click();setTimeout(()=>{d.remove();URL.revokeObjectURL(c)},250)}},Rc=async function(a,b){if(typeof b===
"object"){var c=b.id;if(typeof c==="number"&&(b=b.destId,typeof b==="string"))if(a=await (await a.g).promise,b=await a.getDestination(b)){var d=Ac(b);if(d){if(typeof b[0]==="object"){let e;try{e=await a.getPageIndex(b[0])}catch(f){Z(9,{id:c});return}L(d,1);R(d,2,e)}Z(9,{id:c,destination:JSON.stringify(G(d))})}else Z(9,{id:c})}else Z(9,{id:c})}},Tc=async function(a,b){typeof b==="number"&&Z(10,{id:b,hasVisibleForm:await Sc(a)})},Z=function(a,b,c){window.parent.postMessage({type:a,val:b},"*",c)},Uc=
function(a){if(window.origin!=="null"&&window.origin!==window.parent.origin)throw Error("PDF loader cannot run within a cross-origin iframe unless it is in a sandboxed origin");window.addEventListener("message",b=>{if(b.source===window.parent&&b.data&&typeof b.data==="object"&&"type"in b.data){var c=b.data.val;switch(b.data.type){case 4:Mc(a,c);break;case 5:a.m&&typeof c==="string"&&a.m(c);break;case 0:Nc(a,c);break;case 1:typeof c==="number"&&(b=a.l.get(c))&&(b.cancel(),a.l.delete(c));break;case 2:Oc(a,
c);break;case 3:Pc(a,c);break;case 6:Qc(a,c);break;case 7:Rc(a,c);break;case 8:Tc(a,c)}}});Z(0)},Sc=async function(a){var b=await (await a.g).promise;if(Eb(await a.getMetadata(),16))return!0;a=await b.getFieldObjects();if(!a)return!1;for(const c in a)if((b=a[c])&&b.find(d=>{const e=d.rect;d=d.type;if(!e||!Array.isArray(e)||e.length!==4||!e.every(m=>typeof m==="number"&&m>0)||d==="button")return!1;const [f,g,h,l]=e;return f!==h&&g!==l}))return!0;return!1},Vc=class{constructor(a){this.B=a;this.i="";
this.o=null;this.g=new Promise(b=>{this.o=b});this.m=null;this.K=new Lc(this.g);this.l=new Map;this.h=null}async getMetadata(){if(this.h)return this.h;var a=qc(this.i),b=Xb(a),c=null;try{c=await (await this.g).promise}catch(l){return b}const d=c.numPages;let e;var f;let g;try{const l=c.getMetadata(),m=[];for(let v=1;v<=Math.min(d,20);++v)m.push(c.getPage(v).then(q=>{q=q.getViewport({scale:1});return{width:q.width,height:q.height}}).catch(()=>({width:0,height:0})));[{info:e,contentDispositionFilename:f,
contentLength:h},...g]=await Promise.all([l,...m])}catch(l){return b}if(!(ba(e)&&g instanceof Array))return b;a=(f=pc(f))||a;var h=Number.isInteger(h)?Math.max(h,0)/1024/1024:0;b=yc(e.CreationDate);c=yc(e.ModDate);f=!!e.IsLinearized;this.h=lc(kc(jc(hc(gc(fc(ec(dc(cc(bc(ac($b(Zb(Yb(Xb(a),`${h.toFixed(2)} MB`),V(e.Title)),V(e.Author)),V(e.Subject)),V(e.Keywords)),V(b)),V(c)),V(e.Creator)),V(e.Producer)),V(e.PDFFormatVersion)),d),f),!!e.IsAcroFormPresent),!!e.IsXFAPresent);for(const {width:l,height:m}of g)ic(this.h,
Vb(Ub(l),m));return this.h}};async function Wc(a){var b=a.getReader(),c=0;for(a=[];;){const {done:d,value:e}=await b.read();if(d||!e)break;c+=e.length;a.push(e)}b=new Uint8Array(new ArrayBuffer(c));c=0;for(const d of a)b.set(d,c),c+=d.length;return b}
function Xc(){return new Promise((a,b)=>{window.addEventListener("message",c=>{if(c.source===window.parent&&c.origin.startsWith("chrome-extension://")&&c.data&&typeof c.data==="object"&&c.data.type==="pdf"){var d=c.data.body;d instanceof ReadableStream&&!c.data.error?Wc(d).then(e=>{a(new pdfjsLib.PDFDataRangeTransport(e.length,e,!0,""))}):b(Error("Failed to fetch the PDF headers."))}});window.parent.postMessage({type:"fetch"},"*")})}
var $c=async function(a){return new Promise((b,c)=>{window.addEventListener("message",async d=>{if(d.data&&typeof d.data==="object"){var e=d.data.body;if(d.source===window.parent.parent&&d.origin===(new URL(a)).origin&&d.data.type==="pdf")if(e instanceof ReadableStream&&!d.data.error){var f=Number(d.data.length)||0,g=d.data.encoding;d=d.data.filename;d=typeof d==="string"?d:"";if(f<=0||g!=="")f=await Wc(e),b(new Yc(a,f.length,f,d));else{e=e.getReader();var {done:h,value:l}=await e.read();f=new Yc(a,
Math.max(f,l.length),l,d,!0);h||Zc(f,e);b(f)}}else c(Error("Failed to fetch the PDF headers."))}});window.parent.parent.postMessage({type:"fetch",url:a},a)})},Zc=async function(a,b){b.read().then(({done:c,value:d})=>{if(c)a.onDataProgressiveDone();else if(d){a.g+=d.length;a.onDataProgressiveRead(d);if(a.g<=a.i)a.onDataProgress(a.g,a.i);else a.onDataProgress(a.g);Zc(a,b)}})},ad=async function(a,b,c){c=await Wc(c);a.onDataProgress(c.length);a.onDataRange(b,c)};
class Yc extends pdfjsLib.PDFDataRangeTransport{constructor(a,b,c,d,e=!1){super(b,c,b===c.length,d);this.h=a;this.g=c.length;this.i=b;this.A=e;window.addEventListener("message",f=>{if(f.data&&typeof f.data==="object"){var g=f.data.body,h=Number(f.data.begin);f.source===window.parent.parent&&f.origin===(new URL(a)).origin&&f.data.type==="pdfrange"&&g instanceof ReadableStream&&h>=0&&ad(this,h,g)}})}requestDataRange(a,b){window.parent.parent.postMessage({type:"fetchrange",url:this.h,begin:a,end:b},
this.h)}}(async()=>{const a=await (await fetch("/pdf.worker.min.js")).blob();pdfjsLib.GlobalWorkerOptions.workerSrc=(0,URL.createObjectURL)(a);Uc(new Vc(async b=>{let c,d;(new URL(b)).protocol==="file:"?(c=await Xc(),d=!1):(c=await $c(b),d=c.A);return{H:pdfjsLib.getDocument({url:b,cMapUrl:"/bcmaps/",cMapPacked:!0,range:c}),A:d}}))})();}).call(this);
